<HTML>
<HEAD>
   <META NAME="Author" CONTENT="Rod Spears">
   <TITLE>Building On Unix</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"
      LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">
<A HREF="http://www.mozilla.org/newlayout/unixbuild.html">http://www.mozilla.org/newlayout/unixbuild.html</A>
<H1>Building On UNIX</H1>

<B>Last updated 10/07/98 by Kevin McCluskey</B>
<H2><B>Table of Contents</B></H2>


<UL>
<LI>
<B><A HREF="#Linux">Linux</A></B>

<LI>
<B><A HREF="#IRIX">IRIX</A></B>

<LI>
<B><A HREF="#Solaris">Solaris</A></B>
</UL>

<P><BR>
<HR WIDTH="100%">
<H2><A NAME="Linux"></A><B>Linux</B></H2>


<H2><FONT SIZE=+0>Requirements</FONT></H2>


<H2><FONT SIZE=+0>RedHat 5.0 or RedHat 5.1 / Motif1.2</FONT></H2>

<FONT SIZE=+0>Display which supports 24, 16, or 8bit visuals.</FONT>

<P><B><FONT SIZE=+0>RedHat 5.1 / Motif1.2</FONT></B>
<H3><I><FONT SIZE=+0>If you are using RedHat 5.1 you will need to change the
references to <FONT COLOR="#990000">Linux2.0.31_x86_DBG.OBJ</FONT> to be
<FONT COLOR="#990000">Linux2.0.32_x86_DBG.OBJ
</FONT>In
addition if you do not have a executable called perl you will need to create
a link to perl5... named perl. You can do that by doing the following:</FONT></I></H3>

<B><FONT SIZE=+0>ls -l /usr/bin/perl*&nbsp;&nbsp;&nbsp;&nbsp; &lt;This
gives you the full name for <FONT COLOR="#000099">perl5...</FONT>></FONT></B>
<BR><B><FONT SIZE=+0>su root</FONT></B>
<BR><B><FONT SIZE=+0>ln /usr/bin/<FONT COLOR="#000099">&lt;perl5...></FONT>
/usr/bin/perl</FONT></B>
<BR><B><FONT SIZE=+0>exit</FONT></B>
<H3><B>Step #1 - Define the Environment Variables</B></H3>

<B>Here is a sample <TT>.bash_profile</TT>:</B>

<P><B><TT><FONT COLOR="#000099"># .bash_profile</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099"># Get the aliases and functions</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">if [ -f ~/.bashrc ]; then</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">
. ~/.bashrc</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">fi</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099"># User specific environment and startup
programs</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099">PATH=$PATH:$HOME/bin</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">ENV=$HOME/.bashrc</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099">CVSROOT=:pserver:</FONT><I><FONT COLOR="#009900">anonymous
</FONT></I><FONT COLOR="#000099">@cvs-mirror.mozilla.org:/cvsroot</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099">LD_LIBRARY_PATH=/home/</FONT><I><FONT COLOR="#009900">&lt;user
id here></FONT></I><FONT COLOR="#000099">/mozilla/dist/</FONT><FONT COLOR="#993366">Linux2.0.31_x86_DBG.OBJ</FONT><FONT COLOR="#000099">/bin:/lib:/usr/lib</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099">NGLAYOUT_PLUGINS=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">CM_BLDTYPE=dbg</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">AWT_11=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">MODULAR_NETLIB=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">NO_SECURITY=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">MOZ_SRC=/home/</FONT><I><FONT COLOR="#009900">&lt;user
id here></FONT></I></TT></B>
<BR><B><TT><FONT COLOR="#000099">MOZ_OUT=/home/</FONT><I><FONT COLOR="#009900">&lt;user
id here></FONT></I></TT></B>
<BR><B><TT><FONT COLOR="#000099">MOZ_BITS=32</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">MOZ_GOLD=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">NSPR20=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">OS_TARGET=Linux</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">STANDALONE_IMAGE_LIB=1</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">include=/usr/X11R6/include</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">lib=/usr/X11R6/lib</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">DEPTH=../../..</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">MOZILLA_CLIENT=1</FONT></TT></B>

<P><B><TT><FONT COLOR="#000099">export LD_LIBRARY_PATH MOZILLA_CLIENT MODULAR_NETLIB
NO_SECURITY USERNAME ENV PATH CVSROOT CM_BLDTYPE MOZ_SRC MOZ_OUT MOZ_BITS
MOZ_GOLD NSPR20 OS_TARGET STANDALONE_IMAGE_LIB include lib DEPTH</FONT></TT></B>

<P><B>NOTE:</B>
<BR><B>The green <I><TT><FONT COLOR="#009900">&lt;user id here></FONT></TT></I>
is where you put in your own User Id or the directory where you will be
doing you development.</B>
<BR><B>The dark red <FONT COLOR="#000000">"</FONT><TT><FONT COLOR="#993366">Linux2.0.31_x86_DBG.OBJ</FONT></TT><FONT COLOR="#000000">"
may not be the same on your Linux machine depending the version of Linux
you are running.</FONT></B>
<BR>
<H3><B>Step #2 - Check out the source code</B></H3>

<B>First, change directories to where you will be doing your development
and then pull the source:</B>

<P><B><TT><FONT COLOR="#000099">$ cd $MOZ_SRC</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">$ cvs co mozilla/config</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">$ cvs co mozilla/nglayout.mk</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">$ cd mozilla</FONT></TT></B>
<BR><B><TT><FONT COLOR="#000099">$ make -f nglayout.mk pull_all</FONT></TT></B>
<BR>
<H3><B>Step #3 - Build the Source</B></H3>

<B><TT><FONT COLOR="#000099">$ make -f nglayout.mk</FONT></TT></B>
<BR>

<P>
<HR WIDTH="100%">
<H2><A NAME="IRIX"></A><B>IRIX</B></H2>

It will build under IRIX but it will not run. There is a code generation
problem with the IRIX compiler related to multiple inheritance that causes
the viewer to crash. Although we haven't tested it, you should be able
to build and run if you use the egcs compiler instead of the standard IRIX
compiler. <A HREF="http://egcs.cygnus.com/">http://egcs.cygnus.com/</A>

<P>
<HR WIDTH="100%">
<H2><A NAME="Solaris"></A><B>Solaris</B></H2>

We have not built under Solaris yet. If you would like to try your hand
at porting to Solaris, pull the source and try building it using the instructions
above.
<BR>
</BODY>
</HTML>
