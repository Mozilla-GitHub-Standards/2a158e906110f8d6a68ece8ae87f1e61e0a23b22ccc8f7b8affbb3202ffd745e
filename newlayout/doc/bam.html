
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

<TITLE>New Layout: BAM Roadmap</TITLE>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<HR WIDTH="100%">
<h2>
<a href="/newlayout">New Layout</a>: BAM Roadmap</h2>
<BR>Author: <A HREF="mailto:jevering">James
Everingham</A>
<BR>Updated: April 28, 1998<br><Br>
<i>eds. note: BAM stands for "Born Again Modularization," not the Flintstones character.</i>
<HR WIDTH="100%">
<BR>
<TABLE BORDER=0 WIDTH="100%" BGCOLOR="#FFFFCC">
<TR>
<TD><B>Overview</B></TD>
</TR>
</TABLE>

<P>The goal of the BAM modularization
effort is to separate key modules for shared use by both NGLayout and the
5.0 code base. The BAM effort is driven by the need to integrate
the new NGLayout engine while achieving a more maintainable and modular
architecture. This will be achieved by targeting strategic
areas: the network support library (netlib), the layout engine
(layout), and the image library (imglib). The netlib effort
will involve breaking the current implementation into several different
DLLs and libraries, each of which will expose one or more XPCOM components.
The layout effort involves defining a set of layout specific XPCOM apis
(webwidget), and integration of the NGLayout engine into the current 5.0
source code base. Imglib separation includes defining an imglib
XPCOM interface and re-integration back into the 5.0 source code base.
<BR>
<TABLE BORDER=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<TR>
<TD><B>Major Components</B></TD>
</TR>
</TABLE>

<P><B>Netlib</B>
<BLOCKQUOTE><B>Netlib Engine DLL</B>
<P>This DLL will contain the core networking
functionality including the networking utilities required by all consumers
of Netlib. New code such as NGLayout will program directly to the
new XPCOM APIs exposed by the engine.
<P><B>Netlib Client static library</B>
<P>This library will contain the legacy
code needed by the Mozilla client to utilize Netlib. Ultimately,
this code should decrease as more and more of the client is reworked to
utilize the new XPCOM APIs...
<P><B>Streams DLL</B>
<P>This DLL will contain the various
stream implementations used by Netlib...
<P><B>Netlib Protocol DLLs</B>
<P>The protocols supported by Netlib
will be broken out into separate dynamically loaded DLLs. This will
allow new protocols to be dynamically added.
<BR></BLOCKQUOTE>

<TABLE BORDER=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<TR>
<TD><B>Implementation</B></TD>
</TR>
</TABLE>

<P>During the BAM process, the two code
bases will be in the following states:
<BR>
<CENTER><TABLE BORDER COLS=2 WIDTH="49%" BGCOLOR="#CCFFFF" >
<TR BGCOLOR="#C0C0C0">
<TD><B>5.0 Source Base</B></TD>

<TD><B>NGLayout Source Base</B></TD>
</TR>

<TR>
<TD>integrated imagelib
<BR>integrated netlib
<BR>integrated layout</TD>

<TD>modular layout integrated into standalone
test suite
<BR>modular netlib
<BR>modular imglib</TD>
</TR>

<TR>
<TD>modular imagelib
<BR>integrated netlib
<BR>integrated layout</TD>

<TD>modular layout integrated into standalone
test suite
<BR>modular netlib
<BR>modular imglib</TD>
</TR>

<TR>
<TD>modular imagelib
<BR>modular netlib
<BR>integrated layout</TD>

<TD>modular layout integrated into standalone
test suite and 5.0 source base
<BR>modular netlib
<BR>modular imglib</TD>
</TR>

<TR>
<TD>modular imagelib
<BR>modular netlib
<BR>modular layout</TD>

<TD>modular imagelib
<BR>modular netlib
<BR>modular layout</TD>
</TR>
</TABLE></CENTER>

<P>Below is the proposed directory structure
of the Netlib code.
<BR>
<TABLE BORDER=0 COLS=2 WIDTH="100%" >
<TR>
<TD><B>Directory</B></TD>

<TD><B>Description</B></TD>
</TR>

<TR>
<TD>mozilla/network</TD>

<TD>The root networking directory</TD>
</TR>

<TR>
<TD>mozilla/network/protocols</TD>

<TD>The root directory for all protocol
implementations</TD>
</TR>

<TR>
<TD>mozilla/network/protocols/&lt;your
favorite protocol implementation></TD>

<TD>There is a directory per protocol
implementation</TD>
</TR>

<TR>
<TD>mozilla/network/engine</TD>

<TD>The core Netlib implementation</TD>
</TR>

<TR>
<TD>mozilla/network/client</TD>

<TD>The legacy code needed by the Mozilla
client...</TD>
</TR>

<TR>
<TD>mozilla/network/stream</TD>

<TD>The implementations of various streams..</TD>
</TR>

<TR>
<TD>mozilla/network/tests</TD>

<TD>Standalone tests</TD>
</TR>
</TABLE>

<P><B>Netlib</B>
<P>Netlib will first be broken out into static libraries and
reintegrated
into Mozilla to show compatibility. The libraries will then
be individually put behind new interface API's on branches and then landed
back on the Mozilla trunk in short intervals. The end result should
be a restructured code base with far fewer dependencies. A remote
upgrade capability with interface based DLL's, and the ability to do third
party plugin protocols and stream converters.
<P><B>Layout</B>
<P>After the standalone netlib implementation is up and working, a set
of APIs will be defined to allow the NGLayout layout engine to plug into
the current Mozilla code base. After a certain degree of stability
and feature richness is achieved, the old layout code will be excised from
the Mozilla code base. This will leave a partially componentized
product with both a modular layout, netlib, and imagelib.
<BR>
<BR>
<BR>
<TABLE BORDER=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<TR>
<TD><B>Dependencies</B></TD>
</TR>
</TABLE>

<P><B>Layout</B>
<UL>
<LI>
Working standalone Netlib and reintegration
into Gromit</LI>

<LI>
Further completion of DOM</LI>

<UL>
<LI>
Event model</LI>

<LI>
Style model</LI>

<LI>
W3C Range proposal</LI>
</UL>

<LI>
NGLayout running on Mac and UNIX</LI>

<LI>
Landing of XPCOM on the tip</LI>
</UL>

<TABLE BORDER=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<TR>
<TD><B>Roadmap</B></TD>
</TR>
</TABLE>

<P><B>Netlib</B>
<UL>
<LI>
Move nsIURL and the nsURL implementation
into netlib</LI>

<LI>
Support HTTP POST requests by supplying
an OutputStream on the nsIURL component</LI>

<LI>
Finish the nsIStreamNotification implementation</LI>

<LI>
Move mozilla/lib/libnet code into the
new mozilla/network hierarchy</LI>

<LI>
Make the Mozilla client work with the
new mozilla/network code</LI>

<LI>
Break out the core Netlib code into
the Netlib engine DLL</LI>

<LI>
Make NGLayout work with the new Netlib
engine DLL</LI>

<LI>
Start carving up the rest of the mozilla/network
code into separate DLLs and libraries</LI>

<UL>
<LI>
main set of framework routines and includes</LI>

<UL>
<LI>
protocol plugin framework</LI>

<LI>
tcp helper routines</LI>

<LI>
network utility function</LI>
</UL>

<LI>
protocols</LI>

<UL>
<LI>
http</LI>

<LI>
gopher</LI>

<LI>
ftp</LI>

<LI>
abouturls</LI>

<LI>
file</LI>

<LI>
dataurls</LI>

<LI>
mocha</LI>

<LI>
marimba</LI>

<LI>
remote (telnet/rlogin)</LI>

<LI>
mail protocols</LI>
</UL>

<LI>
cache</LI>

<LI>
net converters</LI>

<UL>
<LI>
gunzip</LI>

<LI>
view-source</LI>

<LI>
save to disk</LI>
</UL>

<LI>
C stream functions (declaration, registry,
utility functions for older C based netlib streams)</LI>

<LI>
C++ stream functions</LI>
</UL>

<LI>
Thread-safety. We need to finalize
the threading model and make the Netlib engine DLL and multithreaded.
Probably, the protocol DLLs will need to be multithreaded as well...</LI>
</UL>
<B>Layout</B>
<UL>
<LI>
First pass spec of WebWidget API (5/4)</LI>

<LI>
Bare-bones demo of NGLayout running
in Gromit chrome on Windows (5/13)</LI>

<LI>
Landing IMGLIB branch on the tip (5/15)</LI>

<LI>
Finish dependencies document (ongoing)</LI>

<LI>
Prototype of type-in using NGLayout,
in conjunction with the Editor group (5/29)</LI>

<LI>
First pass editor design (6/1)</LI>
</UL>

<UL>
<LI>
contextual menus</LI>

<LI>
session history</LI>

<LI>
Keyboard navigation</LI>

<LI>
Status messages</LI>

<LI>
Cut,Copy,Paste</LI>

<LI>
Bookmarks</LI>

<LI>
HTML Dialogs</LI>

<LI>
Window management, multiple browser
windows</LI>

<LI>
Preferences, service and UI</LI>

<LI>
Printing</LI>

<LI>
JavaScript-Application interaction</LI>

<LI>
Find text</LI>

<LI>
Plugins</LI>
</UL>
<B>Imglib</B>
<UL>
<LI>
Integration into the Mozilla code base</LI>
</UL>
<B>XPCOM</B>
<UL>
<LI>
MAC Build (5/15)</LI>

<LI>
Unix Verification (5/15)</LI>

<LI>
Land XPCOM on tip (5/15)</LI>
</UL>




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified July 15,  1998</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/newlayout/doc/bam.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
