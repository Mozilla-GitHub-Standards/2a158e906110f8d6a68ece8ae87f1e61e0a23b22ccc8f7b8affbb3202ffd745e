
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

<title>flash specification</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<center>
<h1>flash specification</h1>
</center>

Contacts:<br>
<a href="mailto:waterson@netscape.com">Chris Waterson</a> (waterson@netscape.com)<br>
<a href="mailto:slamm@netscape.com">Steve Lamm</a> (slamm@netscape.com)<br>

<!------------------------------------------------------------------------

  Overview

  ------------------------------------------------------------------------>

<h2>Overview</h2>

<p>
This document is the technical specification for the Flash
Panel. The Flash Panel is a panel that contains
up-to-the-minute information about events that are of direct
importance to the current user, which might include:

<ul>
<li>E-mail notification, including both "local" and web-based email</li>
<li>Alerts for calendar events</li>
<li>Current market information</li>
<li>Other time-based events</li>
</ul>

</p>

<p>
This specification describes:

<ol>
<li>Flash Panel Content Format</li>
<li>Flash Services, including
   <ul>
   <li>Local service</li>
   <li>Remote services</li>
   <li>JavaScript services</li>
   </ul>
</li>
<li>Flash Service Registration</li>
</ol>

</p>

<!------------------------------------------------------------------------

  Flash Panel Content Format

  ------------------------------------------------------------------------>

<h2>Flash Panel Content Format</h2>

<p>
<img src="flash-panel.gif" align="right"/>

The figure to the right shows a sample of the Flash Panel. The panel
is a list (potentially hierarchical) of individual <i>Flashes</i>. One
Flash is listed per line, and consists of

<ul>
<li>An <i>icon</i> that distinguishes the Flash,</li>
<li>A <i>source</i> that indicates the origin of the Flash,</li>
<li>A brief <i>description</i> of the Flash,</li>
<li>A <i>timestamp</i> that indicates when the Flash originated
</ul>

There may be other visual cues (e.g., color, or applying italic or bold
style to the text) to indicate other attributes of the Flash; e.g.,
the priority of the Flash ("hot", "cool"), whether or not the Flash
has been attended to, etc.
</p>

<p>
Clicking on an individual Flash opens an appropriate viewer for the
flash information; for example, mail-news for an email.
</p>

<a name="Flash_Panel_Details">
<h3>Details</h3>
</a>

<ul>

<p>
<i>Display</i>. The Flash Panel's content area will be implemented
using a XUL tree widget. The tree widget's content will be generated
from an RDF composite data source that aggregates Flash information
from local, remote, and JavaScript Flash Services.
</p>

<p>
<i>Storage</i>. The XUL that specifies the Flash Panel will be
contained in a local file that is standard across profiles. This file
will be considered "trusted" and will run JavaScript code that
accesses sensitive information on the user's machine.
</p>

<p>
<i>Initialization</i>. The Flash Panel's <b>onload</b> handler will
open the

<a href="#Flash_Registry"><i>Flash Registry</i></a>.

The Flash Registry is a per-profile database that describes
the Flash Services that are to be displayed in the Flash Panel. Each
Flash Service is itself an RDF datasource that is named via an RDF
identifier, and will be added to the tree control's composite data
source.
</p>

<p>
<i>Style Sheets</i>. The Flash Registry will also contain information
about CSS style sheets that must be applied to the Flash Panel.
</p>

<p>
<i>Adding a Flash</i>. The tree control's root resource will refer to
a well-known RDF resource in the Flash Registry,
<tt>NC:FlashRoot</tt>. Each Flash Service datasource may assert an arc
from <tt>NC:FlashRoot</tt> to its Flash: this is how Flashes will
appear in the tree control. Flashes will be assumed to be attached to
the root via the <tt>http://home.netscape.com/NC-rdf#child</tt>
property. Each Flash Service may assert as many flashes as it likes:
no attempt will be made to limit the number of Flashes that a service
displays.
</p>

<p>
<i>Flash Properties</i>. Each Flash <i>must</i> have the following
properties to be displayed correctly in the Flash Panel (the
<i><tt>nc:</tt></i> prefix is an abbreviation for the
<tt>http://home.netscape.com/NC-rdf#</tt> namespace prefix):
</p>

<p>
<ol>
<li>
<tt><i>nc:</i>type</tt>. This identifies the <i>type</i> of the Flash
and is used with the Flash Panel's style sheets to generate an
appropriate icon for the flash.
</li>

<li>
<tt><i>nc:</i>source</tt>. This identifies the <i>source</i> or origin
of the Flash, and must refer to an RDF literal that specifies
localized text intended for user display.
</li>

<li>
<tt><i>nc:</i>description</tt>. This is a brief <i>description</i> of
the Flash, and must refer to an RDF literal that specifies localized
text intended for user display.
</li>

<li>
<tt><i>nc:</i>timestamp</tt>. This is the <i>timestamp</i> of the
flash. It must refer to an RDF literal that either specifies the time
as 1) a string in the standard Unix format as produced by the
<tt>date</tt> utility; e.g., <tt>Mon Apr 19 12:26:18 PDT 1999</tt>, or
2) a numeric value that is the number of seconds since 1970, UTC
(e.g., as produced by the Unix C runtime's <tt>time()</tt> subroutine,
or its Perl equivalent). This will be converted to a localized,
user-friendly string by the RDF subsystem.
</li>

<li>
<tt><i>nc:</i>url</tt>. This is a the URL that should be opened when
the flash is double(?)-clicked. It must refer to an RDF literal that
specifies the URL.
</li>

</ol>

</p>

<p>
<i>Removal</i>. Each Flash Service is responsible for determining when
a Flash is no longer relevant and should be removed from the Flash
Panel. A Flash Service does this by simply <i>unasserting</i> the
relationship between the <tt>NC:FlashRoot</tt> and the Flash.
</p>

<p>
<i>Sorting</i>. The tree control will support "natural ordering", so
Flashes may be arranged by the user using drag-and-drop. By default,
the Flash Panel will sort Flashes by date, from most recent to least
recent.
</p>

</ul>

<!------------------------------------------------------------------------

  Flash Services

  ------------------------------------------------------------------------>

<h2>Flash Services</h2>

<p>
Conceptually, a <i>Flash Service</i> is a provider of Flash
notifications to the Flash Panel. Technically, a Flash Service is no
more than an RDF datasource that is named in the Flash Registry.
</p>

<h3>Local Flash Services</h3>

<ul>
<p>
A <i>Local Flash Service</i> is typically a built-in RDF datasource
that wishes to display information in the Flash Panel; for example,
the number of unread POP mail messages.
</p>

<p>
Making an existing built-in RDF datasource into a Local Flash Service
involves the following:
</p>

<ol>
<li>
Adding the datasource's identifier to the Flash Registry, presumably
at ship time, by hand-editing the default <tt>flash-registry.rdf</tt>
file.
</li>

<li>
Creating a CSS style sheet for the datasource, and ensuring that it
appears in the Flash Registry, again, presumably by hand-editing the
<tt>flash-registry.rdf</tt> file.
</li>

<li>
Ensuring that the local datasource provides the necessary the
assertions to aggregate into the Flash Panel: a resource that is
"attached" to <tt>NC:FlashRoot</tt>, and the require Flash Panel
properties, as described

<a href="#Flash_Panel_Details">above</a>.
</li>

</ol>

<p>
The Flash Panel's composite datasource will use the standard RDF
observer mechanisms, which will notify the Flash Panel and trigger a
reflow when relevant information in the local datasource changes.
</p>

</ul>

<h3>Remote Flash Services</h3>

<ul>
<p>
A <i>Remote Flash Service</i> is a Flash Service that is provided by a
remote server. The client periodically polls the Remote Service for an
RDF/XML file that contains Flash information. The RDF/XML from the
remote server is describes the Flash according to the requirements

<a href="#Flash_Panel_Details">above</a>.

A sample Remote Flash is illustrated in

<a href="#Appendix_2">Appendix 2</a>.
</p>

<p>
<i>Polling</i>. The Flash Registry entry for a Remote Flash Service
names a remote URL that will be periodically polled for updates. The
interval at which polling occurs is specified via the
<tt>http://home.netscape.com/NC-rdf#poll-interval</tt> property, which
should refer to an RDF literal that is the decimal poll interval, in
seconds. If this value is not specified, no polling will occur.
</p>

<ul>
<p>
Alternatively (or additionally), we may want to use server-specified
<b>expires</b> information in the HTTP headers to allow dynamic,
server-provided refresh information.
</p>
</ul>

<p>
<i>Replacement policy</i>. When the client polls the Remote Flash
Service for a new RDF/XML file, the contents of the new file will
<i>logically replace</i> the contents of the old file. That is, the
client will compute the logical difference between the graph specified
in the old file and the graph specified in the new file. The RDF
subsystem will only send RDF notifications to the Flash Panel for
values that have changed.
</p>
</ul>

<h3>JavaScript Flash Services</h3>

<ul>

<p>
A <i>JavaScript Flash Service</i> is a Flash Service that uses
JavaScript to "push" a Flash into the Flash Panel. Specifically, it
directly manipulates a private RDF datasource using a set of simple
Flash APIs to programmatically add and remove Flashes to the Flash
Panel.
</p>

<p>
<i>Private datasource</i>. A JavaScript Flash Service will use its RDF

<a href="http://www.mozilla.org/rdf/doc/pcs.html">persistent client store</a>

to store information about Flashes. The persistent client store is a
"super cookie" that keeps an arbitrary RDF graph on a per-domain or
per-URL basis.
</p>

<ul>
<p>
<b><i>TBD</i></b>. URI syntax for PCS datasources, re: Registering a PCS
data source with the Flash Registry.
</p>
</ul>

<p>
<i>JavaScript APIs</i>. The datasource may be manipulated directly
using the low-level RDF APIs (e.g., <b>Assert()</b> and
<b>Unassert()</b>); however, this is tedious and error prone, so we
will provide a set of "wrapper" APIs that do most of the grunt work:
</p>

<ul>

<p>
<b>void addFlash(<i>datasource</i>, <i>flashID</i>, <i>type</i>, <i>source</i>, <i>description</i>, <i>timestamp</i>, <i>miscAttrs</i>)</b>.

Add a Flash with to the specified <i>datasource</i>. The
<i>flashID</i> is used to identify the Flash, the <i>type</i>,
<i>source</i>, <i>description</i>, and <i>timestamp</i>, are as
specified

<a href="#Flash_Panel_Details">above</a>.

The <i>miscAttrs</i> parameter specifies a comma-separated string of
<b>attr=value</b> pairs that are added to the Flash; e.g., to trigger
CSS rules based on attribute selectors.
</p>

<p>
<b>void removeFlash(<i>datasource</i>, <i>flashID</i>)</b>.

Remove the Flash with the specified <i>flashID</i>.
</p>

<p>
<b>Array getAllFlashes(<i>datasource</i>)</b>.

Retrieve all of the Flashes currently contained in the
<i>datasource</i>. Returns an array of <i>flashID</i>s.
</p>

</ul>



</ul>

<!------------------------------------------------------------------------

  Registration

  ------------------------------------------------------------------------>

<a name="Registration">
<h2>Registration</h2>
</a>

<p>
Information about Flash Services is maintained in the <i>Flash
Registry</i>. A Flash Service installs (or uninstalls) itself by
modifying the Flash Registry.
</p>

<a name="Flash_Registry">
<h3>Flash Registry</h3>
</a>

<ul>
<p>
The Flash Registry is a per-profile database that stores information
about which Flash Services are currently available in the Flash Panel.
</p>

<p>
<i>Storage</i>. The Flash Registry is stored in the RDF/XML file
<tt>flash-registry.rdf</tt>. A copy of this file is located in each
user's profile directory. A default version of this file will be
copied to the user's profile directory as part of the profile creation
process. (See

<a href="#Appendix_1">Appendix 1</a>

for an example of how this file might appear.)
</p>

<p>
Alternatively, the Flash Registry may simply be a well-known "section"
of the Registry.
</p>

<p>
<i>Access</i>. The Flash Registry datasource will be accessible via
the RDF service manager using the <tt>NC:FlashRegistry</tt> datasource
identifier.
</p>

<p>
<i>Flash Datasources</i>. A well-known URI,
<tt>NC:FlashDataSources</tt>, will be used to identify the datasources
that are to be included in the Flash
Panel. <tt>NC:FlashDataSources</tt> will be an RDF <i>Bag</i>, and
will be enumerated when the Flash Panel is first loaded. Each element
of the Bag is assumed to be an RDF resource whose URI names an RDF
datasource using a <i>datasource identifier</i>.
</p>

<p>
During registration, a Flash Service may add an element to the
<tt>NC:FlashDataSources</tt> Bag that indicates the RDF
datasource identifier to load for that Service.
</p>

<p>
<i>Style Sheets</i>. A well-known URI, <tt>NC:FlashStyleSheets</tt>,
will be used to identify additional style sheets that must be loaded
into the Flash Panel; e.g., for correct display of Flash
icons. <tt>NC:FlashStyleSheets</tt> will be an RDF <i>Bag</i>, and
will be enumerated when the Flash Panel is first loaded. Each element
of the Bag is assumed to be an RDF literal that names the URL of a CSS
style sheet.
</p>

<p>
During registration, a Flash Service may add an element to the
<tt>NC:FlashStyleSheets</tt> Bag that indicates a style sheet to load
for that service.
</p>

<p>
<i>Flashes</i>. A well-known URI, <tt>NC:FlashRoot</tt>, will be used
as the base URI from which the flashes themselves are enumerated. Each
Flash Service datasource may make assertions about
<tt>NC:FlashRoot</tt>; the composite datasource in the Flash Panel
will aggregate these assertions to produce a coherent collection of
Flashes.
</i>

</ul>

<h3>Registration Procedure</h3>

<ul>

<p>
<b><i>TBD</i></b>.
</p>

<p>
JavaScript APIs exist today that allow direct manipulation of an
RDF/XML datasource. Therefore, installing and removing Flash Services
is simply a matter of modifying the Flash Registry. Which in turn is
simply a matter of writing JavaScript that adheres to the policies
that describe the Flash Registry format, above.
</p>

<p>
Ideally, we should implement JavaScript functions that "wrap" the
necessary registration operations, primarily so that it's easier for a
third party to get right; e.g.,
</p>

<ul>
<li><b>addFlashService(<i>serviceType</i>, <i>dataSourceURI</i> [, <i>pollInterval</i>])</b>.</li>
<li><b>removeFlashService(<i>dataSourceURI</i>)</b>.</li>
<li><b>addFlashStyleSheet(<i>styleSheetURL</i>)</b>.</li>
<li><b>removeFlashStyleSheet(<i>styleSheetURL</i>)</b>.</li>
</ul>

<p>
The Flash Panel will need to be rebuilt whenever the Flash Registry is modified.
</p>

</ul>

<!------------------------------------------------------------------------

  Appendix 1

  ------------------------------------------------------------------------>

<a name="Appendix_1">
<h2>Appendix 1: Sample <tt>flash-registry.rdf</tt></h2>
</a>

<p>
Below is an example of how <tt>flash-registry.rdf</tt> might look.
</p>

<ul>
<pre>
&lt;RDF:RDF xmlns:RDF="http://www.w3.org/TR/WD-rdf-syntax#"
         xmlns:NC="http://home.netscape.com/NC-rdf#"&gt;

  &lt;!-- The "hangar" from which all flashes dangle --&gt;
  &lt;RDF:Description ID="NC:FlashRoot" /&gt;

  &lt;!-- The Flash Services --&gt;
  &lt;RDF:Bag ID="NC:FlashDataSources"&gt;
    &lt;!-- A Local Flash Service, Mail/News --&gt;
    &lt;RDF:li&gt;
      &lt;RDF:Description about="rdf:mail" /&gt;
    &lt;/RDF:li&gt;

    &lt;!-- A Remote Flash Service, some Netcenter Gizmo --&gt;
    &lt;RDF:li&gt;
      &lt;RDF:Description
          about="http://home.netscape.com/flashes/get.cgi?user=waterson"&gt;
        &lt;NC:poll-interval&gt;60&lt;/NC:poll-interval&gt;
      &lt;/RDF:Description&gt;
    &lt;/RDF:li&gt;

    &lt;!-- A Panel-based Flash Service, exact URI syntax still TBD --&gt;
    &lt;RDF:li&gt;
      &lt;RDF:Description
          about="pcs://home.netscape.com/webmail/flash.rdf" /&gt;
    &lt;/RDF:li&gt;
  &lt;/RDF:Bag&gt;


  &lt;!-- The Style Sheets --&gt;
  &lt;RDF:Bag ID="NC:FlashStyleSheets"
    &lt;!-- Default Style Sheet --&gt;
    &lt;RDF:li&gt;resource:/res/flash.css&lt;/RDF:li&gt;

    &lt;!-- For Mail/News --&gt;
    &lt;RDF:li&gt;resource:/res/mailnews/flash.css&lt;/RDF:li&gt;

    &lt;!-- Remote, from Netcenter --&gt;
    &lt;RDF:li&gt;http://home.netscape.com/flashes/style.cgi?user=waterson&lt;/RDF:li&gt;
  &lt;/RDF:Bag&gt;

&lt;/RDF:RDF&gt;
</pre>
</ul>

<!------------------------------------------------------------------------

  Appendix 2

  ------------------------------------------------------------------------>

<a name="Appendix_2">
<h2>Appendix 2: Sample Remote Flash</h2>
</a>

Below is an example of how a Remote Flash might look.

<ul>
<pre>
&lt;RDF:RDF xmlns:RDF="http://www.w3.org/TR/WD-rdf-syntax#"
         xmlns:NC="http://home.netscape.com/NC-rdf#"&gt;

  &lt;RDF:Description about="NC:FlashRoot"&gt;
    &lt;NC:child&gt;
      &lt;RDF:Description ID="#n1"&gt;
        &lt;NC:type&gt;StockFlash&lt;/NC:type&gt;
        &lt;NC:source&gt;StockWatch&lt;/NC:source&gt;
        &lt;NC:description&gt;AOL 150 3/8 +1/8&lt;/NC:description&gt;
        &lt;NC:timestamp&gt;Mon Apr 19 12:26:18 PDT 1999&lt;/NC:timestamp&gt;
        &lt;NC:url&gt;http://home.netscape.com/stocks?symbol=AOL&lt;/NC:url&gt;
      &lt;/RDF:Description&gt;
    &lt;/NC:child&gt;
  &lt;/RDF:Description&gt;

&lt;/RDF:RDF&gt;
</pre>
</ul>

<hr>

<small>
Last modified: $Id: flash-spec.html,v 1.3 1999/05/03 17:58:05 slamm%netscape.com Exp $
</small>




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May  3,  1999</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/rdf/doc/flash-spec.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
