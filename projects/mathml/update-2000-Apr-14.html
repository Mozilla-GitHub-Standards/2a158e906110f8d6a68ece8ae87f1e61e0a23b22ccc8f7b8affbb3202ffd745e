
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

<title>MathML Progress Report</title>
<style>
<!--
.tag { color: purple; font-style: monospace; font-weigt: bold; }
.attribute { color: #6699ff; font-style: monospace; font-weigt: bold; }
.function { color: #a00000; font-style: monospace; font-weigt: bold; }
.object { color: green; font-style: monospace; font-weigt: bold; }
.module { color: orange; font-style: monospace; font-weigt: bold; }
-->
</style>

<script language="JavaScript">
<!-- //
function OpenWindow(url)
{
newWindow = window.open(url,"NewWindow","toolbar=no,width=550,height=480,directories=no,status=no,scrollbars=yes,menubar=no")
}
// -->
</script>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">






<h2 align="center">Implementation of MathML in Mozilla:<br> Progress Report</h2>

<p>Roger B. Sidje &lt;<i><a href="mailto:rbs@maths.uq.edu.au">rbs@maths.uq.edu.au</a></i>&gt;<br>
Fri Apr 14 2000

<table align="right" border="0" cellpadding="0" cellspacing="0" width="410">
<tr><td bgcolor="#c0c0c0" align="center">
<img src="thomson.gif" width="410" height="215"
alt="Incoherent Thomson Scattering Theory"><br>
<small>
Mozilla MathML v0.x rendition of the<br>
"<a href="http://hutchinson.belmont.ma.us/tth/mmlreview/">Incoherent Thomson Scattering Theory</a>"
[ <a href="javascript:OpenWindow('thomson.html')" 
onmouseover="window.status='Click here to see the markup';return true" 
onmouseout="window.status=''; return true"
target="">Markup</a> ]
</small>
</td></tr>
</table>

</p>

<b>Contents</b>

<ul>
<li>Introduction</li>
<li>Flashback</li>
<li>Progress in the implementation</li>
<li>Taking Stock</li>
<li>To Do...</li>
</ul>

<h2>Introduction</h2>
<p>
The <a href="./">MathML Project</a> has been steadily progressing ever since
it started in mid-May 1999, and indeed, ever since the
<a href="update-1999-Sep-18.html">previous status report</a>
dated September 1999.
</p>

<p>
The driving focus in the first-step of the project is to support
<A HREF="http://www.w3.org/TR/REC-MathML/chap3_1.html">Presentation markup</A>,
which is more general than
<A HREF="http://www.w3.org/TR/REC-MathML/chap4_1.html">Content markup</A>.
It should be recalled that a XSL-T processor (such as
<a href="http://lxr.mozilla.org/mozilla/source/extensions/transformiix/docs/readme.html">TransforMiiX</a>
which is scheduled to be directly available from within Mozilla) 
enables the rendering of Content markup by first transforming to Presentation markup. 
However, native support for Content markup is envisaged at some stage in
the MathML project. This native option is primarily enabling, as it will
provide authors the ability to perform dynamic/interactive math with both 
Presentation markup and Content markup through the
<A HREF="../../newlayout/dom-roadmap.html">DOM</A> and
<A HREF="../../js/">JavaScript</A>.
In the meantime authors can simply transform Content markup to 
Presentation markup and/or use parallel markup.
</p>

<p>
Efforts of the MathML project have culminated to the point where all 
presentational tags are recognized, except the alignment tags 
&lt;<span class="tag">malignmark</span>/&gt; and
&lt;<span class="tag">maligngroup</span>/&gt; --both of which happen to 
be unsupported by most of the existing MathML renderers.
Some presentational tags need another pass to 
further beautify their layout, by filling such things as the italic
correction and/or the amount of spacing between some tags. This 
finishing stylistic touch is motivated by the professionalism that
authors have come to expect from sophisticated mathematical typesetting system
such as <A HREF="http://www.tug.org/">TeX/LaTeX</A>.
<p>

<p>
Also, further work remain to render &lt;<span class="tag">mtable</span>&gt;
in a fully standards compliant manner, or at least at a level where its usage
is pleasant when laying out common mathematical 2D constructs such as matrices, 
arrays, commutative diagrams. Progress in this direction will rely upon
some other work in the CSS2 
&lt;<span class="tag">table</span>&gt;
model that 
<A HREF="../../newlayout/">Gecko</A> implements.
</p>


<h2>Flashback</h2>

<p>
Several months have passed since the previous status report.
This is a long time for many things to happen. And indeed they did.
Code-wise and elsewhere.
</p>

<p>
A significant event to the MathML project came from the contribution
of Shyjan Mahamud &lt;mahamud@cs.cmu.edu&gt; who taught
<A HREF="http://www.tug.org/">TeX</a> rendering rules to the MathML engine.
All the ingredients are now in the code to further refine 
special cases if need be.
</p>

<p>
A MathML component was created in
<A HREF="http://bugzilla.mozilla.org/">BugZilla</a>,
the mozilla.org's system for tracking bugs and features.
</p>

<p>
The 
<A HREF="../../newlayout/team.html">Gecko team</A>,
which is supportive of the MathML effort and has been helpful to this
writer, has seen two key members moved on. This is a
good opportunity to thank them: Kipp Hickman (co-inventor of SSLv1 and v2), the 
"principal smart guy", and Peter Linss who pioneered the 
<A HREF="../../newlayout/doc/style.html">Style System</A>.
They guided the very first steps of this writer with some incisive
explanations of the Gecko code.
Of course, their departure means additional strain on Gecko developers
in particular, and on Mozilla developers in general. This contributor
is therefore appreciative of the extra efforts of current developers
to accommodate the extra MathML requirements (e.g., in layout and gfx) as
their schedules permit.
</p>

<p>
Other noteworthy events that have happened include an ongoing effort
to release a 
<a href="http://www.w3.org/">W3C</a>'s 
<a href="http://www.geomtech.com/~rminer/mmltests">MathML Test Suite</A>,
and the release of a draft specification for 
<a href="http://www.w3.org/TR/MathML2/">MathML 2.0</a>.
So many standards, so little time, as someone would say.
</p>

<p>
To answer a question frequently asked, the MathML component was the first Mozilla 
component entirely driven from outside of Netscape, with no commitment from Netscape 
to include the component in its next release. Those who have been following
the MathML project have come to realize how picky and non-trivial MathML is.
As a result, since MathML builds upon the solid foundation that Gecko provides,
some people perceive that MathML provides a good testbed of the Gecko code,
and, at the same time, shows how capable and extensible the Gecko architecture
is. But whether MathML can formally make it in the next Netscape release is 
best left as hopelessly hopeful. All these show why the MathML project is
unique in several aspects and is worthy of your support!
</p>

<h2>Progress in the implementation</h2>

<p>
As it is expected from a rapidly moving target such as Mozilla,
there has been a great number of changes throughout Mozilla, some
of which have had a direct impact on the MathML component. In particular,
as a result of a work aimed at consolidating the Style System, the 
<span class="function">ReResolveStyleContext()</span>
method was removed from the nsIFrame API.
The MathML engine is now using another approach to get the
desired stylistic effects for scripting elements. Because
this is an important aspect of MathML rendering, a 
<A HREF="#style">separate section</A> 
with in-depth technical details on this subject is provided
later in this document.
</p>

<p>
The functionalities that were added to the MathML code
fall into the following topics:
</p>

<h3>Fonts</h3>

<ul>
  <li><span class="function">GetBoundingMetrics()</span><br>
Shyjan Mahamud &lt;mahamud@cs.cmu.edu&gt; demonstrated that
accurate text metrics could be obtained, and so was born the 
<span class="function">GetBoundingMetrics()</span>
function that was added in the nsIRenderingContext API.
This is an important function used for accurate measurements
of strings in order to allow precise positioning when processing
MathML. It provides more information than the other functions
used for HTML processing. The availability of this function has paved the way for 
a major enhancement of the MathML code in two areas which
will be presented later: TeX rendering rules and stretchy characters.
Unfortunately, because the
<span class="function">GetBoundingMetrics()</span>
function is a low-level platform-specific function that hasn't
yet been ported on all of the main platforms,
printing of MathML and rendering of MathML
on the MacOS are not yet working.<br><br>
</li>

  <li><b>The <span class="module">ucvmath</span> module</b><br>
Another major font hurdle was alleviated owing to the 
creation of the
<span class="module">ucvmath</span>
module with the glue provided by Mozilla's
<A HREF="../../projects/intl/charset-converters.html">Charset Converter Manager</A> (CCM).
For "symbolic" scientific fonts currently needed for MathML purposes, 
the CCM is used to map Unicode points to 
<A HREF="http://www.mathtype.com/support/tech/encodings/font_enc.stm">font encoding indices</A>.
The <span class="module">ucvmath</span> module is the gateway from which to
gradually support any useful mathematical/scientific font.
Currently, it supports TeX's CMEX and CMSY, MT Extra, 
and the Mathematica fonts (Math1, Math2, Math3, Math4, Math5).
These fonts are freely downloadable. Thus the
<span class="module">ucvmath</span> 
module gives access to a rich collection of about
a thousand professionally hinted glyphs for scientific typesetting,
enough for a first version of the Mozilla MathML renderer, and
ready for the inclusion of the much awaited
<A HREF="http://www.ams.org/STIX/">STIX project</A>.
</li>
</ul>


<h3>Rendering</h3>

<ul>
  <li><b>TeX Rendering Rules</b><br>
Shyjan Mahamud &lt;mahamud@cs.cmu.edu&gt; significantly improved
the visual appearance by implementing the TeX alignment rules
which are documented in Appendix G of the TeXbook.
Since Mozilla uses CSS frames, it was possible to apply the
placements of TeX "boxes" on Mozilla CSS frames by using the
accurate metrics provided by the
<span class="function">GetBoundingMetrics()</span> function
mentioned earlier. (A CSS frame  maps to a 
&lt;<span class="tag">tag</span>&gt;content&lt;/<span class="tag">tag</span>&gt;
and has nothing to do with the HTML
&lt;<span class="tag">frame</span>&gt;).
However, since these placements involve additional
TeX specific font metrics not found in ordinary fonts,
Shyjan computed approximations of these metrics.
As a result of TeX rules, the rendering of the MathML
engine looks much classy. With such a quality rendering governed
by TeX rules, the only remaining aspect that wasn't considered
during the first pass is the amount of spacing between some
tags and/or the so-called italic correction, i.e., the amount of 
space to add after an italicized string before immediately 
placing a superscript (or another string in an upright style).
Another pass over the code will be needed to take these
into account.<br><br>
</li>

  <li><b>Stretchy operators</b><br>
<img align="right" width="397" height="373" src="stretchy.gif"
alt="Stretchy symbols">
Stretchy operators reflects the ability of some characters to "auto-grow"
vertically or horizontally depending on their surrounding context.
This is one of the distinctive features of mathematical typesetting. 
Moving from an early prototype implementation impeded by the lack of fonts,
it was possible after the availability of the
<span class="module">ucvmath</span> module to develop
a fully-fledge implementation of the
<span class="object">nsMathMLChar</span> class that is able
to perform "glyph-searching-and-switching" within the same font
or across different fonts in order to select the best glyph for a 
given situation. If no glyph of appropriate size is found, the
<span class="object">nsMathMLChar</span>
class selects an appropriate set of partial glyphs and
assemble them to build a character of larger size. The modular
and extensible design of this process makes it possible to add
support for other fonts, as need arise, by simply adding the
data sets corresponding to each font.<br><br>

Central to the support of stretchy characters is the
<span class="function">GetBoundingMetrics()</span>
function together with "symbolic" fonts. Owing to Mozilla's 
<a href="../../projects/intl/fonts.html">font</a>
guru on Win32 and Linux, Erik van der Poel, who even had to redesign the Win32's font
code to support the Symbol font, it has been possible to include the
other fonts that are in the
<span class="module">ucvmath</span>
module. Without the 
<span class="function">GetBoundingMetrics()</span>
function and the support
for "symbolic" fonts, much would still be pending in the MathML engine.<br><br>
</li>

  <li><b>Embellished Operators</b><br>
Embellished operators represent a special class of operators
whose behavior depend on a wider context than that
of normal operators.<br><br>

By way of an example, consider the following fragment:

<pre>
&lt;<span class="tag">mrow</span>&gt;
  &lt;<span class="tag">msub</span>&gt;
     &lt;<span class="tag">mo</span>&gt;&amp;Integral;&lt;/<span class="tag">mo</span>&gt;
     &lt;<span class="tag">mi</span>&gt;&amp;Omega;&lt;/<span class="tag">mi</span>&gt;
  &lt;/<span class="tag">msub</span>&gt;
  &lt;!-- markup to produce something really tall here --&gt;
  ...
&lt;/<span class="tag">mrow</span>&gt;
</pre>

What should happen is that the &amp;Integral; should stretch
to enclose the content beyond its direct XML parent, <b>and...</b> &amp;Omega; 
should remain the subscript of the stretched integral. 
In other words, it is as if the corresponding
&lt;<span class="tag">msub</span>&gt;...&lt;/<span class="tag">msub</span>&gt; <i>is</i>
a mutable operator as a whole. In this case, the MathML REC refers to this 
&lt;<span class="tag">msub</span>&gt; as an "embellished operator".
The definition is recursive and drills into nested tags.
In MathML there is no other automatic way to make the &Integral;
(or other operators such as &Sum;) appropriatedly large
unless they are treated as embellished operators. The support of
embellished operators was added as a core aspect of the
MathML architecture.<br><br>

The snapshot of the "Incoherent Thomson Scattering Theory"
given above shows embellished and stretchy operators in action.<br><br>
</li>

  <li><b>Other</b><br>
Other works in the MathML project have included:
<ul>
  <li> the support for CSS units on numeric values (like in
<span class="attribute">lspace=</span>"10px",
<span class="attribute">linethickness=</span>"2pt",
<span class="attribute">maxsize=</span>"200%",
<span class="attribute">subscriptshift=</span>"0.5em", etc);

  <li> the implementation of more tags with support for their attributes
  (like 
&lt;<span class="tag">msqrt</span>&gt;,
&lt;<span class="tag">mroot</span>&gt;,
&lt;<span class="tag">mfenced</span>&gt;,
&lt;<span class="tag">maction</span>&gt;,
&lt;<span class="tag">mpadded</span>&gt;, etc);
</li>

  <li> the support of the <span class="attribute">scriptminsize</span>, i.e., is the
user-desired smallest font-size. Without this,  
the rendering would become unreadable in hierarchies
of scriptlevel contexts.</li>

  <LI> bug fixing, etc.</li>

</ul>
</ul>

<h3>Builds</h3>

MathML is not yet part of the default build in Mozilla.
This has prompted some contributors to keep a watchful eye 
on the MathML code to ensure that it compiles successfully
in the milestone tarballs, and to
<A HREF="../../build/distribution.html">distribute MathML-enabled binaries</A>.
Moreover, automated nightly builds with MathML enabled can now be downloaded at:
<ul>
<li><A HREF="http://www.calm.hw.ac.uk/mathml/mozilla-mathml-win32-latest.zip"> 
http://www.calm.hw.ac.uk/mathml/mozilla-mathml-win32-latest.zip</A> (for Win32) 
<li><A HREF="http://dymaxion.org/projects/mozilla/index.shtml">
http://dymaxion.org/projects/mozilla/index.shtml</A> (for Linux).
</ul>

Because no major browser supports MathML as yet, 
MathML content is scarce on the web. But as more 
people try out the Mozilla code, they produce additional practical
<A HREF="http://www.maths.ox.ac.uk/~gartside/mathzilla/">examples</A>
to 
<A HREF="http://bugzilla.mozilla.org/showattachment.cgi?attach_id=7367">showcase</A>
the capabilities of the MathML renderer and generate interest. Thus, the process
feeds upon itself.

<h2>Taking Stock</h2>

<h3>Strengths</h2>

<ul>
<li><b>3S</b>
<ul>
<li>
<b>Scope</b> -
Except the unfinished
&lt;<span class="tag">mtable</span>&gt;, and the alignment tags
&lt;<span class="tag">malignmark</span>/&gt; and
&lt;<span class="tag">maligngroup</span>/&gt;,
the MathML engine supports all Presentation markup (modulo bugs!).
The use of TeX rendering rules has led to a rendering of high quality.
Furthermore, font problems that were a heavy plight on the project at the
beginning have been lifted.<br><br>

The project is first concentrating on Presentation markup. 
MathML is intended to be generated by software, and generators such as 
<A HREF="http://hutchinson.belmont.ma.us/tth/mml/">TtM</A>
and
<A HREF="http://www.cis.ohio-state.edu/~gurari/TeX4ht/mn.html">TeX4ht</A>
appear to be only generating Presentation markup at the moment.
In any case, the lack of current support for Content markup
doesn't stand as a severe limitation since Content
markup can be transformed to Presentation markup.<br><br>
</li>

<li><b>Size</b> - As a result of building upon the solid foundation of Gecko,
the overhead  of the MathML code is proving very small (this is for the rendering part
--the editing and transformation parts are unknown).
<br><br>

<li><b>Speed</b> - As fast as Gecko permits --with the caveat that the
formatting of MathML is more expensive than standard HTML by far.
This is due to the accurate measurements and fine placements that have
to be done. Moreover MathML is highly verbose and documents with lots of maths
tend to be large.<br><br>
</ul>

<li><b>DOM</b><br>
Although MathML 2.0 has some MathML specific additions to the DOM,
MathML 1.0 doesn't mention the DOM (the DOM as we know it today
wasn't there at the time MathML 1.0 was taking shape).
Hence any capabilities with the current 
Gecko's XML DOM and JavaScript are major bonuses to
the MathML engine.<br><br>

<li><b>CSS</b><br>
The support of CSSx in Mozilla means that authors
can use (and sadly even 
<A HREF="http://bugzilla.mozilla.org/show_bug.cgi?id=27086">misuse</A>) 
them in MathML.<br><br>

<li><b>Special effects</b><br>
While not part of the MathML specification, the complex Mozilla
framework offers the ability to seamlessly mix other markups within
MathML (e.g., still or animated images, XHTML/XML in general,
<A HREF="../svg/">SVG</A> to draw diagrams and graphs, etc).
This enables to get special effects that would otherwise be impossible.
</li>
</ul>

<h3>Weaknesses</h3>

<ul>                      
<li><a name="style"></a><b>Inline style</b><br>
The inline <span class="attribute">style</span> attribute which is part of MathML 1.0 is
missing in the current code. Furthermore, the following style-related
attributes are not supported:
<span class="attribute">fontfamily=</span>".",
<span class="attribute">fontsize=</span>".",
<span class="attribute">color=</span>".".
These attributes cannot easily be supported at the 
frame construction level where MathML frames are created.
And it is impossible to enumerate all the 
[fontfamily="."],
[fontsize="."] and 
[color="."] in the 
<span class="module">mathml.css</span>
file since the possibilities are endless. 

<p>
<img align="right" width="300" height="101" src="trees.gif"
alt="Content, Style, and Frame Trees">
In the <A HREF="../../docs/url_load.html">The Life Of An HTTP Request</A>,
Alexander Larsson &lt;alex@cendio.se&gt; illustrated how data are fetched from
the network and ultimately displayed on the screen.
The formatting presently involved in the MathML code is
hooked at the frame construction level. Handling the 
inline style properties (such as fontfamily, fontsize, color)
at that level is a problem because the Style System has already
sorted and combined style rules into subsets (or nsIStyleContext)
relevant to each content node in the 
<A HREF="../../newlayout/doc/contentmodel.html">content model</A>
(a raw form of the DOM).
Every frame is bound to a nsIStyleContext which defines the stylistic
characteristics of that frame. In addition, the Style System enables a
frame to possibly hold additional leaf style contexts because they are
useful in certain circumstances.
</p>

<p>
The nsIStyleContext provides an interface for accessing the actual
resolved style data in a suitable format throughout the code (nsStyleStruct).
When there is a style property at the frame construction
level that wasn't accounted for during the style resolution
process, it is a problem because if a style data is altered,
that would mean invalidating all the sorting that the style
processor has done (and this without its knowledge), thereby
corrupting the style tree.
</p>

<p>
Another important task performed by the Style System is
dynamic update. For example, if DOM + JavaScript
manipulate style rules, the Style System will determines where
the changes apply, resets (or replaces) style contexts
that use those rules, rebuilds the style data, figures 
out the nature of the style changes (frame change, reflow,
or visual --like color that doesn't require reformatting)
and then initiates the appropriate changes.
</p>

<p>
If is therefore better to add those style rules
that are particular to MathML at the bottom in order
to benefit from all this. The Gecko team plans to factor
the content code and the frame construction code
to allow greater extensibility in these areas.
This is something that will certainly benefit the MathML
and SVG efforts. If MathML style properties are supported
at the bottom, the Style System will take care of them as
it does with other properties. Moreover, this will allow
for a better handling of the unconventional style
switching induced by the 
&lt;<span class="tag">mi</span>&gt; tag and the 
<span class="attribute">scriptlevel</span> attribute.
</p>

Having described all this, it is important to draw authors'
attention on the fact that Mozilla enables to achieve the desired
stylistic effects (for fontsize, fontfamily, color, and much more)
with standard CSS declarations (rather than attributes).
Hence albeit inconvenient, this current limitation is not
critical and can be circumvented.<br><br>
</li>
                
<li><b>&lt;<span class="tag">math</span>&gt; in HTML documents</b><br>
Mozilla MathML is rendered via XML/XHTML documents.
But since most math authors are more familiar with HTML than XML/XHTML
and are using generators that produce HTML documents,
one of the most requested features
at the moment is the ability to directly have a 
&lt;<span class="tag">math</span>&gt;...&lt;/<span class="tag">math</span>&gt;
fragment inside a HTML document. This means a XML fragment within a HTML document.
Mozilla does not yet support the cohabitation of XML and HTML within the
same document.
<br><br>
</li>
                     
<li><b>Platform parity</b><br>
The fact that the
<span class="function">GetBoundingMetrics()</span>
function hasn't yet been ported on all of the main platforms
means that printing of MathML and rendering of MathML
on the MacOS are not yet working.</li>
</ul>

<h2>To Do...</h2>

<ul>
<li><b>&lt;<span class="tag">mtable</span>&gt;</b> - Of course.
<li><b>Platform parity</b> - Port the
<span class="function">GetBoundingMetrics()</span>
on gfx/postscript (for printing) and on other platforms such as the MacOS.

<li><b>Temp. hacks</b> - Fix (or invalidate) the XXX comments. Ensure
that incremental reflows are honored.

<li><b>Save As Text</b> - What does this means for MathML? 
Plain text... or better: ascii-art for the creative minds...

<li><b>Save As <A HREF="http://www.tug.org/">TeX</a></b> - 
Want to dive in the Mozilla code with the prospect of learning,
and a clear focus to come up with something useful?

<li><b>Content markup</b> - Want to make MathML the first internal
Mozilla application that feeds on
<a href="http://lxr.mozilla.org/mozilla/source/extensions/transformiix/docs/readme.html">TransforMiiX</a>?

<li><b>Linebreaking</b> - Teach &lt;<span class="tag">mrow</span>&gt; to
shrink-wrap around its content.

<li><b>Embed the MathML renderer</b> - The MathML code is not designed to be
a standalone component of large size. On the contrary, it aims at fitting
the Gecko architecture and at making an efficient use of the Gecko code. 
Thus it cannot be used in a separate library outside Gecko. However, on Win32,
it is possible to embed Gecko in other applications via the
<A HREF="http://www.iol.ie/~locka/mozilla/mozilla.htm">Mozilla ActiveX control</A>.
Practical applications of embedded Gecko with MathML enabled would be most welcome.

<li><b>Surrogates (UTF-16)</b> - MathML 2.0 involves plane 1 characters
that are not yet supported by Mozilla, and David Carlisle noted that they
break James Clark's sp suite of SGML tools, including the nsgmls parser system
that is sitting behind most validation tools.

<li><b>XML (&lt;<span class="tag">math</span>&gt;) in HTML documents</b> -
That would make many happy faces.

<li><b>Editor aspect</b> - Want to start authoring MathML in the
<A HREF="../../editor/">editor</A>?

<li><b>Much more</b> - As usual...
</ul>





<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified December  6,  2001</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/mathml/update-2000-Apr-14.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
