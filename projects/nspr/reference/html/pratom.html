
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../images/mozilla-16.png" type="image/png">

        <META NAME="keywords" CONTENT="electronic commerce, ecommerce, ebusiness, e-business, e-commerce, enterprise software, net economy, Netscape, Sun Microsystems, Sun-Netscape Alliance, iPlanet, internet software">
        <META NAME="description" CONTENT="The Sun-Netscape Alliance, a strategic alliance formed by America Online and Sun Microsystems, Inc., is delivering iPlanet e-commerce software and enterprise solutions that enable companies to compete successfully in the Net Economy">
	<META HTTP-EQUIV="Content-Type" content="text/html; charset=ISO-8859-1">
	<META NAME="TEMPLATEBASE" CONTENT="Authored in FrameMaker. Converted to HTML in WebWorks Publisher 2000. manual wdt 1.5">
	<META NAME="LASTUPDATED" CONTENT="05/18/01 16:05:24">
	<TITLE> NSPR Reference: Chapter&#32;12 Atomic Operations</TITLE>
<script src="../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">







<MAINCONTENT>

<NAVIGATIONCONTENT>
   <TABLE WIDTH="100%" BORDER="0" CELLSPACING="4">
      <TR>
         <TD VALIGN="TOP">
        
           
           <FONT SIZE="+1"><B>
             NSPR Reference</B></FONT><BR><FONT>  
<FONT SIZE="-1"><b><a href="prntdb.html">
<FONT SIZE="2">Previous</a></FONT>&nbsp;&nbsp;&nbsp;&nbsp;</b>
<a href="index.html">
<b><FONT SIZE="2">Contents</a></FONT></b>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="prinrvl.html">
<b>
<FONT SIZE="2">
Next
</a>
</FONT>
</b>&nbsp;&nbsp;&nbsp;&nbsp;</FONT>
         </TD>
     </TR>

     
   </TABLE>
   <BR>
</NAVIGATIONCONTENT>

<BOOKCONTENT>
<HR>
      <center>
<A NAME="20840"> </A><A NAME=""> </A><h2>
Chapter&#32;12 
&nbsp;



<A NAME="20841"> </A><A NAME="Atomic Operations"> </A>Atomic Operations
</h2>
</center>
<A NAME="20842"> </A>This chapter describes the global functions you use to perform atomic operations. 
The functions define a portable API that may be reliably used in any environment. 
Since not all operating environments provide access to such functions, their 
performance may vary considerably. 

<P>



<A NAME="20843"> </A>
<A NAME="Atomic Operations Functions"> </A>
<h2>
Atomic Operations Functions
</h2>


<A NAME="20844"> </A>The API defined for the atomic functions is consistent across all supported 
platforms. However, the implementation may vary greatly, and hence the 
performance. On systems that do not provide direct access to atomic operators, 
NSPR emulates the capabilities by using its own locking mechanisms. For such 
systems, NSPR performs atomic operations just as efficiently as the client could. 
Therefore, to preserve portability, it is recommended that clients use the NSPR API 
for atomic operations.

<P>

<A NAME="20848"> </A><A HREF="pratom.html#20856"  ><CODE>PR_AtomicIncrement</CODE></A><CODE><br>
</CODE><A HREF="pratom.html#20874"  ><CODE>PR_AtomicDecrement</CODE></A><CODE><br>
</CODE><A HREF="pratom.html#20892"  ><CODE>PR_AtomicSet</CODE></A><CODE>
</CODE>
<P>

<A NAME="20856"> </A><A NAME="PR_AtomicIncrement"> </A><h4>
PR_AtomicIncrement
</h4>

<A NAME="20857"> </A>Atomically increments a 32-bit value.

<P>

<BR>
<A NAME="20858"> </A><A NAME="Syntax"> </A><h5>
Syntax
</h5>


<PRE>
<A NAME="20859"></A>#include &lt;pratom.h&gt; 
</PRE>
<P>
<PRE>
<A NAME="20860"></A>PRInt32 PR_AtomicIncrement(PRInt32 *val);
</PRE>
<P>
<BR>
<A NAME="20861"> </A><A NAME="Parameters"> </A><h5>
Parameters
</h5>


<A NAME="20862"> </A>The function has the following parameter:

<P>

<P>
<A NAME="20868"> </A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="4">
  <TR>
    <TD VALIGN=TOP>
<PRE>
<A NAME="20865"></A>val
</PRE>
<P></TD>
    <TD VALIGN=TOP>
<A NAME="20867"> </A>A pointer to the value to increment.

<P>
</TD>
  </TR>
</TABLE>


<P>


<BR>
<A NAME="20869"> </A><A NAME="Returns"> </A><h5>
Returns
</h5>


<A NAME="20870"> </A>The function returns the incremented value (i.e., the result).

<P>

<BR>
<A NAME="20871"> </A><A NAME="Description"> </A><h5>
Description
</h5>


<A NAME="20959"> </A>The referenced variable is incremented by one. The result of the function is the 
value of the memory after the operation. The writing of the memory is 
unconditional.

<P>

<A NAME="20874"> </A><A NAME="PR_AtomicDecrement"> </A><h4>
PR_AtomicDecrement
</h4>

<A NAME="20875"> </A>Atomically decrements a 32-bit value.

<P>

<BR>
<A NAME="20876"> </A><A NAME="Syntax"> </A><h5>
Syntax
</h5>


<PRE>
<A NAME="20877"></A>#include &lt;pratom.h&gt; 
</PRE>
<P>
<PRE>
<A NAME="20878"></A>PRInt32 PR_AtomicDecrement(PRInt32 *val);
</PRE>
<P>
<BR>
<A NAME="20879"> </A><A NAME="Parameters"> </A><h5>
Parameters
</h5>


<A NAME="20880"> </A>The function has the following parameter:

<P>

<P>
<A NAME="20886"> </A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="4">
  <TR>
    <TD VALIGN=TOP>
<PRE>
<A NAME="20883"></A>val
</PRE>
<P></TD>
    <TD VALIGN=TOP>
<A NAME="20885"> </A>A pointer to the value to decrement.

<P>
</TD>
  </TR>
</TABLE>


<P>


<BR>
<A NAME="20887"> </A><A NAME="Returns"> </A><h5>
Returns
</h5>


<A NAME="20888"> </A>The function returns the decremented value (i.e., the result).

<P>

<BR>
<A NAME="20889"> </A><A NAME="Description"> </A><h5>
Description
</h5>


<A NAME="20993"> </A><CODE>PR_AtomicDecrement</CODE> first decrements the referenced variable by one. The value 
returned is the referenced variable's final value. The modification to memory is 
unconditional.

<P>

<A NAME="20892"> </A><A NAME="PR_AtomicSet"> </A><h4>
PR_AtomicSet
</h4>

<A NAME="20893"> </A>Atomically sets a 32-bit value and return its previous contents.

<P>

<BR>
<A NAME="20894"> </A><A NAME="Syntax"> </A><h5>
Syntax
</h5>


<PRE>
<A NAME="20895"></A>#include &lt;pratom.h&gt; 
</PRE>
<P>
<PRE>
<A NAME="20896"></A>PRInt32 PR_AtomicSet(<br>&nbsp;&nbsp;&nbsp;PRInt32 *val,<br>&nbsp;&nbsp;&nbsp;PRInt32 newval);
</PRE>
<P>
<BR>
<A NAME="20897"> </A><A NAME="Parameters"> </A><h5>
Parameters
</h5>


<A NAME="20898"> </A>The function has the following parameters:

<P>

<P>
<A NAME="20908"> </A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="4">
  <TR>
    <TD VALIGN=TOP>
<PRE>
<A NAME="20901"></A>val
</PRE>
<P></TD>
    <TD VALIGN=TOP>
<A NAME="20903"> </A>A pointer to the value to be set.

<P>
</TD>
  </TR>
  <TR>
    <TD VALIGN=TOP>
<PRE>
<A NAME="20905"></A>newval
</PRE>
<P></TD>
    <TD VALIGN=TOP>
<A NAME="20907"> </A>The new value to assign to the <CODE>val</CODE> parameter.

<P>
</TD>
  </TR>
</TABLE>


<P>


<BR>
<A NAME="20909"> </A><A NAME="Returns"> </A><h5>
Returns
</h5>


<A NAME="20910"> </A>The function returns the prior value of the referenced variable.

<P>

<BR>
<A NAME="20911"> </A><A NAME="Description"> </A><h5>
Description
</h5>


<A NAME="20912"> </A><CODE>PR_AtomicSet</CODE> first reads the value of var, then updates it with the supplied value. 
The returned value is the value that was read <I>before</I> memory was updated. The 
memory modification is unconditional--that is, it isn't a test and set operation.

<P>


<HR>
</BOOKCONTENT>

<FOOTERCONTENT>


            <b><a href="prntdb.html">
<FONT SIZE="2">Previous</a></FONT>&nbsp;&nbsp;&nbsp;&nbsp;</b>
<a href="index.html">
<b><FONT SIZE="2">Contents</a></FONT></b>&nbsp;&nbsp;&nbsp;&nbsp;
<a href="prinrvl.html">
<b>
<FONT SIZE="2">
Next
</a>
</FONT>
</b>&nbsp;&nbsp;&nbsp;&nbsp;
 

   <FONT SIZE="-2">
   <P ALIGN="RIGHT">Last Updated <B>May 18, 2001</B>
   </FONT>
   <BR>

</FOOTERCONTENT>

</MAINCONTENT>





<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../security/">Security Updates</a></li>
<li><a href="../../../../contact/">Contact Us</a></li>
<li><a href="../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May 18,  2001</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/nspr/reference/html/pratom.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
