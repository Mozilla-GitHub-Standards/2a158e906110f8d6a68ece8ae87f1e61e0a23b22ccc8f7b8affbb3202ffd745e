
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

<TITLE>Blackwood Project Overview</TITLE>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<P ALIGN=CENTER><B><font size="+2">Blackwood:<br>
  Integration of the Java Platform with Mozilla</font><BR></B>
</P>

<h2>Introduction</h2>
<blockquote>
      <p>The <a href="index.html">Blackwood project</a> has two primary goals:</p>
  <ol>

    <li>Integrate the Java platform with Mozilla so developers can
    extend the browser with components and plug-ins written in the
    Java programming language.  Our mission is to put Java language
    support in Mozilla on a par with JavaScript support.
    </li>

    <li>Provide a vehicle for embedding the Mozilla Gecko rendering
    engine in applications written in the Java programming language.
    </li>
  </ol>

	<p>
	  <b>Factoid:</b>The Blackwood project got its name from the
	  card game of bridge.  Blackwood is a bidding convention used
	  in bridge to signify to one's partner that the bidder has a
	  strong hand and can do extremely well.  Blackwood is a
	  bridge between the Java platform and Mozilla, we hope to do
	  a good job with Blackwood.  Blackwood, bridge...get it?
	  (hey, it could be worse: one of the other candidate names
	  for the project was &quot;Raymond Burr&quot;, as in the
	  Raymond Burr that was inserted in a seemingly random fashion
	  into the original Godzilla movie.
	</p>

	</blockquote>

      <h2>Blackwood Components</h2>
      <blockquote>

	<p>
	  Blackwood consists of five sub-projects:

	  <ul>
	    <li><a href="#OJI">OJI (Open JVM Integration)</a>

	      <li><a href="#Connect">BlackConnect</a>

		<li><a href="#JavaDOM">JavaDOM</a>

		  <li><a href="#PluginsJava">Pluglets</a>

		    <li><a href="#Webclient">Webclient</a>
	  </ul>
	  The first four of these projects were designed for extending
	  the Java programming language's reach within the Mozilla web
	  browser.  The last project, Webclient, was designed instead
	  to embed the Mozilla &quot;Gecko&quot; rendering engine
	  inside a Java application.  In other words, most Blackwood
	  projects are for running Java code inside Mozilla; Webclient
	  is for running Mozilla code inside Java applications.
	</p>
	<p>
	  These projects are described in the following paragraphs,
	  and include links to their own web pages where appropriate.
	</p>

	<p>
	  For each Blackwood component, there are several concerns to
	  be considered during design and implementation; these links
	  point to text that describes the various concerns; another
	  link points to documents the Blackwood group at Sun used for
	  requirements gathering, design review, etc.

	  <ul>
	    <li><a href="#Concerns">Implementation Concerns</a> 
	      <ul>
		<li><a href="#Security">Security</a></li>
		<li><a href="#MemManage">Memory Management</a></li>
		<li><a href="#Concurrency">Concurrency</a></li>
	      </ul>
	    </li>
	    <li><a href="#Templates">Templates for design and analysis</a></li>
	  </ul>
	</p>

	</blockquote>


	<a name="OJI"></a>
	<h3>Open JVM Integration</h3>
      <blockquote>
	<p>
	    (OJI has its own set of web pages on the Mozilla web site,
	    at <a
		  href="http://www.mozilla.org/oji/">http://www.mozilla.org/oji/</a>.)
	    </p>
	  <p>
	    The Open JVM Integration (OJI) facility, created by
	    Mozilla engineers, was designed to let Mozilla work with
	    different Java virtual machines (JVM's). Regardless of JVM
	    vendor or version, if the virtual machine implements the
	    required Open JVM Plug-in API, it can communicate with the
	    Mozilla browser. When the browser encounters Java byte
	    code (for example, via an APPLET, OBJECT, or EMBED tag, or
	    directly via LiveConnect when JavaScript calls Java
	    methods), the browser loads the byte code into the JVM for
	    execution through the OJI API. The Open JVM Plug-in API is
	    derived from the Netscape Plug-in API and makes heavy use
	    of the Java Native Interface (JNI) to drive the JVM.
	</p>
	</blockquote>

	<a name="Connect"></a>
	<h3>BlackConnect</h3>
      <blockquote>
	  <p>
	    (BlackConnect has its own set of web pages on the Mozilla web
	    site, at <a
	    href="connect/">http://www.mozilla.org/projects/blackwood/connect/</a>,
	    complete with design, requirements analysis, API
	    documentation, etc.)
	    </p>
	  <p>
	    BlackConnect's purpose is to give Java developers the
	    ability to use Mozilla's <a href="../xpcom/">XPCOM</a>
	    component model from Java code.  There are two main use
	    cases for BlackConnect:

	    <ol>
	      <li>Developers who wish to call existing XPCOM
		components from their Java code, whether those XPCOM
		components were written in C++ or JavaScript.

		<li>Developers who wish to create new, scriptable
		  XPCOM components written in the Java programming
		  language; these Java-implemented XPCOM components
		  will be callable from C++ or JavaScript code just as
		  any other scriptable XPCOM component is callable.
	    </ol>
	  </p>
	  <p>
	    Before BlackConnect existed, XPCOM components could be
	    written in C++ and JavaScript; Mozilla's <a
	    href="../../scriptable/">XPConnect</a> technology lets
	    XPCOM components call each other, regardless of the
	    language in which the component is written.
	    BlackConnect's goal is to add Java as a suitable
	    development language for XPCOM components.
	  </p>
	  <p>
	    One additional goal of BlackConnect is to support
	    out-of-process calling of XPCOM components; in other
	    words, if the browser is running in one process but the
	    Java Virtual Machine (JVM) is running in a separate
	    process (as happens with Mozilla on the Unix platforms),
	    Java XPCOM components can communicate with Mozilla XPCOM
	    components across the process boundary.  Other possible
	    uses of the remote BlackConnect bridge include writing an
	    application to control the DOM of a separate Mozilla
	    process, possibly by accessibility software.
	  </p>
	</blockquote>

	    <a name="JavaDOM"></a>
	    <h3>JavaDOM</h3>
      <blockquote>
	  <p>
	    (JavaDOM has its own set of web pages on the Mozilla web
	    site, at <a
	    href="dom/">http://www.mozilla.org/projects/blackwood/dom/</a>.)
	    </p>
	  <p>
	    JavaDOM's goal is to give Java developers the ability to
	    gain access to and manipulate the Document Object Model
	    (DOM) of documents in the Mozilla browser.  JavaDOM is
	    usable from any Java code connected to Mozilla, whether it
	    be an applet, Pluglet (see below), Webclient (see below),
	    or Java called via LiveConnect (i.e., Java called from
	    JavaScript on a web page with no APPLET/OBJECT/EMBED tag).
	  </p>
	  <p>
	    JavaDOM has undergone several iterations of development;
	    the first iteration of the code consisted of hand-coded
	    wrappers around the old Mozilla DOM classes.  This
	    deprecated implementation is still checked into the
	    Mozilla source code repository but is no longer used or
	    maintained by the Blackwood development group.  The
	    current implementation of JavaDOM takes advantage of the
	    relatively new XPCDOM implementation in Mozilla (XPCDOM is
	    a rewrite of the Mozilla DOM objects that use the XPIDL
	    compiler and XPConnect technology, and are therefore
	    scriptable just as any other XPCOM component is).
	  </p>
	<p>
	  Access to Mozilla's content model through the Java DOM API
	  opens up a whole new world of opportunities for components
	  programed in the Java language.  But it also creates a
	  conduit that needs to be scrutinized and checked with regard
	  to security. Concurrent access to the content model is
	  another concern for which a policy is required, as the
	  layout engine assumes a single thread of control.
	</p>

	</blockquote>


	<a name="PluginsJava"></a>
	  <h3>Pluglets</h3>
      <blockquote>
	  <p>
	    (Pluglets has its own set of web pages on the Mozilla web
	    site, at <a
	    href="java-plugins/">http://www.mozilla.org/projects/blackwood/java-plugins/</a>,
	    complete with design, requirements analysis, API
	    documentation, etc.)
	    </p>
	  <p>
	    Pluglets are Netscape plug-ins written in the Java
	    programming language.  The Pluglet API was created to
	    address the prolbem of cross-platform development of
	    Netscape plugins.  Currently, Netscape plugins are
	    developed in C or C++ and ported by hand to each operating
	    system supported by the plugin vendor.  For platforms that
	    the plugin vendor does not directly support, there tends
	    to be no port of that vendor's plugin.  If, however, such
	    a plugin were written using the Java platform, such a
	    plugin would be available on any operating system platform
	    that supports the appropriate JDK.  In short, Pluglets are
	    designed to bring the "write-once, run anywhere" approach
	    to Netscape plugin development.
	  </p>
	</blockquote>


	<a name="Webclient"></a>
	  <h3>Webclient</h3>
      <blockquote>
	  <p>
	    (Webclient has its own set of web pages on the Mozilla web
	    site, at <a
	    href="webclient/">http://www.mozilla.org/projects/blackwood/webclient/</a>,
	    complete with design, requirements analysis, API
	    documentation, etc.)
	  </p>
	  <p>
	    Webclient originated as a project to extend the Java
	    platform with a generic web browser API; ideally, this API
	    would become a <code>javax.browser</code> package in the
	    Java Developer's Kit (JDK).  The idea is that Java
	    developers who wished to use browsing capabilities in
	    their applications (e.g., creating an HTML-based help
	    system for their applications) could call the Webclient
	    API's to gain browser functionality without worrying about
	    the specific browser engine being used.  Webclient code
	    would do the work of finding a web browser and translating
	    Webclient API calls into the API's provided by the browser
	    being embedded.
	  </p>
	<p>
	  Webclient's priority became to embed the Gecko rendering
	  engine in a Java application, wrapped in the Webclient
	  API's.  This remains Webclient's main priority but not its
	  only one.  Webclient has also successfully wrapped the
	  Internet Explorer HTML component, and we believe the same
	  API's can be used to embed other browser components,
	  including pure Java browsers such as the <a
	  href="http://www.windriver.com/products/html/icebrowser_ds.html">ICEStorm
	  browser</a> from <a href="http://www.windriver.com/">Wind
	  River Systems</a> and the <a
	  href="http://www.espial.com/main/page?view=p-escp_main">Escape
	  browser</a> from <a
	  href="http://www.espial.com/">Espial</a>.
	</p>
	</blockquote>

	  <h4>Supporting Work For Blackwood's Java code: Java Utility Classes</h4>
      <blockquote>
	  <p>
	    These are a collection of handy classes for developing
	    applications in Java.  Classes include Assert (to be
	    modified so as not to clash with assertions under
	    development for JDK 1.4), Log, ParameterCheck, etc.  More
	    information on the utility classes is available at <A
	    HREF="java-util/">http://www.mozilla.org/projects/blackwood/java-util/</A>.

	  </p>
	</blockquote>


<h3><a name="Concerns"></a>Implementation Concerns</h3>
<blockquote> 
  <h4><a name="Security"></a>Security</h4>
  <blockquote> 
    <p>Security concerns arise in any application that allows code to be downloaded 
      from the network and executed dynamically. This capability requires mechanisms 
      for checking where the executable originates from, whether the source is 
      trusted, and whether the user allows for foreign code to access certain 
      resources on the client. The Java platform implements a security model that 
      provides these mechanisms. The embedded application model can make direct 
      use of this security model to protect the client from malicious applets 
      and pluglets.</p>
    <p>In the native application model, Java byte code can be treated much like 
      JavaScript scripts. Thus, the same mechanisms that Mozilla uses to enforce 
      access permissions and check the trustworthiness of scripts can be applied 
      to applets and pluglets when they invoke native methods. The required interfaces 
      will be implemented as part of the OJI facility. </p>
  </blockquote>
  <h4><a name="MemManage"></a>Memory Management</h4>
  <blockquote> 
    <p>The life-cycle of native objects in the Mozilla browser is managed through 
      a reference counting protocol. Objects instantiated in a JVM, on the other 
      hand, are reclaimed by a garbage collector when they become unreachable. 
      Most of the facilities that make use of JNI will need to synchronize memory 
      management across the language boundary. Once object ownership is clearly 
      understood and specified, implementation should be straightforward, given 
      the features like weak references and finalizers that the Java platform 
      provides.</p>
  </blockquote>
  <h4><a name="Concurrency"></a>Concurrency</h4>
  <blockquote>
    <p>Concurrency is of special concern to users of the Java DOM API for Gecko. 
      Due to the single-threaded application model employed by Gecko, access to 
      the content model is not thread-safe. This is not a problem for components 
      implementing listener interfaces which are always invoked by the layout 
      engine's main thread. But it may be a problem for components like pluglets 
      and applets which want to access the document, i.e. the container in which 
      they are embedded, from another thread. Depending on the type of access 
      (read-only, read-write) and the elements addressed within the document, 
      there may or may not be a risk of interfering with another thread. Even 
      if the latter scenario is rare, the developer needs to be aware of it. The 
      Java DOM API implementation does not protect Gecko's content model from 
      concurrent access. OJI, on the other hand, will provide for thread synchronization 
      between applets, plugins and the layout engine.</p>
    <p>Other modules within Mozilla like Necko (networking and protocol handling) 
      employ multiple threads. For these modules, concurrency and compatibility 
      needs to be further examined in the context of the embedded application 
      model.</p>
  </blockquote>
  <p>&nbsp;</p>
</blockquote>
      <h3><a name="Templates"></a>Templates for design and analysis</h3>
      <blockquote> 

	We offer <A HREF="templates/">here</A> the templates used for
	Blackwood project development. <P></P>

      </blockquote> 

<HR></HR> Original Document by Matthias Spycher.  Updates by George
Drapeau and Ed Burns. <P>
Maintained by Ed Burns.




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified August 21,  2001</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/blackwood/overview.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
