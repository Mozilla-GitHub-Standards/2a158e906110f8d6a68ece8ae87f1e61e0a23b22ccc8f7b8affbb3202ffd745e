<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../images/mozilla-16.png" type="image/png">

    <title>Webclient Requirements Analysis - Webclient M3</title>
  <script src="../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">


  

  

<CODE>$Id: m3-RequirementsAnalysis.html,v 1.1 2000/06/09 01:05:38 edburns%acm.org Exp $</CODE><P></P>

    <h1>Webclient Requirements Analysis</h1>

    <h2>Table of Contents</h2>

    <OL TYPE="I">
      
      <LI> <A HREF="#Intro">Introduction</A>
      </LI>

      <LI> <A HREF="#NativeAnalysis">Native Analysis</A>

	<OL TYPE="A">

	  <LI> <A HREF="#Mozilla">Mozilla</A>
	  </LI>

	  <LI> <A HREF="#IE">Internet Explorer</A>
	  </LI>

	  <LI> <A HREF="#HotJava">HotJava Bean</A>
	  </LI>

	</OL>

      </LI>

      <LI> <A HREF="#Appendix">Appendices</A>

	<OL TYPE="A">

	  <LI> <A HREF="#TheSpec">The Requirements Specification</A>
	  </LI>
	  <LI> <A HREF="#ImplDiffs">Differences from the Current Implementation</A>
	  </LI>

	  <LI> <A HREF="#Credits">People who have worked on this document</A>
	  </LI>

	</OL>

      </LI>

      
    </OL>

<HR>

    <H2> <A NAME="Intro">Introduction</A> </H2>
    
<UL>

	The purpose of this document is to define what portion of the
	initial <A HREF="#TheSpec">requirements specification</A> for
	webclient can realistically be built by either of the following
	methods: <P></P>

	<UL>
	  
	  <LI> using existing native code browser technology
	  </LI>

	  <LI> extending existing native code browser technology
	  </LI>

	</UL><P></P>

	The audience for this document is: people who have read the <A
	HREF="#TheSpec">requirements specification</A> and are
	interested in tracking the progress of the webclient project,
	and the people who will actually be doing the implementation.
	This latter group are also the authors of this document.<P></P>
	

</UL>

<H2> <A NAME="NativeAnalysis">Native Analysis</A> </H2>

    For each of the native browser environments, this section goes
    through each of the relevant interfaces defined in the requirements
    spec and answers the following questions: <P></P>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>
      </LI>

      <LI> What is the analogous code in the native environment? <P></P>
      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>

	<A NAME="feasibility">For</A> each functional grouping within an interface, use the
      following scale to rate the feasibility of exposing this feature
      to webclient: <P></P>

	<OL>

	  <LI> No brainer: the feature is already exposed
	  </LI>

	  <LI> It's glue code: the feature exists, but isn't exposed
	  </LI>

	  <LI> Needs work: the basic infrastructure for the feature is
	  there, but some significant changes need to be made in order
	  to expose the feature.
	  </LI>

	  <LI> Redesign required: the existing architecture doesn't
	  allow for this feature to be exposed.
	  </LI>

	  <LI> Impossible: a prohibitively large amount of work is
	  required to expose the feature.
	  </LI>

	</OL> <P></P>


      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code?  Assume
      the person implementing the code is familiar with mozilla code in
      general, but is not necessarily familiar with the particular part
      of the code in which the feature must be implemented. <P></P>

      </LI>

    </OL><P></P>

    Webclient interfaces: <P></P>

<UL>

<LI>webclient.Bookmarks 
	
	<OL>

	  <LI> Adding bookmarks
	  </LI>

	  <LI> Displaying bookmarks
	  </LI>


	</OL>

</LI><P></P>

<LI>webclient.Cookies 
	
	<OL>

	  <LI> Adding/deleting cookies
	  </LI>

	  <LI> Displaying cookies
	  </LI>


	</OL>

</LI><P></P>

<LI>webclient.CurrentPage 

	<OL> 

	  <LI> Selection
	  </LI>

	  <LI> Find in Page
	  </LI>

	  <LI> Page Info and Page Source
	  </LI>

	  <LI> Get DOM
	  </LI>

	</OL>

</LI><P></P>

<LI>webclient.EventRegistration 

	<OL> 

	  <LI>Container Events
	  </LI>

	  <LI>Document Events
	  </LI>

	  <LI>Document Load Events
	  </LI>

	  <LI>DOM Events
	  </LI>

	  <LI>JavaScript Events
	  </LI>

	  <LI>Window Events
	  </LI>

	</OL>

</LI><P></P>

<LI>webclient.ExtendedEventRegistration 

	<OL> 

	  <LI> HyperLink Events
	  </LI>

	</OL>

 </LI><P></P>


<LI>webclient.History 

	<OL>

	  <LI> History Navigation
	  </LI>

	  <LI> History Display
	  </LI>

	  <LI> HistoryEntry interface
	  </LI>

	</OL>

</LI><P></P>

<LI>webclient.Navigation
</LI><P></P>

<LI>webclient.cache.NetDataCacheManager SKIP
</LI><P></P>

<LI>webclient.Preferences

	<OL>

	  <LI> Import/Export of Bookmarks and Cookies
	  </LI>

	  <LI> Proxies
	  </LI>

	  <LI> Http Headers
	  </LI>

	  <LI> Character Set
	  </LI>

	  <LI> History Expiration, etc.
	  </LI>

	  <LI> Security
	  </LI>

	</OL>


</LI><P></P>

<LI>webclient.Print SKIP
</LI><P></P>


</UL>


    <H3><A NAME="Mozilla">Mozilla</A></H3>

    <OL>

<LI>    <A HREF="#MozBookmarks">webclient.Bookmarks</A> DONE(edburns)</LI> 
<LI>    <A HREF="#MozCookies">webclient.Cookies</A> DONE(edburns)</LI> 
<LI>    <A HREF="#MozCurrentPage">webclient.CurrentPage </A> DONE(edburns)</LI>
<LI>    <a HREF="#MozEventRegistration">webclient.EventRegistration</a> DONE(anns)</LI>
<LI>    <a HREF="#MozExtendedEventRegistration">webclient.ExtendedEventRegistration</a> DONE(anns)</LI>
<LI>    <a HREF="#MozHistory">webclient.History</a> DONE(kbaker)</LI>
<LI>    <A HREF="#MozNavigation">webclient.Navigation</A> DONE(visvan)</LI>
<LI>    webclient.NetDataCacheManager SKIP</LI>
<LI>    <A HREF="#MozPreferences">webclient.Preferences</A>  DONE(frankm)</LI>
<LI>    webclient.Print SKIP</LI>

    </OL>

<TABLE BORDER="1">

<TR>

<TH COLSPAN="2"> webclient interface
</TH>

<TH> <A HREF="#feasibility">feasibility scale</A>
</TH>

<TH> time to implement
</TH>

<TH> time to prepare analysis
</TH>

<TH> implementation depends on
</TH>

<TH> implementation % complete
</TH>

<TH> owner
</TH>

</TD>
</TR>

<TR>

<TD ROWSPAN="2" ><CODE>Bookmarks</CODE>
</TD>

<TD> Add/Remove bookmarks
</TD>

<TD> 4
</TD>

<TD ROWSPAN="2"> 1 week
</TD>

<TD ROWSPAN="2"> 0.5 hours
</TD>

<TD ROWSPAN="2"> Netscape RDF impl
</TD>

<TD ROWSPAN="2"> 20 (1 of 5 methods)
</TD>

<TD ROWSPAN="2"> edburns
</TD>

</TR>

<TR>

<TD> Display bookmarks
</TD>

<TD> 4
</TD>

</TR>

<TR>

<TR>

<TD ROWSPAN="2" ><CODE>Cookies</CODE>
</TD>

<TD> Add/Remove cookies
</TD>

<TD> 4
</TD>

<TD ROWSPAN="2"> 1 week
</TD>

<TD ROWSPAN="2"> 0.5 hours
</TD>

<TD ROWSPAN="2"> Depends on Blackconnect
</TD>

<TD ROWSPAN="2"> 0
</TD>

</TR>

<TR>

<TD> Display cookies
</TD>

<TD> 4
</TD>

</TR>

<TR>

<TD ROWSPAN="5" ><CODE>CurrentPage</CODE>
</TD>

<TD> Selection manipulation
</TD>

<TD> 2
</TD>

<TD ROWSPAN="5"> 2 weeks
</TD>

<TD ROWSPAN="5"> 2 hours
</TD>

<TD ROWSPAN="4"> nsIPresShell
</TD>

<TD ROWSPAN="5"> 70 (7 of 10 methods)
</TD>

<TD ROWSPAN="5"> ashuk
</TD>

</TR>

<TR>

<TD> Find in Page
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Page Info
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Page Source
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Get DOM
</TD>

<TD> 1
</TD>

<TD> depends on JavaDOM project
</TD>

</TR>

<TR>

<TD ROWSPAN="6" ><CODE>EventRegistration</CODE>
</TD>

<TD> Container Events
</TD>

<TD> 2
</TD>

<TD ROWSPAN="6"> 3 weeks
</TD>

<TD ROWSPAN="6"> 2 hours
</TD>

<TD ROWSPAN="6"> Mozilla Observer interfaces
</TD>

<TD ROWSPAN="6"> 8 (2 of 12 methods)
</TD>

<TD ROWSPAN="6"> ashuk
</TD>

</TR>

<TR>

<TD> Document Events
</TD>

<TD> 2
</TD>

</TR>

<TR>

<TD> Document Load Events
</TD>

<TD> 2
</TD>

</TR>

<TR>

<TD> DOM Events
</TD>

<TD> 1
</TD>

</TR>

<TR>

<TD> JavaScript Events
</TD>

<TD> 3
</TD>

</TR>
<TR>

<TD> Window Events
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD ROWSPAN="1" ><CODE>ExtendedEventRegistration</CODE>
</TD>

<TD> HyperLink Events
</TD>

<TD> 1
</TD>

<TD ROWSPAN="1"> 0.5 weeks
</TD>

<TD ROWSPAN="1"> 0.25 hours
</TD>

<TD ROWSPAN="1"> -
</TD>

<TD ROWSPAN="1"> 0
</TD>

</TR>

<TD ROWSPAN="2" ><CODE>History</CODE>
</TD>

<TD> Add/Remove HistoryEntry
</TD>

<TD> 4
</TD>

<TD ROWSPAN="2"> 1 week
</TD>

<TD ROWSPAN="2"> 0.5 hours
</TD>

<TD ROWSPAN="2"> nsISessionHistory
</TD>

<TD ROWSPAN="2"> 60 (8 of 13 methods)
</TD>

</TR>

<TR>

<TD> Display HistoryEntry
</TD>

<TD> 4
</TD>

</TR>

<TR>

<TD ROWSPAN="1" ><CODE>Navigation</CODE>
</TD>

<TD> Navigation
</TD>

<TD> 1
</TD>

<TD ROWSPAN="1"> 0.2 weeks
</TD>

<TD ROWSPAN="1"> 1 hour
</TD>

<TD ROWSPAN="1"> nsIDocShell
</TD>

<TD ROWSPAN="1"> 100 (3 of 3 methods)
</TD>

<TD ROWSPAN="1"> edburns
</TD>

</TR>

<TR>

<TD ROWSPAN="8" ><CODE>Preferences</CODE>
</TD>

<TD> Import Export of bookmarks and cookies
</TD>

<TD> 4
</TD>

<TD ROWSPAN="8"> 6 weeks
</TD>

<TD ROWSPAN="8"> 2 hours
</TD>

<TD ROWSPAN="8" >-
</TD>

<TD ROWSPAN="8" >0
</TD>

</TR>

<TR>

<TD> Proxies
</TD>

<TD> 3
</TD>


</TR>

<TR>

<TD> Http headers
</TD>

<TD> 4
</TD>

</TR>

<TR>

<TD> Character Sets
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> History Expiration, etc.
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Security
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Font, color, etc
</TD>

<TD> 3
</TD>

</TR>

<TR>

<TD> Set user stylesheet
</TD>

<TD> 3
</TD>

</TR>

<TR>
<TH COLSPAN="3">Total Implementation Time:
</TH>

<TD COLSPAN="5"> 14 weeks
</TD>
</TR>

<TR>
<TH COLSPAN="3">Estimated Total Implementation Time (with padding):
</TH>

<TD COLSPAN="5"> 18 weeks
</TD>
</TR>




</TABLE>

    <H4><A NAME="MozBookmarks">webclient.Bookmarks</A></H4>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>

	0.5 hours <P></P>
      </LI>

      <LI> What is the analogous code in the native environment? <P></P>
      <CODE>mozilla\xpfe\components\bookmarks\public\nsIBookmarksService.idl</CODE>
      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>

	For adding to the bookmarks, no facility exists to insert a
	bookmark into a hierarchy structure.  This would have to be
	added.  There is api for just adding a bookmark to a list,
	however.  If we take it as it is, <B>feasibility scale: 1</B>,
	if we want to expose the hierarchy feature, <B>feasibility
	scale: 4</B> <P></P> <P></P>

	For exposing the current bookmarks to enable the embedding app
	to display the bookmarks in a custom UI, this feature doesn't
	exist.  <B>feasibility scale: 4</B> <P></P>

      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code? <P></P>

	1 week<P></P>

      </LI>

    </OL><P></P>

    <H4><A NAME="MozCurrentPage">webclient.CurrentPage</A></H4>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>

	2 hours <P></P>
      </LI>

      <LI> What is the analogous code in the native environment? <P></P>

       copy: <A
       HREF="http://lxr.mozilla.org/mozilla/source/xpfe/global/resources/content/globalOverlay.js#135">http://lxr.mozilla.org/mozilla/source/xpfe/global/resources/content/globalOverlay.js#135</A> with argument of 'cmd_copy' 
       calls <A
       HREF="http://lxr.mozilla.org/mozilla/source/rdf/content/src/nsXULCommandDispatcher.cpp#485">http://lxr.mozilla.org/mozilla/source/rdf/content/src/nsXULCommandDispatcher.cpp#485</A>
       <BR></BR>

	find: <A HREF="http://lxr.mozilla.org/mozilla/source/xpfe/components/search/resources/find.js#7">http://lxr.mozilla.org/mozilla/source/xpfe/components/search/resources/find.js#7</A> <BR></BR>


	page info <A HREF="http://lxr.mozilla.org/mozilla/source/xpfe/browser/resources/content/nsContextMenu.js#241">http://lxr.mozilla.org/mozilla/source/xpfe/browser/resources/content/nsContextMenu.js#241</A> <BR></BR>

	page source <A HREF="http://lxr.mozilla.org/mozilla/source/xpfe/browser/resources/content/navigator.js#951">http://lxr.mozilla.org/mozilla/source/xpfe/browser/resources/content/navigator.js#951</A><BR></BR>


      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>

	<OL> 

	  <LI> Selection <B>feasibility scale: 2</B> <P></P> 

	    Selection manipulation commands are currently initiatiated
	    through XUL, which means they are accessible to javascript,
	    which means they are accessible through XPCOM. <P></P>

	  </LI>

	  <LI> Find in Page <B>feasibility scale: 3</B> <P></P>

	    Not as straightforward as you might think.  Currently there
	    is no simple find api that takes the argument string and
	    parameters as we've specified in the webclient.CurrentPage
	    api. <P></P>


	  </LI>

	  <LI> Page Info <B>feasibility scale: 3</B> <P></P>

	    Will be available from XUL, but not implemented yet.  <P></P>
	  </LI>

	  <LI> Page Source <B>feasibility scale: 3</B> <P></P>

	    Similar to Find in Page, the java script code does some
	    nonsense to get the view source window to come up.  We'll
	    have to do some extra work to get the page source as a byte
	    array.

	  </LI>

	  <LI> Get DOM <B>feasibility scale: 1</B> <P></P>

	    Getting access to the DOM is taken care of by an external
	    blackwood project. <P></P>
	  </LI>

	</OL>


      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code? <P></P>

	2 weeks<P></P>

      </LI>

    </OL><P></P>

<h4>
<a NAME="MozEventRegistration">webclient.EventRegistration</a></h4>

<ol>
<li>
How long did it take to prepare the analysis for this section?</li>

<br>2 hours
<li>
What is the analogous code in the native environment?&nbsp;<br>
<tt>/webshell/public/nsIDocumentLoaderObserver</tt>, <tt>/layout/base/public/nsIDocumentObserver, nsILinkHandler, 
/network/public/nsIStreamObserver</tt> (not sure if this interface will
go away, it has some redundant APIs). After the webshell redesign, the major consolidated interfaces will be nsIDocShell, nsIWebBrowser, nsIProgressListener, </li>

<li>
What modifications or workarounds need to be made in order to use the native
code for the current functional grouping within an interface?</li>

<ol>
<li>
Container Events: The only event in mind is the FocusAvailable() event,
which is in nsIWebShell <b>feasibility scale: 2</b></li>

<li>
Document Events: These exist in nsIDocumentObserver. It is unclear in what form this will exist after the webshell redesign. <b>feasibility scale:
2;</b></li>

<li>
Document Load Events: These exist in nsIDocumentLoaderObserver
. A wrapper for nsIDocumentLoaderObserver has been implemented
in
<tt>/java/webclient/src/DocumentObserver</tt> However, nsIDocumentLoaderObserver is supposed to be replaced by nsIProgressListener. <b>feasibility scale: 1-2</b></li>

<li>
DOM Events: The JavaDOMEvent API will exist. As of Oct 20 1999, Igor Nekrestyanov
&lt;nis@sparc.spb.su> is working on it. <b>feasibility scale: 1</b></li>

<li>
JavaScript Events: events such as mouse_over, drag, etc are going to be
exposed as DOMEvents. See <tt>/layout/events/src/nsDOMEvent</tt> However, the event notifications for the other events such as OnChange, OnBlur, etc have not been located yet. <b>feasibility
scale: 3</b></li>

<li>
Window Events [ED: I'm not sure what Window Events you mean here] <b>feasibility scale: x</b></li>

<br>&nbsp;
<p>&nbsp;
<br>&nbsp;
<br>&nbsp;</ol>

<li>
What is a rough estimate of how many person-weeks it will take to implement
this webclient interface in native code?</li>

<br>3 weeks
<br>&nbsp;</ol>

<h4>
<a NAME="MozExtendedEventRegistration">webclient.ExtendedEventRegistration</a></h4>

<ol>
<li>
How long did it take to prepare the analysis for this section?</li>

<br>.25 hours
<li>
What is the analogous code in the native environment?</li>
JavaDOMEvent handling.
<li>
What modifications or workarounds need to be made in order to use the native
code for the current functional grouping within an interface?</li>

<ol>
<li>
HyperLink Events events such as mouse_over, drag, etc are going to be exposed
as DOMEvents. See <tt>/layout/events/src/nsDOMEvent. </tt>Since DOM&nbsp;Events
are being exposed by Igor N, this should be no problem<tt> </tt><b>feasibility
scale: 1</b></li>

<br>&nbsp;
<p>&nbsp;
<br>&nbsp;
<br>&nbsp;</ol>

<li>
What is a rough estimate of how many person-weeks it will take to implement
this webclient interface in native code?</li>

<br>&lt;.5 week
<br>&nbsp;</ol>

    <H4><A NAME="MozHistory">webclient.History</A></H4>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>

	0.5 hours <P></P>
      </LI>

      <LI> What is the analogous code in the native environment? <P></P>

	<CODE><PRE>
mozilla/source/webshell/src/nsWebShell.cpp
    Back()
    CanBack()
    Forward()
    CanForward()
    GetHistoryIndex()
    GoTo()
    GetHistoryLength()
    GetURL()
    GetSessionHistory()
    SetSessionHistory()
mozilla/source/xpfe/appshell/src/nsSessionHistory.cpp
    GetTitleForIndex()
    NS_NewSessionHistory()

	</PRE></CODE><P></P>

      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>

	Most of the methods can be implemented simply by calling methods
	in nsWebShell.cpp.  These include: back(), canBack(), forward(),
	canForward(), getHistoryIndex(), setHistoryIndex(),
	getHistoryLength(), and getURL().  Most of the remaining methods
	can be defined in terms of using the simple methods.  These
	include: getBackList(), getForwardList(), getHistory(), and
	getHistoryIndex().  <B>Feasibility scale: 1</B>. <P></P>

	The method clearHistory() may not be easily implemented unless
	we can find out if it is OK to delete the webShell's
	nsSessionHistory and replace it with a new one by calling
	NS_NewSessionHistory() and setting the WebShell's session
	history by calling SetSessionHistory().  <B>Feasibility scale:
	3</B>. <P></P>

	A definition for the class webclient.HistoryEntry needs to be
	defined and should include at least the following: URL, Title,
	the index for the HistoryEntry, statistics for last time
	visited, and number of times visited.  Suggestions for other
	fields are welcome.  <B>Feasibility scale: 3</B>. <P></P>


	Note that many of these methods return results, and since they
	are likely to be called from an event thread (back() and
	forward()), the event thread will lock until the operation is
	complete.  We may want to change the interface to allow this to
	be decoupled.  Suggestions? <P></P>





      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code? <P></P>

	1 week<P></P>

      </LI>

    </OL><P></P>

<H4><A NAME="MozNavigation">webclient.Navigation</A></H4>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>

        1 hour <P></P>
      </LI>

      <LI> What is the analogous code in the native environment? <P></P>
      mozilla/webshell/public/nsIWebShell.h <P></P>
      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>
        All the methods are exposed in the native code. For the methods loadURL and stop, no modifications should be necessary.
        The refresh method's equivalent native method is <BR>
        nsWebShell::reload ( nsLoadFlags aType ) <BR>
        where aType is a constant with the following possible values <BR>
        nsISessionHistory::LOAD_HISTORY <BR>
        nsIChannel::LOAD_NORMAL <BR>
        nsIChannel::LOAD_BACKGROUND <BR>
        ( These were the only values I could find. Hope I covered everything. ) <BR>
        So refresh method has to be changed so that it takes a static int as a parameter. 

        <B>feasibility scale: 1</B> <P></P>

      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code? <P></P>

        1 day<P></P>

      </LI>

    </OL><P></P>

    <H4><A NAME="MozPreferences">webclient.Preferences</A></H4>

    <OL>

      <LI> How long did it take to prepare the analysis for this
      section?<P></P>

	2 hours <P></P>
      </LI>

      <LI> What is the analogous code in the native environment? 
	<P>
	  mozilla/modules/libpref/public/nsIPrefs.idl, accessed through 
	  GetPrefs in nsIWebShell.h.  (Other APIs may be needed for specific 
	  tasks; see below.)
	</P>
      </LI>

      <LI> What modifications or workarounds need to be made in order to
      use the native code for the current functional grouping within an
      interface? <P></P>

	<OL>

	  <LI> Import/Export of Bookmarks and Cookies 
	    <B>feasibility scale: 4</B>
	    <P>
	      mozilla/modules/libpref/src/init/all.js indicates that the 
	      bookmark file is indicated by the property "browser.bookmark_location".
	      However, to add to, or read from, the current bookmarks, the API 
	      must use the RDF service to get a tree of DOM nodes denoting 
	      the bookmarks, and modify it. 	    </P>
	    <P>

	      Cookies: There is an nsICookieService defined in 
	      mozilla/extensions/cookie/nsICookieService.h.
	      It is presumably accessible 
	      through the Service Manager (or Component Manager).  However, 
	      it only allows item-by-item addition of cookies (and a method 
	      to clear all current cookies), so the API must parse the file 
	      containing cookies.
	    </P>
	    <P>
	      In both cases, we will need to prototype solutions before definitively
	      claiming that the API as it stands is or is not feasible.
	    </P>
	  </LI>

	  <LI> Proxies <B>feasibility scale: 3</B>
	    <P>
	      These are simple properties, get and set through nsIPrefs 
	      methods.  However, there is not a one-to-one correspondence 
	      between nsIPrefs and webclient.Preferences methods; instead, 
	      each get must pass a Mozilla property name to Get<i>Type</i>Pref(),
	      where <i>Type</i> is one of String, Int, or Bool.  Set methods 
	      must do something similar, after perhaps checking the result 
	      of GetPrefType to make sure the value passed in is of the 
	      expected type.
	    </P>
	  </LI>

	  <LI> Http Headers <B>feasibility scale: 4</B>
	    <P>
	      There seems no direct way to implement adding HTTP headers, 
	      except to insert headers into the disk cache, or on each 
	      sent message.  It might be better to make this a separate API, 
	      since this might be a seldom-used feature, and a difficult one 
	      to implement.
	    </P>
	  </LI>

	  <LI> Character Set <B>feasibility scale: 3</B>
	    <P>
	      mozilla/modules/libpref/src/init/all.js indicates that the 
	      character set is tied to the property "intl.character_set".
	      The Java API must translate the string value to a 
	      java.lang.Character.Subset.
	    </P>
	  </LI>

	  <LI> History Expiration, etc. 
	    <B>feasibility scale: 3</B>
	    <P>
	      I can't find a mechanism that actually sets history expiration.
	      It may not be implemented yet.
	    </P>
	  </LI>

	  <LI> Security <B>feasibility scale: 3</B>
	    <P>
	      mozilla/modules/libpref/src/init/all.js lists various 
	      security-related properties, starting with "security.policy".
	    </P>
	  </LI>

	  <LI> 

	    For font, color, and style on web pages, a modification
	    could be made to
	    <CODE>mozilla\layout\html\content\src\nsHTMLFontElement.cpp</CODE>
	    that queries a preference and does the right
	    thing. <B>feasibility scale: 3</B> <P></P></LI>

	<LI> 

	    For setUserStyleSheet, we could do something with
	    nsIPresShell.h, where we look in the prefs and do the right
	    thing. <B>feasibility scale: 3</B> <P></P>

	  </LI>


	</OL>


      </LI>

      <LI> What is a rough estimate of how many person-weeks it will
      take to implement this webclient interface in native code? <P></P>

	<P>6 weeks</P>

      </LI>

    </OL><P></P>


    </OL><P></P>


<H2> <A NAME="Appendix">Appendices</A> </H2>
    
 <OL TYPE="A">
      
      
      
    <LI> <H3><A NAME="TheSpec">The Requirements Specification</A></H3>
    
    This analysis document is based on version 1.6 of the Requirements
    Specifaction.  Version 1.6 of the spec is available at <A
    HREF="../RequirementsSpec.html">http://www.mozilla.org/projects/blackwood/webclient/RequirementsSpec.html</A>.
    The latest version of the spec is available at <A
    HREF="../RequirementsSpec.html">http://www.mozilla.org/projects/blackwood/webclient/RequirementsSpec.html</A>

    </LI>
    
 </OL>

    <H3> <A NAME="Credits">People who have worked on this Document</A>	  </H3>
    
    <UL>

	  <LI> <A HREF="mailto:ed.burns@sun.com">Ed Burns</A> 
	  </LI>

	  <LI> <A HREF="mailto:anns@eng.sun.com">Ann Sunhachawee</A>
	  </LI>

	  <LI> <A HREF="mailto:frankm@eng.sun.com">Frank Mitchell</A>
	  </LI>

	  <LI> <A HREF="mailto:kbaker@eb.com">Kirk Baker</A>
	  </LI>

	  <LI> <A HREF="mailto:visvan@eng.sun.com">Jayashri Visvanathan</A>
	  </LI>

    </UL>
    

    <hr>
    <address><a href="mailto:Ed Burns <ed.burns@sun.com>">Ed Burns</a></address>
Created: Thu Oct 14 18:08:52 PDT 1999 <BR></BR>
<!-- hhmts start -->
Last modified: Wed Mar 08 11:37:23 Pacific Standard Time 2000
<!-- hhmts end -->
  



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../security/">Security Updates</a></li>
<li><a href="../../../../contact/">Contact Us</a></li>
<li><a href="../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified June  8,  2000</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/blackwood/webclient/release-notes/m3-RequirementsAnalysis.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
