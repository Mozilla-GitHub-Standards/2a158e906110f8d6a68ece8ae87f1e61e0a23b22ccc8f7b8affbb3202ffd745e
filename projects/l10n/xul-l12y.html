<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Tao Cheng">
   <meta name="GENERATOR" content="Mozilla/4.7 [en]C-AOLNSCP  (WinNT; U) [Netscape]">
   <title>Making XUL Localizable</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




&nbsp;
<center><table BORDER=0 WIDTH="100%" >
<tr>
<td></td>

<td>
<center>
<h1>
<b>Making XUL Localizable</b></h1></center>
</td>

<td></td>
</tr>

<tr>
<td></td>

<td>
<center><a href="news://news.mozilla.org/mozilla.dev.l10n">newsgroup
discussion</a>
<br><a href="mailto:dev-l10n-request@lists.mozilla.org?subject=subscribe">mailing
list</a>
<br><a href="mailto: Tao Cheng <tao@netscape.com>">Tao Cheng</a></center>
</td>

<td></td>
</tr>
</table></center>

<br>&nbsp;
<table BORDER=0 COLS=1 WIDTH="100%" >
<tr>
<td><a href="xul-styleguide.html">[l12y main page]</a></td>
</tr>

<tr>
<td></td>
</tr>
</table>

<br>&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><b>Introduction</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
In the past, UI (display) related resource descriptions are stored in *.rc
(for Windows client) or *.ad (for UNIX client) so that they can be localized
for a specific language or culture. In the new world, Mozilla 5.0, this
is not true any more. Most of the windows and dialogs in Mozilla will be
described using <a href="#refxul">XUL</a>.
<p>To make XUL stream/file localizable, several guidelines need to be adopted
and followed to make the translation work easier and less error-prone.
The discussions are devided into two sub-sections:
<ul>
<li>
<a href="#l10nres">What shall be localizable?</a></li>

<ul>
<li>
<a href="#whatwdgt">Widget resources</a></li>

<li>
<a href="#whatcntnt">Content data</a></li>

<li>
<a href="#whatstyle">Style info</a></li>

<li>
<a href="#whatlayout">Layout geometry</a></li>
</ul>

<li>
<a href="#l10nhow">How to make them localizable?</a></li>

<ul>
<li>
<a href="#howwdgt">Widget resources</a></li>

<li>
<a href="#howcntnt">Content data</a></li>

<li>
<a href="#howstyle">Style info</a></li>

<li>
<a href="#howlayout">Layout geometry</a></li>
</ul>
</ul>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><b>What shall be localizable?</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
The rule of thumb is -- "all resources that contribute to the appearance
of the chrome are localizable". Let's take a close look at them.
<ul>
<li>
<a NAME="whatwdgt"></a>Widget resources</li>

<ul>
<li>
All <b>texts</b> in the graphical user interface are localizable. Examples
include menu label strings, dialog and windows title strings, tooltip strings,
status text, etc.</li>

<li>
Localizable <b>images</b>. While some icon images in one culture are popularly
used, they might not be appropriate in other cultures. We need the ability
to customize them to fit local cultures. Note that it is the URL to the
image that we will localize instead of the image data itself.</li>

<li>
<b>URLs</b> to remote website. Examples are the URLs associated with the
"Home" toolbar button, "http://www.mozilla.org", and the "View | Set Language/Region>
| Download More".</li>
</ul>

<li>
<a NAME="whatcntnt"></a>Content data. This includes both plain text and
HTML tagged data.</li>

<li>
<a NAME="whatstyle"></a>Style information such as font, size, and color,
may need to be localized. For example, while color white is the symbol
of purity in one culture, it is a color of sorrow and sadness in another.</li>

<br><a NAME="whatlayout"></a>The geometric layout. We may (rarely we hope)
need to modify the layout. For example, some English radio buttons are
laid out horizontally, but their German version could make them too wide.
Under such circumstance, we might want to arrange them vertically.</ul>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><b>How to make them localizable?</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
In the following sections, suggestions of making XUL based user interface
localizable/customizable are presented:
<blockquote>
<li>
<a href="#howwdgt">Widget resources</a></li>

<li>
<a href="#howcntnt">Content data</a></li>

<li>
<a href="#howstyle">Style info</a></li>

<li>
<a href="#howlayout">Layout geometry</a></li>
</blockquote>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><a NAME="howwdgt"></a><b>Widget resources</b> -- text entities
and their naming convention</td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
To make a widget attribute localizable, its value string must be declared
as the value of a text entity and referenced by its entity name. See the
<a href="#l10nex1">example</a>
below for illustration. More information about the proposed solution of
XUL localizability can be found <a href="xul-l10n.html#pro1">here</a>.
<p>In addition, to increase the readability of the XUL file and make entity
names self-explanatory, a hierarchical naming scheme is proposed: The entities
to substitute attribute values of a widget shall be named after the widget
ID (or widget element names if no ID is assigned.) For example, if a command
button is named backCmd, then its label string resource shall be named
as "backCmd.label" and defined as &lt;!ENTITY backCmd.label "Back" > in
the <b>external</b> DTD. The general form is
<ol><b><font color="#000000">elementName.</font></b><i>attributeName</i></ol>
<a NAME="l10nex1"></a>See the example below for illustration.
<ul>
<li>
a XUL file:&nbsp; <a href="http://lxr.mozilla.org/mozilla/source/xpfe/components/history/resources/history.xul">mozilla/xpfe/components/history/resources/history.xul</a></li>

<ul>
<li>
Reference to external DTD:</li>

<ul>
<li>
<a href="http://lxr.mozilla.org/mozilla/source/xpfe/components/history/resources/history.xul#32">32</a>
&lt;!DOCTYPE window SYSTEM "chrome://communicator/locale/history/history.dtd"
></li>
</ul>

<li>
entity reference: <a href="http://lxr.mozilla.org/mozilla/source/xpfe/components/history/resources/history.xul#115">115</a>
: &lt;menuitem value="&amp;findHisCmd.label;" accesskey="&amp;findHisCmd.accesskey;"
/></li>
</ul>

<li>
the DTD file:&nbsp; <a href="http://lxr.mozilla.org/mozilla/source/xpfe/components/history/resources/locale/en-US/history.dtd">mozilla/xpfe/components/history/resources/locale/en-US/history.dtd</a></li>

<ul>
<li>
entity declaration: <a href="http://lxr.mozilla.org/mozilla/source/xpfe/components/history/resources/locale/en-US/history.dtd#14">14</a>
&lt;!ENTITY findHisCmd.label&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Find in History..."></li>
</ul>
</ul>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><a NAME="ent2dtd"></a><b>Moving entities to DTD</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
Entities should be externalized into DTD files (*.dtd). See example above.
If you used to declare entities within XUL files, here is a perl <a href="http://www.mozilla.org/projects/intl/ent2dtd.pl">script</a>
to move them to external DTD files for you.
<p>What you need to do is:
<ol>
<li>
Save the this perl script to move entities from the internal DTD block
to an external DTD file. The script, ent2dtd.pl, works like this:</li>

<br>&nbsp;
<p>&nbsp;
<p>Usage: ent2dtd.pl [-h] xulORrdf | directory
<ul>&nbsp;
<br>ent2dtd.pl takes one or more filenames or directories as input. arguments.
It moves entities in 'xulORrdf' into a DTD file in the same directory 'xulORrdf'
resides.
<p>If 'xulORrdf' is a XUL file, the generated DTD file will be named 'xulORrdf.dtd'.
If 'xulORrdf' is a RDF file, it will be named 'xulORrdf-rdf.dtd'. All original
files are renamed as 'xulORrdf.org' and 'xulORrdf-rdf.org' respectively.
<p>ent2dtd.pl enters a given directory and its sub-directories to process
all *.xul and *.rdf files encountered.</ul>

<p><br>Options:
<ul>-h Print help (this message)
<br>-p package_name use package_name in composing the system id. the default
is 'l10n'.</ul>

<p><br>Note:
<ol>Please do not run the script on a processed file!</ol>

<li>
Assuming the target XUL file is navigator.xul, the script will move all
entities into navigator.dtd and assign "chrome://l10n/locale/navigator.dtd"
as the system id to this DTD file. You will need to replace the "l10n"
part to your package name.</li>

<li>
Modify your makefile (config) to 'install' navigator.dtd into chrome/navigator/locale/en-US/.</li>

<li>
Test your changes and check them (including the *.dtd) in.</li>
</ol>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><a NAME="howcntnt"></a><b>Content data</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
Content data, either in plain text or HTML/XML tagged, need to be declared
as general entities in the external DTD and referenced in XUL stream.
<p>In addition,&nbsp; recommendation of grouping content data and HTML
tagged data is provided below.
<ul>
<li>
Content containing markups shall be separated from plain text data. Localizing
plain text is much easier (and cheaper) than localizing markup tagged data.
See the example for illustrations.
<a href="#l10nex2">See the example for
illustrations.</a></li>

<li>
Content text forming a complete sentence shall be declared in one single
entity. We try to avoid placing markups in entity declaration; but the
rule, "forming a complete sentence", takes precedence when there is a conflict.
Translating broken sentences is not only painful but also error-prone.
Here are examples of HTML tagged data which shall be declared as one entity:</li>

<br>&nbsp;
<ul>
<li>
A list item (as opposed to the whole list.)</li>

<li>
A table cell (as opposed to the whole table.)</li>

<li>
A paragraph (as opposed to the whole chapter).</li>

<li>
And many others (such as framesets...).</li>
</ul>

<ul>&nbsp;
<br><b><i>Example:</i></b>
<p><u>A sample HTML tagged content data:</u>
<p><a NAME="l10nex2"></a>&lt;html:i>This document is modified but not saved.
You will have choices about what to do with it:&lt;/html:i>
<br>&lt;html:ul>
<br>&lt;html:li>Save it and exit.&lt;/html:li>
<br>&lt;html:li>Save it but do not exit.&lt;/html:li>
<br>&lt;html:li>Exit without saving it&lt;/html:li>
<br>&lt;html:li>&lt;html:b>Don't&lt;/html:b> exit.&lt;/html:li>
<br>&lt;/html:ul>
<p><u>Entities to be declared for the document:</u>
<p>&lt;!ENTITY prompt&nbsp; "This document is modified but not saved. You
will have choices about what to do with it:" >
<br>&lt;!ENTITY saveNexit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Save it and exit." >
<br>&lt;!ENTITY saveNotExit&nbsp;&nbsp;&nbsp;&nbsp; "Save it but do not
exit." >
<br>&lt;!ENTITY exit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Exit without saving it" >
<br>&lt;!ENTITY dontExit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"&lt;html:b>Don't&lt;/html:b> exit." >
<p><u>The XUL will be sent to the parser</u>
<br>&lt;html:i> &amp;prompt; &lt;/html:i>
<br>&lt;html:ul>
<br>&lt;html:li>&amp;saveNexit;&lt;/html:li>
<br>&lt;html:li>&amp;saveNotExit;&lt;/html:li>
<br>&lt;html:li>&amp;saveNotExit;&lt;/html:li>
<br>&lt;html:li>&amp;exit;&lt;/html:li>
<br>&lt;html:li>&amp;dontExit;&lt;/html:li>
<br>&lt;/html:ul>
<br>&nbsp;</ul>
Note that we try to avoid including markups in entity values unless the
markups are within a complete sentence. The rule of thumb is <b>use your
judgment.</b></ul>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><a NAME="howstyle"></a><b>Style information</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
Style information shall be described in style sheets such as Cascade Style
Sheet, (CSS ), XSL (if supported in the future), etc... Any UI preferences
in the XUL must be localizable. References to style sheets must be in chrome
URLs.
<p>As of now, "<a href="http://lxr.mozilla.org/mozilla/source/xpfe/global/resources/locale/en-US/intl.css">chrome://global/skin/intl.css</a>"
is used to control general font settings in Mozilla,
<br>&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%" BGCOLOR="#FFFFCC" >
<tr VALIGN=TOP>
<td VALIGN=TOP><a NAME="howlayout"></a><b>Layout Geometry</b></td>
</tr>

<caption ALIGN=BOTTOM>&nbsp;</caption>
</table>
Layout shall be described in stylesheet, currently, the Cascade style Sheet
(CSS).



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified August  2,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/l10n/xul-l12y.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
