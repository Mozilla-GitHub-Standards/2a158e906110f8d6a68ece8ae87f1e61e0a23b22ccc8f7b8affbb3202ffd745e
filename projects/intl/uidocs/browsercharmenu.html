<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.71 [en] (Win98; I) [Netscape]">
   <meta name="Author" content="Katsuhilo Momoi">
   <title>International Browser Character Coding Menu UI/UE Specifications</title>
<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">





<center>
<h2>
Seamonkey Browser Character Coding Menu UE Specifications</h2></center>

<center>Version 1.3</center>

<p>Written by: <a href="mailto:%20momoi@netscape.com">Katsuhiko Momoi</a>
<br>Last Update: 11/29/99
<br>Discussants: <a href="mailto:bobj@netscape.com">Bob Jung</a>, <a href="mailto:momoi@netscape.com">Kat
Momoi</a>, <a href="mailto:erik@netscape.com">Erik van der Poel,</a> <a href="mailto:cata@netscape.com">Catalin
Rotaru</a>, <a href="mailto:ftang@netscape.com">Frank Tang</a>, <a href="mailto:mkaply@us.ibm.com">Michael
Kaply</a>.
<br>Thanks to earlier comments &amp; suggestions&nbsp; by <a href="mailto:tague@netscape.com">Tague
Griffith</a> &amp; <a href="mailto:brade@netscape.com">Kathy Brade</a>.
<br>Comments &amp; Suggestions to: Mail: <a href="mailto:mozilla-i18n@mozilla.org">mozilla-i18n@mozilla.org</a>,
Newsgroup: <a href="news:netscape.public.mozilla.i18n">netscape.public.mozilla.i18n</a>
<br>&nbsp;
<p><b><font color="#000000">Contents:</font></b>
<ul>
<li>
<a href="#preliminary">Preliminary Notes</a></li>

<li>
<a href="#general">Character Coding Menu: General Features and Structures</a>.</li>

<ul>
<li>
<a href="#treeview">Tree View Illustration</a></li>

<li>
<a href="#menuillustr">2-Tier Menu Illustration</a></li>
</ul>

<li>
<a href="#definitions">Semantics/Definitions of various concepts</a></li>

<li>
<a href="#todo">Future To-Do List</a></li>

<li>
<a href="#version">Version History</a></li>

<ul>
<li>
<a href="#v13">Version 1.3</a></li>

<li>
<a href="#v12">Version 1.2</a></li>
</ul>
</ul>

<p><br><a NAME="preliminary"></a><b><font color="#FF0000">Note 1: </font></b>The
following is a revision of my original document based on discussions among
the people listed above. It contains the Browser Character Coding Menu
UI proposals as well as encoding/charset-related issues and future to-do
items. The difference from the earlier versions (1.1 and 1.2) are noted
in the Version History section appended to the end of this document.
<br><b><font color="#FF0000">Note 2:</font></b> This document contains
Browser Character Coding Menu UI specifications. It is expected that Editor
and Messenger will share nearly identical menus. Details of the Character
Coding Menus for the other components will come later, however. The menu
specifications described here will supersede any other proposal contained
in earlier documents.
<br><b><font color="#FF0000">Note 3: </font></b><font color="#000000">The
names "encoding" (and "charset") will be used synonymously in this document
to refer to an individual item listed under the Character Coding Menu.</font>
<br>&nbsp;
<h3>
<a NAME="general"></a><b>(Dynamic) Character Coding Menu: General Features:</b></h3>

<ul>
<li>
<b><font color="#000000">Naming:</font></b></li>

<ul>
<li>
<font color="#000000"><b>Browser &amp; Messenger</b> &amp; <b>Editor </b>will
share the same </font><b><font color="#FF0000">View | Character Coding</font><font color="#000000">&nbsp;</font></b><font color="#000000">
menu architecture. (Other choices for names are: <b>Character Encoding</b>
and <b>Character Code</b>.)&nbsp; <b>Character Coding&nbsp;</b> had strong
support expressed in the mozilla-i18n newsgroup.</font></li>
</ul>

<li>
<b><font color="#000000">Availability of Menu:</font></b></li>

<ul>
<li>
<font color="#000000"><b>Character Coding </b>Menu will be available on
each instance of a Browser window under the <b>View section</b>. It will
also be available in each of the frames currently open under <b>View |
Frame Character Coding.</b></font></li>

<li>
<font color="#000000"><b>Character Coding</b> Menu should also be available
from a Contextual menu on all Windows which have the main <b>View | Character
Coding</b> menu and in frames contained within such windows.</font></li>

<li>
<a NAME="menucriteria"></a><b><font color="#000000">Other windows:</font></b></li>

<ul>
<li>
It is expected that Editor, Messenger and Messenger Compose windows will
have both a regular and a contextual menu available.</li>

<li>
What about other windows? Generally speaking, a Character Coding menu should
be available for use in all windows where the source data encoding is not
in Unicode as required by Mozilla, or where the output encoding must be
something other than Unicode used by Mozilla internally. See more in the
<a href="#todo">Future
To-Do section</a>.</li>
</ul>
</ul>

<li>
<b><font color="#000000">Structure of the Menu:</font></b></li>

<ul>
<li>
<font color="#000000"><b>View | Character Coding&nbsp;</b> menu has a <b>2-tier
structure </b>as illustrated below. (Note: In the Tree View Illustration,&nbsp;<b>
"-->" </b>means that it opens to another level of menu.)</font></li>

<li>
<font color="#000000">It is expected that average users will be using Tier-1
Menu mostly and that the Tier-2 Menu is targeted more towards advanced
international users.</font></li>

<li>
<font color="#000000">The Customize Preference dialogs will be available
for the items in the Tier-1 menu. It is our hope that average users will
not have to use the Preference Dialogs very often. These should be set
properly at the installation or shipping time according to the default
language choice of the user.</font></li>
</ul>
</ul>

<hr WIDTH="100%">
<br><a NAME="treeview"></a><b>Tree View Illustration:</b>
<ul><b><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
View --></font></b>
<br><b><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Character Coding -->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#3366FF">(The 1st tier)</font></b></ul>
<font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#FF0000">(Auto-Detect modules)</font><font color="#000000">&nbsp;
--</font><font color="#FF0000"> more than 1 Auto-Detect modules can be
selected to appear here via</font>
<br><font color="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Customize ... but only one can have a <b>check mark</b>.</font>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Auto-Detect (Japanese)
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font>Auto-Detect (Korean)
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
----------------------------------------- (solid line separator)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#FF0000">(Static Menu items)</font><font color="#000000">
-- </font><font color="#FF0000">no limit to how many Static encoding items
can appear here via Customize ... Pref Dialog</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Japanese (Shift_JIS)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Japanese (ISO-2022-JP)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Japanese (EUC-JP)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

</font><font color="#FF0000">(Encoding History menu items)&nbsp;</font><font color="#000000">
-- up to 5 items with recent encodings w/ most recent at top.</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Western (ISO-8859-1)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Cyrillic (KOI8-R)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Chinese Traditional (Big5)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
More ...&nbsp; - ->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><b><font color="#3366FF">(The
2nd tier)</font></b>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(The remaining encoding names listed alphabetically without separators)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Central European (ISO-8859-2)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Central European (Windows-1250)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Central European (MacCE)</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
.....</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
.....</font>
<br><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
....</font>
<br>
<hr WIDTH="100%">
<br><a NAME="menuillustr"></a><b>Menu Illustration of 2-tiers:</b>
<p><font size=+2>1st Tier Menu (View | Character Coding):</font>
<ul>&nbsp;
<table BORDER CELLSPACING=2 CELLPADDING=0 WIDTH="228" HEIGHT="62" >
<tr>
<td WIDTH="100%"><b><font size=-1>Auto-Detect (Japanese)</font></b>
<br><b><font size=-1>Auto-Detect (Korean)</font></b></td>
</tr>

<tr>
<td WIDTH="100%"><b><font color="#000000"><font size=-1>Japanese (Shift_JIS)</font></font></b>
<br><b><font color="#000000"><font size=-1>Japanese (EUC-JP)</font></font></b>
<br><b><font color="#000000"><font size=-1>Japanese (ISO-2022-JP)&nbsp;</font></font></b>
<br><b><font size=-1>Western (ISO-8859-1)</font></b>
<br><b><font size=-1>Cyrillic (KOI8-R)</font></b>
<br><b><font size=-1>Chinese Traditional (Big5)</font></b>
<div align=right><font size=-1>&nbsp; <b>More ...</b></font></div>
</td>
</tr>
</table>

<p>* There should be a <b>check mark</b> against an Auto-detection module
if the user selected one in the first section.
<br>** There must be a <b>bullet</b> next to the 'determined' encoding
of the current document.</ul>

<p><br><font size=+2>2nd Tier Menu (View | Character Coding | More ...):</font>
<p><b><font size=-1>** Alphabetical Listing without separators</font></b>
<ul>&nbsp;
<table BORDER CELLSPACING=2 CELLPADDING=0 WIDTH="213" >
<tr>
<td WIDTH="100%"><b><font size=-1>.Arabic (ISO-8859-6)</font></b>
<br><b><font size=-1>Arabic (Windows-1256)</font></b>
<br><b><font size=-1>Armenian (ARMSCII-8)</font></b>
<br><b><font color="#000000"><font size=-1>Central European (ISO-8859-2)</font></font></b>
<br><b><font color="#000000"><font size=-1>Central European (Windows-1250)</font></font></b>
<br><b><font color="#000000"><font size=-1>Central European (MacCE)</font></font></b>
<br><b><font size=-1>etc.</font></b>
<br><b><font size=-1>...</font></b>
<br><b><font size=-1>...</font></b></td>
</tr>
</table>

<p>** <b><font color="#000000">Every new window or frame</font></b> should
have a Character Coding menu consisting of&nbsp; the Tier 1 and Tier 2
menus. See below for details of these menus.</ul>

<hr WIDTH="100%">
<ul>
<ul>
<li>
<b><font color="#000000">1st Tier: View | Character Coding menu:</font></b></li>

<ul>
<li>
<font color="#000000"><b>Section 1:</b> Auto-Detection module selection.
</font><font color="#FF0000">A
<b>checkmark</b>
is placed on the module being used.</font></li>

<ul>
<li>
<font color="#000000">For the Netscape brand, there will be one Universal
auto-detect module selected (=checkmarked), i.e. </font><b>Auto-Detect
(Universal)<font color="#000000">.&nbsp;</font></b><font color="#000000">
If there is no </font><b>Auto-Detect (Universal)</b><font color="#000000">
available (e.g. Mozilla builds), then </font>we will have other modules
on this tier. The final list will depend on availability and effectiveness
of existing modules. Currently, the 2 proposed modules for Mozilla are:
<b>Auto-Detect
(Japanese) </b>and <b>Auto-Detect (Korean).</b> There must be at least
one Auto-Detection module for any version of Mozilla. It is hoped that
there will be a Universal Detector contributed from the field for the Mozilla
releases.</li>

<li>
<b>Customizing Auto-Detect modules list:</b></li>

<ul>
<li>
What appears on this 1st tier list will be customizable via a Preference
Dialog. See <a href="#customizepref">below</a> for more details.</li>

<li>
You can customize to have as many detector modules to appear on the Tier
1 menu as the user prefers but only 1 can be used/effective at a time.</li>
</ul>

<li>
<b>Module Names: </b>The currently available modules will bear the following
names.<b> </b>(<b>Note</b>:<b> </b>the "name" changes from M11.) Future
modules should follow this naming convention.</li>

<ul>
<li>
Auto-Detect (Universal)</li>

<li>
Auto-Detect (Chinese)</li>

<li>
Auto-Detect (Chinese Simplified)</li>

<li>
Auto-Detect (Chinese Traditional)</li>

<li>
Auto-Detect (East Asian) -- covers CJK</li>

<li>
Auto-Detect (Korean)</li>

<li>
Auto-Detect (Japanese)</li>

<li>
Auto-Detect (Russian)</li>

<li>
Auto-Detect (Ukrainian)</li>
</ul>
</ul>

<li>
<font color="#000000"><b>Section 2:</b> a list of the static (customizable)
encodings + 5 recent encodings used in the current Browser window.</font></li>

<ul>
<li>
<font color="#000000">There is a line separator between Section 1 and Section
2 of Tier 1 Menu.</font></li>

<li>
<font color="#000000"><b>At the top of this section</b> is a <b>list of
static/favorite encodings</b>. L10n will customize what encodings should
be there for different markets. For the US market, the default will be
<b>Western
(ISO-8859-1).</b> </font><font color="#FF0000">There must be at least one
encoding listed in this section appropriate for the default language of
the user.</font><font color="#000000"> This list should appear in any newly
opened browser window. The user can customize this list via <b>Customize
Character Coding Menu
</b>Preference dialog. (See <a href="#customizepref">below</a>
for details on the Language-related preferences.) There will be no limit
to how many static items can appear on the 1st tier. If there are more
than 1 language families chosen via the Customize Preference dialog, the
selected encodings will be listed without a separator between the families.</font></li>

<li>
<font color="#000000"><b>Next in this section</b> </font><font color="#FF0000">--
without a separator --</font><font color="#000000"> is a list of&nbsp;<b>
recent encodings (up to 5)</b> used in the current Window context. 5 is
the limit of this encoding cache.</font></li>

<ul>
<li>
<font color="#000000">The <b>encoding cache</b> on each new window or frame
will refer to one global encoding cache list. Any new window or frame will
then update this list as it acquires a new Current Encoding.</font></li>

<li>
<font color="#000000">The encoding cache list should be remembered from
session to session.</font></li>
</ul>

<li>
<font color="#000000">A <b>bullet</b> indicates that the marked encoding
is the <b>Current (Document) Encoding/Charset</b> as determined by Mozilla.
The bulleted item could be either in the <b>Static</b> menu section or
the <b>Most Recent</b> encodings section. (See below for the meaning of
<b>the
Current Encoding/Charset</b> and menu-related actions.)</font></li>
</ul>
</ul>

<li>
<b><font color="#000000">2nd Tier: The rest of available encoding items.</font></b></li>

<ul>
<li>
<b><font color="#000000">More ...:</font></b></li>

<ul>
<li>
<font color="#000000">This menu will open to a&nbsp; list of the remaining
Character encoding sorted alphabetically </font><font color="#FF0000">without
a separator between groups</font><font color="#000000">. For example, all
Japanese items will precede all Unicode items, etc. The list here will
include <b>the entire encodings set minus the Static and Most Recent items</b>.
(Note: This will include "User-Defined".)</font></li>

<li>
<font color="#000000">We will use the UI names of encodings for sorting.
Thus the encodings under the same language or encoding family will cluster
together. We have an internal document by <a href="mailto:bobj@netscape.com">Bob
Jung</a> which lists the UI names to be used for Mozilla but this is not
currently externalized to the public. However, UI names used in M11 Release
builds and later under the 6 sub-menus with names like <b>View | Character
Set: ISO</b> contain the correct UI names for encodings to be used. Until
the latter document is externalized, the reader is referred to the encoding
UI names in recent Mozilla builds.</font></li>

<li>
<font color="#000000">The menu will include dynamic additions if encoding/charset
plugins exist in the CharPlugin directory. See </font><a href="http://www.mozilla.org/projects/intl/extensibility-model.html">Cata's
extensibility model document</a><font color="#000000"> for details.</font></li>

<li>
<font color="#000000">This menu must be scrollable so that the entire list
will be visible under all platforms.</font></li>
</ul>
</ul>
</ul>

<li>
<a NAME="customizepref"></a><b>Customize ... Preference Dialogs:</b></li>

<ul>
<li>
Both Auto-Detect menu and Static/Most Recent encodings menu will be customizable
via <b>Customize ... Preference Dialogs</b>. (In an earlier proposal, these
Dialogs were also available from the menus, but they were eliminated in
version 1.2 of the proposal.)</li>

<li>
These preference dialogs allow the user to modify/customize the target
menu to add or delete items to/from the menu from/to a complete list of
encoding/detector items. The dialog window should also allow the user to
change the ranking of the target list items.</li>

<li>
The current suggestion for UI is to adopt/adapt the template used in the
"Customize" dialog window for the Browser and Messenger sidebar window.
This is a re-usable dialog and easily adaptable to our needs. See this
Mozilla Customize dialog for Sidebar window for illustration:</li>

<p><br><img SRC="customdlg.jpg" NATURALSIZEFLAG="0" height=328 width=392>
<br>&nbsp;</ul>
</ul>

<h3>
<a NAME="definitions"></a><b><font color="#000000">Semantics:</font></b></h3>

<ul>
<ul>
<li>
<font color="#000000"><b>Switching</b> a <b>View |&nbsp; Character Coding
Menu </b>selection means ...</font></li>

<ul>
<li>
<font color="#000000"><b>Load/reload</b> existing page/message assuming
the source to be in the </font><b><font color="#FF0000">chosen</font></b><font color="#000000">
encoding. We will adhere to this interpretation.</font></li>
</ul>

<li>
<font color="#000000"><b>Current Encoding/Charset</b>:</font></li>

<ul>
<li>
<font color="#000000">The Character Coding menu will always indicate what
the correct <b>Current Encoding/Charset</b> is by the use of a <b>bullet</b>.
There must be a bullet for every Character Coding menu -- there is no such
thing as a document without the Current Encoding marker. Note that in Mozilla,
we will no longer treat Auto-Detect modules as one of the encodings. This
is because we must ensure that the <b>bullet </b>designates a real encoding
-- otherwise, we lose coherence in the meaning of the Current Encoding.</font></li>

<li>
The determination of the Current Encoding/Charset will be done in the following
descending order:</li>

<ul>
<li>
HTTP Charset (from server/script)</li>

<li>
Document Meta-Charset Tag</li>

<li>
An encoding determined by an Auto-Detector (if one is selected)</li>

<li>
The last Current Encoding/Charset</li>

<li>
Fallback Encoding: (this is the first encoding of the static Character
Coding menu list) -- in case none of the above conditions are met, e.g.
when the Browser is ** first **&nbsp; opened to a blank page, or to a page
which has no charset info via HTTP protocol, Document Meta Tag or Auto-Detection.</li>
</ul>

<li>
The above algorithm <b>will not</b> be used when the users surf back to
pages already visited. We reply on cached encoding info in such cases.</li>

<li>
The <b>Current Encoding/Charset </b>can be thought of as the <b>Default
Encoding/Charset </b>when it is used as the <b>last</b> Current Encoding
in determining the <b>present</b> Current Encoding as seen in the above
algorithm. Under other circumstances, it is more useful to call the bulleted
encoding <b>Current Encoding </b>since that is what the bullet indicates,
i.e. the feedback on what Mozilla currently regards as the document encoding.
In other cases, <b>Fallback Encoding</b> described below fits the definition
of Default Encoding better.</li>
</ul>

<li>
<b>Auto-Detect modules:</b></li>

<ul>
<li>
The <b>Customize.. Preference Dialog </b>will let the user choose as many
auto-detect module names to appear on the 1st tier list but only one can
be used at a time.</li>

<li>
The current auto-detect module selection will be indicated by <b>a checkmark
</b>against
the selection. Since Auto-Detect module will apply regardless of what the
Current Encoding selection is, it is visually distinguished from the Current
Encoding which is marked by a bullet.</li>

<li>
The architecture is such that a new module can be added easily as it becomes
available. Documentation will be provided later on how to do this.</li>

<li>
<b>Universal Detection module(s):</b></li>

<ul>
<li>
If an effective <b>Universal Detection</b> module for Character Coding
is not available, we will ship with at least one Auto-Detect module on
the menu. L10n will ship with appropriate language/encoding-specific auto-detect
module(s). (See above for the current proposal.)</li>

<li>
If an <b>Universal Detection</b> module becomes available, that should
be the default for all language versions. We would still offer other language/encoding
detection modules, however, via the <b><font color="#000000">Customize
Auto-Detect ...</font> Preference Dialog</b>.</li>

<li>
Mozilla builds (as oposed to Netscape-branded builds) will have no <b>Universal
Detection </b>module -- as of this writing. This is because our current
Universal detection module plan is based on a third-party commercial product.
<font color="#FF0000">It
would be wonderful if someone in the Mozilla community can come up with
a universal detection module or two.</font></li>
</ul>

<li>
Effectiveness of each module should be determined and ineffective ones
should be eliminated from the modules list eventually.</li>
</ul>

<li>
<b>Fallback Encoding:</b></li>

<ul>
<li>
In 4.x versions of Communicator, we had the "default" or "global" encoding
set by the "Set Default Encoding" menu.</li>

<li>
In Mozilla, we no longer have this menu setting option, however, we still
have the notion of&nbsp; the <b>Fallback Encoding</b>. This is always the
<b>first
item in the Static Encoding Menu </b>section. This will be used in cases
where no encoding determination was made via HTTP charset, HHTP-Equiv meta
tag, Auto-Detection, or prior Current Encoding.</li>

<li>
It is expected that the use of Fallback Encoding will be quite limited
in Mozilla as opposed to its use in 4.x.</li>

<li>
It is expected that in the Preferences Dialog window, the Fallback Encoding
will be indicated by the wording "<b>Default</b>" next to it. See below
in <a href="#todo">Future To Do </a>section for details.</li>
</ul>

<li>
<b><font color="#000000">Charset/Encoding Override:</font></b></li>

<ul>
<li>
<font color="#000000">The user action of a menu change can also lead to
<b>overriding
the effect of encoding determination by</b> 1) HTTP Charset from server,
2) Meta-charset info in the document, 3) the result of auto-detection,
or 4) prior user selection/fallback of the encoding.</font></li>

<li>
<font color="#000000">An override will not persist if a new document is
loaded or if the current document is reloaded by <b>Super-Reloading</b>,
which will refresh the document by going to the source page again. If the
user wants to undo the overrride that has been committed, then the user
can super-reload the document.</font></li>

<li>
<font color="#000000">An override will persist if a simple reload has been
carried out.</font></li>

<li>
<b><font color="#FF0000">Open Issues:</font></b></li>

<ul>
<li>
<font color="#FF0000">Does the Charset/Encoding Override feature affect
only the top-level document, or also all frames inside the top document?</font></li>

<li>
<font color="#FF0000">Should we consider putting in a Preference item which
controls the Override behavior (suggested by Michael Kaply)? For example,
"always honor the document-specified encoding" or "use my encoding selection".</font></li>
</ul>
</ul>

<li>
<b><font color="#000000">Inheritance:</font></b></li>

<ul>
<li>
Under 4.x, when a new window is opened, the latter inherits the encoding
of the parent window and falls back to the global default only if a prior
encoding context is unavailable.</li>

<li>
Under Mozilla, a new window should always go through the determination
algorithm listed above and quoted below again. (Note: On a new blank page
which has no prior "Current Encoding", the <b>Fallback</b> encoding will
become the <b>Current Encoding</b>.)</li>

<ul>
<li>
HTTP Charset (from server/script)</li>

<li>
Document Meta-Charset Tag</li>

<li>
Auto-Detector (if one is selected)</li>

<li>
The last Current Encoding</li>

<li>
Fallback Encoding: (this is the first encoding of the static Character
Coding Menu list) -- in case none of the above conditions are met, i.e.
when the browser is ** first **&nbsp; opened to a blank page, or to a page
which has no charset info via HTTP, Document Meta Tag or Auto-Detection.</li>
</ul>
</ul>
</ul>

<li>
<b>Encoding Cache:</b></li>

<ul>
<li>
Below the Static/Favorite encodings section of Tier 1 is the list of Most
Recent encodings list.</li>

<li>
We will list here 5 most recent encodings which are not on the Static list.
The most recently used encoding will be at the top, followed by the next
recent one, etc.</li>

<li>
IE5 uses an interesting algorithm to determine to bump off an item from
this list in case the limit has been reached. For now, we will use a simple
historical approach. List the most recent at the top, the next most recent
next, etc.</li>

<li>
For each new window or frame, we will refer to one Global Encoding Cache
list and will update it as needed. This will keep our implementation simpler.
The 5 most recent encodings list will be stored in prefs.js so that the
encoding cache list will be remembered from one Browser session to the
next.</li>
</ul>

<li>
<b>Encoding Cache and Frame(s):</b></li>

<ul>
<li>
The <b>main</b> "View | Character Coding" menu will list only the Most
Recent encoding cache list of the Main Browser window when the focus is
on the Main window. This menu will toggle to become "View | Frame Character
Coding" menu when the focus is on a frame.</li>

<li>
For any frame or window, the Static list + Most Recent encodings list can
be also obtained via the Contextual menu. (= We need to have the Character
Coding menu in the Contextual menu list.)</li>

<li>
There is no need to maintain separate encoding cache lists for the Main
window and any frames or new windows. The Most Recent list for a frame,
for example, can be created as follows:</li>

<ul>
<li>
The new frame or window should refer to the Global Encoding Cache list
created when the current session has begun. The idea is to add the most
recent one to that list (and bump one off from it if necessary) in creating
the Most Recent Encodings menu list for the new window or frame.</li>
</ul>

<li>
The "View | Page Info" will list the encoding info of the Main window when
that window is in focus. "View | Frame Info" menu will be usable (via toggle)
when the focus is in a frame and will display the encoding of the frame.
The Page/Frame Info will also be available via a Contextual menu.</li>
</ul>
</ul>

<h2>
<a NAME="todo"></a>To Do List for future:</h2>

<ul>
<li>
<b>Availability of Character Coding menus in other windows:</b></li>

<ul>
<li>
<font color="#FF0000"><b>Open issue:</b> </font>In windows other than Browser,
Messenger, Composer and Message Compose windows, we might simply offer
a contextual menu if such a menu is needed by the criteria stated <a href="#menucriteria">above</a>.</li>
</ul>

<li>
<b>Encoding/Charset Cache</b></li>

<ul>
<li>
We need to cache the encoding info of a document.</li>

<ul>
<li>
5 should be enough for the menu display of most recent encodings used.</li>

<li>
Encoding Cache will be used also for simple Reloading and Page info. We
need the cache info for surfing back to prior pages. But for remembering
the encodings of the pages visited, 5 is clearly not enough. How long a
cache list do we need? How about the entire current session?</li>

<li>
We also need to remember to refresh the encoding cache as we go back to
the pages visited.</li>

<li>
Super-reloading (Shift/Opt + Reload) should refresh the cached info and
go back to the source document.</li>

<li>
<b><font color="#FF0000">Open issue: </font></b>Should the Browser, Messenger
and Composer use the same Encoding Cache list or should there be a separate
one for each major Window category. Character encodings used in Messenger
can be different from the ones used in Browser. Thus, there is some argument
for keeping them separate.</li>

<li>
History cache may already include encoding info of documents -- may want
to check what the current status is. (waterson?)</li>
</ul>
</ul>

<li>
<b>Customize .. Character Coding Menu dialog:</b></li>

<ul>
<li>
We should exclude certain encoding items from the list in <b>Customize...
Character Coding Dialog. </b>These would be encodings such as T.61-8bit,
Modified-UTF7-Imap, etc. which may only confuse average users and generally
of no use to them. Cf. <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=15867">Bug
15867</a>.</li>

<ul>
<li>
One way to automatically pick out such encoding names which are used only
internally in Mozilla is to affix a prefix such as "ig-" in front of the
encodings, e.g. ig-T.61-8bit.&nbsp; ("ig" stands for "ignore".)</li>
</ul>

<li>
Rather than forcing the user to choose from the entire list of encoding
names for the Static Menu list, we should offer just the language or group
names. For example, choosing Japanese should add the 3 encodings. Then,
the user can further customize this Static list by deleting items or re-arranging
the order.</li>

<li>
The <b>Customize...</b> <b>Dialogs</b> for Auto-Detect and Character Coding
Menu should be grouped with other language-related preference dialogs .
Language preferences should provide for the items listed below, and we
should consider having these items grouped under <b>Navigator | Languages</b>
or under
<b>Languages | </b>as follows:</li>

<ul>
<li>
<b>Navigator:</b></li>

<ul>
<li>
<b>Languages:</b></li>

<ul>
<li>
Accept Language Dialog</li>

<li>
Auto-Detect Module Dialog</li>

<li>
Static Encoding Menu Dialog</li>

<li>
and possibly others</li>
</ul>
</ul>
</ul>

<li>
The Customize... Dialog should provide HELP info to guide the user through
the selection process. We should assist the TechWriting group by providing
appropriate dialog information.</li>
</ul>

<li>
<b>Option to put the Character Coding menu icon on the Main Tool Bar:</b></li>

<ul>
<li>
We might want to have a Preference option to put the Character Coding menu
icon on the Main Tool Bar.</li>
</ul>

<li>
<b>The More... Encoding/Charset listing: 2nd tier list</b></li>

<ul>
<li>
Our current decision is that the More .. menu will not be customizable
via the Preferences. However, I will note here that some people have suggested
that we offer some way to customize this menu via a Preference Dialog..
A number of people have suggested that the rest of the menu is of no use
to many users and we should not force them to even look at it. Such arguments
point out that the fact that the menu is scrollable should not be a license
to create endless list of items.</li>

<ul>
<li>
One possibility is to create a pref option to not to display the <b>More...
Menu</b>.</li>

<li>
Another possibility is to let the user customize this menu via a Preference
Dialog.</li>
</ul>

<li>
The <b>More... menu</b> really should <b>columnize</b> rather than simply
scroll.</li>
</ul>

<li>
The <b>User-Defined</b> menu item will simply be a pass-through encoding.
We need to accommodate this by the use of Unicode PUA -- Bug <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=6588">6588</a>.</li>

<li>
<b>Fallback Encoding:</b></li>

<ul>
<li>
This is the first item in the Static Menu list. We should add a wording
<b>(Default)</b><font color="#FF0000">automatically
after the first item</font> in the
<b>Customize...</b> Preferences Dialog
list of encodings. (For example, in 4.x we do something similar for the
default IMAP server when there are more than 1 IMAP servers selected in
the Server Preferences.)</li>
</ul>

<li>
<b>When the Current Encoding does not accurately reflect the real encoding:
</b>It
is quite possible that on some documents which have no encoding information
via HTTP protocol or document charset tag, we may end up using the prior
Current Encoding or the Fallback Encoding as the Current Encoding. Under
such conditions, a mismatch can easily occur. For example, when the Current
Encoding is marked as Japanese (Shift_JIS) by a bullet, the real encoding
may be ASCII. One key in such cases may lie in improving auto-detection
routines. Another possible way to alleviate such a problem is to have a
font selection routine which assigns a Western font rather than the one
selected for Japanese if the document does not have anything but ASCII
characters.</li>
</ul>

<p><br><a NAME="version"></a><font size=+1>Version History:</font>
<p><a NAME="v13"></a><b>Version 1.3:</b>
<ul>
<li>
<font size=-1>Added <b>Table of Contents</b>.</font></li>

<li>
<font size=-1>Made a number of editorial changes to make the document more
understandable to those not used to Netscape-internal discussions.</font></li>

<li>
<font size=-1><b>Terminology uses: </b>have been unified to <b>Character
Coding</b> as the menu name and <b>encoding</b> (and sometimes
<b>charset</b>)
referring to each menu item or the coding scheme it represents.</font></li>

<li>
<font size=-1>Clarified where generally a <b>Character Coding Menu</b>
should be available in Mozilla.</font></li>

<li>
<font size=-1>Added a statement about the<b> importance of the Tier-1 menu</b>
and its relationship to the Customize Preference from the user's point
of view.</font></li>

<li>
<font size=-1>Clarified issues relating to <b>Univesral Auto-Detection
modules</b> for Netscape-branded vs. Mozilla releases.</font></li>

<li>
<font size=-1><b>Static Encoding list: </b>Added a statement that<b> </b>it
must contain at least one item. There cannot be an empty static list.</font></li>

<li>
<font size=-1><b>More ...&nbsp; Encoding menu:</b> added a statement that
it must be (eventually) scrollable.</font></li>

<li>
<font size=-1><b>Character encoding UI names:</b> A reference to internal
document has been removed. It will be added again when it becomes avialable
externally.</font></li>

<li>
<font size=-1>The term <b>Charset History</b> has been changed to <b>Encoding
Cache </b>to distinguish it from Browser History menu.</font></li>

<li>
<b><font size=-1>Charset/Encoding Override:</font></b></li>

<ul>
<li>
<font size=-1>Added a suggestion to create a Preference based control for
the Override behavior.</font></li>
</ul>

<li>
<b><font size=-1>Encoding Cache and Frame:</font></b></li>

<ul>
<li>
<font size=-1>Clarified that there is only one global encoding list used/updated
by all open windows or frames.</font></li>
</ul>

<li>
<b><font size=-1>Future To-Do:</font></b></li>

<ul>
<li>
<b><font size=-1>Encoding Cache:</font></b></li>

<ul>
<li>
<font size=-1>Added some items to consider for future. There may be some
complicated issues here.</font></li>
</ul>

<li>
<font size=-1><b>Fallback encoding: Made</b> explicit how to mark the default
encoding in the Preferences Dialog for Fallback encoding.</font></li>

<li>
<font size=-1><b>More ...&nbsp; Encoding menu: </b>Though currently not
in our plan, I included suggestions to offer a way to customize the More
.. Encoding menu.</font></li>

<li>
<font size=-1>Added a short section on cases when the <b>Current Encoding
does not accurately reflect the real encoding</b> of the document.</font></li>
</ul>
</ul>

<p><br><a NAME="v12"></a><b>Version 1.2:</b>
<blockquote>
<li>
<font size=-1><b>2</b> <b>Customize...</b> <b>menus</b> for Auto-Detect
modules and Character Encoding list have been <b>eliminated</b> in favor
of <b>Customize... Preference Dialogs</b>.</font></li>

<li>
<b><font size=-1>Auto-Detect modules:</font></b></li>

<blockquote>
<li>
<font size=-1>Changed the Auto-Detect modules on tier 1 list to the ones
for JPN and Korean. We will try to ship with only the Universal Detection
module if one is available. Otherwise, with the JPN and Korean modules
(for now). ** Chinese modules may be added if effectiveness becomes acceptable.</font></li>

<li>
<font size=-1>Defined the module names to be used for the Tier 1 menu.
Note the changes from M11. (We might file a bug for this.)</font></li>

<li>
<font size=-1>The checkmark and difference between a regular charset and
an Auto-Detect module name is clarified. (We treated Auto-Detect modules
as one of the charsets in 4.x.)</font></li>
</blockquote>

<li>
<b><font size=-1>Encoding Cache:</font></b></li>

<blockquote>
<li>
<font size=-1>Will be based on one global list shared by all windows and
frames during a current Browser session.</font></li>
</blockquote>

<li>
<b><font size=-1>Encoding Cache and Frame(s):</font></b></li>

<blockquote>
<li>
<font size=-1>Added toggle menu item for Mail/Frame windows for "View |
(Frame) Character Coding" menus.</font></li>

<li>
<font size=-1>Contextual menu will also be available from any window currently
under focus.</font></li>
</blockquote>

<li>
<b><font size=-1>Current Charset:</font></b></li>

<blockquote>
<li>
<font size=-1>algorithm for determining the Current Encoding/Charset has
been redefined. It now includes the "last Current Encoding/Charset" as
more important than the Fallback Encoding. The Fallback Encoding will be
used only as the last resort, i.e. upon starting the Browser for the first
time and when no encoding information is available.</font></li>

<li>
<font size=-1>Clarified that the Current Encoding algorithm applies only
to new documents/pages. In cases of going "back" over previously visited
pages, we will reply on cached encoding info.</font></li>

<li>
<font size=-1>the relationship between the term <b>Current Encoding/Charset
</b>and
the term <b>Default Encoding/Charset</b> is clarified. The latter refer
to a role played by the former under a certain context.</font></li>
</blockquote>

<li>
<font size=-1><b>Fallback Encoding</b>: Clarified what this notion is as
compared to its 4.x use.</font></li>

<li>
<b><font size=-1>Charset/Encoding Override:</font></b></li>

<blockquote>
<li>
<font size=-1>Reference to &lt;LANG> attribute has been eliminated since
Encoding/Charset Override has no effect on it.</font></li>

<li>
<font size=-1><b><font color="#FF0000">2 open issues </font></b><font color="#000000">have
been added under this category:</font></font></li>

<blockquote>
<li>
<font color="#000000"><font size=-1>Does the Charset Override feature affect
only the top-level document, or also all frames inside the top document?
(from Erik)</font></font></li>

<li>
<font color="#000000"><font size=-1>Should Override persist under Super
Reloading?</font></font></li>
</blockquote>
</blockquote>

<li>
<b><font color="#000000"><font size=-1>Future To-Do list:</font></font></b></li>

<blockquote>
<li>
<font color="#000000"><font size=-1>Clarified Encoding Cache requirements
-- simple reload vs. Super-reload.</font></font></li>

<li>
<font color="#000000"><font size=-1>Character Coding menu -- nice to have
it on the Main Tool Bar menu. (corrected from "Personal Tool Bar".)</font></font></li>

<li>
<font color="#000000"><font size=-1><b>More ..</b> Character Coding menu
--> dropped a proposal to have a <b>Customize ... </b>menu item. Changed
it to a possible Preference Dialog item.</font></font></li>

<li>
<font color="#000000"><font size=-1>Separated out the handling of "User-Defined"
as a separate To-Do task for future.</font></font></li>
</blockquote>
</blockquote>




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified November 29,  1999</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/intl/uidocs/browsercharmenu.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
