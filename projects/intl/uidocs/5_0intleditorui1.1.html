<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Katsuhilo Momoi">
   <meta name="GENERATOR" content="Mozilla/4.73 [ja] (Win98; U) [Netscape]">
   <title>International Editor UI/UE Specifications</title>
<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">





<center>
<h2>
Seamonkey Editor Character Coding Menu UE Specifications</h2></center>

<center><font size=-1>Version 1.1</font></center>

<p>Written by: <a href="mailto: momoi@netscape.com">Katsuhiko Momoi</a>
<br>Last Update: 5/25/2000
<br>** Thanks to <a href="mailto:tague@netscape.com">Tague Griffith</a>,
<a href="mailto:brade@netscape.com">Kathy
Brade</a>, <a href="mailto:bobj@netscape.com">Bobj Jung</a>, <a href="mailto:ftang@netscape.com">Frank
Tang</a>, <a href="mailto:teruko@netscape.com">Teruko Kobayashi</a>, and
<a href="mailto:cmasnke@netscape.com">Charlie Manske</a> for comments &amp;
suggestions.
<br><b>Address Comments to:</b> <a href="mailto:mozilla-i18n@mozilla.org">mozilla-i18n@mozilla.org</a>,
<a href="mailto:mozilla-editor@mozilla.org">mozilla-editor@mozilla.org</a>,
and <a href="mailto:mozilla-ui@mozilla.org">mozilla-ui@mozilla.org</a>,
or post articles at: <a href="news://news.mozilla.org/netscape.public.mozilla.i18n">netscape.public.mozilla.i18n</a>,
<a href="news://news.mozilla.org/netscape.public.mozilla.editor">netscape.public.mozilla.editor</a>,
and <a href="news://news.mozilla.org/netscape.public.mozilla.ui">netscape.public.mozilla.ui</a>.
<br>&nbsp;
<p><b><font color="#FF0000">Note:</font></b> This document contains specific
UI proposal for the Editor charset menu. The Editor charset menu UI is
nearly identical to the Browser charset menu published on the Mozilla.org
site. See: <a href="http://www.mozilla.org/projects/intl/uidocs/browsercharmenu.html">http://www.mozilla.org/projects/intl/uidocs/browsercharmenu.html</a><a href="http://www.mozilla.org/projects/intl/uidocs/browsercharmenu.html"></a>
<p>
<hr WIDTH="100%">
<br><b><font size=+1>Contents</font></b><b><font size=+1></font></b>
<p><a href="#general">Editor Charset Menu -- General features</a>
<br><a href="#saveasmenu">Save as ...</a>
<ul>
<li>
<a href="#saveasmenu">illustration of Save as ... dialog</a></li>

<li>
<a href="#saveasalt">alternate plan for Save as ... dialog</a></li>
</ul>
<a href="#menuactions">Character Coding Menu item actions</a>
<ul>
<li>
<a href="#opennewdoc">Opening a new document</a></li>

<li>
<a href="#openexistdoc">Opening an existing document into Editor</a></li>

<li>
<a href="#openviabrowser">Opening an existing document vias Browser</a></li>

<li>
<a href="#changecharset">Changing Character Coding Menu selection</a></li>

<ul>
<li>
<a href="#menustatus">Menu Status</a></li>
</ul>

<li>
<a href="#selectautodetect">Auto-Detection</a></li>
</ul>
<a href="#override">Charset Override</a>
<br><a href="#currentcharset">Current Document Charset for Editor</a>
<br><a href="#edge">Edge Cases</a>
<p>
<hr WIDTH="100%">
<br><a NAME="general"></a>
<p><b>0. Editor Charset Menu: General Features</b>
<ul>
<li>
<font color="#000000"><b>Browser &amp; Messenger</b> &amp; <b>Editor </b>share
the same <b>View | Character Coding&nbsp;</b> menu architecture. See <a href="http://www.mozilla.org/projects/intl/uidocs/browsercharmenu.html">here</a>
for the Dynamic charset menu proposal. Most of this proposal has been already
implemented in the Browser component at M14 and will be appearing in Netscape
Beta 1 also. They include the following features</font></li>

<ul>
<li>
Auot-Detector list</li>

<li>
Static encodings list</li>

<ul>
<li>
Customize dialog</li>
</ul>

<li>
Cached encoding list (most recently used 5)</li>

<li>
Dynamic menu (the remainder -- what is not on the static section)</li>
</ul>

<li>
<b><font color="#000000">Semantics:</font></b></li>

<ul>
<li>
<font color="#000000">Switching a <b>View | Character Coding</b> menu item
means ..</font></li>

<ul>
<li>
<font color="#000000">Load/reload existing page/message assuming the source
to be in the </font><font color="#FF0000">chosen</font><font color="#000000">
character encoding. We will adhere to this interpretation as much as possible.
(Cf. See <a href="#override">below</a> for the notion of&nbsp; <b>"Charset
Override"</b>.)</font></li>

<li>
<font color="#000000">In 4.x, this menu was also used to convert source
document into another charset under certain conditions. This function will
be borne by the "Save as..." menu in Mozilla.</font></li>
</ul>
</ul>
</ul>
<a NAME="saveasmenu"></a><b><font color="#000000"></font></b>
<p><b><font color="#000000">00. Browser/Editor/Messenger/Mail Editor: "Save
as..." menu:</font></b>
<ul>
<li>
<font color="#000000"><b>Save as ... menu:</b> These windows will have
Save as ... menu. (This is something similar to a widget provided on Windows
2000 but will have to be cross-platform for Mozilla. See <a href="#saveasdialog">illustration
below</a>.)</font></li>

<ul>
<li>
<font color="#000000">When this menu is engaged, a window will pop up to
prompt you to name a file w/ the default name suggested. </font><font color="#FF0000">There
will also be a character set list to choose from. The default suggested
will be the current document's charset. The list is the same list as the
regular charset menu.</font></li>
</ul>

<ul>
<ul>
<li>
<font color="#000000">HTML save as... : the default will be the current
document charset. The user can change the charset selection via the Save
as Character code combo box selections. --> (Note: </font><font color="#FF0000">We
will not warn the user of unreasonable conversion.&nbsp; </font><font color="#000000">(e.g.
Japanese document into ISO-8859-1.))</font></li>

<li>
<font color="#000000">Plain Text save as ...: Under normal conditions,
the locale default charset will be suggested to save the document for each
language group. I18n provides an API for determining default charset for
each language group under a specific locale. (e.g. EUC-JP if the browser
page is in Shift_JIS and the platform is Unix EUC locale.)&nbsp;&nbsp;
If the menu chosen charset is not in the family of charsets which match
the current OS locale, then we will honor the user's menu choice. In cases
where the user has explicitly changes to one of the other charsets, that
charset will be used to save the document.</font></li>
</ul>
</ul>
<a NAME="saveasalt"></a>
<br><b><font color="#000000"></font></b>&nbsp;
<ul>
<li>
<font color="#000000"><b>Note: </b>In case creating our own cross-platform
widget for Save as turns out to be too difficult for Beta 2, we might consider
the following alternative:</font></li>

<ul>
<li>
<font color="#000000">Instead of a single Save as .. dialog, we will split
this into 2 menus:</font></li>

<ul>
<li>
1. <b>Save as ...&nbsp;</b>&nbsp;&nbsp;&nbsp; (Normal one which only saves
into the current charset of the document)</li>

<li>
2. <b>Save/convert encoding</b> (Brings up XPApps widget with charset selection
combobox)</li>
</ul>

<li>
The spec for the <b>Save/convert encoding </b>menu would be as follows:</li>

<ul>
<li>
For HTML file save as: we offer all charsets in combobox.</li>

<li>
For .txt save as: offer only the current charset, UTF-8, escaped Unicode
and UCS-2.</li>

<li>
When you click OK after doing HTML or .txt save, we then offer the 1st
<b>Save
as ...&nbsp;</b> dialog box.</li>
</ul>

<li>
One advantage of having two menus instead of one is that only users who
need to convert document encoding have to engage the 2nd menu. Most users
will simply select the first one without the encoding conversion option.</li>
</ul>
</ul>

<li>
<font color="#000000"><b>Charset Override:</b> "Save as .." action under
certain conditions could lead to changing the existing Meta charset tag
if it replaces the current document. This amounts to a Charset Override
as discussed below.</font></li>

<li>
<font color="#000000"><b>Charset Tag normalization: </b>We might offer
an option to correct a non-standard or alias charset name into the standard
one via a dialog at "Save as..." time.</font></li>

<li>
<font color="#000000"><b>Save menu</b>: These Windows will also have Save
menu. Engaging this menu will save page/message using the current document
Character Encoding.</font></li>

<li>
<font color="#000000"><b>Meta HTTP-Equiv Charset tag:</b> every saving
action will create an appropriate meta charset tag or there must be a pre-existing
valid meta charset tag in the document which does not conflict with the
current document charset.</font></li>
</ul>
<a NAME="saveasdialog"></a><b><font color="#000000"></font></b>
<p><b><font color="#000000">Illustration of "File | Save as ..." charset
combo box from Windows 2000:</font></b>
<p><img SRC="saveasdlg.jpg" height=383 width=435>
<br>&nbsp;
<br>&nbsp;
<p><a NAME="menuactions"></a>
<h2>
<b>Meaning of Character Coding menu related actions:</b></h2>

<p><br><a NAME="opennewdoc"></a><b></b>
<p><b>1. Opening a new document:</b>
<ul>
<li>
A new document will open with the Character Encoding set to the current
default determined by the user's default language. The default encoding
is discussed in the Browser document under a section called "Fallback Encoding".
A UI proposal will be forthcoming for this <b>prefs.js</b> item, <b>intl.charset.default</b>.</li>
</ul>
<a NAME="openexistdoc"></a><b></b>
<p><b>2. Opening an existing document directly into Editor:</b>
<ul>
<li>
An existing document with a document Meta HTTP-Equiv charset tag will open
with the specified value in the document</li>

<li>
An existing document with HTTP charset information will open with the specified
value obtained from the sever</li>

<li>
An existing document with both HTTP and document Meta HTTP-Equiv charset
info will open with the HTTP value obtained from the server. (i.e. If the
2 values are not identical, the HTTP value will predominate.)</li>

<li>
An existing document with neither the HTTP nor Document Meta HTTP-Equiv
charset information will open with the Current Default Charset as specified
in the Preferences.</li>

<ul>
<li>
If the user has selected an auto-charset detection module, it will determine
the document charset unless it fails to detect the charset. In such a case,
the user's menu charset choice will be chosen.</li>
</ul>

<li>
If an existing document has an unknown or incorrect Meta-charset tag: (This
does not include the case where the document bears an alias of a valid
charset name.)</li>

<ul>
<li>
We will present a dialog: "Editor does not recognize 'ISO-8849-1' as a
valid charset. This document will open in your default charset: Shift_JIS.
Please correct the error with the <b>Reload in Character Encoding</b> menu."</li>
</ul>
</ul>
<a NAME="openviabrowser"></a><b></b>
<p><b>3. Opening an existing document via Browser's "Edit" menu:</b>
<ul>
<li>
An existing document will open with the Current Document Charset as determined
by Browser.</li>

<li>
In reality, the Character Encoding values here would be nearly identical
to the cases in 2 above.</li>
</ul>
<a NAME="changecharset"></a><b><font color="#000000"></font></b>
<p><b><font color="#000000">4. Changing Charset/Character Coding selection:</font></b>
<p><b><font color="#FF0000">Note: We&nbsp; will gray out the Charset menu
in all cases where an action&nbsp; is equivalent to "Save as..".&nbsp;
(An alternative option -- not adopted currently - is to force saving at
that point with an appropriate dialog.) In all such "grayed-out" cases,
we might consider activating the menu if the input has been "undone".</font></b>
<p><b><font color="#000000">Two general principles are as follows:</font></b>
<ul>
<li>
<font color="#000000">The charset menu will be <b>disabled</b> in all cases
in the Editor except when the document is <b>not dirty</b> (i.e. just saved,
just opened, or just reloaded -- with no further input).</font></li>

<li>
<font color="#000000">When the charset menu is <b>enabled</b> in the editor,
selecting one of the charsets in the menu will cause the editor to reload
the current document assuming the newly selected charset as the source
charset. The Charset (tag) will be overridden if the document has a valid/known
document HTTP-Equiv meta-tag.</font></li>
</ul>
<a NAME="menustatus"></a><b><font color="#000000"></font></b>
<p><b><font color="#000000">These 2 principles will cover the following
sorts of specific cases:</font></b>
<ul>
<li>
<b><font color="#000000">Menu Enabled for reloading:</font></b></li>

<ul>
<li>
<font color="#000000">On&nbsp; a new document meeting if there has been
no input. (Same as "save in the selected charset eventually" = Vacuous
Reloading.) This is a fairly common practice by the user.</font></li>

<li>
<font color="#000000">On an existing document without document HTTP-Equiv
meta-tag (this includes the case where the document might have had a server-emitted
HTTP charset) and prior to additional input -- this includes a state where
the user has just reloaded the document but with no further input. (We
will allow an infinite number of reloading as long as the document has
not had new input.)</font></li>

<li>
<font color="#000000">The following realoding is allowed but will lead
to changing an existing document HTTP-Equiv charset tag, i.e. <b>Charset
Override</b> as described in the section on Charset Override below..</font></li>

<ul>
<li>
<font color="#000000">Menu change on an existing document with </font>a
valid/known document HTTP-Equiv meta-tag and <font color="#000000">prior
to additional input -- this includes a state where the user has just saved
the document.</font></li>
</ul>
</ul>

<li>
<b><font color="#000000">Menu Disabled: </font></b><font color="#FF0000">The
following actions will not be allowed</font> with the <b>View | Reload
in Character&nbsp; Encoding</b> menu: (The current choice is Option 1:<b><font color="#000000">
Option 1: </font></b>The menu should be grayed out and unavailable when
the editor is in these states, or <b>Option 2:</b> Editor should present
a dialog to suggest "Save as..". If the user selects OK, then Editor will
bring up the "Save as .." menu.)</li>

<ul>
<li>
<font color="#000000">On a new document -- Menu change when there has been
some input under a selected charset.&nbsp; --> equivalent to the use of&nbsp;
"Save as" in X charset.</font></li>

<li>
On an existing document after input has been made but the document has
not been saved yet. ---> <font color="#000000">equivalent to the use of&nbsp;
"Save as" in X charset.</font></li>
</ul>
</ul>
<a NAME="selectautodetect"></a><b><font color="#000000"></font></b>
<p><b><font color="#000000">5. Selecting Auto-Detection:</font></b>
<ul>
<li>
<b><font color="#000000">Selecting Auto-Detect menu which contains no saved
data, i.e. a new document:</font></b></li>

<ul>
<li>
<font color="#000000">Auto-detection in the context of Editor makes sense
only if the document contains existing/saved data.</font></li>

<ul>
<li>
<font color="#000000">Therefore, the Auto-Detect menu should be either
disabled, or</font></li>

<li>
<font color="#000000">There should be an alert dialog in such a case: "You
cannot use Auto-Detection on a document with no data in it."&nbsp; There
will be only one "OK" button in this dialog and when "OK" is clicked on,
it will return to the new document without any further action.</font></li>
</ul>

<li>
<font color="#000000">If Auto-detection menu is chosen on a new document
which contains some input but so far has not been saved, then we should
1) either have the auto-detection menu disabled, or 2) force the user to
save it first.</font></li>

<li>
<font color="#000000">If the user has only a Browser or Mail window open
and then opens a brand new Editor document, and if an Auto-Detection module
is ON, then the new document will open with the Fallback encoding -- since
there is no detection needed. (See section 1 "</font><b>Opening a new document:</b>"
above.)</li>
</ul>

<li>
<b><font color="#000000">Selecting Auto-Detect menu which contains saved/pre-existing
data but no charset specified or sent from a HHTP server.</font></b></li>

<ul>
<li>
<font color="#000000">This action should reload the document assuming the
charset determined by the auto-detection process.</font></li>

<li>
<font color="#000000">If for some reason, auto-detection fails, then the
Fallback Encoding will be used.</font></li>
</ul>

<li>
<b><font color="#000000">Selecting Auto-Detect menu which contains saved/pre-existing
data with the charset specified:</font></b></li>

<ul>
<li>
<font color="#000000">If the result of Auto-Detection agrees with the current
charset value, then nothing further happens.</font></li>

<li>
<font color="#000000">If the resultl of Auto-Detection is different from
the current charset, then this is a case of Charset Override. Convert/save
the document assuming the newly detected charset. --> See the next section.</font></li>
</ul>

<li>
<b><font color="#FF0000">Note: </font></b><font color="#000000">Auto-detection
on opening an existing document has been covered in section titled: "</font><b>2.
Opening an existing document directly into Editor:</b>"</li>
</ul>

<h3>
<a NAME="override"></a></h3>

<h3>
<b><font color="#000000">Charset (Tag) Override:
</font></b>a catalog of
cases.</h3>
<b><font color="#000000">For Editor: </font></b>Any time we encounter a
condition in which the Editor potentially needs to <b>change the pre-existing
document HTTP Meta-Equiv tag</b>, we have a case of Charset Override. The
following catalogs these cases and the expected Editor actions. Alternatively,
we might simply convert the document's encoding using NCR's if necessary.
<b>In
the current implementation, this latter option is in force.</b>
<blockquote><b>Expected Action 1: </b>Warn that this action requires "saving
the document" -- OK/Cancel. If OK, then bring up the "Save as..." dialog
with the default suggestion set to the selected charset.
<br><b>Expected Action 2: </b>Warn that the selected choice will lead to
converting the document's charset tag and may not be undoable. (?)&nbsp;
OK/Cancel
<br><b>Expected Action 3: </b>Warn that the selected choice is not the
best choice for the input data and may lead to documents being unreadable
by some browsers.<b> Cancel: </b>Ask to cancel and save in the most natural
charset for the input data (if this info is available to the Editor) or
UTF-8. or <b>OK: </b>save&nbsp; in the chosen charset but with the use
of NCR's where necessary.
<br><b>Expected Action 4: </b>Present a warning dialog that the Charset
tag is either incorrect or unknown to Mozilla, and ask the user to try
the <b>View | Reload in Character Encoding</b>&nbsp; menu changes to correct
it but with a warning that such attempts may not succeed sometimes, i.e.
we just don't support the charset.&nbsp; Offer <b>OK</b> or <b>Cancel</b>
as the choices. If <b>OK</b> is selected, Editor will then open this document
in the user's default charset. If <b>Cancel</b> is selected, Editor will
quit.</blockquote>

<ul>
<li>
<b>Upon opening a new document,</b></li>

<ul>
<li>
If the document's Charset tag is unknown to Mozilla or seems to be incorrect.
--> <b>Action 4</b></li>
</ul>

<li>
<b>View | Character Coding ... menu:</b></li>

<ul>
<li>
When the user changes the menu and if the document's current Meta Charset
tag is different from the menu selection. --> <b>Simply save it using NCR's
if necessary so as not to corrupt data. (or&nbsp;</b> <b>Action 1).</b></li>
</ul>

<li>
<b><font color="#000000">Save as ... Menu:</font></b></li>

<ul>
<li>
<font color="#000000">The user has selected a charset different from the
existing charset tag, and conversion is reasonable. (e.g. Shift_JIS ->
EUC-JP, BIG5 -> UTF-8, etc.) --> </font><b>Simply save it using NCR's if
necessary so as not to corrupt data. (or&nbsp;</b> <b>Action 2).</b></li>

<li>
<font color="#000000">The user has selected a charset different from the
existing charset tag, but conversion is unreasonable. (e.g. Korean -->
Shift_JIS, etc.) --> </font><b>Simply save it using NCR's if necessary
so as not to corrupt data. (or&nbsp;</b> <b>Action 3)</b></li>
</ul>

<li>
<b>View | Character Coding&nbsp; | Auto-Detect menu:</b></li>

<ul>
<li>
If the result of Auto-detection contradicts the current charset value -->
<b>Action
2.</b></li>
</ul>
</ul>
<b><font color="#000000">For Messenger Mail Editor:</font></b>
<ul>
<li>
<font color="#000000">When the user switches a Character code menu,</font></li>

<ul>
<li>
<font color="#000000">This will be equivalent to "send in the chosen charset".</font></li>

<li>
<font color="#000000">There should be a warning against unreasonable "send
charset" for given input. e.g. Western encoding for Japanese input. </font><font color="#FF00FF">We
suggest UTF-8 as an alternative in such a case, or the most natural charset
given the user's input behavior up to that point.</font></li>
</ul>
</ul>
<a NAME="currentcharset"></a><b><font color="#000000"></font></b>
<p><font color="#000000"><b>Current Document Charset for Editor: </b>The
key to having good UE with regard to Character Encoding menu (i.e. the
user has minimum need to engage the charset selection of any kind) is in
the good implementation of the Current Document Charset.</font>
<ul>
<li>
Editor should know at given point during an editing session what the Current
Charset of the document is. This info may be determined on the combination
of factors including:</li>

<ul>
<li>
the currently selected charset (via the menu)</li>

<li>
aggregate input keyboard behavior</li>

<li>
Unicode range of the input data</li>

<li>
etc.</li>
</ul>

<li>
The Current Charset should be reflected in the Character <font color="#000000">Encoding</font>
menu selection (=checkmark) when the user displays the menu.</li>

<li>
The Current Charset information will also be used to determine if a given
Save as.. action is reasonable or not.</li>

<li>
The Current Charset checkmark on the Character <font color="#000000">Encoding</font>
menu may be changed by the Editor from the initial user's choice of the
charset if the subsequent input behavior warrants such a change. <font color="#CC33CC">--->
What is a reasonable Editor-initiated change? These need to be delineated.</font></li>
</ul>
<a NAME="edge"></a><b><font color="#000000"><font size=+1></font></font></b>
<p><b><font color="#000000"><font size=+1>Edge Cases:</font> </font></b>probably
need to add more cases.
<ul>
<li>
If the user has not explicitly selected a charset which matches the input
behavior, e.g. ISO-8859-1 selected but input is done using Windows-1251
keyboard, the Current charset will have to be something like Windows-1251.
Seeing this, the user may want to change to KOI8-R. This will not be allowed
by the View | Character Code menu and followed by the suggestion to "save
as...". Should this kind of case be an exception to the grayed-out menu?
--> Currently it is not an exception.</li>
</ul>




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May 23,  2002</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/intl/uidocs/5_0intleditorui1.1.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
