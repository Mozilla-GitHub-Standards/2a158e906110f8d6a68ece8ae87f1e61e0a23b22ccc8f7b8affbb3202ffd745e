<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [en]C-AOLNSCP  (WinNT; U) [Netscape]">
   <meta name="Author" content="Naoki Hotta">
   <title>Mail/news 5.0 I18n functional specification</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




Mail/news 5.0 I18n specification
<br>last update 5/5/2000
<br>nhotta@netscape.com
<p><a NAME="5.0 I18N feature"></a><b>5.0 I18N specification</b>
<table BORDER COLS=4 WIDTH="100%" >
<tr>
<td></td>

<td>Description</td>

<td WIDTH="5%">Milestone</td>

<td WIDTH="5%">Status (as of M12)</td>
</tr>

<tr>
<td><u>mail/news</u></td>

<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>charset for a new mail</td>

<td>Charset of a new mail always set by the default charset of pref (i.e.
no inheritance from a current window).</td>

<td>M4</td>

<td>Done</td>
</tr>

<tr>
<td>charset for reply/forward mail</td>

<td>Charset of the original message (main body) is used.</td>

<td>M14</td>

<td>Done</td>
</tr>

<tr>
<td>charset for mailtourl</td>

<td>Charset of a new mail always set by the default charset of pref (i.e.
no inheritance from a current window).</td>

<td>M15</td>

<td>Done</td>
</tr>

<tr>
<td>charset for a new mail by address book</td>

<td>Charset of a new mail always set by the default charset of pref.</td>

<td>&nbsp;</td>

<td>Done</td>
</tr>

<tr>
<td><a href="#Attachment view/send in">attachment/send</a></td>

<td>No charset label for attachments unless HTML with META charset specified.
<br>If the main body charset is ISO-2022-JP, HTML attachments are base64
encoded.&nbsp;</td>

<td>M10</td>

<td>Done</td>
</tr>

<tr>
<td>thread pane display</td>

<td>Display subject/address in multiple charset by using charsets encoded
in MIME header.</td>

<td>M4</td>

<td>Done</td>
</tr>

<tr>
<td>thread pane sorting</td>

<td>Use the application locale, store it in a message db (at folder creation
time) then use it for <a href="http://www.mozilla.org/projects/intl/collation.html">locale
sensitive string comparison</a>.</td>

<td>M5</td>

<td>Done</td>
</tr>

<tr>
<td>thread pane date display</td>

<td>Use <a href="http://www.mozilla.org/projects/intl/date-time-format.html">locale
sensitive date/time format interface</a>. Always use application locale.</td>

<td>M5</td>

<td>Done</td>
</tr>

<tr>
<td>message body view</td>

<td>libmime to convert message to unicode before passing to the layout.</td>

<td>M5</td>

<td>Done</td>
</tr>

<tr>
<td>message view (font)</td>

<td>Mail message display fonts should be language sensitive</td>

<td>M16</td>

<td>Done</td>
</tr>

<tr>
<td>charset override</td>

<td>&nbsp;</td>

<td>M16</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=5938">5938</a></td>
</tr>

<tr>
<td><a href="#Attachment view/send in">attachment/view</a></td>

<td>Display multiple charsets.&nbsp;
<br>Decide the charset by following process.&nbsp;
<br>1) Content-Type charset 2) Charset menu selection 3) Auto charset detection
if available (e.g. Japanese).</td>

<td>M6</td>

<td>Done 1)&amp;3)</td>
</tr>

<tr>
<td>attachment view by browser</td>

<td>Follow browser's charset/auto-detect setting</td>

<td>&nbsp;</td>

<td>Done&nbsp;</td>
</tr>

<tr>
<td>message save as&nbsp;</td>

<td>text/plain -> charset convert to platform file charset
<br>text/html -> no charset conversion</td>

<td>M17</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=23418">23418</a></td>
</tr>

<tr>
<td>folder pane view</td>

<td>Multi lingual display by unicode.</td>

<td>M14</td>

<td>Done</td>
</tr>

<tr>
<td>message search widget</td>

<td>Multi lingual display by unicode.</td>

<td>M15</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>local message search</td>

<td>Header search, apply MIME decode and charset conversion before comparison
if necessary.&nbsp;
<br>Body search, apply decoders (quoted printable, base64, html named entity
and NCR), plus charset conversion if necessary.</td>

<td>M16</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=11659">11659</a></td>
</tr>

<tr>
<td>IMAP search</td>

<td>Send UTF8 query, plus fall back mechanism by mail charset of the mail
folder, finally asscii.&nbsp;
<br>4.51 to support the fall back, 4.5 only supports ascii search. 5.0
should support utf-8 query.</td>

<td>M17</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=5933">5933</a></td>
</tr>

<tr>
<td>IMAP folder name</td>

<td>When a folder name is stored locally, it should be UTF-8 or modified
UTF-7 instead of system charset.</td>

<td>M14</td>

<td>Done</td>
</tr>

<tr>
<td>message filter</td>

<td>Same issue as local message search</td>

<td>M15</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>newsgoup search</td>

<td>Whatever supported by 4.5 (no support for MIME encoded headers)
<br>Optional search for locally downloaded headers.</td>

<td>M18</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=38297">38297</a>&nbsp;</td>
</tr>

<tr>
<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td><u>address book</u></td>

<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>sorting</td>

<td>Same as the message thread sorting.&nbsp;
<br>Use the application locale, store it in a message db then use it for
locale sensitive string comparison.</td>

<td>M11&nbsp;</td>

<td>Done</td>
</tr>

<tr>
<td>address book widgets</td>

<td>Multi lingual display by unicode.</td>

<td>M11</td>

<td>Done</td>
</tr>

<tr>
<td>type down</td>

<td>Multi lingual support.</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>name completion</td>

<td>Multi lingual support.</td>

<td></td>

<td>&nbsp;</td>
</tr>

<tr>
<td>address book search</td>

<td>&nbsp;</td>

<td></td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=16354"></a></td>
</tr>

<tr>
<td>LDAP search</td>

<td>out</td>

<td></td>

<td></td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td><u>Preference</u></td>

<td>&nbsp;</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>intl.mailcharset.cyrillic</td>

<td>not needed</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>intl.mailcharset.override_1</td>

<td>not needed</td>

<td>&nbsp;</td>

<td>&nbsp;</td>
</tr>

<tr>
<td>mailnews.send_hankaku_kana</td>

<td>&nbsp;</td>

<td>M14</td>

<td>Done</td>
</tr>

<tr>
<td>default mail send charset UI</td>

<td></td>

<td>M14</td>

<td>Done</td>
</tr>

<tr>
<td></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td><u>UI</u></td>

<td></td>

<td></td>

<td></td>
</tr>

<tr>
<td>pref item for Send message default charset</td>

<td></td>

<td>M16</td>

<td>Done</td>
</tr>

<tr>
<td>pref item for Default Display charset for Messenger</td>

<td>not needed</td>

<td></td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=32720">32720</a></td>
</tr>

<tr>
<td>UI for Folder Charset&nbsp;</td>

<td></td>

<td>M17</td>

<td><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=32714">32714</a></td>
</tr>
</table>

<p>
<hr WIDTH="100%">
<br><a NAME="Attachment view/send in"></a><b>Attachment view/send in detail</b>
<p>View:
<ul>
<li>
Charset labeled attachments can be viewed correctly.</li>

<li>
Unlabeled attachments may be viewed if charset detection is available.</li>

<li>
Otherwise, unlabeled (and not iso-8859-1) attachments cannot be viewed
inline (i.e. displayed as a link).</li>

<li>
There is a post beta 1 feature which enable the charset menu to view unlabeled
attachments (charset override #5938).</li>
</ul>

<p><br>Send:
<ul>
<li>
Use HTTP charset as a charset label if available (highest priority).</li>

<li>
Use META charset for HTML as a charset label if available (second priority).</li>

<li>
Otherwise, no charset label&nbsp; is attached to the sending attachments.</li>

<li>
Apply Base 64 encoding for Japanese attachments only.</li>
</ul>

<p><br>
<hr WIDTH="100%">
<br><a NAME="Address book charset"></a><b>Address book charset conversion</b>
<ul>
<li>
Charset for the storage is UTF-8 (escape/unescape for 8 bit data may be
done by database).</li>

<li>
Charset conversion of UCS2 and UTF-8 (both direction) is needed between
RDF and address book storage.</li>

<li>
Importing ldif needs no conversion (base64 decoding only) since ldif charset
is UTF-8.</li>

<li>
Importing 4.x address book needs conversion from pref specified charset
to UTF-8.</li>

<li>
I18n to provide a mapping function from csid to charset name since csid
is used in 4.x pref.</li>
</ul>

<p><br>
<hr WIDTH="100%">
<br><b>Charset conversion fallback for mail send</b>
<p>text/html - Apply charset conversion first. For characters not convertered
from unicode, fallback to named entity then NCR.
<p>text/plain and message header - Apply charset conversion first. For
characters not convertered from unicode, try transliteration (EUR, (tm))
then fallback to '?' (question mark).
<p>
<hr WIDTH="100%">
<br><a NAME="Local mail search i18n"></a><b>Local mail search i18n requirement</b>
<p><b>Header search</b>
<ul>
<li>
MIME decode and charset conversion for headers - <i>changed,</i> search
term is now unicode (used to be a folder charset), we should compare it
against MIME decoded and unicode converted header strings (see <a href="http://lxr.mozilla.org/seamonkey/source/mailnews/base/util/nsMsgI18N.h#49">nsMsgI18NDecodeMimePartIIStr</a>).</li>
</ul>
<b>Body search</b>
<ul>
<li>
4.x implementation:&nbsp; converts body text to win_csid. - no need to
support this in mozilla</li>

<li>
proposal for mozilla: convert body text to unicode.</li>

<li>
QP decode for body (plain and HTML)</li>

<li>
Entity (CER) and NCR decode for HTML body</li>
</ul>

<hr WIDTH="100%">
<br><b>IMAP search i18n requirement</b>
<p><i>see bug </i><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=5933">5933</a>
<br>
<hr WIDTH="100%">
<br><b>LDAP search i18n requirement</b>
<p>UTF-8 search by server
<br>
<hr WIDTH="100%">
<br><b>Charset override</b>
<p>Libmime applies charset conversion to UTF-8 from one of the following
charset (then the data is passed to layout).
<br>The override charset has highest priority and default view charset
is lowest.
<p>Override charset (set by charset menu)
<br>MIME label in the message
<br>Folder charset attribute
<br>Default view charset (mailnews.view_default_charset)
<br>
<hr WIDTH="100%">



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May  5,  2000</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/intl/mail-news-i18n-spec.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
