<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>XUL - Creating Localizable XML GUI</TITLE>
<META NAME="keywords" CONTENT="xul xml solution user document ">
<META NAME="doccomm" CONTENT="solutions. [xul as solution] of XUL documents. XUL - Creating Localizable XML GUIAdvantages of XUL: ">
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080" BGCOLOR="#ffffff">

<FONT SIZE=2><P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=4><P ALIGN="CENTER">XUL - Creating Localizable XML GUI</P>
</B></FONT><FONT SIZE=2><P>&nbsp;</P>
<P ALIGN="CENTER">by Tao Cheng</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>Abstract</P>
</B></I></FONT><FONT SIZE=2><P>&nbsp;</P>
<P ALIGN="JUSTIFY">XUL, pronounced as /zool/, stands for "XML-based User Interface Language", is a cross platform way of describing user interface. It is used to construct the graphical user interface for the Mozilla browser client. Ideally, XUL documents are internationalization friendly since it is XML-based and all XML processors must support Unicode encoding (the UTF-8 and UTF-16 encoding of 10646). In reality, a typical XUL file may contain standard XML (eXtensible Markup Language) elements, XUL specific elements, style information (currently Cascading Style Sheets), HTML (HyperText Markup Language), and JavaScript functions. With such great variety of source types, localization enabling of XUL documents becomes quite a challenge. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">This paper gives a brief introduction to the concept of XUL and then examines the principles, including adoption of Unicode (UTF-8) as the standard document encoding, of seeking localization solutions. After that, it dissects the components of a XUL document and identifies resources to be localized. It then recommends a set of XUL coding style guidelines to ensure the localizability of XUL documents. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">While the localizability solutions proposed are for XUL, most of them can be applied to general Web document authoring for customization. </P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P>1. Introduction</P>
</B></I></FONT><FONT SIZE=2><P>&nbsp;</P>
<P ALIGN="JUSTIFY">XUL is an XML-based user interface description language. Mozilla developers invented it to describe graphical user interface uniformly across platforms. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">The best way to understand XUL is by going through a real example. In this section, the author uses a sample XUL document, &quot;openLocation.xul&quot;, listed in Appendix A, for the purpose of illustrations. This XUL document describes a dialog window that prompts the user to enter a URL to be loaded in the browser window. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">A typical XUL document contains the following types of data: </P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>XML declarations and elements</B>. XUL is XML. It follows standard XML syntax for element type declaration. Mozilla intends to support standard XML syntax recommended by XML spec. 1.0. For example,</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">  1 &lt;?xml version="1.0"?&gt; </P>
<P ALIGN="JUSTIFY">  2 &lt;?xml-stylesheet href="xul.css" type="text/css"?&gt; </P>
<P ALIGN="JUSTIFY">  3 </P>
<P ALIGN="JUSTIFY">  4 &lt;!DOCTYPE window&gt;</P>
<B><P ALIGN="JUSTIFY">&nbsp;</P></DIR>

</B><P ALIGN="JUSTIFY">Although, there are some XUL specific features, such as XUL fragments, created by the developers to remedy the insufficiency of the standard XML, XUL writers can easily transfer their XML experience to XUL. Also, some XML spec 1.0 recommended features such as external entities support are limited due to the fact that DTD is being phased out by XML schema.</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>UI elements and tags</B>. Since the purpose of XUL is to describe graphical user interface, the majority of the XUL specific elements are UI primitives and controls. Examples of these range from primitive UI controls, such as menus and command buttons, to more comprehensive composite widgets, such as Tree widget, ComboBox, and File Picker. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">In the code segment below, the root element, a XUL window, has XUL elements live in the default namespace and HTML elements, prefixed with &quot;html:&quot;, in HTML namespace. It has &quot;Open Location&quot; as its window title and an initial size of 420 x 190.</P></DIR>

<P ALIGN="JUSTIFY">  </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">  6 &lt;window xmlns:html="http://www.w3.org/1999/xhtml"</P>
<P ALIGN="JUSTIFY">  7         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"</P>
<P ALIGN="JUSTIFY">  8         onload="onLoad()"</P>
<P ALIGN="JUSTIFY">  9         title="Open Location"</P>
<P ALIGN="JUSTIFY"> 10        width="420"</P>
<P ALIGN="JUSTIFY"> 11        height="190"&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>HTML markups</B>. As with XML documents, HTML tags can be used to mark up content data in XUL documents. HTML markups live in HTML namespace and prefixed with "html:" to distinguish them from general XML markups. For example,</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY"> 23              &lt;html:table width="400" cellspacing="5"&gt;</P>
<P ALIGN="JUSTIFY"> 24                  &lt;html:tr&gt;</P>
<P ALIGN="JUSTIFY"> 25                      &lt;html:td&gt;</P>
<P ALIGN="JUSTIFY"> 26                          Enter the World Wide Web location (URL) you would like to open.  Use</P>
<P ALIGN="JUSTIFY"> 27                          the Choose File... button to select a local file:</P>
<P ALIGN="JUSTIFY"> 28                      &lt;/html:td&gt;</P>
<P ALIGN="JUSTIFY"> 29                  &lt;/html:tr&gt;</P>
<P ALIGN="JUSTIFY">…</P>
<P ALIGN="JUSTIFY">…</P>
<P ALIGN="JUSTIFY">…</P></DIR>
</DIR>

<OL START=63>

<OL>

<P ALIGN="JUSTIFY"><LI>&lt;/html:table&gt;</LI></P></OL>
</OL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">In the above code segment, HTML tags, &quot;table&quot;, &quot;tr&quot;, and &quot;td&quot;, are used to regulate the positions of UI elements in the dialog. </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Style and layout</B>. XML, as well as XUL, syntax does not bear any display or layout semantics; instead, a style sheet is utilized for such purpose. As of now, CSS (Cascading Style Sheets) is the supported method of specifying display style and layout geometry of XUL-based graphical user interface. Line 2 in the example below associates the CSS style sheet, &quot;xul.css&quot;, with this XUL document.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">  1 &lt;?xml version="1.0"?&gt; </P>
<P ALIGN="JUSTIFY">  2 &lt;?xml-stylesheet href="xul.css" type="text/css"?&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Script functions</B>. A graphical user interface must provide a mechanism for event-handling and user interaction. Like HTML forms, scripting languages such as JavaScript are used to serve such purpose. The JavaScript file, &quot;openLocation.js&quot;, referenced in the following code segment, contains all  JavaScript functions needed to process events occurring in this window. The source listing of &quot;openLocation.js&quot; can be found in Appendix B.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">13     &lt;html:script language="javascript" src="openLocation.js"&gt;</P>
<P ALIGN="JUSTIFY">14     &lt;/html:script&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Chrome URLs</B>. Chrome, in the XUL world, is the top level window which contains groups of UI elements of various types. Examples of chrome are the browser window and dialog windows. The chrome obtains its UI description from four types of providers: the content provider, the skin provider, the platform provider, and the locale provider. While the content provider provides the skeleton, i.e., the menus, command buttons, and etc., the skin provider supplies the look-and-feel of the chrome. Similarly, the platform provider gives platform dependent UI description and the locale provider offers the language and culture sensitive resources. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">To maximize the flexibility, Mozilla introduces a new technology called &quot;<I>Configurable Chrome</I>&quot;[3]. A XUL file can be written in such a fashion that its chrome description comes from a mixture of physical sources, either locally, remotely, or a combination of both. An end user may customize her/his configuration to pick up any of the source type from his favor chrome providers. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">To achieve this, chrome type URLs must be used to reference external sources; such as CSS files and JavaScript files. The general form of chrome URLs look like this:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&#9;chrome://WindowType/ProviderType/[ProviderName/]</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">The &quot;WindowType&quot; is the window type of the chrome. Possible values are &quot;navigator&quot;, &quot;messenger&quot;, etc. The &quot;ProviderType&quot; is one of the four providers: content, skin, platform, or locale. Examples of  the provider names, &quot;ProviderName&quot;, are Mozilla, Mozillazine, xyzOrg, myISP, and etc. See Table 1 for illustrations.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</FONT>
<P ALIGN="RIGHT"><TABLE BORDER CELLSPACING=1 CELLPADDING=7 WIDTH=558>
<TR><TD WIDTH="15%" VALIGN="TOP">
<FONT SIZE=2><P ALIGN="JUSTIFY">Window Type</FONT></TD>
<TD WIDTH="11%" VALIGN="TOP">
<FONT SIZE=2><P ALIGN="JUSTIFY">Provider Type</FONT></TD>
<TD WIDTH="44%" VALIGN="MIDDLE">
<FONT SIZE=2><P ALIGN="JUSTIFY">base</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP">
<FONT SIZE=2><P ALIGN="JUSTIFY">name</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP">
<FONT SIZE=2><P ALIGN="JUSTIFY">main</FONT></TD>
</TR>
<TR><TD WIDTH="15%" VALIGN="MIDDLE" ROWSPAN=4 HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">navigator</FONT></TD>
<TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">content</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">resource:/chrome/navigator/content</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">Mozilla</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">navigator.xul</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">skin</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">http://home.mozillazine.org/chrome/content</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">MozillaZine</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">navigator.css</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">platform</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">./chrome/navigator/platform</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">UNIX</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">nav-unix.css</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">locale</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">./chrome/navigator/locale</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">en-US</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">navigator.dtd</FONT></TD>
</TR>
<TR><TD WIDTH="15%" VALIGN="MIDDLE" ROWSPAN=4 HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">messenger</FONT></TD>
<TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">content</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">MozillaZine</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">messenger.xul</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">skin</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">Moziila</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">messenger.css</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">platform</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">UNIX</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">messenger.css</FONT></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">locale</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">en-US</FONT></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">messenger.dtd</FONT></TD>
</TR>
<TR><TD WIDTH="15%" VALIGN="MIDDLE" ROWSPAN=4 HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">Other windows…</FONT></TD>
<TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">content</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16><P></P></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16><P></P></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">skin</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16><P></P></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16><P></P></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">platform</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16><P></P></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16><P></P></TD>
</TR>
<TR><TD WIDTH="11%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">locale</FONT></TD>
<TD WIDTH="44%" VALIGN="TOP" HEIGHT=16>
<FONT SIZE=2><P ALIGN="JUSTIFY">…</FONT></TD>
<TD WIDTH="14%" VALIGN="TOP" HEIGHT=16><P></P></TD>
<TD WIDTH="16%" VALIGN="TOP" HEIGHT=16><P></P></TD>
</TR>
</TABLE>
</P>

<B><FONT SIZE=2><P ALIGN="JUSTIFY">Table 1 Chrome registry: mapping chrome providers to URLs</P>
</B><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Finally, the dialog constructed from the XUL file, &quot;openLocation.xul&quot;, is shown in Figure 1.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY"><IMG SRC="Image2.gif" WIDTH=423 HEIGHT=191></P>
<P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P>2. XUL’s Advantages</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Examining the ingredients and structure of a XUL file, there are several advantages: </P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>Scriptable</B>. Changing UI without recompilation. Applications development cycle is dramatically reduced. The browser client acts as an interpreter. An embedded user agent loads a XUL stream and builds the user interface on the fly. The UI controls and user interaction can be modified statically or dynamically.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>Cross-platform</B>. The underlying XUL parser and interpreter are developed in a cross-platform fashion. The same XUL stream can be shared independent of Operating systems and Window systems.  While Mozilla officially supports  Linux (Unix), Win32, and Mac, it also provides a set of guidelines for porting Mozilla onto other Operating systems and Window systems. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">Please note that while XUL offers a general mechanism of platform independent UI description, certain XUL widgets are wrappers of native widgets and therefore present platform-specific look and feel. Examples of such widgets are: File Selection Box, Font Picker, and Print dialog.</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Customizable</B>. With the introduction of &quot;Configurable Chrome&quot;, all components of the chrome can be configured either statically in the chrome registry or dynamically on the fly. The chrome registry is stored in RDF format and can be edited by  plain text editor or runtime JavaScript functions.</LI></P></UL>

</FONT><B><I><FONT FACE="Arial"><P>3. Localizability issues </P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Consisting of such great variety of ingredients, XUL localization becomes a challenging task. Historically, we encountered some difficulties in localizing Web-based documents: </P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Locale sensitive data is hard to separate from the rest of the document. Localizable resources reside in the same file with language and culture neutral data. Localizing Web-based documents often means going through the whole set of document to identify and translate localizable resources.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Markup tags are often translated or damaged in the process of localization. Validating the localization results is difficult, if not impossible. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">It is the desire of the Mozilla Internationalization group to address these issues in the XUL world.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">4. Criteria of the solution</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Before embarking on the solution-seeking journey, let’s layout a set of criteria we intend to meet:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Standard Compliant</B></I>. We shall avoid re-inventing the wheel. Both existing internationalization solutions and new proposals shall be taken into consideration. We will weight in standard compliance in the decision making process against proprietary approaches. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Simple</B></I>. The localizability solution shall be easy to implement, and will integrate seamlessly with core development. A localizability solution often needs the support from peer development groups. Should localization enabling become a burden or even hinder the development process, the proposed solution would less likely be accepted by supporting module owners.</LI></P></UL>

<P ALIGN="JUSTIFY"> </P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Leveragible</B></I>. Leveraging can be defined as taking the localization results of previous releases for the use of the current release. A full-scale localization of a huge software product is not only time-consuming but also costly. It requires collaborative effort from localization engineers, translation vendors, and internationalization QA throughout the whole process. It is neither economic nor efficient to repeat the whole process from scratch for each release. Leveraging also helps improve the consistency of translation between releases.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Portable</B></I>. The final solution will be achievable on all platforms including Unix, Windows, Mac, and others. We do not want a solution for one platform and another solution for the other platform. The majority of Mozilla modules are platform-independent, so will be the localizability solution.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Extensible</B></I>. Technology evolves. A solution adopted now might not be valid in the future, however, we want it to be flexible enough for future extension.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Separable</B></I>. To simplify the localization task, localizable resources shall be placed into external files so that the translators can concentrate on localization instead of language or culture neutral resources. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Consistent</B></I>. If possible, we shall seek a scheme that will work across modules instead of within the XUL component only. We don't want to have distinguished solutions for different modules.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Dynamic binding</B></I>. Some of the resources requiring translation may be dynamic, usually because they require string composition, e.g., "Installing item 5 of 10". </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Validatable</B></I>. The result of localization shall be easily validated. Translators need to be able to verify the result as they progress. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Parseable</B></I>. It should be possible to unambiguously and automatically determine which embedded items contain localizable text, and which items need not be localized. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Invisible</B></I> (Internationalization). As much as possible, the standard tools that create English UI should emit files that are ready to be localized, without requiring additional processing. We want to make the localizability solution a part of the standard XUL authoring process instead of internationalization specific action. Localizability shall not be the only reason we adopt the solution. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>Efficient</B></I>. The implementation of the solution shall not cause any noticeable performance degradation or memory bloat. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">While it might not be feasible to find a solution that satisfies all the criteria, they shall be used as the factors in decision making.</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">5. Localizability solutions</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Localizability enabling requires the participation of various groups in product development. While it is the Internationalization and Localization groups that drive the effort, co-operation from the rest of the groups is essential to the success of the process. In this section, the author will present all the solutions proposed by developers from interested groups. Each will contain descriptions, samples, and analysis of pros and cons.</P>
</FONT><FONT FACE="Arial"><P ALIGN="JUSTIFY">5.1 Proposed solutions</P>
</FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">In the process of seeking localizability solutions, four approaches are proposed and reviewed. While varying in how to identify and represent locale sensitive resources, they all attempt to isolate localizable resources from language and culture neutral data.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<OL TYPE="a">

<B><P ALIGN="JUSTIFY"><LI>&quot;XUL + Language-specific DTD&quot;.</B>  </LI></P></OL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<I><U><P ALIGN="JUSTIFY">Descriptions</I></U>:</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>In this approach, we declare general (text) entities for all locale sensitive resources in an external DTD (Document Type Definition) subset and use XML entity reference, &quot;&amp;entity;&quot;, to reference them. </LI></P></UL>

<B><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><I><U><P ALIGN="JUSTIFY">Sample XUL</I></U>:  toolbar.xul</P>
<I><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</I><P ALIGN="JUSTIFY">&lt;!DOCTYPE window SYSTEM "toolbar.dtd"&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;xul:toolbar&gt; </P>
<P ALIGN="JUSTIFY">&amp;txtContentData; </P>
<P ALIGN="JUSTIFY">               &lt;button cmd="nsCmd:BrowserBack" </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">style="background-color:rgb(192,192,192);"&gt; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">               &#9;&lt;img src="resource:/res/toolbar/TB_Back.gif"/&gt; </P>
<P ALIGN="JUSTIFY">                    &amp;txtBack; </P>
<P ALIGN="JUSTIFY">               &lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&lt;button cmd="nsCmd:BrowserForward"</P>
<P ALIGN="JUSTIFY">               &#9;style="background-color:rgb(192,192,192);"&gt; </P>
<P ALIGN="JUSTIFY">               &#9;&lt;img src="resource:/res/toolbar/TB_Forward.gif"/&gt; </P>
<P ALIGN="JUSTIFY">                    &amp;txtForward; </P>
<P ALIGN="JUSTIFY">               &lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&lt;button cmd="nsCmd:BrowserWizard" </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">style="background-color:rgb(192,192,192);"&gt; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">                &#9;&lt;img src="&amp;iconWizard;"/&gt; </P>
<P ALIGN="JUSTIFY">                    &amp;txtWizard; </P>
<P ALIGN="JUSTIFY">               &lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&lt;/xul:toolbar&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<I><U><P ALIGN="JUSTIFY">Sample DTD</I></U>: toolbar.dtd </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">&lt;!ENTITY txtContentData "Random content data"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY txtBack "Back to &amp;#37;s"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY txtForward "Forward"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY iconWizard "resource:/res/toolbar/TB_Wizard.gif"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY txtWizard "Wizard"&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<I><U><P ALIGN="JUSTIFY">Pros</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>Already standard compliant; no new syntax names or tags need to be introduced. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Text replacement can be in either content or attribute values (but not in the attribute names).</LI></P></UL>

<B><I><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><U><P ALIGN="JUSTIFY">Cons</I></U>:</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>The language-specific DTD file is not a flat file. We need a DTD parser to extract entity values into a flat file for localizers.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Two file formats to deal with, the DTD file and the property file, from which other client modules retrieve the locale sensitive resource strings [1]. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Hard to group text entity by resource types. The entity name alone does not provide any resource type information which could be used as a localization note to the translators.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>In switching languages, we need to tear down the chrome window, reload the XUL and its DTD (probably from a remote host), and reconstruct the DOM tree (the whole chrome).  This could be a very expensive operation for a low-end client machine fetching XUL components from a remote host.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<OL TYPE="a">

<B><I><P ALIGN="JUSTIFY"><LI>&quot;Resource ID + String Resource Manager&quot;</B></I>. </LI></P></OL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<I><U><P ALIGN="JUSTIFY">Descriptions</I></U>:</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>In XUL file, assign a widget ID, e.g. widgetID, to each UI element and a resource tag, e.g. resTag, to each localizable attribute of the widget. Then, during widget initialization, call a C function, said gettext(widgetID, resTag, default_string), to retrieve the resource from a Java-like property file. For example, a label widget can be described as &lt;label widgetID="345" text="label string"/&gt; in a XUL file. Then, the function call to retrieve localized text will be gettext(345, RES_TEXT, "label string").</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>The English version of property file will be automatically generated during XUL to DOM conversion. The front-end developers can easily update a UI element's attribute/resource without leaving the XUL file.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>All localizable resources are uniquely identified by the combination of widget ID and resource tag. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>In function &quot;gettext()&quot;, if the property file does not exist or the combination of widget ID and resource tag does not resolve to a resource string, the &quot;default_string&quot; will be returned instead. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<B><I><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><U><P ALIGN="JUSTIFY">Sample XUL</I></U>: toolbar.xul </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">&lt;!DOCTYPE xui SYSTEM "toolbar.dtd"&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;!-- L10N-PTY type of data: file format can be found at     http://www.netscape.com/PropertyFile --&gt; </P>
<P ALIGN="JUSTIFY">&lt;!NOTATION L10N-PTY SYSTEM "http://www.netscape.com/PropertyFile"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY JFile </P>
<P ALIGN="JUSTIFY">SYSTEM "http://www.home.org/l10n.property" </P>
<P ALIGN="JUSTIFY">NDATA L10N-PTY&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;xul:toolbar&gt; </P>
<P ALIGN="JUSTIFY">&lt;label widgetID="8000"&gt;Random content data &lt;label&gt; </P>
<P ALIGN="JUSTIFY">&lt;button widgetID="8001" </P>
<P ALIGN="JUSTIFY">cmd="nsCmd:BrowserBack" </P>
<P ALIGN="JUSTIFY">style="background-color:rgb(192,192,192);" </P>
<P ALIGN="JUSTIFY">img="resource:/res/toolbar/TB_Back.gif"&gt;</P>
<P ALIGN="JUSTIFY">Back to &amp;#37;s </P>
<P ALIGN="JUSTIFY">&lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;button widgetID="8002" </P>
<P ALIGN="JUSTIFY">cmd="nsCmd:BrowserForward" </P>
<P ALIGN="JUSTIFY">style="background-color:rgb(192,192,192);" </P>
<P ALIGN="JUSTIFY">img="resource:/res/toolbar/TB_Forward.gif"&gt;</P>
<P ALIGN="JUSTIFY">Forward </P>
<P ALIGN="JUSTIFY">&lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;button widgetID="8003" </P>
<P ALIGN="JUSTIFY">cmd="nsCmd:BrowserWizard" </P>
<P ALIGN="JUSTIFY">style="background-color:rgb(192,192,192);" </P>
<P ALIGN="JUSTIFY">img="resource:/res/toolbar/TB_Wizard.gif"&gt;</P>
<P ALIGN="JUSTIFY">Wizard </P>
<P ALIGN="JUSTIFY">&lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&lt;/xul:toolbar&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<I><U><P ALIGN="JUSTIFY">Sample property file</I></U>: property.toolbar </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">8000: Random content data </P>
<P ALIGN="JUSTIFY">8001.img: resource:/res/toolbar/TB_Back.gif </P>
<P ALIGN="JUSTIFY">8001: Back to &amp;#37;s </P>
<P ALIGN="JUSTIFY">8002.img: resource:/res/toolbar/TB_Forward.gif </P>
<P ALIGN="JUSTIFY">8002: Forward </P>
<P ALIGN="JUSTIFY">8003.img: resource:/res/toolbar/TB_Wizard.gif </P>
<P ALIGN="JUSTIFY">8003: Wizard </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<I><U><P ALIGN="JUSTIFY">Sample resource tag definitions</P>
</I></U><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">#define RES_TEXT   0x1234 </P>
<P ALIGN="JUSTIFY">#define RES_IMG     0x1235 </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">To get the text string for a "Back" button's label, we call </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">gettext(8001, RES_TEXT, "Back to &amp;#37;s") </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<I><U><P ALIGN="JUSTIFY">Pros</I></U>:</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>Core development work will not be blocked by gettext() implementation. However, we shall request the UI developers to put localization notes, and comments in the property file.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>The property file is a flat file in clear text; it is easy to localize and leverage. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Consistent with the scheme the rest of the client modules use; only one file format to deal with.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Resources are grouped by widgets. This also makes the property file more readable.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Easy to leverage. All resources are uniquely identified and ready for comparison. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<I><U><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">Cons</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>Need to treat content data as the text resource of a label widget so they can be identified and modified by application code.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Implementation work needed to automatically bind localizable resources to widgets. However we can reduce extra work by binding the resources during widget initialization. We need to bind the UI attributes specified in XUL to the real widgets anyway. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Need to ensure the uniqueness of the widget ID within and across XUL. However, the application developers need to have a way to uniquely identify a widget in chrome anyway. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Localizable resource strings are duplicated twice: once in XUL and again in property file.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>Technical difficulty: once XUL has been converted to a DOM tree, the content can't be changed any more.</LI></P></UL>

</B><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<OL TYPE="a">

<B><P ALIGN="JUSTIFY"><LI>XPointer and XLink</B>.</LI></P></OL>

<B><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><I><U><P ALIGN="JUSTIFY">Descriptions</I></U>:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Use XLink &amp; Xpointer to specifically reference a text in a file that is separate from the base XUL file so that this text can be easily localized and displayed to the end user in a manner consistent with XPFE (Cross Platform Front End) requirements.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Here is an example syntax needed for a button UI element.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<I><U><P ALIGN="JUSTIFY">Sample</I></U>: UI.XUL</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;button </P>
<P ALIGN="JUSTIFY">href="&amp;locale/uilang.xml| id(1234).child(text)"&gt; </P>
<P ALIGN="JUSTIFY">&lt;content-info&gt; </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">Put comments on button functionality here </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;/content-info&gt; </P>
<P ALIGN="JUSTIFY">other xul markup </P>
<P ALIGN="JUSTIFY">&lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>

<I><U><P ALIGN="JUSTIFY">Sample</I></U>: UI.DTD</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;!ENTITY  % link-attributes</P>
<P ALIGN="JUSTIFY">"xlink:form   CDATA    #FIXED &#9;'simple' </P>
<P ALIGN="JUSTIFY">href           &#9;CDATA    #REQUIRED </P>
<P ALIGN="JUSTIFY">content-info  CDATA    #IMPLIED </P>
<P ALIGN="JUSTIFY">show           &#9;CDATA    #FIXED&#9;'embed' </P>
<P ALIGN="JUSTIFY">actuate        &#9;CDATA    #FIXED &#9;'auto'" </P>
<P ALIGN="JUSTIFY">&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;!ELEMENT button (#PCDATA)&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ATTLIST button  </P>
<P ALIGN="JUSTIFY">%link-attributes; </P>
<P ALIGN="JUSTIFY">other button specific attributes </P>
<P ALIGN="JUSTIFY">&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>

<I><U><P ALIGN="JUSTIFY">Sample</I></U>: UILANG.XML</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;loctext id = "1244"&gt; </P>
<P ALIGN="JUSTIFY">        &lt;text&gt; </P>
<P ALIGN="JUSTIFY">         Gallia est omnis divisa in partes tres,  </P>
<P ALIGN="JUSTIFY">         quarum unam incolunt Belgae, </P>
<P ALIGN="JUSTIFY">         aliam Aquitani, tertiam qui ipsorum lingua </P>
<P ALIGN="JUSTIFY">         Celtae, nostra Galli appellantur. </P>
<P ALIGN="JUSTIFY">        &lt;/text&gt; </P>
<P ALIGN="JUSTIFY">        &lt;note&gt;These are Caesar’s first words on Gaul. </P>
<P ALIGN="JUSTIFY">               This button should be centered on  </P>
<P ALIGN="JUSTIFY">               column 1 of the dialog </P>
<P ALIGN="JUSTIFY">        &lt;/note&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>

<I><U><P ALIGN="JUSTIFY">Sample</I></U>: UILANG.DTD</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;!ELEMENT loctext (text, note?)&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ATTLIST loctext id ID #REQUIRED&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ELEMENT text (#PCDATA)&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ELEMENT note (#PCDATA)&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>

<I><U><P ALIGN="JUSTIFY">Pros</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>Since it is all written in plain XML there is no need to create custom file types. Thus this system can accept anything the parser can handle. It maintains the name value paring essential for localization. It allows us to add localization and developer notes to the object (e.g. button) and the localized text separately, but maintain a direct link between the two. The text is pulled into the UI elements when the XUL file is parsed. This also addresses the goal of separating markup, style and content. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<I><U><P ALIGN="JUSTIFY">Cons</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>This does not leave us with a flat file solution. However, the file containing the text to be localized is of such a simple format that writing a tool to parse it is a trivial exercise. We will need some form of tool to convert native encoding to Unicode character references.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>There are 4 files to track! Actually the language specific DTD is complete and valid as is, so it could easily be declared inline in the language specific XML file. The link-attributes have been entitized and could conceivably be inherited from a higher level DTD.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>In reloading downloadable chrome, not all related files can be destroyed and rebuilt by the client</B>.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<OL TYPE="a">

<B><P ALIGN="JUSTIFY"><LI>"@resourceID"</B> </LI></P></OL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<I><U><P ALIGN="JUSTIFY">Description</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Assuming the "timely access" problem can be overcome, we could get around the "syntax constraint" problem by using an entity-like syntax of our own. That is, we invent something, say we use the "@" symbol like entities use the "&amp;" symbol. Then these things are used throughout the content just like entities would have been used to do localization. This still assumes we have some way to get at the language-specific-substitution text after parsing (so it can't be a parser directive; it may have to be some sort of special element that XUL will recognize and not display). If all this worked, we'd be free to add localizable text anywhere without constraining the element and attribute structure. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">For example </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">&lt;element l10nID="100" text="english version"/&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">becomes </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;element text="@100;"/&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">or </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;element&gt;@100;&lt;/element&gt;, if that's more appropriate for the widget). </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">There just needs to be a central single routine that knows where to find the table of localized text strings. It finds "@.*;" sequences and substitutes them. We have to walk the content model after parsing and hand every string to this routine, and widgets have to pass all their text strings through it before they do anything with them. </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<I><U><P ALIGN="JUSTIFY">Pros</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>If all this worked, we'd be free to add localizable text anywhere without constraining the element and attribute structure. Content data could be uniquely identified and externalized.</LI></P></UL>

<I><U><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">Cons</I></U>: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>The entity solution, &quot;XUL + Language-specific DTD&quot;, is more XML compliant and less work to implement</B>.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><FONT FACE="Arial"><P ALIGN="JUSTIFY">5.2 The final decision - &quot;XUL + Language-specific DTD&quot;. </P>
</FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">All proposed solutions except (a), &quot;<B>XUL + Language-specific DTD</B>&quot;, are filtered out due to the technical difficulties or drawbacks highlighted by bold face in their &quot;cons&quot; lists. It turns out that the DTD solution also satisfies the majority of our criteria. One obvious advantage of the DTD solution is that it is an application of the standard feature recommended in XML specification 1.0. It’s easy to convince the XML parser developers to support this feature. For the same reason, XUL writers are more likely to adopt this strategy due to its standard compliance.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">6. What resources are localizable?</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Now that we have a solution for localizing XUL, the next step is to identify what resources are localizable. The rule of thumb is- &quot;all resources that contribute to the appearance of the chrome are localizable&quot;. Let’s take a close look at them.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Widget resources</LI></P></UL>

</I><P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>All <B>texts</B> in the graphical user interface are localizable. Examples include menu label strings, dialog and windows title strings, tooltip strings, status text, etc.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>URLs to localizable <B>images</B>. While some icon images in one culture are popularly used, they might not be appropriate in other cultures. We need the ability to customize them to fit local cultures. Note that it is the URL to the image that we will localize instead of the image data itself.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Content data</I>. This includes both plain text and HTML tagged data.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Style information</I> such as font, size, and color, may need to be localized. For example, while color white is the symbol of purity in one culture, it is a color of sorrow and sadness in another. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>The <I>geometric layout</I>. We may (rarely we hope) need to modify the layout. For example, some English radio buttons are laid out horizontally, but their German version could make them too wide. Under such circumstance, we might want to arrange them vertically. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">7. Ensuring the localizability - XUL Coding Style Guidelines</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Now that we have the knowledge of how and what to localize, we need a set of XUL authoring guidelines to ensure that XUL files are localizable. Although, localizability is the main goal here, most of the guidelines are considered good XML authoring practices for ensuring portability and customizability.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>Convert HTML files to XUL files</B>. All UI descriptions written in HTML shall be converted into XUL. Currently, we do not have a clean way of localizing HTML files. XUL is our UI description language. In addition, there are certain XUL specific features, such as XUL fragments, which are supported in XUL content model only.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>The XML declaration</B>. All XML declarations shall contain the following information: </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Version number</I>. Version number indicates that this XML document conforms to a particular version of XML specification. It is provided as a means to allow the possibility of automatic version recognition, should it become necessary. Processors may signal an error if they receive documents labeled with versions they do not support [4].</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><I><P ALIGN="JUSTIFY"><LI>UTF-8 </B>encoding</I>. Wherever applicable, the recommended encoding of the content data and attribute values is <B>UTF-8</B>. In Mozilla, when such information is not specified, UTF-8 is the default encoding of all XML, XUL, and RDF documents. There are a couple of reasons we adopt UTF-8:</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>

<UL>
<P ALIGN="JUSTIFY"><LI>According to XML specification 1.0, all XML parsers must support UTF-8 encoding. Using UTF-8 guarantees our document encoding is portable across user agents (parsers).</LI></P></UL>
</UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>

<UL>
<P ALIGN="JUSTIFY"><LI>Multi-lingual display is a requirement of the Mozilla browser and Unicode encoding covers all the languages we support.</LI></P></UL>
</UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">Note that since ASCII is a subset of UTF-8, ordinary ASCII entities do not strictly need an encoding declaration. </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>


<UL>
<I><P ALIGN="JUSTIFY"><LI>Style sheet</I>. An XML file must have a style sheet associated with it, otherwise, it won't know how to display the document. Note that, as suggested below in &quot;Configurable Chrome&quot;, chrome type URLs shall be used to reference the style sheet.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Namespace</I>. In XUL documents, namespace shall default to "xul" and be declared in the root element. Other namespace referenced shall be declared before use and preferably in the root element of the document. See the sample XUL declaration below for illustration. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Case sensitivity</I>. Be aware that XML is case sensitive. In compliance with XHTML working draft [5], all element and attribute names shall be in lower case. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<I><U><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Sample XUL declaration </P>
</I></U><P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;?xml version="1.0" encoding='UTF-8' ?&gt; </P>
<P ALIGN="JUSTIFY">&lt;?xml-stylesheet href="xul.css" type="text/css"?&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&lt;!DOCTYPE window&gt; </P>
<P ALIGN="JUSTIFY">&lt;window xmlns:html="http://www.w3.org/1999/xhtml" </P>
<P ALIGN="JUSTIFY">xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Chrome URLs</B>. All resource references in XUL shall use the chrome type URLs instead of hardwired URLs. The rules are:</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Place all platform and language neutral files in content/ and skin/ directories. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Place all locale and platform sensitive files under their specific sub-directories such as "navigator/locale/en" and "navigator/platform/unix". Note that all languages and platforms are treated equally and stored in their respective sub-directories. Candidates of such files are platform-specific style sheets and language-specific DTD files. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">Why is it important to put language-specific files in locale-specific sub-directories? Because we want to be able to switch between languages on the same user machine. This is essential on UNIX and maybe on other Operating systems. It would also facilitate the implementation of downloadable chrome customized to a user's language and platform characteristics.</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>JavaScript functions</B>. JavaScript code shall be moved out of XUL. That is, instead of writing them inline as                         </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;html:script&gt; </P>
<P ALIGN="JUSTIFY">... </P>
<P ALIGN="JUSTIFY">... </P>
<P ALIGN="JUSTIFY">/* JavaScript code */ </P>
<P ALIGN="JUSTIFY">... </P>
<P ALIGN="JUSTIFY">... </P>
<P ALIGN="JUSTIFY">&lt;/html:script&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>

<P ALIGN="JUSTIFY">We move them into a foo.js file and declare its URI in this fashion:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">                              &lt;html:script src="foo.js" encoding="UTF-8" /&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">                         (Refer to http://www.w3.org/TR/REC-html40/interact/scripts.html#edef-SCRIPT</P>
<P ALIGN="JUSTIFY">                         for the official specification of this syntax) </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&#9;The advantages of this are:</P>
<P ALIGN="JUSTIFY">                           </P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Legibility</I>. The main purpose of the XUL is to describe the UI content. As style information shall be in style sheet, JavaScript code shall be in *.js as well to keep the main XUL file clean. In some XUL files, JavaScript code takes up 20-25% of the length of the file. Often times, we need to go to the very bottom of the file to find the UI descriptions.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Maintainability</I>. By putting JavaScript code in external files, we can isolate the function declaration in a separate file. The developer does not need to touch the main XUL to change its runtime behavior.</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<I><P ALIGN="JUSTIFY"><LI>Flexibility</I>. Since the JavaScript code is in an external file, customization can be achieved by switching the JS file. With chrome registry, developers, content providers, or even the end users will be able to edit the registry table to use a customized JS code for their browser client. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<B><P ALIGN="JUSTIFY"><LI>Widget resources</B>. To make a widget attribute localizable, its value string must be declared as the value of a text entity and referenced by its entity name. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">In addition, to increase the readability of the XUL file and make entity names self-explanatory, a hierarchical naming scheme is proposed: </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>

<UL>
<P ALIGN="JUSTIFY"><LI>The entities to substitute attribute values of a widget shall be named after the widget ID (or widget element names if no ID is assigned.)</LI></P></UL>
</UL>

<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">For example, if a command button is named &quot;backCmd&quot;, then its label string resource shall be named as "backCmd.label" and defined as &lt;!ENTITY backCmd.label "Back" &gt; in the external DTD. The general form is</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">e<I>lementName</I><B>.</B><I>attributeName</I>. </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">See the example below for illustration. </P></DIR>

<P ALIGN="JUSTIFY">                      </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&#9;<I><U>Example</I></U>: a browser.xul and its browser.dtd:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<B><P ALIGN="JUSTIFY">browser.xul</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><P ALIGN="JUSTIFY">&lt;button id="backCmd" </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">img="&amp;backCmd.img;"</P>
<P ALIGN="JUSTIFY">tooltip="&amp;backCmd.tooltip;"</P>
<P ALIGN="JUSTIFY">status="&amp;backCmd.status;"&gt; </P>
<P ALIGN="JUSTIFY">&amp;backCmd.label; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;/button&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<B><P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">browser.dtd</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><P ALIGN="JUSTIFY">&lt;!ENTITY backCmd.label "Back"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY backCmd.tooltip "Back to previous page"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY backCmd.status "Back to the previous page"&gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY backCmd.img"TB_Back.gif"&gt;</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>
</DIR>
</DIR>


<UL>
<B><P ALIGN="JUSTIFY"><LI>Content data. </B>Content data, either in plain text or HTML/XML tagged, need to be declared as general entities in the external DTD and referenced in XUL stream. </LI></P></UL>

<B><P ALIGN="JUSTIFY">&nbsp;</P><DIR>

</B><P ALIGN="JUSTIFY">In addition, recommendation for grouping content data and HTML tagged data is provided below. </P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>


<UL>
<P ALIGN="JUSTIFY"><LI>Content containing markups shall be separated from plain text data. Localizing plain text is much easier (and cheaper) than localizing markup tagged data. See the example for illustrations. </LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>
<P ALIGN="JUSTIFY"><LI>Content text forming a complete sentence shall be declared in one single entity. We try to avoid placing markups in entity declaration; but the rule, "<I>forming a complete sentence</I>", takes precedence when there is a conflict. Translating broken sentences is not only painful but also error-prone. Here are examples of HTML tagged data which shall be declared as one entity:</LI></P></UL>

<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>

<UL>
<P ALIGN="JUSTIFY"><LI>A list item (as opposed to the whole list.) </LI></P>
<P ALIGN="JUSTIFY"><LI>A table cell (as opposed to the whole table.) </LI></P>
<P ALIGN="JUSTIFY"><LI>A paragraph (as opposed to the whole chapter). </LI></P>
<P ALIGN="JUSTIFY"><LI>And many others (such as framesets...). </LI></P></UL>
</UL>

<P ALIGN="JUSTIFY">                                </P><DIR>

<I><U><P ALIGN="JUSTIFY">Example</I></U>: </P>
<I><U><P ALIGN="JUSTIFY">&nbsp;</P>
</I></U><P ALIGN="JUSTIFY">A sample HTML tagged content data: </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">&lt;html:i&gt;</P><DIR>
<DIR>

<P ALIGN="JUSTIFY">This document is modified but not saved. You will have choices about what to do with it:</P></DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;/html:i&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:ul&gt; </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;html:li&gt;Save it and exit.&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;Save it but do not exit.&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;Exit without saving it&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;&lt;html:b&gt;Don't&lt;/html:b&gt; exit.&lt;/html:li&gt; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;/html:ul&gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">Entities to be declared for the document: </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;!ENTITY prompt             "This document is modified but not saved. You will have choices about what to do with it:" &gt; </P></DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;!ENTITY saveNexit         "Save it and exit." &gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY saveNotExit     "Save it but do not exit." &gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY exit                   "Exit without saving it" &gt; </P>
<P ALIGN="JUSTIFY">&lt;!ENTITY dontExit           "&lt;html:b&gt;Don't&lt;/html:b&gt; exit." &gt; </P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">&nbsp;</P></DIR>

<P ALIGN="JUSTIFY">The XUL will be sent to the parser:</P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">&lt;html:i&gt; &amp;prompt; &lt;/html:i&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:ul&gt; </P><DIR>
<DIR>

<P ALIGN="JUSTIFY">&lt;html:li&gt;&amp;saveNexit;&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;&amp;saveNotExit;&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;&amp;exit;&lt;/html:li&gt; </P>
<P ALIGN="JUSTIFY">&lt;html:li&gt;&amp;dontExit;&lt;/html:li&gt; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">&lt;/html:ul&gt; </P></DIR>
</DIR>

<P ALIGN="JUSTIFY">                               </P>
<P ALIGN="JUSTIFY">&nbsp;</P><DIR>

<P ALIGN="JUSTIFY">Note that we try to avoid markups in entity values unless the markups are within a complete sentence.</P></DIR>

</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">8. Summary</P>
</B></I></FONT><FONT SIZE=2><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">In the past, localization enablement used to be considered as a downstream task in the process of software development. This is actually a misconception. Internationalization enablement must be taken into account in the early phase of product planning. Localizing a software product with no underlying internationalization support is nearly tantamount to rebuilding the whole product. It is both tedious and difficult if not impossible.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Two important features of the XUL technology constitute the localizability of XUL-based UI:</P>
<P ALIGN="JUSTIFY">&nbsp;</P>

<UL>

<UL>
<P ALIGN="JUSTIFY"><LI>the parser support of text entities in the external DTD subset;</LI></P>
<P ALIGN="JUSTIFY"><LI>the &quot;Configurable Chrome&quot; feature</LI></P></UL>
</UL>

<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">While the DTD features externalize the localizable resources, the &quot;Configurable Chrome&quot; feature allows the browser client to load language-specific files dynamically.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">Localization enabling is a collaborative effort. It demands an enormous amount of communication and co-operation from all component owners. At the same time, the quality of the whole product also improves since the adoption of Unicode as the standard data encoding makes the internal data exchange more consistent and reliable and thus reduces the chance of data loss and corruption.</P>
<P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">XUL style guidelines for externalizing text entities, style sheets, JavaScript functions, etc. are widely supported by the front-end developers. They have been adopted as a way of componentizing XUL files such that files are legible, maintainable, and customizable.</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">&nbsp;</P>
<P ALIGN="JUSTIFY">9. Acknowledgements</P>
</B></I></FONT><FONT SIZE=2><P>&nbsp;</P>
<P>The author would like to thank Bob Jung, Katsuhiko Momoi, Erik van der Poel, Montserrat Sanz, and Yung-Fong Tang for their tireless guidance in his exploration of the Internationalization and Localization world. His appreciation also goes to Tague Griffith who inspires the idea of writing down this paper. Finally, he would like to direct his appreciation to Shani Parrott and Katsuhiko Momoi for proofreading this paper.</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P ALIGN="JUSTIFY">10. References</P>
</B></I></FONT><FONT SIZE=2><P>&nbsp;</P>
<OL>

<LI>Erik van der Poel, &quot;String resources&quot;,</LI>
<P>http://www.mozilla.org/projects/intl/string-resources.html</P>
<P>&nbsp;</P>
<LI>Daniel Matejka, &quot;XUI Language Spec&quot;,</LI>
<P></FONT><A HREF="http://www.mozilla.org/xpfe/languageSpec.html"><FONT SIZE=2>http://www.mozilla.org/xpfe/languageSpec.html</FONT></A><FONT SIZE=2>.</P>
<P>&nbsp;</P>
<LI>David Hyatt, &quot;Configurable Chrome&quot;,</LI>
<P>http://www.mozilla.org/xpfe/ConfigChromeSpec.html</P>
<P>&nbsp;</P>
<LI>The World Wide Web Consortium, &quot;Extensible Markup Language (XML) 1.0&quot;,</LI>
<P></FONT><A HREF="http://www.w3.org/TR/1998/REC-xml-19980210"><FONT SIZE=2>http://www.w3.org/TR/1998/REC-xml-19980210</FONT></A></P>
<FONT SIZE=2><P>&nbsp;</P>
<LI>The World Wide Web Consortium, &quot;XHTML&trade; 1.0: The Extensible HyperText Markup Language, A Reformulation of HTML 4.0 in XML 1.0&quot;, W3C Working Draft 5th May 1999,</LI>
</FONT><U><FONT SIZE=2 COLOR="#0000ff"><P>http://www.w3.org/TR/1999/xhtml1-19990505/</P>
</U></FONT><FONT SIZE=2><P>&nbsp;</P>
<LI>The Unicode Consortium, &quot;The Unicode Standard, Version 2.0&quot;, Addison-Wesley Developers Press. July 1996.</LI></OL>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P>Appendix</P>
</B></I></FONT><FONT SIZE=2><P>&nbsp;</P>
<OL TYPE="A">

<LI>Sample XUL document: mozilla/xpfe/broswer/src/openLocation.xul</LI></OL>

<P>&nbsp;</P>
<P>  1 &lt;?xml version="1.0"?&gt; </P>
<P>  2 &lt;?xml-stylesheet href="xul.css" type="text/css"?&gt; </P>
<P>  3 </P>
<P>  4 &lt;!DOCTYPE window&gt;</P>
<P>  5 </P>
<P>  6 &lt;window xmlns:html="http://www.w3.org/1999/xhtml"</P>
<P>  7         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"</P>
<P>  8         onload="onLoad()"</P>
<P>  9         title="Open Location"</P>
<P> 10        width="420"</P>
<P> 11        height="190"&gt; </P>
<P> 12 </P>
<P> 13     &lt;html:script language="javascript" src="openLocation.js"&gt;</P>
<P> 14     &lt;/html:script&gt;</P>
<P> 15     </P>
<P> 16     &lt;broadcaster id="args" value=""/&gt;</P>
<P> 17 </P>
<P> 18</P>
<P> 19</P>
<P> 20    </P>
<P> 21       &lt;html:center&gt;</P>
<P> 22          &lt;html:p/&gt;</P>
<P> 23              &lt;html:table width="400" cellspacing="5"&gt;</P>
<P> 24                  &lt;html:tr&gt;</P>
<P> 25                      &lt;html:td&gt;</P>
<P> 26                          Enter the World Wide Web location (URL) you would like to open.  Use</P>
<P> 27                          the Choose File... button to select a local file:</P>
<P> 28                      &lt;/html:td&gt;</P>
<P> 29                  &lt;/html:tr&gt;</P>
<P> 30                  &lt;html:tr&gt;</P>
<P> 31                      &lt;html:td&gt;</P>
<OL START=32>

<LI>&lt;html:table cellspacing="5"&gt;</LI>
<LI>    &lt;html:tr&gt;</LI>
<LI>        &lt;html:td width="275"&gt;</LI>
<LI>            &lt;html:input id="dialog.input" style="width:275;" </LI>
<LI>                                onkeyup="onTyping(event.which)"/&gt;</LI></OL>

<P> 37                                  &lt;/html:td&gt;</P>
<P> 38                                  &lt;html:td width="100"&gt;</P>
<P> 39                                      &lt;html:button onclick="choose()"&gt;Select File...&lt;/html:button&gt;</P>
<P> 40                                  &lt;/html:td&gt;</P>
<P> 41                              &lt;/html:tr&gt;</P>
<P> 42                          &lt;/html:table&gt;</P>
<P> 43                         &lt;/html:td&gt;</P>
<P> 44                  &lt;/html:tr&gt;</P>
<P> 45                  &lt;html:tr&gt;</P>
<P> 46                      &lt;html:td&gt;</P>
<P> 47                          &lt;html:table cellspacing="5"&gt;</P>
<P> 48                              &lt;html:tr&gt;</P>
<P> 49                                  &lt;html:td width="165"&gt;</P>
<OL START=50>

<LI>&lt;html:input id="dialog.newWindow" type="checkbox"/&gt;</LI></OL>
<DIR>
<DIR>
<DIR>
<DIR>

<P>Open in new window</P></DIR>
</DIR>
</DIR>
</DIR>

<P> 51                                  &lt;/html:td&gt;</P>
<P> 52                                  &lt;html:td width="70"&gt;</P>
<OL START=53>

<LI>&lt;html:button id="dialog.ok" onclick="open()"</LI></OL>
<DIR>
<DIR>
<DIR>
<DIR>

<P> disabled=""&gt;Open&lt;/html:button&gt;</P></DIR>
</DIR>
</DIR>
</DIR>

<P> 54                                  &lt;/html:td&gt;</P>
<OL START=55>

<LI>&lt;html:td width="70"&gt;</LI>
<LI>    &lt;html:button id="dialog.cancel" onclick="cancel()"</LI>
<LI>                          disabled=""&gt;Cancel&lt;/html:button&gt;</LI>
<P> 58                                  &lt;/html:td&gt;</P>
<LI>&lt;html:td width="70"&gt;</LI>
<LI>               &lt;html:button id="dialog.help" onclick="help()" </LI>
<LI>                                      disabled=""&gt;Help&lt;/html:button&gt;</LI></OL>

<P> 61                                  &lt;/html:td&gt;</P>
<P> 62                              &lt;/html:tr&gt;</P>
<P> 63                          &lt;/html:table&gt;</P>
<P> 64                      &lt;/html:td&gt;</P>
<P> 65                  &lt;/html:tr&gt;</P>
<P> 66              &lt;/html:table&gt;</P>
<P> 67          &lt;html:p/&gt;</P>
<P> 68      &lt;/html:center&gt;</P>
<P> 69 </P>
<P> 70 &lt;/window&gt;</P>
<P>&nbsp;</P>
<P>B. Sample JavaScript file, openLocation.js, associated with the XUL document in Appendix A.</P>
<P> </P>
<P> 21 var toolkit;</P>
<P> 22 var browser;</P>
<P> 23 var dialog;</P>
<P> 24 </P>
<P> 25 function onLoad() {</P>
<P> 26         dialog = new Object;</P>
<P> 27         dialog.input     = document.getElementById( "dialog.input" );</P>
<P> 28         dialog.ok        = document.getElementById( "dialog.ok" );</P>
<P> 29         dialog.cancel    = document.getElementById( "dialog.cancel" );</P>
<P> 30          dialog.help      = document.getElementById( "dialog.help" );</P>
<P> 31         dialog.newWindow = document.getElementById( "dialog.newWindow" );</P>
<P> 32         dialog.args      = document.getElementById( "args" );</P>
<P> 33 </P>
<P> 34         toolkit = XPAppCoresManager.Find( "toolkitCore" );</P>
<P> 35         if ( !toolkit ) {</P>
<P> 36                 toolkit = new ToolkitCore();</P>
<P> 37                 toolkit.Init( "toolkitCore" );</P>
<P> 38         }</P>
<P> 39 </P>
<P> 40         browser = XPAppCoresManager.Find( dialog.args.getAttribute( "value" ) );</P>
<P> 41         if ( !browser ) {</P>
<P> 42                 dump( "unable to get browser app core\n" );</P>
<P> 43                 //toolkit.CloseWindow( window );</P>
<P> 44         }</P>
<P> 45 </P>
<P> 46         /* Give input field the focus. */</P>
<P> 47         dialog.input.focus();</P>
<P> 48 }</P>
<P> 49 </P>
<P> 50 function onTyping( key ) {</P>
<P> 51    // Look for enter key...</P>
<P> 52    if ( key == 13 ) {</P>
<P> 53       // If ok button not disabled, go for it.</P>
<P> 54       if ( !dialog.ok.disabled ) {</P>
<P> 55          open();</P>
<P> 56       }</P>
<P> 57    } else {</P>
<P> 58       // Check for valid input.</P>
<P> 59       if ( dialog.input.value == "" ) {</P>
<P> 60          // No input, disable ok button if enabled.</P>
<P> 61          if ( !dialog.ok.disabled ) {</P>
<P> 62             dialog.ok.setAttribute( "disabled", "" );</P>
<P> 63          }</P>
<P> 64       } else {</P>
<P> 65          // Input, enable ok button if disabled.</P>
<P> 66          if ( dialog.ok.disabled ) {</P>
<P> 67             dialog.ok.removeAttribute( "disabled" );</P>
<P> 68          }</P>
<P> 69       }</P>
<P> 70    }</P>
<P> 71 }</P>
<P> 72 </P>
<P> 73 function open() {</P>
<P> 74    if ( dialog.ok.disabled ) {</P>
<P> 75       return;</P>
<P> 76    }</P>
<P> 77 </P>
<P> 78         var url = dialog.input.value;</P>
<P> 79 </P>
<P> 80         if ( !dialog.newWindow.checked ) {</P>
<P> 81                 /* Load url in opener. */</P>
<P> 82                 browser.loadUrl( url );</P>
<P> 83         } else {</P>
<P> 84                 /* User wants new window. */</P>
<OL START=85>

<LI>toolkit.ShowWindowWithArgs( "resource:/res/samples/navigator.xul", </LI></OL>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>
<DIR>

<P>window.opener, url );</P></DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>
</DIR>

<P> 86         }</P>
<P> 87 </P>
<P> 88         /* Close dialog. */</P>
<P> 89         //toolkit.CloseWindow( window );</P>
<P> 90 }</P>
<P> 91 </P>
<P> 92 function choose() {</P>
<P> 93         /* Use existing browser "open" logic. */</P>
<P> 94         browser.openWindow();</P>
<P> 95         //toolkit.CloseWindow( window );</P>
<P> 96 }</P>
<P> 97 </P>
<P> 98 function cancel() {</P>
<P> 99    if ( dialog.cancel.disabled ) {</P>
<P>100       return;</P>
<P>101    }</P>
<P>102         //toolkit.CloseWindow( window );</P>
<P>103 }</P>
<P>104 </P>
<P>105 function help() {</P>
<P>106    if ( dialog.help.disabled ) {</P>
<P>107       return;</P>
<P>108    }</P>
<P>109         dump( "openLocation::help() not implemented\n" );</P>
<P>110 }</P></FONT></BODY>
</HTML>
