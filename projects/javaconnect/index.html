<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
  <title>Javaconnect</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">





<h1>Javaconnect</h1>
<p>Newsgroup: <a
 href="news://news.mozilla.org/netscape.public.mozilla.java">netscape.public.mozilla.java</a></p>

<h2>Contacts</h2>
<ul>
  <li><a href="mailto:jhpedemonte@gmail.com">Javier Pedemonte</a></li>
</ul>

<h2>Content</h2>
<ol class="toc">
  <li><a href="#Overview">Overview</a></li>
  <li><a href="#Build">Building the code</a></li>
  <li><a href="#Sample">Sample code</a></li>
  <li><a href="#Todo">Todo</a></li>
  <li><a href="#References">References</a></li>
</ol>

<h2><a name="Overview"></a><span style="font-weight: bold;">Overview</span></h2>
<p>Javaconnect allows for communication between Java and XPCOM, such
that a Java application can access XPCOM objects, and XPCOM can access
any Java class that implements an XPCOM interface. With
Javaconnect, a developer can talk to
XPCOM or embed Gecko from a Java application. Javaconnect is very
similar to <a href="http://www.mozilla.org/scriptable/xpidl/index.html">xpconnect</a>
(Javascript-XPCOM bridge), and uses <a
 href="http://www.mozilla.org/scriptable/xpidl/index.html">XPIDL</a>.
</p>
<p>Javaconnect consists of two parts: the JNI library (libjavaxpcom.so
on Linux, javaxpcom.dll on Win32) and the Java classes and interfaces
(mozjava.jar).</p>
<p>Java classes and interfaces: Mozilla defines many external
interfaces available to embeddors and component developers.
Javaconnect provides access to these interfaces as Java interfaces,
compiled from the original IDL files. Javaconnect also contains
several classes that provide access to functions for initializing and
shutting down XPCOM and Gecko from Java, as well as some XPCOM helper
functions.</p>
<p>The JNI library does most of the actual work. It is
responsible for allowing Java to talk to XPCOM and vice versa.
The JNI library creates proxy objects that allow one side to forward
method calls on an object to the other side. The library makes
use of <a href="http://www.mozilla.org/scriptable/typelib_file.html">typelib
files</a> (originally created for xpconnect) for calling the methods
and parsing method arguments.
</p>

<h2><span style="font-weight: bold;"><a name="Build"></a>Building the
code</span></h2>
<p>Javaconnect is not built by default, and is not available on any
of the nightlies. So you will have to build it yourself.</p>
<p>In addition to the particular build requirements for Mozilla, you
need to tell the build about your JVM. Javaconnect should build
with JVM 1.3 and up.&nbsp; You can specify the location of your JVM by
adding the following configure options to your .mozconfig file:

<div style="margin-left: 40px; font-family: monospace;">ac_add_options
--with-java-include-path=&lt;directory of Java SDK headers (i.e.
jni.h)&gt;<br>
ac_add_options --with-java-bin-path=&lt;directory of Java binaries
(i.e. java.exe)&gt;</div>

<p>If you do not specify either of these options, then the build
defaults to the location specified in the JAVA_HOME environment
variable (on Linux and Windows) or
/System/Library/Frameworks/JavaVM.framework/Headers on Mac OS X.
<br><b>NOTE:</b> If you are building on Windows, you will need to make sure that
your JVM paths don't include any spaces (i.e. <code>set
JAVA_HOME=C:\Progra~1\jdk1.5.0</code> or from within cygwin bash <code>export
JAVA_HOME=/cygdrive/c/Progra~1/jdk1.5.0</code>).</p>
<p>The Javaconnect code is available on the trunk in the <a
 href="http://lxr.mozilla.org/mozilla/source/extensions/java/xpcom">mozilla/extensions/java/xpcom</a>
directory. In order to build, add the following to your <span
 style="font-family: monospace;">.mozconfig</span> file:</p>
<div style="margin-left: 40px; font-family: monospace;">
ac_add_options --enable-extensions=default,java</div>

<h2><span style="font-weight: bold;"><a name="Sample"></a>Sample Code</span></h2>
<p>There are several Java test applications checked in to the tree that
give examples on how to embed Gecko or init XPCOM from within
Java. The test apps can be found at
<a href="http://lxr.mozilla.org/mozilla/source/extensions/java/xpcom/tests">
mozilla/extensions/java/xpcom/tests</a>.</p>

<h2><span style="font-weight: bold;"><a name="Todo"></a>Todo</span></h2>
<ul>
  <li><del><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=281102">
      Bug 281102</a> - Map many Java objects to one XPCOM obj</del></li>
  <li><del><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=279649">
      Bug 279649</a> - Dynamically create Java proxy objects</del></li>
  <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=275359">
      Bug 275359</a> - Various minor fixes and improvements</li>
  <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=278133">
      Bug 278133</a> - Implement 'array' param support &nbsp;&nbsp;
      &lt;&mdash; partly finished</li>
  <li><del><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=291512">
      Bug 291512</a> - Generate Java interface files using
      nsIInterfaceInfoManager</del></li>
  <li>Create component loader - would allow creation of XPCOM
components written in Java to be loaded on demand by Mozilla.</li>
</ul>

<h2><a name="References"></a><span style="font-weight: bold;">References</span></h2>
<ul>
  <li><a
 href="http://lxr.mozilla.org/mozilla/source/extensions/java/xpcom">Javaconnect
source</a></li>
  <li><a
 href="http://bonsai.mozilla.org/cvsquery.cgi?treeid=default&amp;module=all&amp;branch=HEAD&amp;branchtype=match&amp;dir=mozilla%2Fextensions%2Fjava%2Fxpcom&amp;file=&amp;filetype=match&amp;who=&amp;whotype=match&amp;sortby=Date&amp;hours=2&amp;date=month&amp;mindate=&amp;maxdate=&amp;cvsroot=%2Fcvsroot">Checkins</a>
within the last month</li>
  <li><a href="http://www.mozilla.org/scriptable/">XPConnect</a> -
Javascript-XPCOM bridge</li>
  <li><a href="http://www.mozilla.org/projects/blackwood/connect/">Blackconnect</a>
- Java-XPCOM bridge (no longer supported)</li>
  <li><a
 href="http://www.mozilla.org/projects/blackwood/connect/RequirementsSpec.html#IDL">XPIDL
to Java</a> - from Blackconnect</li>
</ul>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May 11,  2005</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/javaconnect/index.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
