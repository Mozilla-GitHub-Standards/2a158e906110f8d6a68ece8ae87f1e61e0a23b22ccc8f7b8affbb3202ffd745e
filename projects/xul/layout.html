<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML lang=en xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><HEAD><TITLE>XUL 1.0</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<LINK 
href="xul_files/W3C-WD.css" type=text/css rel=stylesheet>
<link href="xul_files/spec.css" type=text/css rel=stylesheet>
<META content="MSHTML 5.50.4208.1700" name=GENERATOR></HEAD>
<BODY>
<DIV class=navlinks>
<P><A 
href="intro.html">previous</A> 
&nbsp;
<A 
href="widgets.html">next</A> 
&nbsp; <A 
href="xul.html#minitoc">contents</A></P></DIV>

<HR class=navbar>

<DIV class=head>

<h1>2 Layout and Positioning</h1>

<h2>2.1 The Box Layout System</h2>
<p>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&status_whiteboard=%5Bxul1.0-layout-box%5D&status_whiteboard_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">
View the remaining XUL1.0 box compliance issues in Bugzilla.
</a>
<p> The <dfn>box</dfn> is one of the fundamental building blocks of XUL.
Nearly all of the elements in XUL are boxes.  Boxes are containers that define
the layout of controls within a XUL document.
Boxes lay out their children using a
constraint-based system that supports both relative flexible sizing
and intrinsic sizing.

<p> In CSS, an inline box can be specified using the <span
class="property">'display'</span> property with a value of <span
class="css">inline-box</span>.  A block-level box can be specified
with a value of <span class="css">box</span>.

<p>The <span class="property">'float'</span> property does not apply
to children of box elements. </p>
<p>[Editor's Note: The following sections introduce new CSS properties that can
be used with boxes.  Because these properties are not yet part of any CSS
standard, they are
prefaced with '-moz-' in Mozilla.  To use 'box-orient' in Mozilla, for 
example, you would actually type '-moz-box-orient'.]
</p>

<h3>Orientation and Direction</h3>

    <table class="propdef">
      <caption>
        <dfn>'box-orient'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>horizontal | vertical | inline-axis | block-axis | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>inline-axis</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p>A box has both an <dfn>orientation</dfn> and a
<dfn>direction</dfn>.  The <span class="property">'box-orient'</span>
CSS property specifies the orientation of the box.  It has values of
<span class="css">horizontal</span>, <span
class="css">vertical</span>, <span class="css">inline-axis</span>,
<span class="css">block-axis</span>, and <span
class="css">inherit</span>.  A horizontal box lays out its children in
a horizontal line, and a vertical box stacks its children
vertically. The inline and block axes are the writing-mode dependent
keywords which, in English, map to horizontal and vertical
respectively.

    <table class="propdef">
      <caption>
        <dfn>'box-direction'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>normal | reverse | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>normal</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p> The <span class="property">'box-direction'</span> CSS property
specifies the direction of the box.  It has values of <span
class="css">normal</span>, <span class="css">reverse</span>, and <span
class="css">inherit</span>.  A normal horizontal box lays out its
children from left to right, and a normal vertical box lays out its
children from top to bottom.

<p> If direction and orientation are omitted on the 
outermost box in a box group, it is assumed to have a horizontal orientation and
normal direction.  
Note that some widgets in XUL have vertical orientations as the default.
If a widget has a default vertical orientation this will be explicitly
mentioned in the widget's definition (see Section 3).
<p>
Most elements in XUL are actually boxes.  Any box element in XUL
supports two attributes for setting orientation and direction.  These attributes
are <dfn>orient</dfn> and <dfn>dir</dfn>.  The supported values are the same
as the corresponding CSS properties.  To use a generic box in XUL, the
<dfn>box</dfn> element can be used.
</p>
<p>
In addition, two shorthand tags can be used in XUL to describe boxes with 
specific
orientations.  <dfn>hbox</dfn> describes a horizontal box, i.e., a box with a
an inline-axis orientation, and <dfn>vbox</dfn> describes a vertical box,
i.e., a box with a block-axis orientation.
<p>
<div class="example">

<pre class="xml">
&lt;hbox&gt;
     &lt;button label="Child 1"/&gt;
     &lt;button label="Child 2"/&gt;
&lt;/hbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box1.gif" alt="">

</div>

<p>When items are placed in a box without specifying any additional
information about their size, then the box sizes the children
<dfn>intrinsically</dfn>. In other words, the box makes each child
only as big as it needs to be. 

<p class="example">Notice that in the above example, the two buttons
are only as big as they need to be to display all of their text.</p>

<p>Widths can be specified for items inside a horizontal box. When an
object specifies its width in CSS, it is telling the box that it would
like to be that width. Similarly, heights can be specified in CSS for
items in a vertical box.  An unnested box placed inside an enclosing
CSS block will obey all the usual sizing rules of the block.  For
example, setting the width of an unnested box to 100% ensures that the
box is the maximum width permitted by the enclosing CSS block
(ignoring any margins, border and padding on that box).  </p>

<div class="example">

<pre class="xml">
&lt;hbox&gt;
     &lt;button style="width: 200px" label="Child 1"/&gt;
     &lt;button style="width: 100px" label="Child 2"/&gt;
&lt;/hbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box2.gif" alt="">

<p>In this example, the first child is twice as wide as the second
child, since it specified a width of 200 pixels. The second child
specified a width of only 100 pixels.</p>

</div>

<h3>Alignment</h3>

    <table class="propdef">
      <caption>
        <dfn>'box-align'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>start | end | center | baseline | stretch | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>stretch</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p>The <span class="property">'box-align'</span> property specifies
how controls are aligned along the orientation of the box.  Its
possible values are <span class="css">start</code>, <span
class="css">end</code>, <span class="css">center</code>, <span
class="css">baseline</code>, <span class="css">stretch</code> and
<span class="css">inherit</span>.  The initial value is <span
class="css">stretch</span>.

<p>By default a horizontal box ensures that all children are the same
height.  Once a height is computed for a horizontal box, all of the
children are stretched vertically to the height of the box (minus the
CSS border and padding on the box).  Similarly, a vertical box ensures
that all its children are the same width.  The stretch policy
overrides any specified width or height values.

<div class="example">

<pre class="xml">
&lt;vbox&gt;
     &lt;button label="Cat"/&gt;
     &lt;button label="Piranha"/&gt;
     &lt;button label="Antidisestablishmentarianism"/&gt;
&lt;/vbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box4.gif" alt="">

</div>

<p>In addition to <span class="css">stretch</span>, a box
can also align its children using the values <span
class="css">start</code>, <span class="css">center</code>, <span
class="css">baseline</code> and <span class="css">end</span>.   For a horizontal box,
start aligns the children along the top of the box, center positions the children
so that they are centered along the axis of the box, end aligns the children along
the bottom of the box, and baseline aligns the children along the text baseline.
<p>
A vertical box can align its children using the same values as a horizontal
box, with the exception of baseline.  For a vertical box, start aligns
the children along the left side of the box, center positions the chidlren
so that they are centered along the axis of the box, and end aligns the children
along the right side of the box.
<p>
When a value other than stretch is used, the box's children are
no longer stretched.  They are sized intrinsically and then aligned on
the box axis according to the specified property value on the
containing box.</p>
<p>
For XUL elements that are boxes, the <dfn>align</dfn> attribute can also be used
to specify the alignment of a box.  It has the same values as the corresponding 
CSS property.
<p>

<h3>Flex</h3>

<p>Items in boxes fall into two categories: <dfn>flexible</dfn> and
<dfn>inflexible</dfn>. Inflexible objects will not grow, even when
there is extra space left over in the box.</p>

<div class="example">

<pre class="xml">
&lt;hbox style="width: 400px;"&gt;
     &lt;button style="width: 200px" label="Child 1"/&gt;
     &lt;button style="width: 100px" label="Child 2"/&gt;
&lt;/hbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box3.gif" alt="">

</div>

    <table class="propdef">
      <caption>
        <dfn>'box-flex'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>&lt;number&gt; | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>0.0</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p>An object becomes flexible when the <span
class="css">box-flex</span> CSS property is specified for an element.
<span class="css">box-flex</span> has a floating point value
representing the flexibility of the object.  Its default value is 0,
which indicates that the object is inflexible.  Objects that are
flexible can shrink or grow as the box shrinks and grows. Whenever
there is extra space left over in a box, the flexible objects are
expanded to fill that space.  All flex is relative. For example, a
child with a flex of 2 is twice as flexible as a child with a flex of
1.</p>

<div class="example">

<pre>
&lt;vbox style="height: 200px"&gt;
     &lt;button label="Cat"/&gt;
     &lt;button style="box-flex: 1" label="Piranha"/&gt;
     &lt;button label="Antidisestablishmentarianism"/&gt;
&lt;/vbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box5.gif">

<p>In the above example, the box is 200 pixels tall, which is more
than enough room for the three buttons. Because the first and third
buttons are inflexible, they remain the same size as in the previous
example. The second button is specified as being flexible, and because
it is the only flexible object in the box, it receives all of the
extra space.</p>

</div>

<p>When several objects in a box are flexible, the extra space is
divided among the objects based on how flexible they are. The box
determines how much space to give an object by adding up the flex
values on all of its children. An object gets an amount of extra space
equal to the percentage of flex that it is responsible for.</p>

<div class="example">

<p>For example, if two objects have a flex of 1, then after both
objects are given their preferred sizes, the first object gets 1/(1+1)
= 1/2 of the extra space, and the second object also gets 1/2 of the
extra space.</p>

<pre>
&lt;vbox style="height: 200px"&gt;
     &lt;button style="box-flex: 1" label="Cat"/&gt;
     &lt;button style="box-flex: 1" label="Piranha"/&gt;
&lt;/vbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box6.gif" alt="">

</div>

<div class="example">

<p>Here is another example using objects with different flex values.</p>

<pre class="xml">
&lt;vbox style="height: 200px"&gt;
     &lt;button style="box-flex: 1" label="Cat"/&gt;
     &lt;button style="box-flex: 2" label="Piranha"/&gt;
     &lt;button style="box-flex: 3" label="Canary"/&gt;
&lt;/vbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box7.gif" alt="">

</div>

<p>
For XUL elements that are boxes, the <dfn>flex</dfn> attribute can also be used
to specify the alignment of a box.  It has the same values as the corresponding 
CSS property.
<p>

<h3>Preferred, Minimum, and Maximum Sizes</h3>

<p>For inflexible objects, the specification of the <span
class="property">'width'</span> and <span
class="property">'height'</span> CSS properties can be used to specify
an object's size. If these properties are omitted, an inflexible
object will be sized intrinsically, i.e., it will be given the minimum
amount of space required to lay out the item.</p>

<p>With flexible objects, there are more options. Just as with
inflexible objects, the <span class="property">'width'</span> and
<span class="property">'height'</span> properties can be used to
specify a preferred size. However, unlike inflexible objects, this
size is only a guideline.  A flexible object will stretch as
necessary. It will also shrink if required until it can shrink no more
(e.g., when the object hits its minimum required intrinsic size).</p>

<div class="example">

<pre>
&lt;vbox&gt;
   &lt;button flex="1" style="height:1000px" label="Cat"/&gt;
&lt;/vbox&gt;
</pre></td>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box9.gif">

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box8.gif">

<p>In the above example the box is shrinking, and despite the
specification of 1000 pixels as the preferred height, the button,
because it is flexible, shrinks with the box. It continues to shrink
until the minimum required height for the button is reached. After
that, the button can shrink no further. If the box were to continue to
shrink, the button's contents would be clipped, and a portion of the
button would no longer be visible.</p>

<p>Items within a box can therefore have their own notions of minimum
and maximum intrinsic sizes. In the above example, the button could
not get any smaller than the minimum height required to draw its
borders and its text.</p>

</div>

<p>For a more fine-grained control of minimum and maximum sizes, the
<span class="property">'min-width'</span>, <span
class="property">'min-height'</span>, <span
class="property">'max-width'</span>, and <span
class="property">'max-height'</span> CSS properties can be used. When
specified, these properties provide extra information to the box as it
shrinks and grows the object in question.</p>

<div class="example">

<p>In a horizontal box, for example, if a minimum width is specified,
then the flexible object will not be allowed to shrink below that
width. If a maximum width is specified, then the flexible object will
not be allowed to grow beyond that width.</p>

<pre class="xml">
&lt;vbox&gt;
    &lt;iframe style="box-flex: 1; min-height:100px; max-height:300px; 
                   width:300px" 
            src="http://www.mozillazine.org/"/&gt;
&lt;/vbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box10.jpeg">

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box11.jpeg">

<p>The above example demonstrates the use of <span
class="property">'min-height'</span> and <span
class="property">'max-height'</span> within a vertical box. In the
first image the box has been shrunk until it is smaller than 100
pixels in height. Because the iframe has a specified minimum height of
100 pixels, it is not allowed to shrink any further, and so as the box
falls below 100 pixels, the iframe gets clipped, and portions of it
become invisible.</p>

<p>In the second image, the box has been expanded past 300 pixels in
height. Even though the box is getting bigger, the extra space is not
being consumed by the iframe, because its maximum height of 300 pixels
has been reached. It will grow no further.</p>

</div>

<div class="example">

<p>Below is another example illustrating min and max width.</p>

<pre class="xml">
&lt;hbox&gt;
     &lt;button style="box-flex: 1; max-width: 50px" label="Child 1"/&gt;
     &lt;button style="box-flex: 1; min-width: 50px" label="Child 2"/&gt;
&lt;/hbox&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box12.gif">

<p>In the above example, the box has been stretched so that it is very
wide. The first child has a maximum width of 50 pixels, and it divides
the excess space equally with the second child until its maximum width
has been reached. After that, since it is not allowed to grow any
further, the remaining space all goes to the second child.</p>

</div>

<p>
For XUL box elements, the attributes <dfn>width</dfn>, <dfn>height</dfn>, <dfn>minwidth</dfn>, <dfn>minheight</dfn>,
<dfn>maxwidth</dfn>, and <dfn>maxheight</dfn> can all be used to specify sizes.  Their possible values correspond to the
 allowed values
of their corresponding CSS properties.
<p>
<h3>Packing Controls</h3>

    <table class="propdef">
      <caption>
        <dfn>'box-pack'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>start | end | center | justify | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>justify</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>yes</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p>When all of the items within a box are inflexible or when all
objects have grown to their maximum sizes and can stretch no further,
extra space may be left over in the box.  An additional property can
be used to dictate how any additional space should be distributed
between objects.  The CSS property <span
class="property">'box-pack'</span> has the possible values of 
<span class="css">start</span>, <span
class="css">end</span>, <span
class="css">center</span>, <span class="css">justify</span> and <span
class="css">inherit</span>.  The default is <span
class="css">start</span>.
<div class="example">
<pre class="xml">
&lt;box style="box-align: center; box-pack: center; 
                 width: 300px; height: 300px"&gt;
     &lt;button label="centered"/&gt;
&lt;/box&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box13.gif">

</div>

<p>
In the above example, the button is centered within the box using the <span class="property">'box-align'</span>
and <span class="property">'box-pack'</span> properties together.  The former centers the button vertically, and
the latter centers the button horizontally.

<p>
For XUL elements that are boxes, the <dfn>pack</dfn> attribute can also be used
to specify the alignment of a box.  It has the same values as the corresponding 
CSS property.
<p>


<h3>Ordinal Groups</h3>

    <table class="propdef">
      <caption>
        <dfn>'box-ordinal-group'</dfn>
      </caption>
      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>&lt;integer&gt; | inherit</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>1</td>
        </tr>
        <tr>
          <td><em>Applies&nbsp;to:</em></td>
          <td>children of box elements</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

<p>Children of a box element can be assigned to <dfn>ordinal groups</dfn>
using the <span class="css">'box-ordinal-group'</span> property.  This
property is a natural number value.  The default value is 1.
<p>
Ordinal groups can be used in conjunction with the 'box-direction' property
to control the order in which objects appear within a box.  When the
specified direction is normal, a box will start with the lowest numbered
ordinal group and ensure that those objects appear to the left (for horizontal
boxes) or at the top (for vertical boxes) of the container.  Objects with
the same ordinal group are flowed in the order they were declared in the
content model.  An object of a lower ordinal group will always appear before an object
of a higher ordinal group.
In the reverse direction, the highest ordinal group appears first, and the
container positions objects from the highest group down to the lowest.
<p>
XUL elements support a shorthand attribute for specifying an ordinal group.
The attribute <dfn>ordinal</dfn> can be used, and its allowed values are
identical to those allowed by the 'box-ordinal-group' CSS property.
<p> 
<h3>Visibility</h3>

<p>Items within a box can use the CSS <span
class="property">'visibility'</span> property to render themselves
invisible.  Boxes behave like tables in that the value <span
class="css">collapsed</span> can be used to specify that an item
within a box should not take up any space at all (just like <span
class="css">display:none</code>).  Flexible objects expand as needed
to fill any space left open by a collapsed item.</p>


<h3>Overflow</h3>

<p>Items within a box may use the CSS <span
class="property">'overflow'</span> property to obtain horizontal and
vertical scrollbars as needed.  Flexible objects that shrink below
their minimum intrinsic size can display scrollbars using the <span
class="css">auto</span> value.  If overflow is <span
class="css">hidden</span>, the object will be clipped
instead. <em>Note that the initial value is <span
class="css">visible</span>, which is typically not the preferred
effect in user interfaces.</em></p>


<h3>Inlines and Blocks</h3>

<p>Whether an element is inline or block when placed directly inside a
box is irrelevant.  Objects will be flowed horizontally or vertically
based off the <span class="property">'box-orient'</span> property.

<p>
When any raw text nodes are encountered directly inside a box, an anonymous block is constructed
to wrap the text.  This anonymous block then participates in the box layout as
a single item. This is the same as in CSS2.

<h2>2.2 Stacking Elements</h2>
<p>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&status_whiteboard=%5Bxul1.0-layout-stack%5D&status_whiteboard_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">
View the remaining stack compliance issues in Bugzilla.
</a>
<p>
Current CSS provides no means of stacking elements (i.e., positioning one
element on top of another element) within a container while still allowing that
container to be intrinsically sized.
XUL addresses this limitation through the use of a new display type called a
<dfn>stack</dfn>.
<p>
A <dfn>stack</dfn> is defined using the <span class="css">'stack'</span> display
property.  An inline stack can be defined using the <span class="css">'inline-stack'</span>
display property.  All child elements are stacked such that the upper left hand corners
of their margin boxes are aligned with the upper left hand corner of the stack's content
box.   If a stack is forced to size intrinsically, then the stack will expand such that all
children can be displayed.
<p>
Visibility can be used to control whether or not a child contributes to the intrinsic
sizing of the stack.  For example, a visibility of 'collapse' will result in a child
being invisible and will also result in that child being omitted from any sizing
calculations.  A visibility of 'hidden' will result in a child being invisible, but
that child will potentially affect the size of the stack.  
<p>
By default a stack's children are ordered from bottom to top, i.e., the first child
of a stack has the lowest z-index, and the last child has the highest z-index.  The
CSS2 <span class="css">'z-index'</span> property can be used to adjust or control
this ordering.  
<p>
By default children are positioned at (0,0) within the stack's content box.  The CSS
properties <span class="css">left</span> and <span class="css">top</span> can
be used to specify an offset from the upper left hand corner of the stack's content
box. 
<p>
The <dfn>stack</dfn> tag in XUL can be used to define a stack.  XUL elements also
support <dfn>left</dfn> and <dfn>top</dfn> attributes that are analogous to the
CSS properties of the same name.
<p>
<h2>2.3 Grids</h2>
<p>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&status_whiteboard=%5Bxul1.0-layout-grid%5D&status_whiteboard_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">
View the remaining grid compliance issues in Bugzilla.
</a>
<p>
<p>The box can be extended into two dimensions through the use of a
<dfn>grid</dfn> element.  A grid contains exactly two children,
specialized boxes called <dfn>grid groups</dfn>.  One group
defines the <dfn>columns</dfn> and the second defines the
<dfn>rows</dfn>.  
In XUL the elements used to describe the grid and its groups are
<dfn>grid</dfn>, <dfn>rows</dfn> and <dfn>columns</dfn>.
<p>
A grid is conceptually similar to tables, but
significantly simpler in practice.  Conceptually the grid is a stack
that consists of two layers, typically a bottom layer that contains the columns,
and a top layer that contains the rows.  The layers can be stacked in any
order, using the same rules that apply to stacks.

<p>All columns and rows in a grid must be specified explicitly.
(Grids are thus simplified by not supporting dynamic discovery of the
number of columns the way HTML tables do).</p>

<p>The following additional values for the CSS display property allow
grids to be used from CSS: <span class="css">grid</code>, <span
class="css">inline-grid</code>, <span class="css">grid-group</code>
and <span class="css">grid-line</code>.  The <span
class="css">grid-group</span> and <span class="css">grid-line</code>
properties, when used in conjunction with the <span
class="css">box-orient</span> property define the <span
class="css">rows</code>, <span class="css">columns</code>, <span
class="css">row</code> and <span class="css">column</span> elements.
<p>
A grid group is a specialized box that contains <dfn>grid lines</dfn>.  Each
line defines an individual column or row (depending on the orientation of the 
enclosing grid group).  In XUL, the tags for grid lines are <dfn>row</dfn>
and <dfn>column</dfn>.  The row element is used inside a rows group, and the
column element is used inside a columns group.
<p>
<p>Grid lines contain boxes that make up the cells of the grid, and they can
be placed within either a column or a row. Note that with this layout
it is possible for two objects to be placed within the same (i,j)
position of the grid, one in the bottom columns layer, and the other
in the rows layer.

<p>The <span class="property">'box-align'</code> and <span
class="property">'box-flex'</span> properties, when specified on a row
or a column, apply to all the cells in the row or column.  These
properties are ignored when specified on objects inside a row or
column.  The properties on the row and column override.  Similarly,
widths and heights and min/max-widths and heights can be specified on
rows and columns and will override anything specified on cells.

<p> Note that <span class="property">'box-pack'</span> is unnecessary
in a grid, since <span class="property">'box-align'</span> can be
specified on both the row and column to allow for full control of a
cell's positioning.

<div class="example">

<pre>
&lt;grid style="width:300px; height:300px"&gt;
    &lt;columns&gt;
        &lt;column style="width: 0; box-flex: 1"/&gt;
        &lt;column style="width: 0; box-flex: 1"/&gt;
    &lt;/columns&gt;
    &lt;rows&gt;
        &lt;row style="height: 0; box-flex: 1"&gt;
            &lt;button label="Child 1,1"/&gt;
            &lt;button label="Child 1,2"/&gt;
        &lt;/row&gt;
        &lt;row style="height: 0; box-flex: 1"&gt;
            &lt;button label="Child 2,1"/&gt;
            &lt;button label="Child 2,2"/&gt;
        &lt;/row&gt;
    &lt;/rows&gt;
&lt;/grid&gt;
</pre>

<p><img src="http://www.mozilla.org/projects/xbl/xforms/layout/boxes_files/box14.jpg" alt="">

<p>A sample stylesheet that defined the XUL elements used in the example
above might be defined
as follows:</p>

<pre>
  grid { display: grid; }
  columns { display: grid-group;  box-orient: horizontal; }
  rows { display: grid-group; box-orient: vertical; }
  column { display: grid-line; box-orient: vertical; }
  row { display: grid-line; box-orient: horizontal; }
  button { display: box; }
</pre>

</div>

<p>The rows and columns elements can flex and overflow just as other
boxes can, allowing for scrolling grids in either the horizontal or
vertical direction (e.g., a spreadsheet).

<p>Rows and columns elements can be nested and used in conjunction
with the <span class="property">'visibility'</span> (e.g., <span
class="css">collapsed</span>) and <span
class="property">'overflow'</span> (e.g., <span
class="css">auto</span>) properties to obtain a multi-column
tree widget with a scrolling body.

<p> Because the two children of the grid element are just boxes, they
can contain content other than rows and columns.  By default this
content will be stretched across the whole grid, e.g., a text area
placed in between two rows would stretch to fill the entire width of
the grid.  By allowing other objects within the rows and columns, many
use cases involving spans become unnecessary.  Spans, therefore, are
not supported in grids.
<p>
<h2>2.4 Popups</h2>
<p>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=allwordssubstr&long_desc=&long_desc_type=allwordssubstr&bug_file_loc=&bug_file_loc_type=allwordssubstr&status_whiteboard=%5Bxul1.0-layout-popup%5D&status_whiteboard_type=allwordssubstr&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">
View the remaining popup compliance issues in Bugzilla.
</a>
<br>
<a href="tests/popups.xul">View the popups test page</a> (Works only in Mozilla)
<p>
XUL defines a new type of widget called a <dfn>popup</dfn>.  A popup
is a special type of layout object that is not part of the normal flow
of a document.  Popups are used to define menus, tooltips, and other
widgets that appear under a mouse pointer or aligned to other content.
<p>
The value <dfn>popup</dfn> has been added to the <span
class="property">'display'</span> property. When this value is
applied to an element, the following changes apply:</p>
<ol>
  <li>The element is taken out of flow and not shown (same as
  <span class="css">display:none</span>).</li>
  <li>If the element's <span class="property">'overflow'</span>
    property has a specified value of <span
    class="css">visible</span> then the computed value becomes <span
    class="css">hidden</span>. Other values stay unaffected.</li>
</ol>
<p>
XUL defines three types of popup elements.  The <dfn>menupopup</dfn> defines a popup
that is used to hold menu items.  It is used with menus, menu lists,
and context menus.  The second type of popup defined is <dfn>floatingwindow</dfn>, and
it is used for floating (e.g., palette) windows.  The third type of popup
is the <dfn>tooltip</dfn>, and it is used for the display of tooltips.
<p>
The behavior of menu popups is handled automatically by XUL.  
The menu's submenu popup will show and hide according to the normal menu rules 
of the user agent.   
<p>
XUL also provides shorthands for associating popups with a given element.  All
XUL elements support three attributes.  These attributes all take as their
values the ID of an element with a popup display type.  They also support the
special keyword '_child', which can be used to indicate that the menupopup or
tooltip is an immediate child of the element. 
<p>
<ul>
<li><dfn>menu</dfn> is used to associate a left mouse button menupopup with an element,
e.g., to attach a colorpicker to a button.
<li><dfn>contextmenu</dfn> is used to associate a menupopup with an element that will be
shown according to the user agent rules for displaying context menus.
<li><dfn>tooltip</dfn> is used to associate a tooltip with an element that will be
shown according to the user agent rules for displaying tooltips over a UI
element.
</ul>
<p>
These shorthand forms of the popup syntax hide the details of how popups are
shown and dismissed from the XUL author.  However, there are times when the author
will desire precise
control over when the popup should be displayed as well as over the positioning of
the popup.
<p>
<h3>The XULPopupElement Interface</h3>

    <p>The <code class="dom">XULPopupElement</code> interface contains methods for showing
    and hiding popups.

    <dl>
      <dt>IDL Definition</dt>
      <dd>
<div class='idl-code'>
<pre class="idl">
interface XULPopupElement : XULElement {
  const unsigned short      BEFORE_START                   = 1;
  const unsigned short      BEFORE_END                     = 2;
  const unsigned short      AFTER_START                    = 3;
  const unsigned short      AFTER_END                      = 4;
  const unsigned short      START_BEFORE                   = 5;
  const unsigned short      START_AFTER                    = 6;
  const unsigned short      END_BEFORE                     = 7;
  const unsigned short      END_AFTER                      = 8;
  const unsigned short      OVERLAP                        = 9;
  const unsigned short      AT_POINTER                     = 10;
  const unsigned short      AFTER_POINTER                  = 11;

  attribute DOMString position;
  
  void showPopup(in unsigned short alignment, 
                 in Element target,
                 in Element anchor);
  void hidePopup();
};
</pre>
</div>
      </dd>
      <p>
      <dt>Attributes</dt>
<dd>
<dl>
<dt><code class='attribute-name'>position</code></dt>

<dd>Sets the default position of the popup when shown via one of the builtin mechanisms (e.g.,
tooltips, context menus, and menus).  This property corresponds to the <dfn>position</dfn>
attribute described above.
</dl>

      <dt>Methods</dt>
      <dd>
        <dl>
          <dt><code class="method-name">showPopup</code></dt>
          <dd>
            Shows the element as a <span>popup</span>. If the element doesn't have the <span class="property">'display'</span>
            property set to <span class="css">popup</span>, this will raise a NOT_A_POPUP_ERR.  Calling this method will cause
            the following events: First, a popupshowing event is triggered (it is cancellable, cancelling that event will
            prevent the popup from showing), second, the popup is aligned,
            and finally a popupshown event is triggered.
            <dl>
              <dt>Parameters</dt>
              <dd>
                <dl>
                  <dt><code class="parameter-name">alignment</code> of type <code class="dom">unsigned short</code></dt>
                  <dd>One of the alignment constants. See the descriptions below.</dd>
                  <dt><code class="parameter-name">target</code> of type <code class="dom">Element</code></dt>
                  <dd>The element that the popup will be positioned relative to (it may itself be part of a popup, for
                  example this is the case for cascading menus). If the <code class="dom">target</code> is <code
                  class="dom">null</code>, then the point representing the (last known) position of the pointing device is
                  used instead. If the <code class="dom">target</code> element is not visible, or if there is it is <code
                  class="dom">null</code> but there is no pointing device, then the viewport is used instead. If the
                  viewport is not visible, then the whole screen is used. This ensures that the popup will appear,
                  regardless of how it was triggered. </dd>
                  <dt><code class="parameter-name">anchor</code> of type <code class="dom">Element</code></dt>
                  <dd>The element to position relative to the target. This must be either the popup itself, or one of
                  the popup's descendants (excluding anonymous nodes that are not in the default view). 
                  If <code class="dom">null</code> is used, then that implies the element. If the 
                  <code class="dom">anchor</code> has no defined position (which can happen if is hidden using 
                  CSS for example) then its closest ancestor which will have a position when the popup is shown is 
                  used instead.</dd>
                </dl>
              </dd>
              <dt>No Return Value</dt>
              <dt>Exceptions</dt>
              <dd>
                <dl>
                  <dt><code class="dom">UIException</code> NOT_A_POPUP_ERR</dt>
                  <dd>Raised if the element doesn't have the <span class="property">'display'</span> property set to <span class="css">popup</span>.</dd>
                  <dt><code class="dom">UIException</code> HIERARCHY_ERR</dt>
                  <dd>Raised if the <code class="dom">anchor</code> is not a descendant of the element or if it is an annoymous descendant that is not in the default view.</dd>
                </dl>
              </dd>
            </dl>
          </dd>

          <dt><code class="method-name">hidePopup</code></dt>
          <dd>
            Thie method can be invoked on a visible popup to make it go away.  This will trigger a popuphiding event.
            This event is cancellable, and canceling the event will prevent the popup from disappearing.  If the event
            is not cancelled, then the popup is hidden and a popuphidden event is triggered.
            <dl>
              <dt>No Parameters</dt>
              <dt>No Return Value</dt>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
        </dl>
      </dd>
      <dt>Defined Constants</dt>
      <dd>
        The first eight of these constants use a consistent naming
        scheme based on the writing-mode independent "BASE" system
        (Before After Start End, which map, in a left-to-right
        top-to-bottom writing mode such as English, to the Top Bottom
        Left and Right sides respectively). The first word represents
        the side of the target which should be adjacent to the
        opposite side of the anchor, and the second word represents
        the sides of the target and anchor which should be aligned so
        as to be parallel to each other.
        <dl>
          <dt><code class="constant-name">BEFORE_START</code></dt>
          <dd><img src="BEFORE_START.png"
          alt="" class="extra">The "before" side of the target is made adjacent to 
          the "after" side of the anchor, and the "start" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">BEFORE_END</code></dt>
          <dd><img src="BEFORE_END.png"
          alt="" class="extra">The "before" side of the target is made adjacent to 
          the "after" side of the anchor, and the "end" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">AFTER_START</code></dt>
          <dd><img src="AFTER_START.png"
          alt="" class="extra">The "after" side of the target is made adjacent to 
          the "before" side of the anchor, and the "start" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">AFTER_END</code></dt>
          <dd><img src="AFTER_END.png"
          alt="" class="extra">The "after" side of the target is made adjacent to 
          the "before" side of the anchor, and the "end" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">START_BEFORE</code></dt>
          <dd><img src="START_BEFORE.png"
          alt="" class="extra">The "start" side of the target is made adjacent to 
          the "end" side of the anchor, and the "before" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">START_AFTER</code></dt>
          <dd><img src="START_AFTER.png"
          alt="" class="extra">The "start" side of the target is made adjacent to 
          the "end" side of the anchor, and the "after" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">END_BEFORE</code></dt>
          <dd><img src="END_BEFORE.png"
          alt="" class="extra">The "end" side of the target is made adjacent to 
          the "start" side of the anchor, and the "before" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">END_AFTER</code></dt>
          <dd><img src="END_AFTER.png"
          alt="" class="extra">The "end" side of the target is made adjacent to 
          the "start" side of the anchor, and the "after" sides of the target and anchor are aligned.</dd>
          <dt><code class="constant-name">OVERLAP</code></dt>
          <dd><img src="OVERLAP.png"
          alt="" class="extra">The before/start corners of the target and anchor elements are overlapped so 
          that (if they have the same size) they appear over each other.</dd>
          <dt><code class="constant-name">AFTER_POINTER</code></dt>
          <dd><img src="AFTER_POINTER.png"
          alt="" class="extra">The "after" side of the target is made adjacent to
          the "before" side of the anchor, and the "start" side of the anchor is aligned with the
          last known position of the pointing device, if any, or with the "start" side of the target, if
          there is no pointing device.</dd>
        </dl>
      </dd>
      <dt>Special Cases</dt>
      <dd>
        <p><img src="AT_POINTER.png" alt=""
        class="extra">If the <code class="dom">target</code> is <code class="dom">null</code> and there is a pointing device, then
        the last known position of the pointer is used as the target in the cases above. So for example, if <code
        class="dom">alignment</code> is set to <code class="dom">BEFORE_START</code> or <code
        class="dom">END_AFTER</code>, then the before/start corner of the popup is positioned at the pointer.</p>

 <p>       XUL popup elements support a shorthand attribute called <dfn>position</dfn> 
that can be used to declaratively define where the popup should appear.  The possible values
of the position attribute are the string forms of the constants specified in the 
<tt>XULPopupElement</tt> above.  These strings are lower case.  For example to indicate
that a popup should overlap its target, a popup could be defined as follows.
<pre>
&lt;menupopup position="overlap"&gt;
  ...
&lt;/menupopup&gt;
</pre>
<p>
        <p>When the target is a point and not a region, the following constants become equivalent:</p>

        <ul>
         <li>BEFORE_START and END_AFTER</li>
         <li>BEFORE_END and START_AFTER</li>
         <li>AFTER_START, END_BEFORE, OVERLAP and AFTER_POINTER</li>
         <li>AFTER_END and START_BEFORE</li>
        </ul>

        <p>If the popup is smaller than the screen, then the popup <em>must</em> appear completely on the screen. If, after
        aligning the popup as specified by the arguments to the showPopup method, the popup would overflow the screen, then
        the following algorithm should be used. The algorithm should be followed step by step until the popup fits on the
        screen.</p>

        <ol> 

          <li>If the popup is wider (taller) than the screen, then its outer margin width (height) should be set to the width
          (height) of the screen (the <code class="property">'overflow'</code> property applies).</li>

          <li>If the alignment is <code class="dom">OVERLAP</code> and the anchor is not the popup element itself, then position
          the anchor as required, then shift the popup such that it touches the sides of the screen where the anchor overflows
          the screen (if that is in only one direction, the other axis therefore remains unaffected), and apply the <code
          class="property">'overflow'</code> property at that scroll position.</li>

          <li>Otherwise, some as-yet-undecided algorithm is used to
          try each alignment value in turn, and if no possibility is
          found, then the popup menu is positioned on the side that
          had the most room, and then the dimensions of the popup are
          changed so that (from drop downs) it touches the relevant
          side of the screen or (for side opening popups) it is moved
          so that it touches one of the sides.
        </ol>
      </dd>
    </dl>


    <h3>Popup Display Events</h3>

    <p>Four new events are introduced, all related to popups. These use the base DOM Event interface to pass
    contextual information. The different types of such events that can occur are:</p>

    <dl>
      <dt>popupshowing</dt>
      <dd>
        The popupShowing event occurs when the <code class="dom">popupShow</code> method is called.
        This event is only valid for elements whose <span class="property">'display'</span> property
        has the value <span class="css">popup</span>. If the event is cancelled or if false is
        returned from the event handler, then the popup will not be shown.
        <ul>
          <li>Bubbles: No </li>
          <li>Cancelable: Yes </li>
          <li>Context Info: None </li>
        </ul>
      </dd>
      <dt>popupshown</dt>
      <dd>
        The popupShown event occurs after a popup has been displayed.
        This event is only valid for elements whose <span class="property">'display'</span> property
        has the value <span class="css">popup</span>. 
        <ul>
          <li>Bubbles: No </li>
          <li>Cancelable: No </li>
          <li>Context Info: None </li>
        </ul>
      </dd>
      <dt>popuphiding</dt>
      <dd>
        The popupHiding event occurs when the <code class="dom">popupHide</code> method is called.
        This event is only valid for elements whose <span class="property">'display'</span> property
        has the value <span class="css">popup</span> and which are currently displayed. If the event
        is cancelled (or if the event handler returns false), then the popup will remain visible.
        <ul>
          <li>Bubbles: No </li>
          <li>Cancelable: Yes </li>
          <li>Context Info: None </li>
        </ul>
      </dd>
      <dt>popuphidden</dt>
      <dd>
        The popupHidden event occurs after a popup has been hidden (also referred to as cancelling the
        popup).
        This event is only valid for elements whose <span class="property">'display'</span> property
        has the value <span class="css">popup</span>. 
        <ul>
          <li>Bubbles: No </li>
          <li>Cancelable: No </li>
          <li>Context Info: None </li>
        </ul>
      </dd>
    </dl>
<p>
During the handling of a popup event (i.e., one of the four events described above), or at any time
while a popup is open, scripts may need to access the node that was originally hit when the popup was first 
invoked.  This node will always be a descendant of the element to which the popup was attached using
one of the three shorthand attributes (menu, contextmenu, and tooltip), or it will be the element
itself.  The <tt>XULDocument</tt> 
interface contains accessors for all three types: <tt>popupNode</tt> is used for menus and context
menus (since both are never active in XUL at the same time), and <tt>tooltipNode</tt> is used for the
target of the current tooltip.
<p>
<HR class=navbar>
<DIV class=navlinks>
<P><A 
href="intro.html">previous</A> 
&nbsp;
<A 
href="widgets.html">next</A> 
&nbsp; <A 
href="xul.html#minitoc">contents</A></P></DIV>


</body>
</html>