<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../images/mozilla-16.png" type="image/png">


  <meta name="generator" content=
  "HTML Tidy for Windows (vers 2 April 2007), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="Content-Style-Type" content="text/css">

  <title>Functional Specs - Wizard Machine</title>

  <meta name="Author" content="Bhuvan Rachamreddy">

  <link rel="up" href="../" title="Client Customization Kit Documents">

<script src="../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








  <p class="crumbs"><em>You are here:</em> <a href="../">Client Customization Kit Documents</a>
  &gt; <strong>CCK Wizard Machine Functional Specifications</strong></p>

  <h1>CCK Wizard Machine Functional Specifications, Version 1.0</h1>

  <h2>Table of Contents</h2>

  <ol class="toc">
    <li><a href="#Summary">Summary</a></li>

    <li><a href="#Design">CCK Wizard Machine Design</a></li>

    <li>
      <a href="#Engg">Engineering Goals</a>

      <ul>
        <li><a href="#Display_dialogs">Display dialogs</a></li>

        <li><a href="#Manage_Data">Manage data</a></li>

        <li><a href="#Control_navigation">Control navigation</a></li>
      </ul>
    </li>

    <li>
      <a href="#Issues">Issues</a>

      <ul>
        <li><a href="#QA_issues">QA</a></li>

        <li><a href="#Loc_issues">Localization</a></li>

        <li><a href="#Doc_issues">Documentation</a></li>
      </ul>
    </li>

    <li><a href="#History">Document History</a></li>
  </ol>

  <h2><a name="Summary" id="Summary">1. Summary</a></h2>

  <p>CCK, Client Customization Kit, is an application designed to allow ISPs
  and other interested parties to build a customized Netscape Communicator.
  ISPs can customize the installation experience with their branding elements,
  set suitable communicator preferences/settings for thier end users and create
  a customized  communicator build. Based on the input received from the CCK
  users in the past and present, a new CCK wizard (CCK 5.0) design is planned.
  The focus of this document is the design and implementation planned for
  Wizard Machine, a core component of CCK 5.0. Wizard Machine provides support
  to various CCK components in displaying dialogs and collecting the important
  information to build a customized communicator.</p>

  <h2><a name="Design" id="Design">2. CCK Wizard Machine Design</a></h2>

  <p>The document at the following URL(s) discusses the design of CCK Wizard
  (CCK 5.0) and Wizard Machine. It is important to understand the design before
  jumping into the implementation details.</p>

  <p><a href="../design.html">design.html</a></p>

  <h2><a name="Engg" id="Engg">3. Engineering Goals</a></h2>

  <p>Wizard machine needs to implement the following major tasks to support the
  wizard style implementation of CCK 5.0 and Account Setup 5.0.</p>

  <h3><a name="Display_dialogs" id="Display_dialogs">Display dialogs</a></h3>

  <p>As explained in the design process, the whole CCK wizard is an INI file
  driven application. INI file is a simple text file with control and display
  information. In the wizard context, we can say each INI file is a page. It is
  not necessary for every page to contain display information, in which case
  that page is considered as a container page. For every page that has display
  information (listed as Widget1....Widget'n'), Wizard Machine should create
  and display a dialog whenever required.</p>

  <p>The following link points to the document that lists the syntax of an INI
  file.</p>

  <p><a href="syntax.html">INI file syntax</a></p>

  <p>Wizard Machine processes INI file using the following function.</p>

  <p><code>WizardMachine::ProcessPage(iniFile);</code></p>

  <p>The above function preforms 2 major tasks. It reads the control
  information from the INI file and stores the values in the appropriate data
  structures. If that INI file has sub pages, INI files corresponding to those
  pages are processed recursively until Wizard Machine hits page that contains
  some display information. The data structure in which the INI file heirarchey
  is maintained is explained in  Manage data section.</p>

  <p>Wizard Machine starts with a property sheet loaded onto a base dialog.
  Property sheet provides us with standard wizard controls. On identifying the
  file to be displayed, Wizard Machine creates a property page and adds that
  page to the property sheet. When it parses the INI file with display (widget)
  information and it stores that data in the global Widget data structures.
  Then it generates all those widgets dynamically and places them on a property
  page.</p>

  <h3><a name="Manage_Data" id="Manage_Data">Manage Data</a></h3>

  <p>Wizard Machine builds a tree structure to store information provided in
  the INI files. Each INI file corresponds to a node in the tree. A node
  structure can be defined as follows.</p>
  <pre class="code">
struct node {
       node *prev; //points to the previous node
       node *next; //points to the next node
       node **childNodes; //array of pointers to child nodes i.e., sub pages
       nvPair **pageInfo; // control information is stored as name value pairs
       widget **pageWidgets; //array pointers to the page widgets
} node;
</pre>

  <p>As each INI file gets represented with the above node structure, Wizard
  Machine will have access to all INI files via tree data structure. If an INI
  file has child nodes, a subtree will be built from that INI file and will be
  added to the main tree structure.</p>

  <p>Here is the sample tree built out of set of INI files. A top level cck.ini
  as root and other major CCK components as childnodes to the root.
  Screen1..Screen3 are the dialogs to be displayed for Configuration
  Editor.</p>

  <p><img src="wm_tree.jpg" height="408" width="447" alt=""></p>

  <p>Wizard Machine needs to update the data and when it enters or exits a
  particular node. This will allow the other nodes to access the most recent
  information.</p>

  <p>Every major component of CCK depend on Wizard Machine to maintain and
  provide access to the global data used in the application. Global information
  will be stored as name value pairs in a Global array allowing each node
  access and update the information as and when required.</p>

  <h3><a name="Control_navigation" id="Control_navigation">Control Navigation</a></h3>

  <p>A standard wizard approach is pursued in developing CCK wizard and
  similiar approach will be applied to the Account Setup wizard. Regular wizard
  interface is provided by a class named property sheet. VC++ has already
  defined that class. Typically in a property sheet, you have navigation
  related buttons at the bottom and area for the dialog to be displayed on the
  top. Standard navigation buttons are Next, Back, Cancel and Help. Wizard
  Machine controls the actions that need to be performed on clicking on one of
  navigation buttons.</p>

  <p>On clicking Next, unless otherwise INI file has defined directive in it to
  take a new path, Wizard Machine always moves to the sibling of the node in
  which the action is occurred. A sibling is built if needed and a
  corresponding property page is added as next node in the navigation scheme.
  If there are no siblings it tries to identify parent's sibling and move
  there. This task is performed recursively until a node is found. On the last
  page, Next button will be replaced by Done or Finish button.</p>

  <p>For each node it creates, Wizard Machine adds a property page to property
  sheet. Property sheet internally keeps track of the order in which property
  pages are added. So, on clicking Back, Wizard Machine moves a page back and
  displays the appropriate property page i.e., a dialog that takes user input.
  Wizard Machine need to set the all the pointers to the correct location
  maintaining the right links between the page and it's widgets.</p>

  <p>While entering and leaving nodes, Wizard Machine executes onEnter and
  onExit functions appropriately to maintain the global data
  synchronization.</p>

  <p>On clicking Cancel, Wizard Machine exits the application.</p>

  <p>On clicking Help, a standard window help screen will be displayed with
  appropriate help file loaded into it. Name of the help file can be obtained
  from the corresponding INI file, essentially via node representing that INI
  file.</p>

  <h2><a name="Issues" id="Issues">4. Issues</a></h2>

  <h3><a name="QA_issues" id="QA_issues">QA issues</a></h3>

  <p>A progressive whitebox testing is planned in this release. QA will be
  provided with small programs to test the functions of Wizard Machine as when
  they are developed for CCK wizard.</p>

  <p>Following functionalities should be tested as the development efforts
  progress.</p>

  <ul>
    <li>Build and Navigate tree

      <p>Wizard Machine takes the data from INI files as and when required and
      builds an appropriate tree data structure. Once the tree is built,
      navigation among the nodes of the tree is an interesting area that must
      be covered.</p>

      <p>Development work done on Wizard Machine, as of now, allows us to
      provide command line options to specify the root INI file (like cck.ini)
      and the desired navigation sequence. As a part of navigation, Wizard
      Machine records information about the nodes visited in an output file
      named "output.dat" (created in the directory from which the WizardMachine
      program is executed). Soon, this work will be integrated with program
      that can generate UI from INI files.</p>

      <p>For now, here is how the Wizard Machine works, the input it takes and
      output it generates.</p>

      <p><strong>Input</strong>: a root INI file, a path to navigate</p>

      <p><strong>Syntax</strong> : WizardMachine.exe -i &lt;<code>INI file
      name</code>&gt; -p &lt;<code>actions</code>&gt;</p>

      <p>INI file name : Root INI file that controls the over all tree
      structure<br>
      actions : possbile actions like  next (n), back(b), cancel(c)</p>

      <p>Example : WizardMachine.exe -i cck.ini -p nnnbnbbnc</p>

      <p><strong>Functionality</strong> : Wizard Machine takes the root INI
      file and generates the very first leaf node (usually the left most node
      of the tree) and all other nodes in that path. At this point Wizard
      Machine waits for the user's action. With UI turned on, it is easy to
      wait and capture user's choice of actions. As that need to be done, we
      will simulate user's desired actions by passing them via command line
      arguments.</p>

      <p>Wizard Machine interprets 'n' as GoToNextNode, 'p' as GoToPrevNode and
      'c' as Cancel while navigating the tree. As only the leftmost node (and
      parent nodes) gets built in the beginning, WizardMachine builds other
      nodes whenever it tries to visit those nodes and finds no such nodes. So,
      WizardMachine thus builds the tree dynamically depending on user's
      actions.</p>

      <p><strong>Output</strong> : As Wizard Machine visits each node it writes
      the node details into an output file (output.dat). So, we can determine
      the correctness of navigation by looking at output file contents.</p>
    </li>

    <li>Generating a dialog from a given INI file</li>

    <li>Accessing global data via global APIs</li>

    <li>The wizard navigation scheme</li>

    <li>Wizard Machine's behavior in receiving illegal INI file input</li>
  </ul>

  <h3><a name="Loc_issues" id="Loc_issues">Localization issues</a></h3>

  <p>Enabling localization is one of the goals to be achieved in the
  implementation. We are now working on developing a tool that CCK users can
  use to alter the INI files that control the dialogs to be displayed. This
  should help the CCK users of any locale to easily modify the screens to suit
  requirements. The i18n group is involved in addressing and suggesting
  solutions for the localization issues.</p>

  <h3><a name="Doc_issues">Documentation issues</a></h3>

  <p>Wizard Machine needs to implement a function handler for the help button
  to display the appropriate help file on any given wizard screen.</p>

  <h2><a name="History" id="History">5. Document History</a></h2>

  <table border="2" cellpadding="8">
    <col width="10%">
    <col width="66%">
    <col width="24%">

    <tr>
      <th scope="col">DATE</th>

      <th scope="col">CHANGE</th>

      <th scope="col">AUTHOR</th>
    </tr>

    <tr>
      <td>12/14/98</td>

      <td>First Draft </td>

      <td>Bhuvan Rachamreddy</td>
    </tr>
  </table>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../security/">Security Updates</a></li>
<li><a href="../../../../contact/">Contact Us</a></li>
<li><a href="../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May 31,  2007</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/cck/docs/WizardMachine/spec.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
