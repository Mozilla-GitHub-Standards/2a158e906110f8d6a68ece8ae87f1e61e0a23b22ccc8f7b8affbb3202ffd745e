<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">

<meta name="DC.author" content="Tara Hernandez">
<meta name="DC.title" content="Bonsai Project Home Page">
<meta name="DC.date.created" content="2002-10-30T09:37:03+11:00" scheme="W3CDTF">
<meta name="DC.date.modified" content="2006-04-07T09:54:03+11:00" scheme="W3CDTF">
    <title>Bonsai Project Home Page</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








<h1><img src="http://bonsai.mozilla.org/bonsai.gif" width="226" height="213" alt="">The Bonsai Project</h1>

<div class="author">by Tara Hernandez &lt<a href="mailto:tara@tequilarista.org">tara@tequilarista.org</a>&gt</div>

<p>Bonsai is a really cool idea on how to "see" changes taking place during a development cycle.  The 
original implementation was by Terry Weissman, first done in TCL, then later ported to Perl.  
It's built to run against CVS using Perl, MySQL, and your favorite webserver to display 
checkin history, log information, diffs, and other assorted pieces of information in easy to 
parse HTML.</p>

<p>Bonsai has sort of been the red-headed step child of the Mozilla webtools, especially compared to 
the much more active and widely installed <a href="http://www.bugzilla.org">Bugzilla</a>, but it's 
finally starting to get some much needed love.</p> 


<h3>Getting the source:</h3>

<p>You check it out from our CVS server by doing</p>
  
<pre>
    cvs checkout mozilla/webtools/bonsai mozilla/webtools/registry
</pre>
 
<p>Please see our <a href="../../cvs.html">CVS page</a> for information on using
our CVS server. (The Tinderbox and Bonsai sources are currently only
available via CVS.)</p>


<h3>Current Focus:</h3>

<p>There are a couple of major problems with Bonsai that need to be resolved so that it's less 
embarassing.</p>

<p><b>Performance</b> - Bonsai can be, under the right circumstances, egregiously slow.  In
scenarios like Mozilla.org, which have a lot of checkins and a lot of code, the right conditions 
can happen a lot. Even worse, the things that make Bonsai go slow will also cause your server
load to go sky high and make everything <b>else</b> go slow. This would be a Bad Thing(TM).  
There has already been screaming. More specifically, some things to look at are:</p>

<ul>
    <li><tt>showcheckins.cgi</tt> - this is sort of weak area for a couple of reasons. One, from
    a user perspective, it's more or less equivalent functionality to cvsquery with some UI 
    differences. Two, when the batch-<em>N</em>.pl files it reads to generate the checkin table 
    start to get really big (say 700 or more checkins), it can cause <tt>addcheckin.pl</tt> 
    to get really really <em>really</em> slow.</li>

    <li><tt>dolog.pl/handleCheckinMail.pl/addcheckin.pl</tt> - the whole "parse the CVS log, mail
    formatted log information to a perl script, let that perl script parse it and pass it to 
    another perl script which finally inserts that information into the MySQL database" has just
    <b>GOT</b> to go. DBI is a wonderful thing.</li>
</ul>

<p><b>Security</b> - There's been some attempt at cleanup, but it has not gone through the same
anal-retentive analysis that Bugzilla has. Additionally, Bonsai doesn't have the concept of user
logins the way Bugzilla does, so securing certain pages, such as parameters page, becomes
a bit more challenging. At the very least the database information needs to be put someplace else.
<br><span style="color: red;">Update:</span> <tt>editparams.cgi</tt> access tracked as 
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=45579"> bug 45579</a> and now fixed.</p>

<p><b>Documentation</b> - All of the webtools had READMEs that used to start with "This project
isn't particularly well written or documented". For Bonsai, this hasn't changed all that much.  
If you're trying to install or administer Bonsai currently, you're likely in some amount of pain.
Both developer docs and user/admin guides need to be writen.</p>

<p><b>Administration</b> - Having to manually edit treeconfig.pl to add or update a Bonsai page is lame.</p>

<h2>Future Plans</h2>

<p>There's a couple of major areas of discussion about what to do next. The two top ones are currently:</p>
    
<p><i>Enable more interactive source control</i></p>

<p>One way is by telling Bonsai to mirror code. Code mirroring is a way to smooth development 
across multiple projects, by ensuring that code changed in older branches, perhaps 
representing sustaining engineering efforts, propogates down through subsequent branches, 
eliminating regressions. This is just one example of where we can Bonsai
do useful things beyond basic reporting. Many more discussions to follow. Preliminary work in
this area was done by Tom Jones, and the source can be obtained from the cvs-mirror directory in the
Bonsai source tree.</p>

<p><i>Make Bonsai report against SCM systems other than CVS</i><p>   

<p>Right now the top first candidate is Perforce. This is going to be an interesting challenge 
for a couple of reasons. One, in CVS, history is maintained in RCS log files on a file-by-file basis.
Bonsai captures this information and inserts it into a database for subsequent retrieval.  
In Perforce, the system itself is a database, so all of the manipulation Bonsai currently does 
around database transactions needs to be abstracted out in some useful way.</p>


<h3>Project Participants</h3>

<table width="75%" border="1" style="margin-left: auto; margin-right: auto;" summary="Names of participants, their email addresses and their titles">
<tr>
    <td>Tara Hernandez</td>
    <td><a href="mailto:tara@tequilarista.org">tara@tequilarista.org</a></td>
    <td>project owner, oftime slacker, contributor</td>
</tr>
<tr>
    <td>Josh Soref</td>
    <td><a href="mailto:timeless@bemail.org">timeless@bemail.org</a></td>
    <td>main QA, principle nag, contributor</td>
</tr>
<tr>
    <td>Myk Melez</td>
    <td><a href="mailto:myk@mozilla.org">myk@mozilla.org</a></td>
    <td>contributor</td>
</tr>
<tr>
    <td>Dawn Endico</td>
    <td><a href="mailto:endico@mozilla.org">endico@mozilla.org</a></td>
    <td>contributor</td>
</tr>
<tr>
    <td>Tom Jones</td>
    <td><a href="mailto:thj@bluemartini.com">thj@bluemartini.com</a></td>
    <td>contributor</td>
</tr>
<!--
<tr>
    <td>Chris Yeh</td>
    <td><a href="mailto:cyeh@skidoor.org">cyeh@skidoo.org</a></td>
    <td>contributor</td>
</tr>
-->
</table>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified April  6,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/bonsai/index.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
