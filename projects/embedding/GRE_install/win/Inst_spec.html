<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../images/mozilla-16.png" type="image/png">

    <meta name="generator" content=
    "HTML Tidy for Windows (vers 14 February 2006), see www.w3.org">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Style-Type" content="text/css">

    <meta name="DC.author" content="Curt">
    <meta name="DC.creator" content="Curt">
    <meta name="DC.title" content="Specification: Mozilla Runtime Environment Installer">
    <meta name="DC.date.created" content="2002-10-13T20:18:03+11:00" scheme="W3CDTF">
    <meta name="DC.date.modified" content="2006-09-08T09:54:03+11:00" scheme="W3CDTF">

    <title>Spec: MRE Installer</title>
<script src="../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">







    <h1>GRE Installer Specifications</h1>


    <p><small>(Windows Platforms)</small>
    </p>


    <p>Each version of GRE for Windows platforms will be bundled with it's own installer
    program. This installation program will install GRE files, record tracking
    information in the Windows registry, install an uninstaller, and provide a log file
    for the uninstaller as follows:</p>


    <ol>
        <li>
            <strong>Set up config.ini for shareable install:</strong>

            <ul>
                <li>Designate that this is a shareable installation by making the
                following entry in config.ini: Shared Install=True</li>


                <li>User Agent in config.ini must be set to the right version of
                GRE.</li>
            </ul>
        </li>


        <li>
            <strong>Gather User input:</strong>

            <ul>
                <li>Relevant command-line options

                    <ul>
                        <li>"/f" - Force install (new)</li>


                        <li>"/ma" - (Mode Automatic) Suppresses a verification dialog
                        from the exe unpacking tool (no change).</li>


                        <li>"/ms" - (Mode Silent) Turns off all gui (no change)</li>


                        <li>"/mmi" - (Mode Multi-Instance) Necessary if the app installer
                        is a Mozilla XPInstall installer. Tells the Gre installer, which
                        is itself Mozilla based, that it is okay for another Mozilla
                        installer to be running at the same time. (new)</li>


                        <li>"/dd &lt;destination_directory&gt;"  (new)

                            <ul>
                                <li>This is optional.</li>


                                <li>Required if /reg_path is used, and must not be the
                                default in that case.</li>


                                <li>Ignored if GRE is already installed.</li>
                            </ul>
                        </li>


                        <li>"/app &lt;app_id&gt;" (new)

                            <ul>
                                <li>This identifies that the installer is being launched
                                by an app using app_id.</li>


                                <li>If this is not set, the app_id is set to
                                "GreUser"</li>
                            </ul>
                        </li>


                        <li>"/app_path &lt;path_to_app_exe&gt;" (new)

                            <ul>
                                <li>Required with /app</li>


                                <li>Points to a file, the absence of which indicates that
                                the app has been removed from the system.</li>
                            </ul>
                        </li>


                        <li>"/reg_path &lt;path_to_alternative_registry_location&gt;"
                         (new)

                            <ul>
                                <li>Used to install private copies by registering them
                                into a non-default registry path.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>


            <ul>
                <li>GUI (shown if /ms command-line option is not used)

                    <ul>
                        <li>Welcome Dialog (unchanged)</li>


                        <li>License Dialog (unchanged)</li>


                        <li>Setup Type Dialog

                            <ul>
                                <li>Hide the radio button for selecting a setup
                                type.</li>


                                <li>Change title to "Destination Directory"</li>


                                <li>Add a "Force install" field.</li>
                            </ul>
                        </li>


                        <li>Start Install Dialog (unchanged)</li>
                    </ul>
                </li>
            </ul>
        </li>


        <li>
            <strong>Install Files:</strong>

            <ul>
                <li>Determine whether to install

                    <ul>
                        <li>If 

                            <ul>
                                <li>GRE has already been installed to the path designated
                                by GreHome in the registry for this version</li>


                                <li>AND the user has not selected "Force Install"

                                    <ul>
                                        <li>Do Not Install</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>


                        <li>Else

                            <ul>
                                <li>Determine installation path:

                                    <ul>
                                        <li>If "Force install" was selected by the user,
                                        reinstall into the path designated by GreHome in
                                        the registry for this version</li>


                                        <li>else if the user has selected a path use
                                        that</li>


                                        <li>else if the command-line option /dd has
                                        designated a path and use that.</li>


                                        <li>else install to
                                        "&lt;program_files&gt;\mozilla.org\GRE\&lt;version&gt;"</li>
                                    </ul>
                                </li>


                                <li>Install files</li>


                                <li>Install stub installer. See for <a href=
                                "InstallingTheInstaller.html">details</a> for some
                                furthre considerations.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>


        <li>
            <strong>Write Windows Registry Settings:</strong>

            <ul>
                <li>Determine whether to write registry settings:

                    <ul>
                        <li>Write the registry settings whether files are being installer
                        or not, i.e. always write the registry settings.</li>
                    </ul>
                </li>


                <li>Determine the root path in the registry (we'll refer to this as
                GREROOT)

                    <ul>
                        <li>If the command-line option /reg_path has been set, use
                        that</li>


                        <li>Else GREROOT is "HKLM\Software\Mozilla\GRE"</li>
                    </ul>
                </li>


                <li>Set the GRE settings (only if files are installed, i.e., in the
                install script):

                    <ul>
                        <li>"GREROOT"</li>


                        <li>"GREROOT\&lt;version_number&gt;"

                            <ul>
                                <li>GreHome=&lt;installed_path&gt;</li>


                                <li>
                                GreComponentsDir=&lt;installed_path&gt;\components</li>


                                <li>Main

                                    <ul>
                                        <li>Install Directory=&lt;installed_path&gt;</li>
                                    </ul>
                                </li>


                                <li>Uninstall

                                    <ul>
                                        <li>Uninstall Log Folder=
                                        &lt;installed_path&gt;\Uninstall</li>


                                        <li>Description=&lt;user_agent&gt;s</li>
                                    </ul>
                                </li>


                                <li>Installer

                                    <ul>
                                        <li>Path=&lt;path_to_installer&gt;</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>


                <li>Add a setting to the AppList for the app (in config.ini)

                    <ul>
                        <li>"GREROOT\&lt;version_number&gt;\AppList"</li>
                    </ul>


                    <ul>
                        <li>"GREROOT\&lt;version_number&gt;\AppList\&lt;app_id&gt;"

                            <ul>
                                <li>Name=&lt;to_be_displayed_to_user&gt;</li>


                                <li>
                                PathToExeXX=&lt;full_path_to_file_installed_when_app_is_present&gt;
                                - where XX is a two digit integer which enumerates
                                beginning with "01". If an application is installed to
                                multiple locations there will be a PathToExeXX entry for
                                each installation.</li>
                            </ul>
                        </li>
                    </ul>
                </li>


                <li>If no app_id was set on the command-line (indicating that this us a
                standalone installation by a user), write the following registry settings
                to add GRE to the Add/Remove Programs list maintained by Windows

                    <ul>
                        <li>"HKLM\Software\Mozilla\Windows\CurrentVersion\Uninstall\GRE
                        (&lt;version_number&gt;)"

                            <ul>
                                <li>DisplayName=GRE (&lt;version_number&gt;)</li>


                                <li>
                                UninstallString=&lt;path_to_greunstaller&gt;&lt;command-line_options&gt;</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>


        <li>
            <strong>Upgrading:</strong>

            <ul>
                <li>For each version_number under "GREROOT"

                    <ul>
                        <li>For each app_id under
                        "GREROOT\&lt;version_number&gt;\AppList"

                            <ul>
                                <li>If the app_id in the registry matches the app_id from
                                the command-line

                                    <ul>
                                        <li>Launch the uninstaller with the following
                                        command line: "greuninstall.exe /ua
                                        &lt;version_number&gt; /app &lt;app_id&gt;</li>


                                        <li>If /reg_path was included in the installer's
                                        command-line, add "/reg_path
                                        &lt;path_to_alternative_registry_location&gt;" to
                                        the uninstaller's command-line.</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>


        <li>
            <strong>Return error value</strong>

            <ul>
                <li>0 means success</li>


                <li>1 means failure</li>
            </ul>
        </li>
    </ol>


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../security/">Security Updates</a></li>
<li><a href="../../../../contact/">Contact Us</a></li>
<li><a href="../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified September  8,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/embedding/GRE_install/win/Inst_spec.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
