<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../images/mozilla-16.png" type="image/png">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tmQueue class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<script src="../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">


<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>tmQueue Class Reference</h1><code>#include &lt;<a class="el" href="tmQueue_8h-source.html">tmQueue.h</a>&gt;</code>
<p>
<a href="classtmQueue-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a0">tmQueue</a> ()</td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a1">~tmQueue</a> ()</td></tr>
<tr><td nowrap align=right valign=top>nsresult&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a2">Init</a> (const char *aName, PRUint32 aID, <a class="el" href="classtmTransactionManager.html">tmTransactionManager</a> *aTM)</td></tr>
<tr><td nowrap align=right valign=top>nsresult&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a3">AttachClient</a> (PRUint32 aClientID)</td></tr>
<tr><td nowrap align=right valign=top>nsresult&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a4">DetachClient</a> (PRUint32 aClientID)</td></tr>
<tr><td nowrap align=right valign=top>nsresult&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a5">FlushQueue</a> (PRUint32 aClientID)</td></tr>
<tr><td nowrap align=right valign=top>nsresult&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a6">PostTransaction</a> (<a class="el" href="classtmTransaction.html">tmTransaction</a> *aTrans)</td></tr>
<tr><td nowrap align=right valign=top>PRUint32&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a7">GetID</a> () const</td></tr>
<tr><td nowrap align=right valign=top>const char *&nbsp;</td><td valign=bottom><a class="el" href="classtmQueue.html#a8">GetName</a> () const</td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="n0" doxytag="tmQueue::mTransactions"></a>
<a class="el" href="classtmVector.html">tmVector</a>&nbsp;</td><td valign=bottom><b>mTransactions</b></td></tr>
<tr><td nowrap align=right valign=top><a name="n1" doxytag="tmQueue::mListeners"></a>
<a class="el" href="classtmVector.html">tmVector</a>&nbsp;</td><td valign=bottom><b>mListeners</b></td></tr>
<tr><td nowrap align=right valign=top><a name="n2" doxytag="tmQueue::mID"></a>
PRUint32&nbsp;</td><td valign=bottom><b>mID</b></td></tr>
<tr><td nowrap align=right valign=top><a name="n3" doxytag="tmQueue::mName"></a>
char *&nbsp;</td><td valign=bottom><b>mName</b></td></tr>
<tr><td nowrap align=right valign=top><a name="n4" doxytag="tmQueue::mTM"></a>
<a class="el" href="classtmTransactionManager.html">tmTransactionManager</a> *&nbsp;</td><td valign=bottom><b>mTM</b></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class isn't so much a queue as it is storage for transactions. It is set up to recieve and store transactions in a growing collection (using tmVectors). Different messages can be recieved from the Transaction Manager(TM) the queue belongs to which can add and remove listeners, empty the queue (flush), and add messages to the queue.<p>
See the documentation in <a class="el" href="tmTransactionService_8h.html">tmTransactionService.h</a> for details on the messages you can send to and recieve from the queues in the TM 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="tmQueue::tmQueue"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> tmQueue::tmQueue </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the internal state to default values. <a class="el" href="classtmQueue.html#a2">Init()</a> must be called after construction to allocate the storage and set the name and ID.     </td>
  </tr>
</table>
<a name="a1" doxytag="tmQueue::~tmQueue"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual tmQueue::~tmQueue </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reclaim the memory allocated in <a class="el" href="classtmQueue.html#a2">Init()</a>. Destroys the transactions in the transaction storage and the ids in the listener storage     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="tmQueue::AttachClient"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> nsresult tmQueue::AttachClient </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PRUint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>aClientID</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds the clientID to the list of queue listeners. A reply is created and sent to the client. The reply contains both the name of the queue and the id, so the client can match the id to the name and then use the id in all further communications to the queue.<p>
The reply is sent for all cases.<p>
<dl compact><dt><b>Returns:</b></dt><dd>NS_ERRROR_INVALID_ARG if there were problems creating storage for the clientID <p>
NS_ERROR_OUT_OF_MEMORY if the collection needed to grow and the allocation of a new backing store failed. <p>
NS_ERROR_GENERATE_SUCCESS(index) if the add was successful. The calling method can get the index of the element added by using the macro NS_ERROR_GET_CODE() on the return value. But for simple success test use NS_SUCCEEDED() on the return value. </dd></dl>
    </td>
  </tr>
</table>
<a name="a4" doxytag="tmQueue::DetachClient"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> nsresult tmQueue::DetachClient </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PRUint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>aClientID</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes the client from the list of queue listeners. A reply is created and sent to the client to indicate the success of the removal.<p>
The reply is sent for all cases.<p>
<dl compact><dt><b>Returns:</b></dt><dd>NS_OK on success <p>
NS_ERROR_INVALID_ARG if client didn't map to an ID that was in the range of the vector. This is bad news, indicates inconsistant state between the queue and it's storage. </dd></dl>
    </td>
  </tr>
</table>
<a name="a5" doxytag="tmQueue::FlushQueue"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> nsresult tmQueue::FlushQueue </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">PRUint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>aClientID</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes all the transactions being held in the queue, creating an empty queue. A reply is created and sent to the client to indicate the completion of the operation.<p>
The reply is sent for all cases.<p>
<dl compact><dt><b>Returns:</b></dt><dd>NS_OK </dd></dl>
    </td>
  </tr>
</table>
<a name="a7" doxytag="tmQueue::GetID"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> PRUint32 tmQueue::GetID </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>the ID of the queue </dd></dl>
    </td>
  </tr>
</table>
<a name="a8" doxytag="tmQueue::GetName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const char* tmQueue::GetName </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>the name of the queue </dd></dl>
    </td>
  </tr>
</table>
<a name="a2" doxytag="tmQueue::Init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> nsresult tmQueue::Init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>aName</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>PRUint32&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>aID</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classtmTransactionManager.html">tmTransactionManager</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>aTM</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize internal storage vectors and set the name of the queue and the pointer to the TM container.<p>
<dl compact><dt><b>Returns:</b></dt><dd>NS_OK if everything succeeds <p>
NS_ERROR_FAILURE if the vector initializations fail or the allocation for the name fails. </dd></dl>
    </td>
  </tr>
</table>
<a name="a6" doxytag="tmQueue::PostTransaction"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> nsresult tmQueue::PostTransaction </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classtmTransaction.html">tmTransaction</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>aTrans</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Places the transaction passed in on the queue. Takes ownership of the transaction, deletes it in the destructor. A reply is created and sent to the client to indicate the success of the posting of the transaction.<p>
The reply is sent for all cases except INVALID_ARG (no destination)<p>
<dl compact><dt><b>Returns:</b></dt><dd>NS_ERRROR_INVALID_ARG if the transaction is null <p>
TM_ERROR_WRONG_QUEUE if the transaction has been sent to the wrong queue. <p>
NS_ERROR_OUT_OF_MEMORY if the collection needed to grow and the allocation of a new backing store failed. <p>
NS_ERROR_GENERATE_SUCCESS(index) if the add was successful. The calling method can get the index of the element added by using the macro NS_ERROR_GET_CODE() on the return value. But for simple success test use NS_SUCCEEDED() on the return value. </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="tmQueue_8h-source.html">tmQueue.h</a></ul>
<hr><address style="align: right;"><small>Generated on Mon Feb 24 10:22:50 2003 for transaction manager by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../security/">Security Updates</a></li>
<li><a href="../../../../contact/">Contact Us</a></li>
<li><a href="../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified February 24,  2003</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/embedding/profileSharing/api/classtmQueue.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
