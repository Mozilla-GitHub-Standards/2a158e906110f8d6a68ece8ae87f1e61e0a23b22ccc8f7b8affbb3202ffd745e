<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../../../images/mozilla-16.png" type="image/png">

 <title>NSS .chk Files for the FIPS Mode</title>
 <meta name="author" content="Wan-Teh Chang">
<script src="../../../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<h2 align="center">NSS .chk Files for the FIPS 140 Mode<br>
</h2>
<h3>NSS Technical Note: 6</h3>
In NSS 3.8, we added checksum files required for the NSS softoken to
operate in FIPS 140 mode.<br>
<br>
The new checksum file is called <span style="font-family: monospace;">libsoftokn3.chk</span>
on Unix/Linux and <span style="font-family: monospace;">softokn3.chk</span>
on Windows.&nbsp; It must be put in the same directory as the NSS
libraries. The <span style="font-family: monospace;">libsoftokn3.chk/softokn3.chk</span>
file contains a checksum for the softoken. When in FIPS 140
mode, the softoken is required to compute its checksum and compare it
with the value in <span style="font-family: monospace;">libsoftokn3.chk/softokn3.chk</span>.<br>
&nbsp;<br>
<p>The following applies to NSS 3.8 through 3.10 :
<P>On 32-bit Solaris SPARC (i.e., not x86, and not 64-bit SPARC) and
32-bit HP-UX PA-RISC (i.e., not Itanium, and not 64-bit PA-RISC), there
are two more .chk files: <span style="font-family: monospace;">libfreebl_pure32_3.chk</span>
and <span style="font-family: monospace;">libfreebl_hybrid_3.chk</span>.<br>
&nbsp;<br>
<p>The following applies to NSS 3.11 :
<P>The low-level freebl cryptographic code has been separated from softoken on all platforms. Even on platforms for which there is only one implementation of freebl, there is now a separate freebl shared library. The freebl library implements a private interface internal to NSS.
<UL>
<LI>On 32-bit Windows and 32-bit OS/2, this shared library is called freebl3.dll, and the corresponding .chk file is called <span style="font-family: monospace;">freebl3.chk</span> .
<LI>On 32-bit Solaris x86, 64-bit Solaris x64 (AMD64), 32-bit Linux x86, 64-bit Linux x86-64, 32-bit AIX and 64-bit AIX, this shared library is called libfreebl3.so, and the corresponding .chk file is called <span style="font-family: monospace;">libfreebl3.chk</span> .
<P><LI>On the 32-bit Solaris SPARC architecture, there are 3 freebl libraries :
<UL>
<LI>libfreebl_32int64_3.so for UltraSparc T1 CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_32int64_3.chk</span>
<LI>libfreebl_32fpu_3.so for other UltraSparc CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_32fpu_3.chk</span>
<LI>libfreebl_32int_3.so for SPARC V8 CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_32int_3.chk</span>
</UL>
<P><LI>On the 64-bit Solaris SPARC architecture, there are 2 freebl libraries :
<UL>
<LI>libfreebl_64int_3.so for UltraSparc T1 CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_64int_3.chk</span>
<LI>libfreebl_64fpu_3.so for other UltraSparc CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_64fpu_3.chk</span>
</UL>
<P><LI>On the 32-bit HP-UX PA-RISC architecture, there are 2 freebl libraries :
<UL>
<LI>libfreebl_32fpu_3.sl for CPUs that do multiply operations faster in floating point, with a corresponding <span style="font-family: monospace;">libfreebl_32fpu_3.chk</span>
<LI>libfreebl_32int_3.sl for other PA-RISC CPUs, with a corresponding <span style="font-family: monospace;">libfreebl_32int_3.chk</span>
</UL>
<P><LI>On the 64-bit HP-UX PA-RISC architecture, there is only one freebl library, called libfreebl3.sl, with a corresponding <span style="font-family: monospace;">libfreebl3.chk</span>
</UL>
</UL>

Applications should always use NSS binaries that are the output of the regular NSS build process. If your application modifies NSS binaries for any reason after they were built, then :
<UL>
<LI>The FIPS 140 mode of operation will no longer work, because the chk files will no longer match the softoken and freebl shared libraries .
<LI>The softoken and freebl binaries won't match any NSS binaries that may have been submitted to NIST for validation, and thus may not be verified as being the actual FIPS 140 validated cryptographic module . The only way to meet this requirement is for your application never to modify the NSS binaries.
<LI>Any offer of binary support that may have been previously made to you by NSS developers is null and void.
</UL>

If your build process modifies NSS libraries in any way (for example, to strip the symbols), it should consider not doing so for the reasons cited above.
If you still decide to make unsupported changes, you can allow the softoken to come up in FIPS 140 mode of operation by regenerating the .chk files
yourself.&nbsp; The tool to do that is called <span
style="font-family: monospace;">shlibsign</span>.&nbsp; It is released
as part of the NSS binary distributions.<br>
<br>
If your build process does not modify NSS shared libraries, you can
just use the .chk files in the NSS binary distributions.<br>
&nbsp;<br>
So you have two options.<br>
&nbsp;<br>
1. Do not modify NSS libraries in your build process.&nbsp;
Specifically, do not modify <span style="font-family: monospace;">libsoftokn3.so</span>,
<span style="font-family: monospace;">libsoftokn3.sl</span>, <span
style="font-family: monospace;">softokn3.dll</span>, <span
style="font-family: monospace;">libfreebl_pure32_3.so</span>, <span
style="font-family: monospace;">libfreebl_pure32_3.sl</span>, <span
style="font-family: monospace;">libfreebl_hybrid_3.so</span>,<span
style="font-family: monospace;"> libfreebl_hybrid_3.sl</span>,
<span style="font-family: monospace;"> libfreebl3.so</span>,
<span style="font-family: monospace;"> libfreebl3.sl</span>,
<span style="font-family: monospace;"> freebl3.dll</span>,
<span style="font-family: monospace;"> libfreebl_32int64_3.so</span>,
<span style="font-family: monospace;"> libfreebl_32int_3.so</span>,
<span style="font-family: monospace;"> libfreebl_32fpu_3.so</span>,
<span style="font-family: monospace;"> libfreebl_64int_3.so</span>,
<span style="font-family: monospace;"> libfreebl_64fpu_3.so</span>,
<span style="font-family: monospace;"> libfreebl_32int_3.sl</span>,
<span style="font-family: monospace;"> libfreebl_32fpu_3.sl</span>; or<br>
&nbsp;<br>
2. Use <span style="font-family: monospace;">shlibsign</span> to
regenerate the .chk files.&nbsp; For example, on 32-bit Solaris SPARC for NSS 3.11,
say<br>
&nbsp;<br>
<span style="font-family: monospace;">shlibsign -v -i libsoftokn3.so</span><br>
<span style="font-family: monospace;">shlibsign -v -i
libfreebl_32int64_3.so</span><br>
<span style="font-family: monospace;">shlibsign -v -i
libfreebl_32fpu_3.so</span><br>shlibsign -v -i
libfreebl_32int_3.so</span><br>
&nbsp;<br>
(You need to set <span style="font-family: monospace;">LD_LIBRARY_PATH</span>
appropriately and specify the correct pathnames of the libraries.)<br>
&nbsp;<br>
Option 1 is simpler and highly preferred.<br>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../../../sitemap.html">Site Map</a></li>
<li><a href="../../../../../security/">Security Updates</a></li>
<li><a href="../../../../../contact/">Contact Us</a></li>
<li><a href="../../../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified October 10,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/projects/security/pki/nss/tech-notes/tn6.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
