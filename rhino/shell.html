<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">

   <meta name="Author" content="Norris Boyd">

   <title>JavaScript Shell</title>

<link rel="up" href="./" title="Rhino project page">
<link rel="section" href="#invoking" title="Invoking the Shell">
<link rel="section" href="#predefprops" title="Predefined Properties">
<link rel="section" href="#example" title="Example">
<link rel="section" href="#runcommand" title="runCommand">

<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">







<big><big>This page has been moved to the <a
href="http://developer.mozilla.org/en/docs/Rhino_Shell">Rhino Shell</a> topic
in the Mozilla Developer Connection</big></big>.

<p class="crumbs"><em>You are here:</em> <a href="./">Rhino project page</a> &gt; <strong>JavaScript Shell</strong></p>

<h1 style="text-align: center;">JavaScript Shell</h1>

<p>The JavaScript shell provides a simple way to run scripts in batch mode
or an interactive environment for exploratory programming.</p>

<h2><a name="invoking" id="invoking">Invoking the Shell</a></h2>

<pre class="code" style="white-space: -moz-pre-wrap;">

java org.mozilla.javascript.tools.shell.Main [<var>options</var>] <var>script-filename-or-url</var> [<var>script-arguments</var>]

</pre>

<p>where <var>options</var> are:</p>

<dl>

<dt><code>-e <var>script-source</var></code></dt>
<dd>Executes <var>script-source</var> as a JavaScript script.</dd>

<dt><code>-f <var>script-filename-or-url</var></code></dt>
<dd>Reads <var>script-filename-or-url</var> content and execute 
it as a JavaScript script.</dd>

<dt><code>-opt <var>optLevel</var></code></dt>
<dt><code>-O <var>optLevel</var></code></dt>
<dd>Optimizes at level <var>optLevel</var>, which must be an integer 
between 0 and 9. See <a href="opt.html">Optimization</a> for more 
details.</dd>

<dt><code>-version <var>versionNumber</var></code></dt>
<dd>Specifies the language version to compile with. The string 
<var>versionNumber</var> must be one of <var>100</var>, <var>110</var>, 
<var>120</var>, <var>130</var>, or <var>140</var>. See 
<a href="overview.html#versions">JavaScript Language
Versions</a> for more information on language versions.</dd>

<dt><code>-strict</code></dt>
<dd>Enable strict mode.</dd>

<dt><code>-continuations</code></dt>
<dd>Enable experiments support for continuations and set the 
optimization level to -1 to force interpretation mode.</dd>
</dl>

<p>If the shell is invoked with the system property 
rhino.use_java_policy_security set to true and with a security 
manager installed, the shell restricts scripts permissions based 
on their URLs according to Java policy settings. This is available 
only if JVM implements Java2 security model.</p>

<h2><a name="predefprops" id="predefprops">Predefined Properties</a></h2>

<p>Scripts executing in the shell have access to some additional 
properties of the top-level object.</p>

<dl>

<dt>arguments</dt>
<dd>The <code>arguments</code> object is an array containing the 
strings of all the arguments given at the command line when the 
shell was invoked.</dd>

<dt>help()</dt>
<dd>Executing the help function will print usage and help messages.</dd>

<dt>defineClass(<var>className</var>)</dt>
<dd>Define an extension using the Java class named with the string
argument <var>className</var>. Uses ScriptableObject.defineClass() 
to define the extension.</dd>

<dt>deserialize(<var>filename</var>)</dt>
<dd>Restore from the specified file an object previously written 
by a call to <code>serialize</code>.</dd>

<dt>load([<var>filename</var>, ...])</dt>
<dd>Load JavaScript source files named by string arguments. If
multiple arguments are given, each file is read in and executed 
in turn.</dd>

<dt>loadClass(<var>className</var>)</dt>
<dd>Load and execute the class named by the string argument 
<var>className</var>. The class must be a class that implements 
the Script interface, as will any script compiled by 
<a href="jsc.html">jsc</a>.</dd>

<dt>print([<var>expr</var> ...])</dt>
<dd>Evaluate and print expressions. Evaluates each expression,
converts the result to a string, and prints it.</dd>

<dt>readFile(<var>path</var> [, <var>characterCoding</var>)</dt>
<dd>Read given file and convert its bytes to a string using the
specified character coding or default character coding if explicit 
coding argument is not given.</dd>

<dt>readUrl(<var>url</var> [, <var>characterCoding</var>)</dt>
<dd>Open an input connection to the given string url, read all its 
bytes and convert them to a string using the specified character coding or
default character coding if explicit coding argument is not given.</dd>

<dt>runCommand(<var>commandName</var>, [<var>arg</var>, ...] [<var>options</var>])</dt>
<dd>Execute the specified command with the given argument and options
as a separate process and return the exit status of the process. For 
details, see JavaDoc for <a href="http://lxr.mozilla.org/mozilla/source/js/rhino/toolsrc/org/mozilla/javascript/tools/shell/Global.java">org.mozilla.javascript.tools.shell.Global#runCommand</a>.</dd>

<dt>seal(<var>object</var>)</dt>
<dd>Seal the specified object so any attempt to add, delete or 
modify its properties would throw an exception.</dd>

<dt>serialize(<var>object</var>, <var>filename</var>)</dt>
<dd>Serialize the given object to the specified file.</dd>

<dt>spawn(<var>functionOrScript</var>)</dt>
<dd>Run the given function or script in a different thread.</dd>

<dt>sync(<var>function</var>)</dt>
<dd>creates a synchronized function (in the sense of a Java 
synchronized method) from an existing function. The new function 
synchronizes on the <code>this</code> object of its invocation.</dd>

<dt>quit()</dt>
<dd>Quit shell. The shell will also quit in interactive mode if
an end-of-file character is typed at the prompt.</dd>

<dt>version([<var>number</var>])</dt>
<dd>Get or set JavaScript version number. If no argument is supplied,
the current version number is returned. If an argument is supplied, it
is expected to be one of <var>100</var>, <var>110</var>, <var>120</var>, 
<var>130,</var> or <var>140</var> to indicate JavaScript version 1.0, 
1.1, 1.2, 1.3, or 1.4 respectively.</dd>

</dl>

<h2><a name="example" id="example">Example</a></h2>

<h4>Invocation</h4>

<p>Here the shell is invoked three times from the command line. (The system
command prompt is shown as <code>$</code>.) The first invocation executes a
script specified on the command line itself. The next invocation has no
arguments, so the shell goes into interactive mode, reading and evaluating
each line as it is typed in. Finally, the last invocation executes a script
from a file and accesses arguments to the script itself.</p>

<pre class="code">
$ java org.mozilla.javascript.tools.shell.Main -e print('hi')
hi
$ java org.mozilla.javascript.tools.shell.Main
js> print('hi')
hi
js&gt; 6*7
42
js&gt; function f() {
	return a;
}
js&gt; var a = 34;
js&gt; f()
34
js&gt; quit()
$ cat echo.js
for (i in arguments) {
	print(arguments[i])
}
$ java org.mozilla.javascript.tools.shell.Main echo.js foo bar
foo
bar
$
</pre>

<h4>spawn and sync</h4>

<p>The following example creates 2 threads via 
<code class="command">spawn</code> and uses <code class="command">sync</code> 
to create a synchronized version of the function 
<code class="command">test</code>.</p>

<pre class="code">
js&gt; function test(x) {
	print("entry");
	java.lang.Thread.sleep(x*1000);
	print("exit");
}
js&gt; var o = { f : sync(test) };
js&gt; spawn(function() {o.f(5);});
Thread[Thread-0,5,main]
entry
js&gt; spawn(function() {o.f(5);});
Thread[Thread-1,5,main]
js&gt;
exit
entry
exit
</pre>

<h4><a name="runcommand" id="runcommand">runCommand</a></h4>

<p>Here is few examples of invoking <code class="command">runCommand</code> 
under Linux.</p>

<pre class="code">
js&gt; runCommand('date')
Thu Jan 23 16:49:36 CET 2003
0
// Using input option to provide process input
js&gt; runCommand("sort", {input: "c\na\nb"})
a
b
c
0
js&gt; // Demo of output and err options
js&gt; var opt={input: "c\na\nb", output: 'Sort Output:\n'}
js&gt; runCommand("sort", opt)
0
js&gt; print(opt.output)
Sort Output:
a
b
c
js&gt; var opt={input: "c\na\nb", output: 'Sort Output:\n', err: ''}
js&gt; runCommand("sort", "--bad-arg", opt)
2
js&gt; print(opt.err)
/bin/sort: unrecognized option `--bad-arg'
Try '/bin/sort --help' for more information.

js&gt; runCommand("bad_command", "--bad-arg", opt)
js: "&lt;stdin&gt;", line 18: uncaught JavaScript exception: java.io.IOException: 
bad_command: not found
js&gt; // Passing explicit environment to the system shell
js&gt; runCommand("sh", "-c", "echo $env1 $env2", { env: {env1: 100, env2: 200}})
100 200
0
js&gt; // Use args option to provide additional command arguments
js&gt; var arg_array = [1, 2, 3, 4];
js&gt; runCommand("echo", { args: arg_array})
1 2 3 4
0
</pre>

<p>Examples for Windows are similar:</p>

<pre class="code">
js&gt; // Invoke shell command
js&gt; runCommand("cmd", "/C", "date /T")
27.08.2005
0
js&gt; // Run sort collectiong the output 
js&gt; var opt={input: "c\na\nb", output: 'Sort Output:\n'}
js&gt; runCommand("sort", opt)
0
js&gt; print(opt.output)
Sort Output:
a
b
c
js&gt; // Invoke notepad and wait until it exits
js&gt; runCommand("notepad")
0
</pre>




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified March  7,  2008</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/rhino/shell.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
