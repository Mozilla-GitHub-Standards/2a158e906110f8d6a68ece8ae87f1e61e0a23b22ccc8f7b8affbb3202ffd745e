<HTML><HEAD>   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 (Macintosh; I; PPC) [Netscape]">   <META NAME="KeyWords" CONTENT="client, source, documentation">   <TITLE>Framesets and History</TITLE></HEAD><BODY BGCOLOR="#FFFFFF"><H2><FONT FACE="Arial,Helvetica">Framesets and History</FONT></H2>This document describes the flow of control in Mozilla when the usernavigates through a session history involving a frameset.<BR><center><img src=hist2.gif></center><p>Normal session history in the navigator is maintained as a linkedlist of session history structures, one for each document visited.This list, in reverse order starting at most recently visited canbe seen from the <b>Go</b> menu in Navigator.On this level, a frameset is only a single session history structureand no matter how much navigating goes on inside the frameset, onlyone entry for the frameset will appear in the <b>Go</b> menu.In the above diagram, Docs 1-6 represent the session historystructures that will be displayed in the <b>Go</b> menu.</p><p>However, history is usually navigated by the <b>Forward</b> and<b>Back</b> buttons.  Because of special hooks from the UI tolayout's frameset manager using <b>Forward</b> and<b>Back</b> navigation for the above diagram will take you inorder to Doc1-2, H1-4, and Doc4-6.  This can happen becauselayout keeps a separate linked list of session history structuresfor inside the frameset, and manipulates which one is presentedto the user as currently being what is labeled as <tt>Doc 3</tt>in the above diagram.</p><p>Again using the above diagram, say the user is currently at<tt>Doc 5</tt> and navigates backwards to <tt>Doc 2</tt>using the <b>Back</b> button.<ul><li>Hit the <b>Back</b> button from <tt>Doc 5</tt>.The FE button handler checks that it isn't in a frameset, and thencalls the session history to get the previous document.Display <tt>Doc 4</tt>.<li>Hit the <b>Back</b> button from <tt>Doc 4</tt>.The FE button handler checks that it isn't in a frameset, and thencalls the session history to get the previous document.Display <tt>Doc 3</tt>.<tt>Doc 3</tt> is a frameset, restore it to last displayedcontents of (A1, B3, C2).<li>Hit the <b>Back</b> button from <tt>Doc 3</tt>.The FE button handler finds that it is a frameset, andcalls the layout frameset manager to get the previous document.Frameset manager returns a previous state for <tt>Doc 3</tt>which is (A1, B2, C2).<li>Hit the <b>Back</b> button from <tt>Doc 3</tt>.The FE button handler finds that it is a frameset, andcalls the layout frameset manager to get the previous document.Frameset manager returns a previous state for <tt>Doc 3</tt>which is (A1, B1, C2).<li>Hit the <b>Back</b> button from <tt>Doc 3</tt>.The FE button handler finds that it is a frameset, andcalls the layout frameset manager to get the previous document.Frameset manager returns a previous state for <tt>Doc 3</tt>which is (A1, B1, C1).<li>Hit the <b>Back</b> button from <tt>Doc 3</tt>.The FE button handler finds that it is a frameset, andcalls the layout frameset manager to get the previous document.Frameset manager returns no previous state so the FE calls thesession history to get the previous document.Display <tt>Doc 2</tt>.</ul></p><HR WIDTH="100%"><FONT SIZE="-1"><CENTER>Copyright &copy; 1998<A HREF="http://home.netscape.com/misc/contact_info.html">NetscapeCommunications Corporation</A></CENTER></FONT></BODY></HTML>