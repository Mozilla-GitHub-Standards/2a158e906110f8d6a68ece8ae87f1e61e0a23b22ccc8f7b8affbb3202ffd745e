
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

    <TITLE>Perignon: The DOM be stylin'</TITLE>
  <script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">

  

  
    <CENTER><B><FONT SIZE="+2">Perignon</FONT></B></CENTER>
    <CENTER>Mike Shaver, &amp; Eric Pollmann</CENTER>
    <CENTER>&lt;<A HREF="mailto:shaver@netscape.com,pollmann@netscape.com">shaver@netscape.com &amp; pollmann@netscape.com</A>&gt;</CENTER>
    <H4><HR WIDTH="100%"></H4>
<TABLE CELLSPACING=0 CELLPADDING=2 COLS=1 WIDTH="100%" BGCOLOR="#FFFFCC">
<TR >
<TD ><B>What is <i>Perignon</i>?</B></TD>
</TR>
</TABLE>

    <P><I>Perignon</I> is the project to replace Mozilla's current CSS-1
      implementation with one that uses the DOM for style information.  We
      believe that this is the best way to fix Mozilla's current, er,
      suboptimal handling of CSS-1, and we've already made good progress.
      Style inheritance works (as near as we can tell) as it should, meaning
      that the days of broken nested-<TT>&lt;DIV&gt;</TT> or table
      style-property inheritance are hopefully behind us.  Also, we've
      improved the handling of the <TT>A:visited</TT> and <TT>A:link</TT>
      pseudoclasses, so that you can now set any text attribute
      (text-decoration, bgcolor, font-decoration, etc.) for these elements.
      (Previously, only <TT>color</TT> worked.)</P>

<TABLE CELLSPACING=0 CELLPADDING=2 COLS=1 WIDTH="100%" BGCOLOR="#FFFFCC">
<TR >
<TD ><B>How do I use <i>Perignon</i>?</B></TD>
</TR>
</TABLE>

    <P> As an HTML author, you can continue to use CSS-1 and JSSS syntaxes
      to set style data for your pages.  Nothing should change, except that
      things will work better!</P>
    <P> As a hacker-on-layout, you need to know about a handful of core APIs.
      Most of the tree-generation and style-data-loading stuff is already done,
      so you just need to worry about extractive data from the style system.
      The APIs live in the DOM library, mainly in <TT><A HREF="http://lxr.mozilla.org/mozilla/source/lib/libdom/domstyle.c">domstyle.c</A></TT>.
      <BR>
    <DL>
      <DT> <TT><A HREF="http://lxr.mozilla.org/mozilla/ident/?i=DOM_StyleDatabase">DOM_StyleDatabase</A></TT>
      <DD> The style database lives in the <A
	  HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_TopState_struct">lo_TopState</A> struct, as <TT>style_db</TT>.  In most layout
	functions, you are provided with an
	<A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_DocState_struct">lo_DocState</A>, so you can just use
	<TT>doc_state-&gt;top_state-&gt;style_db</TT> to get to it.  If this
	<TT>style_db</TT> is NULL, there is no style information for this page,
	so you should fall back to defaults as appropriate.  (See
	<A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_FillInTextStyleInfo">lo_FillInTextStyleInfo</A> for an example of this.)
	Don't force the creation of a style database!
      <DT> <TT><A HREF="http://lxr.mozilla.org/mozilla/ident/?i=DOM_StyleGetProperty">DOM_StyleGetProperty</A></TT>
      <DD> This function is used to get an attribute entry (a value, basically)
	for a given style property on a given node.  It does all the
	inheritance and weighting rocket science.  See 	<A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_FillInTextStyleInfo">lo_FillInTextStyleInfo</A> for a good example of usage.
      <DT> <TT><A HREF="http://lxr.mozilla.org/mozilla/ident/?i=DOM_GetCleanEntryData">DOM_GetCleanEntryData</A></TT>
      <DD> This function uses a provided <A HREF="http://lxr.mozilla.org/mozilla/ident/?i=DOM_DataParser">DOM_DataParser</A> function to parse
	an entry's value as required.  It will cache the value if possible,
	which will hopefully reduce the <TT>strcasecomp</TT> overhead.
    </DL>
    <P> That's basically it.  Everything else is probably going to be
      specific to the individual usage of the data.  In addition to
      <A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_FillInTextStyleInfo">lo_FillInTextStyleInfo</A>, good examples of usage include
      <A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_SetStyleSheetLayerProperties">lo_SetStyleSheetLayerProperties</A> and
      <A HREF="http://lxr.mozilla.org/mozilla/ident/?i=lo_format_image">lo_format_image</A>.

    <address><a href="mailto:shaver@netscape.com">Mike
    Shaver</a></address> <!-- Created: Fri Aug 28 10:48:30 EDT 1998
    -->
    <!-- hhmts start -->
Last modified: Tue Oct 13 19:45:49 EDT 1998
<!-- hhmts end -->
  


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified October 26,  1999</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/classic/layout-classic/perignon.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
