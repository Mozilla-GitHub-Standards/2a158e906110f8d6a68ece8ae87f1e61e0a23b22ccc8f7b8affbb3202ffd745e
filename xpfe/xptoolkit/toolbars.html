<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

 <title>Toolbars and Toolboxes</title>
 <link rel="content" href="./">
 <link rel="prev" href="menus.html">
 <link rel="next" href="buttons.html">
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




 <h1>Toolbars and Toolboxes</h1>
 <ul class="snav">
  <li><a href="menus.html">Previous: Menu Bars and Menus</a>
  <li><a href="./">Table of Contents</a>
  <li><a href="buttons.html">Next: Titled Buttons</a>
 </ul>
 <dl>
  <dt>Feature Owner
  <dd><a href="mailto:pinkerton@netscape.com">Mike Pinkerton</a>
 </dl>
 <p>A toolbar is a strip that contains a set of widgets
  called <dfn>toolbar items</dfn>. The toolbar can lay out its
  components either horizontally or vertically, and it can
  optionally wrap to multiple rows/columns. (In fact, a
  toolbar is really just an extension of the
  <code>box</code> element. See <a href="boxes.html">The
  Box System</a> for details.)
 <p>The toolbar is specified using the
  <code>toolbar</code> tag. The attribute
  <code>align</code> is used to specify
  whether or not the toolbar is a horizontal toolbar or a
  vertical toolbar. If this attribute is omitted, the toolbar
  will lay out its children horizontally.
 <p class="note">The align attribute should
  be moved into CSS, but for now it must be specified as an
  attribute on the toolbar.
 <pre class="code">&lt;toolbar align="vertical"&gt;
  &lt;html:button&gt;Button One&lt;/html:button&gt;
  &lt;html:button&gt;Button Two&lt;/html:button&gt;
  &lt;html:button&gt;Button Three&lt;/html:button&gt;   
&lt;/toolbar&gt;</pre>
 <p>Toolbars are capable of supporting drag and drop
  operations by manipulating its DOM subtree. The drag and
  drop code for toolbars can also provide feedback for
  insertion before, after, or on other items on the toolbar.
  In order for this code to work, the contents of the toolbar
  (e.g., buttons and input fields) must be grouped into a
  single container within the toolbar, but that container can
  be an arbitrary child of the toolbar. See <a href="#DD">below</a>
  for more details on drag and drop.
 <p>A toolbar item is also an extension of a box and it can
  therefore contain arbitrary HTML and XUL content that is
  treated as a single toolbar item for the purposes of drag
  and drop, deletion operations on the toolbar, cut and paste
  of toolbar items, and context/popup menus on toolbar
  items.
 <p>The toolbar item can lay out its contents horizontally or
  vertically (with horizontal being the default) using the
  <code>align</code> attribute.
 <pre class="code">&lt;toolbar&gt;
  &lt;toolbaritem&gt;
    &lt;html:button&gt;Button One&lt;/html:button&gt;
  &lt;/toolbaritem&gt;
  &lt;toolbaritem&gt;
    &lt;html:button&gt;Button Two&lt;/html:button&gt;
  &lt;/toolbaritem&gt;
  &lt;toolbaritem&gt;
    &lt;html:img src="icon.gif"/&gt;Input Label: &lt;html:input/&gt;
  &lt;/toolbaritem&gt;
&lt;/toolbar&gt;</pre>
 <p>A toolbar's contents can be marked as unmodifiable by
  setting the <code>readonly</code> attribute
  on the toolbar. Toolbars with this attribute set will
  disallow any drops into their content area, and they will
  not allow their contents to be altered in any way.
 <p>Although toolbars can be embedded directly in the window,
  they are commonly placed inside another object called the
  <dfn>toolbox</dfn>. The toolbox is represented using the
  <code>toolbox</code> tag. A toolbox contains
  one or more toolbars as children, and it surfaces the UI
  that allows the toolbars within the toolbox to be reordered
  and collapsed.
 <p>When a toolbar is placed inside of a toolbox, it acquires
  a stripe on its left hand side (if the toolbox stacks its
  components) or on its top side (if the toolbox is
  horizontal). This stripe is affectionately referred to as
  the grippy, and it is the
  object that the user manipulates in order to move the
  toolbar around or to collapse it.
 <p>Collapsed toolbars appear in a thin strip at the bottom
  of the toolbox (if vertical) or the right of the toolbox (if
  horizontal). This strip is only shown if at least one of the
  toolbars in the toolbox is collapsed.
 <pre class="code">&lt;toolbox&gt;
  &lt;toolbar id="Command Toolbar"&gt;
    &lt;html:button&gt;Button One&lt;/html:button&gt;
  &lt;/toolbar&gt;
  &lt;toolbar id="Personal Toolbar&gt;
    &lt;html:button&gt;Button Two&lt;/html:button&gt;
  &lt;/toolbar&gt;
  &lt;toolbar id="Location Toolbar&gt;
    &lt;html:img src="icon.gif"/&gt;URL: &lt;html:input/&gt;
  &lt;/toolbar&gt;
&lt;/toolbox&gt;</pre>
 <p>When a toolbar is collapsed, an attribute called
  <code>collapsed</code> is set to true on the
  toolbar element. When the toolbar is shown again, this
  attribute is unset. If this attribute is specified in the
  XUL file, it indicates that the initial state of the toolbar
  is to be collapsed inside the toolbox, although a new state
  may be stored persistently in order for the user's
  visibility preferences to be retained. (See <a href="persistence.html">Persistence
  and Sharing</a> for details.)
 <p>The <code>collapsed</code> attribute is
  ignored if the toolbar is not contained in a toolbox.
 <p>The toolbar or toolbox can also be hidden using the
  standard mechanism (in both HTML and XUL) for hiding content
  elements: <code>myToolbar.style.display = none</code>.
  Showing the toolbar requires setting it back to
  its original display type (which for toolbars is
  <code>block</code>).
 <p>The look of the toolbox grippies can be customized using
  the pseudo elements
  <code>:toolbox-normal</code> and
  <code>:toolbox-rollover</code>. The former
  is used by default for the grippies, and the latter is used
  when the user mouses over the grippies.
 <pre class="code">:toolbox-rollover {
    background-color: #ccccff;
    background-image: url("resource:/res/toolbar/TB_Tab_mo.gif");
    background-repeat: no-repeat;
    color: green;
    border-bottom: solid darkGray 1px;
    border-top: solid white 0px;
    border-left: solid white 0px;
    border-right: solid darkGray 1px;
}</pre>
 <h2 id=DD>Toolbar Drag &amp; Drop</h2>
 <h3>Tracking During The Drag</h3>
 <p>The toolbars make use of a DOM event capturer to annotate
  the toolbar's content node with information about where the
  drag will go in order to draw the correct drop feedback.
  Since toolbars can be arbitrarily complicated, however, the
  capturer needs a little help figuring out which child frame
  contains the drop area. This is done by setting the
  <code>dragdroparea</code> attribute on the
  toolbar. If this attribute is not specified, the tracking
  code assumes the toolbar frame is the drop area.
 <p>Here's an example of a toolbar with nested boxes for some
  complicated layout. The buttons that can be dragged around
  live within one of these nested boxes.
 <pre class="code">&lt;toolbar id="PersonalToolbar" dragdroparea="innermostBox"&gt;                 
  &lt;box align="horizontal" flex="1" style="min-width: 1px"&gt;
    &lt;!-- button area of personal toolbar --&gt;
    &lt;box align="horizontal" flex="1" style="min-width: 1px; overflow: hidden"
      datasources="rdf:bookmarks" ref="NC:PersonalToolbarFolder"&gt;
      &lt;titledbutton&gt; ...
    &lt;/box&gt;
  &lt;/box&gt;
&lt;/toolbar&gt;</pre>
 <p>The toolbar also needs a little help from the
  <code>ondragover</code> event handler to
  trigger the drop feedback magic. The capturer always
  annotates the toolbar with various attributes, but it might
  not be valid to drop on the toolbar based on the contents of
  the drag. When the event handler determines that a drag is
  valid, it needs to touch the
  <code>dd-triggerrepaint</code> attribute on
  the toolbar which triggers a repaint with the correct drop
  feedback. By not touching this attribute, the toolbar will
  not redraw and this prevents the feedback from appearing. If
  you don't want drop feedback at all, this is how you'd
  accomplish it.
 <pre class="code">function DragOverPersonalToolbar ( event )
{
  var validFlavor = false;
  var dragSession = null;
                  
  var dragService = 
    Components.classes&#91;"component://netscape/widget/dragservice"&#93;.getService(Components.interfaces.nsIDragService);
  if ( dragService ) {
    dragSession = dragService.getCurrentSession();
    if ( dragSession ) {
      if ( dragSession.isDataFlavorSupported("moz/toolbaritem") )
        validFlavor = true;
      else if ( dragSession.isDataFlavorSupported("text/plain") )
        validFlavor = true;
      //XXX other flavors here...
                  
      // touch the attribute to trigger the repaint with the drop feedback.
      if ( validFlavor ) {
        var toolbar = document.getElementById("PersonalToolbar");
        toolbar.setAttribute ( "dd-triggerrepaint", 0 );
        dragSession.canDrop = true;
        event.preventBubble();
      }
    }
  }
} // DragOverPersonalToolbar</pre>
 <h3>Determining Where To Drop</h3>
 <p>The event capturer sets two attributes on the toolbar
  during the drag tracking which are useful when the user
  finally releases the mouse over the toolbar. The first is
  <code>dd-droplocation</code> which is an
  integer index of the item <B>before</B> which the newly
  dropped items should be inserted. This index is zero-based.
  The second attribute,
  <code>dd-dropon</code>, tells if the drop
  should go on (or into) a container on the toolbar. When this
  is true, <code>dd-droplocation</code> is the
  item index of the container.
 <p>The toolbar determines if something is a container by
  checking the <code>container</code>
  attribute of the content node.
 <h3>Customizing Drop Feedback</h3>
 <p>The drop feedback marker bar is normally black, but can
  be customized on a particular toolbar via CSS. To do this,
  use the <code>:-moz-drop-marker</code>
  pseudoelement.
 <p>For example:
 <pre class="code">toolbar#PersonalToolbar:-moz-drop-marker {
   color: white;
}</pre>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified January 18,  2005</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/xpfe/xptoolkit/toolbars.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
