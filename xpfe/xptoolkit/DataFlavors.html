
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

   <TITLE>XPToolkit Data Flavors</TITLE>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">



<H1>Toolkit Data Flavors</H1>

<P><A HREF="mailto:pinkerton@netscape.com">Mike Pinkerton
(pinkerton@netscape.com)</A><BR>
7/3/2000</P>

<P>XPToolkit has a variety of intrinsic data flavors which it uses to
give meaning to the data on the clipboard or in a drag. This document
details only the flavors needed by the toolkit for basic operation.
Clients of XPTookit may at any time invent their own data flavors,
but they are not discussed here.</P>

<P><TABLE BORDER=1 WIDTH="100%">
   <TR BGCOLOR="#FFCC99">
      <TH WIDTH=144>
         <P ALIGN=left>Flavor</P>
      </TH>
      <TH>
         <P ALIGN=left>Brief Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>text/unicode</P>
      </TD>
      <TD>
         <P>Two-byte unicode plain text with no formatting
         information</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>text/xif</P>
      </TD>
      <TD>
         <P>An XML interchange format that includes text and its
         formatting similar to html</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>text/html</P>
      </TD>
      <TD>
         <P>HTML</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>text/plain</P>
      </TD>
      <TD>
         <P>One-byte plain text, for internal use only.</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>AOLMAIL</P>
      </TD>
      <TD>
         <P>A format used by AOL/AIM for formatted text, similar to
         HTML</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>image/png</P>
      </TD>
      <TD>
         <P>Binary PNG image data</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>image/jpg</P>
      </TD>
      <TD>
         <P>Binary JPEG image data</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>image/gif</P>
      </TD>
      <TD>
         <P>Binary GIF image data</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>application/x-moz-file</P>
      </TD>
      <TD>
         <P>A file object (supporting nsIFile) for identifying a
         local file</P>
      </TD>
   </TR>
   <TR>
      <TD WIDTH=144>
         <P>text/x-moz-url</P>
      </TD>
      <TD>
         <P>A url and title for identifying the data is a URL for
         platforms that care</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

text/unicode</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Probably the most common data flavor, text/unicode
         represents text with no inherent formatting (if you want to
         encode style, such as bold or italics, use a different
         flavor). As this is the most universal of flavors, and is
         used and understood by most external applications, every
         drop site should accept this flavor and every drag source
         should advertise it.</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Two byte, unicode text. The length of the string is not
         explicitly in the format but can be computed by dividing the
         size of the data by two. The text is not null
         terminated.</P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Since most operating systems and external applications
         don't speak two-byte text, this flavor is internally
         translated to and from text/plain within the toolkit.
         Clients of XPToolkit do not need to worry about this and
         should only use text/unicode.</P>
         
         <P><B>Win32</B>: Translated to the CF_UNICODE flavor on the
         clipboard<BR>
         <B>MacOS</B>: No native translation<BR>
         <B>Unix</B>: No native translation</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

text/xif</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>XIF, eXchange Information Format, is an intermediate
         representation of styled text used for easy conversion to a
         variety of formats such as HTML or plain text. The
         presentation shell spits out XIF when asked to serialize
         portions of the content model.</P>
         
         <P>Most cut/copy/drags that involve content from a browser
         or composer widget will put only XIF into the transferable
         along with registering a converter that knows how to
         translate the XIF to a variety of formats.</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Two-byte XML. See XXX for a description.</P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>No operating systems or external applications understand
         this flavor. It is for internal use only.</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

text/html</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Styled text described by HTML.</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>An HTML fragment, not a full HTML document (ie, missing
         &lt;HEAD&gt; and &lt;BODY&gt; tags, etc).</P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>No operating systems or external applications understand
         this flavor. It is for internal use only.</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

text/plain</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Since most platforms and external applications don't
         understand the unicode format we use internally, the toolkit
         provides text/plain as a bridge.</P>
         
         <P><B>Do not </B>use this flavor explicitly as it is handled
         internally by the toolkit:</P>
         
         <UL>
            <LI>If an XPToolkit client asks the toolkit for
            text/unicode (eg, on a paste) and it is not present, the
            toolkit will look for text/plain and do the appropriate
            conversion to unicode from the platform charset.</LI>
            
            <LI>If the XPToolkit client is publishing data to the OS
            (eg, on a copy) and the list of flavors includes
            text/unicode, the toolkit will automatically add an
            additional text/plain flavor containing the unicode data
            coverted to single byte and encoded using the platform's
            native charset.</LI>
         </UL>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>One byte, unstyled text in the platform's native
         encoding.</P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P><B>Win32</B>: Translated to the CF_TEXT flavor on the
         clipboard</P>
         
         <P><B>MacOS</B>: Translated to the 'TEXT' flavor. If the
         data is a URL, the OS will create a special favorite file
         instead of the standard clipping if this is a drag to the
         Finder.</P>
         
         <P><B>Unix</B>: Translated to UTF8_STRING.</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

application/x-moz-file</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Used during drags between the desktop and the
         application, the presence of the application/x-moz-file
         flavor indicates that a file has been dragged onto the app
         or that a file should be created.</P>
         
         <P>Do not use this flavor to create an Internet Shortcut (or
         MacOS favorite) on the desktop. See the text/x-moz-url for
         how to do that.</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>An object which supports <A HREF="http://lxr.mozilla.org/seamonkey/source/xpcom/io/nsIFile.idl">nsIFile</A>.
         To get the URL, create an url object
         (component://netscape/network/standard-url), set the
         <FONT COLOR="#CC0099">file</FONT> property to the object you
         get from the transferable, then access it's
         <FONT COLOR="#CC0099">spec</FONT> property. For example:</P>
         
         <PRE>var dataObj = aData.data.data.QueryInterface(Components.interfaces.nsIFile);
if (dataObj) {
 var fileURL = nsJSComponentManager
                .createInstance("component://netscape/network/standard-url",
                     "nsIFileURL");
 fileURL.file = dataObj;
 // use fileURL.spec to get the path
}</PRE>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>Creation of the object which supports nsIFile at the OS
         boundary is handled internally to the Drag Service.
         XPToolkit clients should not rely on any particular
         implementation.</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

text/x-moz-url</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>The Drag Service needs to know when a drag item is a URL
         so that it can do certain platform integration work under
         the hood. Since it's not possible to know the semantic
         meaning of, say, text/unicode, this is accomplished by
         additionally registering the text/x-moz-url flavor.</P>
         
         <P>Whenever you have data that is known to be a URL (such as
         dragging a link or a bookmark), XPToolkit clients should add
         this flavor.</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <PRE>&lt;url&gt; &lt;space&gt; &lt;page title&gt;</PRE>
         
         <P>for example:</P>
         
         <PRE>http://www.aol.com America Online's Home Page</PRE>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>When the Drag Service sees this flavor, it does a bunch
         of platform-specific work under the hood, both for
         integration with the desktop, but also mapping to previous
         versions of Navigator.</P>
         
         <P><B>Win32</B>: Adds the CFSTR_FILECONTENTS and
         CFSTR_FILEDESCRIPTOR flavors so that the Windows desktop
         will allow creation of an Internet Shortcut.</P>
         
         <P><B>MacOS</B>: Nothing at the present time.</P>
         
         <P><B>Unix</B>: Mapped to _NETSCAPE_URL so that existing
         applications recognize this as a url. (not yet
         implemented)</P>
      </TD>
   </TR>
</TABLE>
</P>

<H2>

<HR>

AOLMAIL</H2>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>A format known to the win32 AOL and AIM clients for
         transferring styled text. It is basically HTML with an extra
         wrapping tag.</P>
         
         <P>Hopefully, we can one day forget that this ugly
         step-sister of text/html exists. Our implementation of the
         AIM client should only use text/html except when handling
         incoming data (eg, a paste).</P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <PRE>&lt;HTML&gt; &lt;...html data...&gt; &lt;/HTML&gt;</PRE>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P>This flavor is a legacy of the win32 AOL clients. It has
         no meaning on Mac or Unix.</P>
      </TD>
   </TR>
</TABLE>
</P>

<P>

<HR>

</P>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
</TABLE>
</P>

<P><TABLE BORDER=0 WIDTH="100%">
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Description</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
   <TR>
      <TH WIDTH=251 BGCOLOR="#CCCCFF">
         <P ALIGN=left>Format Of Data</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
   <TR BGCOLOR="#CCCCFF">
      <TH WIDTH=251>
         <P ALIGN=left>FE-Specific Information</P>
      </TH>
   </TR>
   <TR>
      <TD WIDTH=251>
         <P></P>
      </TD>
   </TR>
</TABLE>
</P>

<P></P>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified July  6,  2000</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/xpfe/xptoolkit/DataFlavors.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
