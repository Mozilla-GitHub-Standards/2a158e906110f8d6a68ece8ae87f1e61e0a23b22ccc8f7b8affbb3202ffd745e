<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">


  <meta name="generator" content=
  "HTML Tidy for Windows (vers 25 January 2008), see http://tidy.sourceforge.net/">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="authors" content="Peter Mock, Esther Goes, Chris Fuchs">

  <title>Feature Test Specification: Mail &amp; News: Mime Parts on
  Demand</title>

  <link rel="contents" href="./" title=
  "Mozilla MailNews Functional / UI Tests">
  <link rel="up" href="./" title="Mozilla MailNews Functional / UI Tests">
  <link rel="previous" href="machv-mn-layout-plaintext.html" title=
  "Feature test spec: Mail &amp; News: Plain Text Message Display">
  <link rel="next" href="sea-mn-replyquote.html" title=
  "Feature test spec: Mail &amp; News: Reply (Quote)">

  <style type="text/css">
  ol.uppCase {list-style-type: upper-alpha;}
  ol.lowCase {list-style-type: lower-alpha;}
  </style>

<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








  <p class="crumbs"><em>You are here:</em> <a href="./">Mozilla MailNews
  Functional / UI Tests</a> &gt; <strong>Mail &amp; News: Mime Parts on
  Demand</strong></p>

  <h1>Feature Test Spec: Mail and News Component</h1>

  <h2>Mail and News Component: Mime Parts on Demand (MPOD)</h2>

  <address class="author">
    Written by Peter Mock<br>
    Updated by <a href="mailto:esther@netscape.com">Esther Goes</a><br>
    Reviewed by Chris Fuchs
  </address>

  <h3>References</h3>

  <p>UI Specification: IMAP Mime Parts on Demand</p>

  <h3>Description</h3>

  <p>This is an IMAP only feature. The IMAP protocol lets us selectively
  download parts of a message. When displaying messages that have large
  attachments, it is more efficient to download and display just the
  message body. The user can download the file attachment at any time. This
  feature is refer to as "MIME parts on demand," or MPOD. No functional
  changes expected according to developer.</p>

  <p>Perquisite: the file attachment you use should not be files that are
  normally displayed in line such as Text, Gif, JPEG, and BMP. I suggest
  using MS Office documents for file attachments.</p>

  <ol class="uppCase">
    <li>Verify the default MPOD preferences

      <ol>
        <li>Verify the default state for MPOD is to be enabled. Send
        yourself a message that has a large word document greater than 30k.
        The attachment should not be downloaded.</li>

        <li>Verify you can disable MPOD by adding the following user
        preference to the pref.js file. "mail.imap.mime_parts_on_demand" -
        TRUE if enabled (default); if FALSE, we never do it</li>

        <li>Verify the default attachment size before MPOD takes effect is
        30K.

          <ol class="lowCase">
            <li>Send a attachment less than 30k. The attachment should be
            downloaded</li>

            <li>Send a attachment greater than or equal to 30K. The
            attachment should not be downloaded.</li>
          </ol>
        </li>

        <li>Verify you can change the default MPOD threshold. You want to
        add the following user preference.
        "mail.imap.mime_parts_on_demand_threshold" (message size, in bytes,
        above which we try using MIME parts on demand. Default is 30k.)

          <ol class="lowCase">
            <li>Change the size to 100k then test the new setting</li>

            <li>Change the size to 1 MB then test the new setting</li>
          </ol>
        </li>

        <li>Verify you can change the maximum depth of a message which we
        will try to parse and use MPOD. You want to add the following user
        preference "mail.imap.mime_parts_on_demand_max_depth" - (The
        maximum depth of a message which we will try to parse and use MPOD
        for. Depth is defined as how many layers of forwarding there are.
        Default is 15. If we are trying to parse the body structure of a
        message which goes deeper than this, we will stop parsing and
        revert back to a normal full message fetch. This is to prevent
        attacks with malicious, extremely complex messages.)

          <ol class="lowCase">
            <li>Send a sample MS Outlook message to test the default. You
            may need to look at the IMAP protocol log (Need to create a MS
            test message)</li>

            <li>Send a sample MS Express message to test the default. You
            may need to look at the IMAP protocol log (Need to create a MS
            test message)</li>
          </ol>
        </li>
      </ol>
    </li>

    <li>Verify the feedback given in the message that contains an
    attachment.

      <ol>
        <li>Verify that the attachment description text read, "Not
        downloaded with message" or a similar phase</li>

        <li>Verify that the View | Page Source reads, "This body part will
        be downloaded on demand." or a similar phase</li>

        <li>Add the easter egg user preference which will enable you to see
        if the attachment has been downloaded. Add the following
        preference, "mailnews.color_tag_attachments" (FALSE by default; if
        TRUE, we attach a colored tag to each attachment in the message to
        indicate whether or not it has been downloaded as part of the
        message. green = downloaded, orange = not downloaded. This pref.
        can be useful for testing.)

          <ol class="lowCase">
            <li>Send a attachment less than 30k. The attachment should be
            downloaded and display a green bar.</li>

            <li>Send a attachment greater than or equal to 30K. The
            attachment should not be downloaded and display a orange
            bar.</li>
          </ol>
        </li>

        <li>Expand the Size column in the Thread pane

          <ol class="lowCase">
            <li>Verify that attachments that are automatically downloaded
            have a file size less than 30k</li>

            <li>Verify that attachments that are not automatically
            downloaded greater or equal to 30k</li>
          </ol>
        </li>
      </ol>
    </li>

    <li>Verify you can save the file attachment that has not been
    downloaded. Perform these tests in the Message pane.

      <ol>
        <li>Verify you can click on attachment link to download and save
        the attachment</li>

        <li>Verify you can right click on the attachment link and use the
        context menu "save link as" to download and save the
        attachment</li>

        <li>Verify you can open the attachment pane (bottom of the message)
        and double click on the attachment link to download and save the
        attachment</li>

        <li>Verify you can open the attachment pane (bottom of the message)
        and right click on the attachment link and use the context menu
        "Save Attachment As" to download and save the attachment</li>

        <li>Verify you can open the attachment pane (bottom of the message)
        and right click on the attachment link and use the context menu
        "Open Attachment" to download and save the attachment</li>
      </ol>
    </li>

    <li>Repeat the above section but perform the tests in the Message
    Window</li>

    <li>Verify the following Message actions which does not require the
    file attachment to be downloaded (it uses a shell). To verify, it may
    require looking at the IMAP Protocol log. Assume that the file
    attachment is greater than the default setting. Perform these tests in
    the Message pane.

      <ol>
        <li>Set the View message option to view attachments in line. Verify
        that has a file attachment (not downloaded) does not automatically
        download</li>

        <li>Set the View message option to not view attachments in line.

          <ol class="lowCase">
            <li>Receive a message that has a plain text attachment and
            verify the entire message including text attachment was not
            downloaded</li>

            <li>Receive a message that has a message body which is a
            multipart type (multipart/mixed, multipart/related, etc.) and
            verify that we download that multipart's first part. For
            example, attach a web page to produce a multipart/mixed
            message.</li>
          </ol>
        </li>

        <li>Verify viewing a message page source (View | Page Source) that
        has a file attachment (not downloaded) does not automatically
        download</li>

        <li>Verify Quoting

          <ol class="lowCase">
            <li>With automatically quoting enable, reply to a message that
            has a file attachment and verify that the attachment was not
            downloaded.</li>

            <li>Forward quote a message that has a file attachment and
            verify that the attachment was not downloaded</li>

            <li>Forward in line a message that has a file attachment and
            verify that the attachment was not downloaded</li>

            <li>With automatically quoting disable, reply to a message then
            press the quote button located on the toolbar. Verify that the
            attachment was not downloaded.</li>
          </ol>
        </li>

        <li>Verify when you print a message that has a file attachment, the
        attachment was not downloaded</li>
      </ol>
    </li>

    <li>Repeat the above section but perform the tests in the Message
    Window</li>

    <li>Verify the following Messenger actions which should always read the
    entire message including attachments. Assume message has a file
    attachment.

      <ol>
        <li>Forward a message as attachment and verify that the attachment
        was downloaded</li>

        <li>Synchronize and Go Offline then verify messages that has file
        attachment was downloaded</li>

        <li>Move/Copy to Offline Folder then Synchronize and verify
        messages that has file attachment were all downloaded</li>

        <li>Save Message and verify the attachment was downloaded</li>

        <li>Edit Message and verify the attachment was downloaded</li>
      </ol>
    </li>

    <li>Verifying if the message shell and attachment has been cached (Use
    IMAP Protocol logging). Verify the IMAP log to verify that the
    attachment was not downloaded again.

      <ol>
        <li>Receive a message with an attach Word document (less than 30K).
        Select another message then re-select this message and verify that
        the shell and file attachment was not downloaded again</li>

        <li>Receive a message with an attach Word document (greater than
        30K and less than 1 MB)

          <ol class="lowCase">
            <li>Select another message then re-select this message and
            verify that the shell was not downloaded again</li>

            <li>Forward this message as a file attachment and verify the
            shell and attachment was downloaded from the server</li>
          </ol>
        </li>

        <li>Receive a message with an attach Word document greater than 1
        MB

          <ol class="lowCase">
            <li>Select another message then re-select this message and
            verify that the shell was not downloaded again</li>

            <li>Save the attachment. Select another message then re-select
            this message and verify that the attachment may have been
            downloaded again</li>
          </ol>
        </li>
      </ol>
    </li>

    <li>Verify Signed &amp; Encrypted messages (tbd)

      <ol>
        <li>Verify encrypted message are always downloaded in full. (It is
        assumed from the outset that encrypted messages cannot benefit from
        this feature because their MIME structure is hidden from us before
        they are decrypted.)</li>

        <li>Verify signed messages that if there are any parts of the
        message that are not downloaded, the signature will check out as
        invalid since it uses all the parts to compute the signature.
        (Note: instead of displaying this as invalid, we will display it as
        "Unverified Signature." If the user chooses to verify the signature
        by clicking on the signature icon, we will re-download the whole
        message and display the correct signature information.)</li>
      </ol>
    </li>

    <li>Verify MPOD works with multiple attachments. Suggestion: use MS
    Office document greater than 30k but less than 1MB

      <ol>
        <li>Send a message to yourself with 2 or more file attachments,
        verify neither attachments are downloaded</li>

        <li>Verify you save both attachments one at a time</li>

        <li>Forward the message as an attachment and verify all attachments
        are downloaded</li>

        <li>Deselect the mail message and re-select the message. Verify the
        attachment is cached</li>
      </ol>
    </li>

    <li>Verify MPOD works with complex body structures. Verify MPOD
    functions as expected.

      <ol>
        <li>Send a message that has a double forwarded message with one
        external attachment on each</li>

        <li>Send a message that has a double forwarded message with one in
        line attachment on each and one external attachment on each</li>

        <li>Send a message that has a triple-forwarded message with one
        external attachment on each</li>

        <li>Send a message that has a triple-forwarded message with one in
        line attachment on each and with one external attachment on
        each</li>

        <li>Send a message that has been forwarded 10 times message with
        one external attachment on each</li>

        <li>Send a message that has been forwarded 10 times message with
        one in line attachment on each and with one external attachment on
        each</li>
      </ol>
    </li>
  </ol>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified February 20,  2008</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/mailnews/tests/sea-mn-mpod.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
