<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="David Epstein">
   <meta name="GENERATOR" content="Mozilla/4.77 [en]C-AOLNSCP  (WinNT; U) [Netscape]">
   <title>nsIGlobalHistory</title>
<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">





<table align="center" width="95%">
<tr>
<td>

<p align="center"><a NAME="Test Plan for nsIGlobalHistory"></a><b><font size=+1>Test
Plan for nsIGlobalHistory interface</font></b></p>

<br>
<p>The nsIGlobalHistory interface has methods to access and update the global history file. In order to test the Global History interface, you need to have nsIProfile support in your test driver. See <a href="http://lxr.mozilla.org/seamonkey/source/xpfe/components/history/public/nsIGlobalHistory.idl">nsIGlobalHistory.idl</a> for more information.</p>

<p>To access the nsIGlobalHistory object, use getService and the Global History contract ID:</p>
<p>In C++:
<br>&nbsp;&nbsp;&nbsp; nsCOMPtr&lt;nsIGlobalHistory> ghObject(do_GetService(NS_GLOBALHISTORY_CONTRACTID));
</p>
<p>In JavaScript:
<br>&nbsp;&nbsp;&nbsp; ghObject = Components.classes["@mozilla.org/browser/global-history;1"].
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
getService(Components.interfaces.nsIGlobalHistory);
</p>

<p>Now you can call the methods using the ghObject object.</p>
<p>To see the test cases click on the desired methods below.</p>

<p>&nbsp;&nbsp;&nbsp; <i>methods:</i>
<br>&nbsp;&nbsp;&nbsp;<a href="#isVisited"> isVisited()</a>
<br>&nbsp;&nbsp;&nbsp; <a href="#addPage()">addPage()</a>
<br>&nbsp;</p>

<p><a NAME="isVisited"></a><b> isVisited():</b></p>
<p><i>Introduction</i>:
<br>This method checks if the given url is already in the global history file. It accepts two input parameters: a url string (char *) and a return value boolean. </p>

<p><i>How to use:</i></p>
<p>&nbsp;&nbsp;&nbsp; char *theUrl = "http://www.bogussite.com/";
<br>&nbsp;&nbsp;&nbsp; PRBool theRetVal = PR_FALSE;
<br>&nbsp;&nbsp;&nbsp; nsresult rv; </p>
<p>&nbsp;&nbsp;&nbsp; rv = ghObject->IsVisited(theUrl, &amp;theRetVal);
<br>&nbsp;&nbsp;&nbsp; if (NS_FAILED(rv))
<br>&nbsp;&nbsp;&nbsp; {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("rv test for IsVisited() failed");&nbsp;&nbsp;&nbsp;
// local method for text output
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;
<br>&nbsp;&nbsp;&nbsp; }
<br>&nbsp;&nbsp;&nbsp; else
<br>&nbsp;&nbsp;&nbsp; {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("rv test for IsVisited() succeeded.");
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (theRetVal)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("the url has been visited");
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("the url hasn't been visited");
<br>&nbsp;&nbsp;&nbsp; }
</p>

<p><i>Notes:</i></p>
<p>In Case 3 below, to delete an entry, use RemovePage() method from <a href="http://lxr.mozilla.org/seamonkey/source/xpfe/components/history/public/nsIBrowserHistory.idl">nsIBrowserHistory.idl</a>:
</p>
<p>&nbsp;&nbsp;&nbsp; nsCOMPtr&lt;nsIBrowserHistory> bhObject&nbsp; = do_QueryInterface(ghObject,
&amp;rv);
<br>&nbsp;&nbsp;&nbsp;
rv = bhObject->RemovePage(theUrl);
<br>&nbsp;

<center><table BORDER COLS=5 WIDTH="90%" >
<tr>
<td WIDTH="10%" HEIGHT="100%"><b>Case</b></td>

<td><b>Steps</b></td>

<td><b>Expected Results</b></td>

<td WIDTH="10%"><b>Pass/Fail</b></td>

<td><b>Comments</b></td>
</tr>

<tr>
<td WIDTH="10%" HEIGHT="100%">1</td>

<td>Enter a url in your browser. Call isVisited() using this url.</td>

<td>theRetVal should return True.</td>

<td>pass</td>

<td>Testing default impl of isVisited()</td>
</tr>

<tr>
<td WIDTH="10%">2</td>

<td>Call isVisited() with a url that you have never entered in your browser.</td>

<td>theRetVal should return False.</td>

<td>pass</td>

<td>Testing default impl of isVisited()</td>
</tr>

<tr>
<td>3</td>

<td>Delete a url entry in the gh file. Then use isVisited().</td>

<td>theRetVal should return False.</td>

<td>pass</td>

<td>Testing default impl of isVisited()</td>
</tr>
</table></center>

<p><a href="#Test Plan for nsIGlobalHistory">Back To Top</a> </p>
<p><a NAME="addPage()"></a><b>addPage():</b></p>
<p><i>Introduction:</i></p>
<br>This method adds the url to the global history file. It accepts one input parameter: a url string (char *). </p>
<p>Often, isVisited() is called first, and if the url isn't in the global history file, then addPage() will enter it. </p>
<p><i>How to use:</i>
<p>&nbsp;&nbsp;&nbsp; nsresult rv; </p>
<p>&nbsp;&nbsp;&nbsp; rv = ghObject->AddPage(theUrl); <br>
   &nbsp;&nbsp;&nbsp; if (NS_FAILED(rv))
<br>&nbsp;&nbsp;&nbsp; {
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("rv test for AddPage() failed.");
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return;
<br>&nbsp;&nbsp;&nbsp; }
<br>&nbsp;&nbsp;&nbsp; else
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
WriteToOutputFile("rv test for AddPage() succeeded.");
</p>

<p><i>Notes:</i></p>
<p>To confirm that the url is now in the global history file, call isVisited() again.
If it returns true, which it should, then AddPage() has successfully added the url.
</p>
<center><table BORDER COLS=5 WIDTH="90%" >
<tr>
<td WIDTH="10%" HEIGHT="100%"><b>Case</b></td>

<td><b>Steps</b></td>

<td><b>Expected Results</b></td>

<td WIDTH="10%"><b>Pass/Fail</b></td>

<td><b>Comments</b></td>
</tr>

<tr>
<td WIDTH="10%" HEIGHT="100%">1</td>

<td>Use AddPage() with a url that has been visited (in the global history
file).</td>

<td>The url should be added to the global history file.</td>

<td>pass</td>

<td>Using the default impl, it's difficult to query the database to see
if there's a double entry (which there shouldn't be). Just use isVisited()
to make sure the url is still there.</td>
</tr>

<tr>
<td WIDTH="10%">2</td>

<td>Use AddPage() with a url that has not been visited.</td>

<td>The url should be added to the global history file.</td>

<td>pass</td>

<td>Using default impl</td>
</tr>

<tr>
<td>3</td>

<td>Delete an entry in the gh file (see Notes for IsVisited() ). Then use
AddPage().</td>

<td>The url should be added to the global history file.</td>

<td>pass</td>

<td>Using default impl</td>
</tr>
</table></center>

<p> <a href="#Test Plan for nsIGlobalHistory">Back To Top</a> </p>
<p><b>Revision History:</b></p>
<p> Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Changed By&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Comments
</p>
<p>06/01/01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Test Plan written by David Epstein.
</p>

</td>
</tr>
</table>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified June 25,  2001</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/embed/plans/nsIGlobalHistoryTP.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
