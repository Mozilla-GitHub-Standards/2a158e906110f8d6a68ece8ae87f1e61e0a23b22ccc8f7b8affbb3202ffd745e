<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">

   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Dharma Sirnapalli">
   <meta name="GENERATOR" content="Mozilla/4.77 [en] (WinNT; U) [Netscape]">
   <title>nsIWebBrowserPersistTestPlan</title>
<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">





<center><b><font size=+1>Test Plan for nsIWebBrowserPersist interface</font></b></center>

<p><b>Introduction:</b>
<br>This interface is used for persisting DOM documents and URI's to local
storage.
<p><b>Approach:</b>
<br>These test cases are written in JavaScript embedded in HTML. nsIWebBrowserPersistTest1,
nsIWebBrowserPersistTest2 and nsIWebBrowserPersistTest3 can be run directly
or from ngdriver (ngdriver is server that hosts the testcases).
<br>If you run the test cases directly the results are reported on the
same html page. If you run the test cases from ngdriver the results are
saved into a file so that you can refer to it later.
<br>nsIWebBrowserPersistTest1 test case is used to test saveURI method
and currentState attribute of nsIWebBrowserPersist interface.
<br>nsIWebBrowserPersistTest2 test is used to test saveDocument method
of nsIWebBrowserPersist interface.
<br>nsIWebBrowserPersistTest3 test is used to test the attribute persistFlags
of nsIWebBrowserPersist interface.
<p>You can find the source code of test cases at
<br><a href="http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest1.txt">http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest1.txt</a>
<br><a href="http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest2.txt">http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest2.txt</a>
<br><a href="http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest3.txt">http://lxr.mozilla.org/seamonkey/source/embedding/qa/jstests/nsIWebBrowserPersistTest3.txt</a>
<p>To run the test cases directly open nsIWebBrowserPersistTest1 or nsIWebBrowserPersistTest2
or nsIWebBrowserPersistTest3 in Embedding test application.
<p>To run test cases from ngdriver follow the steps below:
<br>[Note: Right now you can run the tests on ngdriver only if you have
access to bubblegum server].
<br>1. Type the url <a href="http://bubblegum/ngdriver/tester.html">http://bubblegum/ngdriver/tester.html</a>
in Embedding test application url location.
<br>2. Replace suites/suite1 with suites/embedding and click on "Find Testcases
in:". You will see the refreshed window with test cases listed in the embedding
suite.
<br>3. Give a name for the test in the text box "Specify a NAME for this
test run:". Then select either nsIWebBrowserPersistTest1.html or nsIWebBrowserPersistTest2.html
or nsIWebBrowserPersistTest3.html&nbsp; and click on "Run Testcase". This
will run the test case and it will provide a link to the results file.
<br>4. Click on resultsfile.html to view the results.
<p><b>Features Tested:</b>
<br>Method: <b>saveURI()</b>
<p><i>Introduction:</i>
<br>Save the specified URI to file.
<br>The test case for this method is nsIWebBrowserPersistTest1.html.
<p><i>How to Use:</i>
<br>syntax: saveURI(in nsIURI aURI, in nsIInputStream aPostData, in nsILocalFile
aFile)
<p>You can change the url you want to save by changing the "url" variable
in nsIWebBrowserPersistTest1.html.
<br>eg: url = "http://www.mozilla.org";
<br>You can change the location you want to save the url to by changing
the "file" variable in nsIWebBrowserPersistTest1.html.
<br>eg: file = "c:\\test1.htm";
<p>nsIWebProgressListener is attached to nsIWebBrowserPersist object so
whenever saveURI method is invoked corresponding listener methods are called.
On the results page you can see the status listing. This listing is the
status displayed in the status bar when the save is happening.
<br>On the results page you can also see the progress, which is the currenttotalprogress
verses maxtotalprogress.
<br>&nbsp;
<table BORDER COLS=5 WIDTH="90%" >
<tr>
<td WIDTH="8%"><b>No:</b></td>

<td><b>Test</b></td>

<td><b>Description</b></td>

<td><b>Pass Criteria</b></td>

<td><b>Fail Criteria</b></td>
</tr>

<tr>
<td>1</td>

<td>Save the specified URI to file. (nsIWebBrowserPersistTest1.html).</td>

<td>This test case will save the url you specified into the local file
you specified.</td>

<td>If the url is saved into the local file then the test is passed.</td>

<td>If the url is not saved into the local file then the test is failed.</td>
</tr>
</table>

<p>Method: <b>saveDocument()</b>
<p><i>Introduction:</i>
<br>Save the specified DOM document to file and optionally all linked files
(eg.. images, CSS, JS &amp; subframes).
<br>The test case for this method is nsIWebBrowserPersistTest2.html.
<p><i>How to Use:</i>
<br>syntax: saveDocument(in nsIDOMDocument aDocument, in nsILocalFile aFile,
in nsILocalFile aDataPath)
<p>You can change the location you want to save the document to by changing
the "file" variable in nsIWebBrowserPersistTest2.html.
<br>eg: file = "c:\\test2.htm";
<br>You can change the location of the folder you want to save the document's
js file, images etc.. by changing the data variable in nsIWebBrowserPersistTest2.html.
<br>eg: data = "c:\\test2_data";
<p>nsIWebProgressListener is attached to nsIWebBrowserPersist object so
whenever saveDocument method is invoked corresponding listener methods
are called. On the results page you can see the status listing. This listing
is the status displayed in the status bar when the save is happening.
<br>On the results page you can also see the progress, which is the currenttotalprogress
verses maxtotalprogress.
<br>&nbsp;
<table BORDER COLS=5 WIDTH="90%" >
<tr>
<td WIDTH="8%"><b>No:</b></td>

<td><b>Test</b></td>

<td><b>Description</b></td>

<td><b>Pass Criteria</b></td>

<td><b>Fail Criteria</b></td>
</tr>

<tr>
<td>1</td>

<td>Save the specified Document to file. (nsIWebBrowserPersistTest2.html)</td>

<td>This test case will save the document you specified into the local
file you specified and it will save the js,images etc to the folder you
specified.</td>

<td>If the document is saved into the local file and if js,images etc are
saved into the specified folder then the test is passed.</td>

<td>If the document is not saved into the local file and if js,images etc
are not saved into the specified folder then the test is failed.</td>
</tr>
</table>

<p>Method: <b>cancelSave()</b>
<p><i>Introduction:</i>
<br>Cancels the current operation. The caller is responsible for cleaning
up partially written files or directories.
<p><i>How to Use:</i>
<br>syntax: cancelSave().
<p>You can insert a statement persist.cancelSave(); in the function saveURI()
after persist.saveURI(uri, null, localFile);
<br>When you run the test case you will see that either the uri is not
saved into the file or it is not saved properly since we cancelled it.
<p>Attribute: <b>curentState</b>
<p><i>Introduction:</i>
<br>Current State of the persister object.
<br>The test case for this attribute is nsIWebBrowserPersistTest1.html.
<p><i>How to Use:</i>
<br>syntax: readonly attribute unsigned long currentState;
<p>nsIWebProgressListener is attached to nsIWebBrowserPersist object so
whenever saveURI or saveDocument method is invoked corresponding listener
methods are called. The listener method at particular interest for attribute
currentState is&nbsp; <b>onStateChange(). </b>onStateChange() is called
whenever there is change in activity of saveURI or saveDocument. The currentState
can be either PERSIST_STATE_READY(persister is ready to save data) or&nbsp;
PERSIST_STATE_SAVING(persister is saving data) or PERSIST_STATE_FINISHED(persister
has finished saving data). The results are displayed on the results page.
<p>Attribute: <b>persistFlags</b>
<p><i>Introduction:</i>
<br>persistFlags is used to govern how data is fetched from the network.
<br>The test case for this attribute is nsIWebBrowserPersistTest3.html.
<p><i>How to Use:</i>
<br>syntax: attribute unsigned long persistFlags;
<p>The test case is almost same as for saveDocument method(nsIWebBrowserPersist2.html)
but the result is different.
<br>Note that our test page contains &lt;iframe id="frame1" width="100%"
height="480" src="http://www.mozilla.org/"/>
<br>You can also see that there is one extra statement before persist.saveDocument.
<br>persist.persistFlags = persist.PERSIST_FLAGS_IGNORE_IFRAMES;
<p>This will ignore IFRAME content. That means it will not save http://www.mozilla.org
content. So in the current testcase If c:\test3.htm exist physically and
If c:\test3_data exist physically and If c:\test3_data contains only testlib.js
then the Result is Pass.
<p><i><u>Test Plan last updated:</u></i>
<br><i><u>By Whom</u></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<i><u>Date</u></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<i><u>Comments</u></i>
<br>Dharma&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
10/03/01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Created.



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified October 24,  2001</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/quality/embed/plans/nsIWebBrowserPersistTestPlan.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
