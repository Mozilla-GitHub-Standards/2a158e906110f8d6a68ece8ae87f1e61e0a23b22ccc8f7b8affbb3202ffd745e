<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
    <title>GtkMozEmbed: Embedding Mozilla into Gtk Applications</title>

<link rel="up" href="./" title="Unix project page">
<link rel="section" href="#intro" title="Introduction">
<link rel="section" href="#function_reference" title="Function Reference">
<link rel="section" href="#signal_reference" title="Signal Reference">
<link rel="section" href="#faq" title="FAQ">
<link rel="section" href="#revisions" title="Revision Information">

  <script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">






  

<p class="crumbs"><em>You are here:</em> <a href="./">Unix project page</a> &gt; <strong>GtkMozEmbed: Embedding Mozilla into Gtk Applications</strong></p>

    <h1>GtkMozEmbed: Gtk Mozilla Embedding Widget</h1>

    <ul class="toc">
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#function_reference">Function Reference</a></li>
      <li><a href="#signal_reference">Signal Reference</a></li>
      <li><a href="#faq">FAQ</a></li>
      <li><a href="#revisions">Revision Information</a></li>
      <li><a href="http://lxr.mozilla.org/seamonkey/source/embedding/browser/gtk/src/gtkmozembed2.cpp">gtkmozembed2.cpp</a></li>
    </ul>

    <h2><a name="intro">Introduction</a></h2>
    
    <p>
      GtkMozEmbed is an easy-to-use widget that will
      allow you to embed a Mozilla browser window into your Gtk
      application.
    </p>

    <p>
      It's designed to be easy to use and uncomplicated to make the
      barrier for use as low as possible. This means that the
      functionality exposed should cover about 80% of uses. If you
      want to get at some of Mozilla's higher brain functions it means
      that you will have to write your own embedding widget.
    </p>

    <p>
      In a future revision ( post M16 ) I will make it possible to get
      at the underlying nsIWebBrowser implementation from the
      embedding widget. This will give people that need to be able to
      get to Mozilla's internal interfaces a way to do so.
    </p>

    <p>
      Additionally, using the Gtk Mozilla embedding widget means that
      you don't have any C++ dependencies in your code that does the
      embedding. This is important to some C luddites.
    </p>

    <p>
      Please send any questions/comments or corrections to Christopher Blizzard &lt;<a href="mailto:blizzard@mozilla.org">blizzard@mozilla.org</a>&gt;
    </p>

    <h2><a name="function_reference">Function Reference</a></h2>

    <p>
      gtkmozembed.h
    </p>

    <pre>
extern GtkType      gtk_moz_embed_get_type         (void);
extern GtkWidget   *<a href="#gtk_moz_embed_new">gtk_moz_embed_new</a>              (void);
extern void         <a href="#gtk_moz_embed_set_comp_path">gtk_moz_embed_set_comp_path</a>    (char *aPath);
extern void         <a href="#gtk_moz_embed_load_url">gtk_moz_embed_load_url</a>         (GtkMozEmbed *embed, const char *url);
extern void         <a href="#gtk_moz_embed_stop_load">gtk_moz_embed_stop_load</a>        (GtkMozEmbed *embed);
extern gboolean     <a href="#gtk_moz_embed_can_go_back">gtk_moz_embed_can_go_back</a>      (GtkMozEmbed *embed);
extern gboolean     <a href="#gtk_moz_embed_can_go_forward">gtk_moz_embed_can_go_forward</a>   (GtkMozEmbed *embed);
extern void         <a href="#gtk_moz_embed_go_back">gtk_moz_embed_go_back</a>          (GtkMozEmbed *embed);
extern void         <a href="#gtk_moz_embed_go_forward">gtk_moz_embed_go_forward</a>       (GtkMozEmbed *embed);
extern void         <a href="#gtk_moz_embed_render_data">gtk_moz_embed_render_data</a>      (GtkMozEmbed *embed, 
						    const char *data, guint32 len,
						    const char *base_uri, const char *mime_type);
extern void         <a href="#gtk_moz_embed_open_stream">gtk_moz_embed_open_stream</a>      (GtkMozEmbed *embed,
						    const char *base_uri, const char *mime_type);
extern void         <a href="#gtk_moz_embed_append_data">gtk_moz_embed_append_data</a>      (GtkMozEmbed *embed,
						    const char *data, guint32 len);
extern void         <a href="#gtk_moz_embed_close_stream">gtk_moz_embed_close_stream</a>     (GtkMozEmbed *embed);
extern char        *<a href="#gtk_moz_embed_get_link_message">gtk_moz_embed_get_link_message</a> (GtkMozEmbed *embed);
extern char        *<a href="#gtk_moz_embed_get_js_status">gtk_moz_embed_get_js_status</a>    (GtkMozEmbed *embed);
extern char        *<a href="#gtk_moz_embed_get_title">gtk_moz_embed_get_title</a>        (GtkMozEmbed *embed);
extern char        *<a href="#gtk_moz_embed_get_location">gtk_moz_embed_get_location</a>     (GtkMozEmbed *embed);
extern void         <a href="#gtk_moz_embed_reload">gtk_moz_embed_reload</a>           (GtkMozEmbed *embed, gint32 flags);
extern void         <a href="#gtk_moz_embed_set_chrome_mask">gtk_moz_embed_set_chrome_mask</a>  (GtkMozEmbed *embed, guint32 flags);
extern guint32      <a href="#gtk_moz_embed_get_chrome_mask">gtk_moz_embed_get_chrome_mask</a>  (GtkMozEmbed *embed);
    </pre>

    <p>
      gtkmozembed_internal.h
    </p>

    <pre>
extern void <a href="#gtk_moz_embed_get_nsIWebBrowser">gtk_moz_embed_get_nsIWebBrowser</a>  (GtkMozEmbed *embed, nsIWebBrowser **retval);
    </pre>
    
    <p>
      <b><a name="gtk_moz_embed_new">gtk_moz_embed_new</a></b>
    </p>
  
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    GtkWidget *
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function returns a new Gtk Mozilla embedding widget.
	    On failure it will return NULL.
	  </td>
	</tr>
      </table>
      
    <p>
      <b><a name="gtk_moz_embed_set_comp_path">gtk_moz_embed_set_comp_path</a></b>
    </p>

      <table border="1">
        <tr>
	  <td>
	    Arguments:
	  </td>
	  <td>
	    const char *aPath
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function must be called before the first widget is
	    created or XPCOM is initialized. It allows you to set the
	    path to the mozilla components.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_load_url">gtk_moz_embed_load_url</a></b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed<br>
	    const char *url
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function starts loading a url in the embedding
	    widget. All loads are asynchronous. The url argument
	    should be in the form of <tt>http://www.gnome.org</tt>.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_stop_load">gtk_moz_embed_stop_load</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will allow you to stop the load of a
	    document that is being loaded in the widget.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_can_go_back">gtk_moz_embed_can_go_back</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    gboolean
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will return whether or not you can go
	    backwards in the document's navigation history. It will
	    return TRUE if it can go backwards, FALSE if it can't.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_can_go_forward">gtk_moz_embed_can_go_forward</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    gboolean
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will return whether or not you can go
	    forwards in the document's navigation history. It will
	    return TRUE if it can go forwards, FALSE if it can't.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_go_back">gtk_moz_embed_go_back</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will go backwards one step in the document's navigation history.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_go_forward">gtk_moz_embed_go_forward</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will go forward one step in the document's
	    navigation history.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_render_data">gtk_moz_embed_render_data</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed<br> 
	    const char *data<br>
	    guint32 len<br>
	    const char *base_uri<br>
	    const char *mime_type<br>
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will allow you to take a chunk of random
	    data and render it into the document. You need to pass in
	    the data and the length of the data. The base_uri is used
	    to resolve internal references in the document and the
	    mime_type is used to determine how to render the document
	    internally.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_open_stream">gtk_moz_embed_open_stream</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed<br>
	    const char *base_uri<br>
	    const char *mime_type<br>
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function is used to start loading a document from an
	    external source into the embedding widget. You need to
	    pass in the base_uri for resolving internal links and and
	    the mime_type of the document.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_append_data">gtk_moz_embed_append_data</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed<br>
	    const char *data<br>
	    guint32 len
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function allows you to append data to an already
	    opened stream in the widget. You need to pass in the data
	    that you want to append to the document and its length.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_close_stream">gtk_moz_embed_close_stream</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function closes the stream that you have been using
	    to append data manually to the embedding widget.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_link_message">gtk_moz_embed_get_link_message</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    char *
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function returns the current link message of the
	    document if there is one. The string returned is new and
	    it's the caller's responsibility to free the string.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_js_status">gtk_moz_embed_get_js_status</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    char *
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function returns the js_status message if there is
	    one. The string returned is new and it is the caller's
	    responsibility to free the string.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_title">gtk_moz_embed_get_title</a></b>
    </p>
    
      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    char *
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will get the current title for a document.
	    The string returned is new and it is the caller's
	    responsibility to free the string.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_location">gtk_moz_embed_get_location</a></b>
    </p>

       <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    char *
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function will return the current location of the
	    document. This string is new and it is the caller's
	    responsibility to free the string.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_reload">gtk_moz_embed_reload</a></b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed<br>
	    gint32 flags
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function reloads the document. The flags argument
	    can be used to control the behaviour of the reload. The
	    flags argument can be one of the following values:
<pre>
       GTK_MOZ_EMBED_FLAG_RELOADNORMAL
       GTK_MOZ_EMBED_FLAG_RELOADBYPASSCACHE
       GTK_MOZ_EMBED_FLAG_RELOADBYPASSPROXY
       GTK_MOZ_EMBED_FLAG_RELOADBYPASSPROXYANDCACHE
</pre>

	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_set_chrome_mask">gtk_moz_embed_set_chrome_mask</a></b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	    guint32 flags
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function is used to set the chome mask for this
	    window. It can be the logical or of any of the following
	    values:
<pre>
       GTK_MOZ_EMBED_FLAG_DEFAULTCHROME
       GTK_MOZ_EMBED_FLAG_WINDOWBORDERSON
       GTK_MOZ_EMBED_FLAG_WINDOWCLOSEON
       GTK_MOZ_EMBED_FLAG_WINDOWRESIZEON
       GTK_MOZ_EMBED_FLAG_MENUBARON
       GTK_MOZ_EMBED_FLAG_TOOLBARON
       GTK_MOZ_EMBED_FLAG_LOCATIONBARON
       GTK_MOZ_EMBED_FLAG_STATUSBARON
       GTK_MOZ_EMBED_FLAG_PERSONALTOOLBARON
       GTK_MOZ_EMBED_FLAG_SCROLLBARSON
       GTK_MOZ_EMBED_FLAG_TITLEBARON
       GTK_MOZ_EMBED_FLAG_EXTRACHROMEON
       GTK_MOZ_EMBED_FLAG_WINDOWRAISED
       GTK_MOZ_EMBED_FLAG_WINDOWLOWERED
       GTK_MOZ_EMBED_FLAG_CENTERSCREEN
       GTK_MOZ_EMBED_FLAG_DEPENDENT
       GTK_MOZ_EMBED_FLAG_MODAL
       GTK_MOZ_EMBED_FLAG_OPENASDIALOG
       GTK_MOZ_EMBED_FLAG_OPENASCHROME
       GTK_MOZ_EMBED_FLAG_ALLCHROME
</pre>
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_chrome_mask">gtk_moz_embed_get_chrome_mask</a></b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Arguments: 
	  </td>
	  <td>
	    GtkMozEmbed *embed
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    guint32
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function gets the current chome mask for this window.
	    Please see the documentation for <tt><a
	    href="#gtk_moz_embed_set_chrome_mask">gtk_moz_embed_set_chrome_mask</a></tt>
	    for the value of the return mask.
	  </td>
	</tr>
      </table>

    <p>
      <b><a name="gtk_moz_embed_get_nsIWebBrowser">gtk_moz_embed_get_nsIWebBrowser</a></b>
    </p>

      <table border="1">
        <tr>
	  <td>
	  Arguments:
	  </td>
	  <td>
	    GtkMozEmbed *embed<br>
	    nsIWebBrowser **retval
	  </td>
	</tr>
	<tr>
	  <td>
	    Returns:
	  </td>
	  <td>
	    void
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This function allows you to get the underlying <a
	    href="http://lxr.mozilla.org/seamonkey/source/embedding/browser/webBrowser/nsIWebBrowser.idl">nsIWebBrowser</a>
	    for the widget. As all good XPCOM functions do, this
	    function will addref the nsIWebBrowser on return.
	  </td>
	</tr>
      </table>

<h2><a name="signal_reference">Signal Reference</a></h2>

    <p>
      <b>link_message</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void link_message_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when the link message changes.
	    This happens when the user moves the mouse over a link in
	    a web page. Please use <tt><a
	    href="#gtk_moz_embed_get_link_message">gtk_moz_embed_get_link_message</a></tt>
	    to get the actual value of the link message.
	  </td>
	</tr>
      </table>
    
    <p>
      <b>js_status</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void js_status_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when the JavaScript status message
	    changes. Please use <tt><a
	    href="#gtk_moz_embed_get_js_status">gtk_moz_embed_get_js_status</a></tt>
	    to get the actual value of the js status message.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>location</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void location_changed_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that the location of the
	    document has changed. Please use <tt><a
	    href="#gtk_moz_embed_get_location">gtk_moz_embed_get_location</a></tt>
	    to get the actual value of the location.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>title</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void title_changed_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that the title of a
	    document has changed. Please use the <tt><a
	    href="#gtk_moz_embed_get_title">gtk_moz_embed_get_title</a></tt>
	    call to get the actual value of the title.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>progress</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void progress_change_cb (GtkMozEmbed *embed, gint cur, gint max, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that there is a change in
	    the progress of loading a document.<br><br>

	    The <var>cur</var> value indicates how much of the document
	    has been downloaded.<br><br>
	    
	    The <var>max</var> value indicates the length of the
	    document. If the value of <var>max</var> is less than one
	    the full length of the document can not be determined.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>net_status <span style="color: red;">[ Depreciated - use net_state ]</span></b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void net_status_change_cb (GtkMozEmbed *embed, gint flags, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when there's a change in the status
	    of network loading. [ fill this in with info about the
	    flags. ]
	  </td>
	</tr>
      </table>

    <p>
      <b>net_state</b>
   </p>

     <table border="1">
       <tr>
         <td>
	   Function Prototype
	 </td>
	 <td>
	   <code class="command">void net_state_change_cb (GtkMozEmbed *embed, gint flags, guint status, gpointer data);</code>
	 </td>
       </tr>
       <tr>
         <td colspan="2">
	   This signal is emitted when there's a change in the state
	   of the loading of a document. [ fill this in with info
	   about the flags. ]
	 </td>
       </tr>
     </table>
      
    <p>
      <b>net_start</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="commande">void load_started_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that the load of a
	    document has been started.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>net_stop</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void load_finished_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that the loading of a
	    document has completed.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>new_window</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void new_window_cb (GtkMozEmbed *embed, GtkMozEmbed **retval, guint chromemask, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted any time that a new toplevel window
	    is requested by the document. This will happen in the
	    case of a <code>window.open()</code> in JavaScript.
	    Responding to this signal allows you to surround a new
	    toplevel window with your chrome.<br><br>

	    You should return the newly created GtkMozEmbed object via
	    the retval.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>visibility</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void visibility_cb (GtkMozEmbed *embed, gboolean visibility, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when the toplevel window in
	    question needs to be shown or hidden. If the
	    <tt>visibility</tt> argument is TRUE then the window
	    should be shown. If it's FALSE it should be hidden.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>destroy_browser</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">void destroy_brsr_cb (GtkMozEmbed *embed, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when the document as requested that
	    the toplevel window be closed. This will happen in the
	    case of a JavaScript <code>window.close()</code>.
	  </td>
	</tr>
      </table>
      
    <p>
      <b>open_uri</b>
    </p>

      <table border="1">
	<tr>
	  <td>
	    Function Prototype
	  </td>
	  <td>
	    <code class="command">gint open_uri_cb (GtkMozEmbed *embed, const char *uri, gpointer data);</code>
	  </td>
	</tr>
	<tr>
	  <td colspan="2">
	    This signal is emitted when the document tries to load a
	    new document, for example when someone clicks on a link in
	    a web page.  This signal gives the embedder the
	    opportunity to keep the new document from being loaded.
	    The <tt>uri</tt> argument is the uri that's going to be
	    loaded.<br><br>

	    If you return TRUE from this signal, the new document will
	    <b>NOT</b> be loaded.  If you return FALSE the new
	    document will be loaded.  This is somewhat non-intuitive.
	    Think of it as the Mozilla engine is asking if you want to
	    <i>interrupt</i> the loading of a new document.  By
	    returning TRUE you are saying &quot;don't load this
	    document.&quot;
	  </td>
	</tr>
      </table>

<h2><a name="faq">FAQ</a></h2>

    <ul>
      <li><a href="#native_scrollbars">How do I use the Gtk native
      scrollbars instead of the cheezy Mozilla one?</a></li>

      <li><a href="#catch_form">How do I catch the output of a form
      that I've created?</a></li>

      <li><a href="#catch_loads">Is there a way for me to catch the
      load of images and other resources in a document?</a></li>
    </ul>

    <p>
      <b><a name="native_scrollbars">How do I use the Gtk native scrollbars</a> instead of the cheezy Mozilla one?</b>
    </p>

    <p>
      The simple answer is you can't. Mozilla uses its own native
      scrollbars for reasons that have been well hashed out in other
      forums. There might be other answers for creating the look and
      feel of the gtk scrollbars coming down the road. Stay tuned.
    </p>

    <p>
      <b><a name="catch_form">How do I catch the output of a form</a> that I've created?</b>
    </p>

    <p>
      You can't do this yet. [ put bug # in here. ]
    </p>

    <p>
      <b>Is there a way for me to catch the load of images and other
      resources in a document?</b>
    </p>
    
    <p>
      This question is asked because you might be rendering some
      content where the images or other multimedia resources in a
      document might be taken from some other resource that Mozilla
      doesn't know how to get. The theory is that you want to be able
      to do this without writing an entire protocol handler and be
      able to get the data into the document handler for that media
      type via the embedding interface or some kind of callback.<br><br>

      Mozilla's architecture doesn't allow for this yet but there are
      bugs to be able to add this functionality. [ insert bug #s
      here. ]
    </p>
    
<h2><a name="revisions">Revision Information</a></h2>

    <h3>M17</h3>

    <p>
      The <tt>net_status</tt> flag has been replaced with the
      <tt>net_state</tt> signal with new flags. This is because of
      underlying changes in the progress listener in mozilla.
    </p>

    <p>
      A new function <a
      href="#gtk_moz_embed_set_comp_path"><tt>gtk_moz_embed_set_comp_path</tt></a>
      has been added.
    </p>

    <p>
      Added the <code class="filename">gtkmozembed_internal.h</code> header. This will
      allow you to get some mozilla specific data. It's seperated
      from gtkmozembed.h since it's nice to allow people to use the
      widget without all of the mozilla headers installed.
    </p>

    <p>
      A new function <a
      href="#gtk_moz_embed_get_nsIWebBrowser"><tt>gtk_moz_embed_get_nsIWebBrowser</tt></a>
      has been added.
    </p>
    
    <h3>M16</h3>

    <p>
      With M16 comes the first version of the embedding widget that
      can be used by non-heroic programmers.
    </p>

    <p>
      Since the last release the following functions have been added:
    </p>
    
    <ul>
      <li>
	Plays nice with gtk's focus system.</li>
      <li>
	Can interrupt url loading.</li>
      <li>
	Can go forward and back through a navigation set.</li>
      <li>
	Can render arbitrary data given a mime type and area of memory.</li>
      <li>
	Can stream data into the widget without having to have all of
	document in one place ( incremental loading. )</li>
    </ul>

    <p>
      The following signals have been added:
    </p>

    <ul>
      <li>
	<tt>link_message</tt>: Change in link message.</li>
      <li>
	<tt>js_status</tt>: Change in the JS status.</li>
      <li>
	<tt>location</tt>: The location of the document has changed.</li>
      <li>
	<tt>title</tt>: The title for the loaded document has changed.</li>
      <li>
	<tt>progress</tt>: Progress has been made loading data</li>
      <li>
	<tt>net_status</tt>: There has been a change in the network status while loading data.</li>
      <li>
	<tt>net_start</tt>: A document has started loading.</li>
      <li>
	<tt>net_stop</tt>: A document has finished loading.</li>
      <li>
	<tt>new_window</tt>: The document has requested creating a new toplevel window.</li>
      <li>
	<tt>visibility</tt>: The document has requested hiding or showing a toplevel window.</li>
      <li>
	<tt>destroy_browser</tt>: The document has requested that a toplevel window be destroyed.</li>
      <li>
	<tt>open_uri</tt>: The document has requested that a new document be loaded.</li>
    </ul>

    <p>
      Known problems:
    </p>

    <ul>
      <li>
	Assertion: <br>
	<tt>###!!! ASSERTION: GetShellWidget() fails: 'mIMEShellWidget', file ../../../../mozilla/widget/src/gtk/nsWidget.cpp, line 3273</tt><br>
	This is an assertion from the IM code in the widget code. It's caused by the assumption that the toplevel Mozilla window is always a toplevel window which it isn't in the embedding case.  It's harmless but annoying.  Should be fixed in the next release [insert bug #here]</li>
      <li>
	Before first document is loaded, area doesn't repaint with a solid color. [ insert bug #here ]</li>
    </ul>

    <h3>M15</h3>
    
    <p>
      First release of the embedding widget. Can't do much except
      load a url. It also doesn't play nice in Gtk's focus model and
      is pretty easy to crash.
    </p>

    <address class="author"><a href="mailto:blizzard@mozilla.org.com">Blizzard</a></address>
  

<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified November  9,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/unix/gtk-embedding.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
