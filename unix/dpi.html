<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Mozilla Font Size / DPI Issues on Unix</title>
<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">






<h1>
Mozilla DPI-related Font Size Issues on Unix
</h1>

<div class="section">
<h2>
Mozilla Fonts Overview
</h2>

<p>
A number of factors can cause fonts in
<dfn title="the whole Mozilla.org open source browser project, including Firefox &amp; Thunderbird">Mozilla</dfn>
to seem wrong. For web page text, you can choose your default sizes and styles
via the <acronym title="User Interface"> UI</acronym> preferences panel.
Typically, web page authors override some or all of your preferences via
<dfn title="Cascading Style Sheets (CSS for short) - styling kept separate from content">stylesheets</dfn>
and/or
<dfn title="styling attributes comingled with page content">presentational markup</dfn>.
Mozilla has a minimum text size preference and text zoom to help you
combat author styles that override your defaults. It is also possible to
override author overrides via <a href="#CSS">user stylesheets</a>.

</p><p>
Fonts can seem wrong in Mozilla's menus, tools and bookmarks too.
Doing something about it is the topic of this page.

</p></div>

<div class="section">
<h2>
<a name="sysdpi">How UI Fonts in Mozilla are Configured</a>
</h2>

<p>
Mozilla sets
<dfn title="This part of Mozilla is referred to by its developers as &quot;chrome&quot;."> UI fonts</dfn>
by querying the operating system's font subsystem for
<a href="http://www.w3.org/TR/CSS21/fonts.html#x6" class="ex-ref">CSS system fonts</a>.
In most environments, these are set in
<dfn title="One point is 1/72 of an inch, which makes 72 points per inch."> points</dfn>.
Point sized controls only display at the intended size if the system
<acronym title="Dots Per Inch"><code> DPI</code></acronym> is reasonably
configured.
</p>

<p class="note">
Since some web page authors size text in points, inappropriately
configured <code> DPI</code> also can adversely impact web page text sizes.
</p></div>

<div class="section">
<h2>
DPI Problem Solving
</h2>

<p>
Both points and <code> DPI</code> either too small or too big are
typically caused by a mismatch between your real display size and
the display size your X server thinks you have. So, if you don't like
Mozilla's UI font sizes, start to correct your problem by reconciling
the two sizes. Measure your display, and change whatever settings are
required to cause the X server to report and use the actual display size.
</p>

<p class="note">
<dfn title="GTK1 builds are intended for use on legacy Linux systems">GTK1</dfn>
Mozilla does not respond to DPI adjustments with corresponding changes in
UI fonts. Adjustments to GTK1 UI fonts must be made
via<code class="command" title="Gnome Control Center"> gnomecc </code>or
via <a href="#CSS"><cite>userChrome.css</cite></a>.
</p>

<p>
To find out what your X server thinks your <code> DPI</code> settings
are, run the program <code class="command">xdpyinfo</code>:
</p>

<pre>	$ xdpyinfo | grep dimensions
	$ xdpyinfo | grep resolution
</pre>
<p>
Note the dimensions in pixels and millimeters, and the resolution in
<code> DPI</code>. Compare to what you're actually using, but don't
confuse dots and pixels - a dot may or may not equal a pixel. If you have
KDE, <code class="command">kinfocenter's</code> X-Server section will
conveniently show the same information.
</p>
<div class="para">
<p>
For example, if you use a 17&quot; CRT display, your viewable screen
dimensions will be approximately 328 mm wide by 246 mm tall. This
actual size could traditionally be forced by adding:
</p> 
<pre>	DisplaySize	328	246</pre>
to
<pre>	Section &quot;Monitor&quot;</pre>
<p>
in <code class="filename"> /etc/X11/XF86Config</code> or
<code class="filename"> /etc/X11/xorg.conf</code>, as
applicable on your system. If you are running a <code> 1400 X 1050</code>
resolution with a <code> 328 mm X 246 mm</code> display, your system will
be running at an actual <code> 108 DPI</code>.  This change may
be sufficient to correct your problem. If it fails and you are running
Xorg 7.2 or newer, you may need to add:
</p>
<pre>	Option	"NoDDC"</pre>
to
<pre>	Section "Device"</pre>
<p>
for your graphics adapter in order for<code> DisplaySize</code> to work.
</p></div><p>
If the above change improves your system, but the result is less than 100%
to your satisfaction, you can tweak sizes up or down by making the
<code> DisplaySize</code> dimensions slightly larger or smaller than actual.

</p><p>
Unfortunately, variations in the implementations of X mean display size
reconciliation as above won't be a solution on every system. Failure here
seems to be common on newer systems using
<code title="fontconfig is also known as XFT"> fontconfig</code> instead
of legacy <code> xfs</code>.

</p><div class="para"><p>
<!--I haven't found all the possible places Xft.dpi might be set as of 5 October 2006 edit. FM-->
Systems using <code> fontconfig</code> provide an option for X and applications that
understand it to set <code> DPI</code> via the <code> Xft.dpi</code> variable. 
To find out if <code> Xft.dpi</code> has already been set, check by running
the program <code class="command"> xrdb -query</code>:
</p>

<pre>	$ xrdb -query | grep dpi
</pre>

<p>
The regular file
<code class="filename"> /etc/X11/Xresources</code> is one place this might be set, 
where you might find it present, but commented out. On systems with the directory
<code class="filename"> /etc/X11/Xresources</code>, <code> Xft.dpi</code> can be
set in <code class="filename"> ~/.Xresources</code>. Another location it can be set is
<code class="filename"> ~/.Xdefaults</code>. On such systems, adding to the applicable file:
</p>
<pre>	Xft.dpi: 108</pre>

<p>
or uncommenting an existing line would produce the same result as setting
<code> DisplaySize</code> produces for <code> xfs</code>.
On some systems, setting <code> DisplaySize</code>
first, and then setting <code> Xft.dpi</code> to match the reported
<code> DPI</code> is required for proper results.

</p></div><p>
As above, if this works, but at less than 100% satisfaction, tweak the
number lower or higher to suit your preference. If possible, use a number
that is a multiple of 6, or even 12, as numbers that aren't sometimes
result in annoying rounding errors that cause adjacent bitmap font sizes
to not increment and decrement linearly.

</p><p>
All Mozilla.org builds of Firefox and SeaMonkey, some of Mozilla, and
most builds of these products supplied by recent Linux distros, are built
using the <dfn title="Gnome Tool Kit, version 2">GTK2</dfn> toolkit. This
means that <code class="command">gnome-control-center</code> can be used
to explicitly set DPI to a desired value that these builds will share with
all other GTK2 apps.

</p><p>
Some users have found success in adjusting the X server's
<code> DPI</code> by doing one of the following:
</p>

<ol>
  <li>
    <b>Using the graphical login screen:</b> <br>
    
    <p>
In <code class="filename"> /etc/X11/xdm/Xservers</code>, change:
</p>
    <pre>	:0 local /usr/X11R6/bin/X</pre>
<p>
to:
</p>
    <pre>	:0 local /usr/X11R6/bin/X -dpi 100</pre>
<p>
You need to restart xdm for this to work:
    </p>

    <pre>	$ su - root
	# telinit 3
	# telinit 5</pre>
   </li>
<li>
      <b>Using Redhat and gdm:</b> <br>
<p>
In <code class="filename"> /etc/X11/gdm/gdm.conf</code>, change:
</p>
      <pre>	0=/usr/bin/X11/X</pre>
<p>
to:
</p>
      <pre>	0=/usr/bin/X11/X -dpi 100</pre>
<p>
You will need to restart gdm for this to work</p>
  </li>
<li>
      <b>In some Debian variants:</b> <br>
<p>
<!--Knoppix 4.0-->In <code class="filename"> /etc/init.d/xsession</code>,
<!--Xandros 3.02-->or <code class="filename"> /etc/kde3/kdm/Xservers</code>, change:
</p>
      <pre>	DPI="-dpi 75"</pre>
<p>
to include whatever DPI you wish to use instead of 75.
</p>
<p>
You will need to restart X for this to work</p>
  </li>
<li>
<p>
<b>Using startx from the command line:</b> <br>
</p>
    <pre>$ startx -- -dpi 100</pre>
</li>
</ol>

<p>
If none of the above or variations thereof work, as a last resort, you
can use the brute force method of forcing Mozilla to use a particular
<code> DPI</code> directly. Edit your user.js file and add:

<pre>	user_pref("layout.css.dpi", 108);</pre>

<p>You may change the <code> DPI</code> number to any resolution you
like.  Setting it to 0 will restore Mozilla's use of the X Server
<code> DPI</code>. Like prefs.js, user.js is a plain text file in your
profile directory. If it doesn't exist, create it with your choice of
text editor.

</p><div class="para"><p>
As an alternative to editing user.js, you can change
<code> layout.css.dpi</code> by entering
</p>
<pre>	about:config</pre>
<p>
in the urlbar, right clicking the current value, and changing it to
any number you like.

</p></div><p>
A third way to change Mozilla <code> DPI</code> by brute force in older
versions is via the preferences UI:
</p>
<pre>	Appearance	-&gt;	Fonts	-&gt;	Display resolution</pre>

<p><strong>
Changes to </strong><code> layout.css.dpi</code><em>
by any of the three methods above require a complete Mozilla restart
to take effect.</em></p>

<p>
Note that for cross-platform uniformity reasons, Mozilla by
default uses the greater of your system setting or 96. If you wish
Mozilla to use a<code> DPI</code> of less than 96, you must force it
to do so using<code> layout.css.dpi</code>, either automatically by supplying
the parameter 0, or by the<code> DPI</code> integer value you wish used.</p>

<!--p><strong>Note</strong> - The<code> DPI</code> preference for development builds of
Mozilla was changed from<code> browser.display.screen_resolution</code>
to<code> layout.css.dpi</code> February 28, 2006.
</p--></div>

<div class="section">
<h2>
<a name="build-type">Choosing Your Mozilla</a>
</h2>

<p>
Not all Mozilla builds are suitable for all systems. Legacy systems
use the <code> xfs</code> font service system exclusively. Standard
builds must be used on these systems for reasonable results. Newer
systems use the <code> fontconfig</code> font service system in
addition to <code> xfs</code>. You can use any Mozilla build on these
systems, but <code> xft</code> labeled builds should produce clearly
better results.

</p><div class="para"><p>
To find out which type of Mozilla build you are using, enter into
the urlbar:
</p>

<pre>	about:buildconfig</pre>

<p>Only builds intended for <code> fontconfig</code> systems will
show <code> --enable-xft</code> as a configure argument.

</p></div></div>

<div class="section">

<h2>
<a name="CSS">Customizing Fonts Via CSS</a>
</h2>

<p>
Finally, if you still can't get Mozilla's fonts just the way you
like them by changing <code> DPI</code>, you can customize them
directly using standard
<a href="http://www.w3.org/TR/CSS21/" class="ex-ref">CSS 2.1</a>, in
<cite>userChrome.css</cite> for the UI, and <cite>userContent.css</cite>
for web page text. How to do this is covered generally at
<a href="http://www.mozilla.org/unix/customizing.html#usercss">Customizing Mozilla</a>.

</p><p>
Using CSS, you can customize Mozilla fonts via methods that don't
depend on <code> DPI</code>. A few of the many possible UI CSS
selectors you might wish to try in <cite>userChrome.css</cite> include:
<ul>
<li>menu, menuitem (main menu items)
<li>statusbar
<li>.tabbrowser-tabs .tab-text
<li>toolbar (urlbar)
<li>.toolbarbutton-1 (nav button text in Modern theme)
<li>treechildren (mailnews folder & header panes; pref trees)
<li>.treecol-text (mailnews column headings)
</ul>

<p>Using <code> DOM Inspector</code> you can explore Mozilla's
application of CSS and find other selectors you might wish to
experiment with.
</p></div>

<div class="section">
<h2>
Help
</h2>

<p>Forums available for further help with Unix <code> DPI</code>
and fonts include:
</p>

<ul>
<li><a href="http://www.mozilla.org/community/developer-forums.html">Mozilla newsgroups</a>
<li>Moznet on IRC
<ul>
<li><a href="irc://moznet/#linux">Linux</a>
- discussion of using Mozilla in Linux
<li><a href="irc://moznet/#css">CSS</a>
- discusssion of CSS issues generally
</ul>
</ul>
</div>

<!--<div>Author: Felix Miata, December 2004</div>-->




<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified June 11,  2007</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/unix/dpi.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
