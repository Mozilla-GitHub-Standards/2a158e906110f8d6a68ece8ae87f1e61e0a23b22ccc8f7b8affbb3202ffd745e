<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

  <title>Mozilla Spam Filtering To-Do Scratchpad</title>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<h2>Mozilla Spam Filtering To-Do List<br>
</h2>
<br>
Recent items (2/18/2003)<br>
<ol>
  <li style="font-weight: bold;">improve logging</li>
  <li><span style="font-weight: bold;">can't choose existing junk mail
folder (imap, see esther's bug)</span><br>
  </li>
  <li>what will manual anaylsis do on messages already marked as junk
or not junk, or messages already analyzed?&nbsp; (won't the user expect
it to re-analyze, no matter what, even if the manually set it?&nbsp;
what will that mean for the training.dat file if the re-analysis
changes?)</li>
  <li>switch machines, using imap, see messages as "junk".&nbsp; what
if I try to train them?&nbsp; won't it leave the training.dat alone,
since the server thinks they are junk?</li>
  <li>write up short doc that tells users how to get best results<br>
  </li>
  <li>improve purge<br>
&nbsp; reword purge dialog, tell QA when it will purge (restart, 5
mins, and then every 12 hours)<br>
&nbsp; for purge, is it date header, or date received?<br>
&nbsp; purge is blocked during busy, but is busy blocked during purge
(same with compact)</li>
  <li style="font-weight: bold;">get msg&nbsp; / imap junk status goes
away error for imap (see esther's bug)</li>
  <li><span style="font-weight: bold;">twalker's problem on the mac</span><br>
  </li>
  <li>pop3 if last message is good, we fail to move bug</li>
  <li>add prefs to allow QA to test purge easier</li>
  <li>add prefs to allow QA to test spam (magic words in the subject)</li>
  <li>improve initial experience (see alecf's initial experience
suggestions)</li>
  <li>tools for QA to look at training.dat</li>
  <li>block images / remote content if we think it is junk</li>
  <li>option to have msgs that i manually mark as junk moved immediate
to the JM folder or deleted (see bug #xxxxxx)&nbsp; [see
http://www.mozilla.org/mailnews/specs/spam/images/Spam1d.gif]<br>
  </li>
  <li>follow move to junk folder pref when you manually analyze (see
bug #xxxxxx)</li>
  <li>[netscape specific] changes need for aol/webmail (UI issues, does
it work, no move, etc?)</li>
</ol>
<p>todo items<br>
</p>
<ol>
  <li><strike>fix the 5 (not 3) state problem</strike></li>
  <li><strike>fix the regression in tree.xml (varga might be able to
help).&nbsp; new columns (with no ordinal, like junkStatus will be for
users once we land)  should be on the far right, not the far
left.&nbsp; (you said it's on the  left for Mail.app, can you screen
shot?)&nbsp; we still want the regression  fixed.</strike></li>
  <li><strike>send everything through the view, fix the cycler issue
(http://bugzilla.mozilla.org/show_bug.cgi?id=169638#c87), &nbsp;make
the view a listener</strike></li>
  <li><strike>land bienvenu's IMAP patch</strike></li>
  <li>cmdRequiringMsgBody commands &amp;&amp; offline: how do we deal
with offline but no message body?  refuse to allow junk button use and
toggling? or queue up for going online?</li>
  <li><strike>some messages are left unclassified</strike></li>
  <li><strike>rename "analyze messages" to "run junk mail controls on
selected messages"; make localizable.</strike></li>
  <li><strike>since news support can wait, we should just stop showing
news accounts  in junkMail.xul.&nbsp; (it's a one liner to hide them,
but they junk status column will still show)</strike></li>
</ol>
for later:<br>
<ol>
  <li>filing in non-existant Junk Mail folder causes error message</li>
  <li>integrate with help</li>
  <li>infrastructure (non-spam-code) assertions get trigged by spam code</li>
  <li>don't allow the user to use move for news accounts (in
junkMail.js, use get the root folder from the incoming server, and
check rootFolder.canDeleteMessages)</li>
  <li>add code to classify incoming news messages</li>
  <li><strike>land new icons from gail</strike></li>
  <li>add junk icon to msg hdr area<br>
  </li>
  <li> serialize msgdbview classifications so that progress in   
classifications is obvious through the UI, and we get through all   
classification callbacks before calling EndBatch()</li>
  <li>fix cycler in search window</li>
  <li>make sure both new and existing profiles get the "non-junk" view</li>
  <li>initial size of junk dialog &amp; log dialog too big</li>
  <li>switch junkMail.xul back to &lt;dialog&gt; from &lt;window&gt;</li>
  <li>spam-status persistence via IMAP keywords/X-Mozilla-Status2?</li>
  <li>logging code issues:
    <ol>
      <li>localize it</li>
      <li>logging could be more informative</li>
      <li>merge junk &amp; filter logging code, (lots of duplicated
code)</li>
    </ol>
  </li>
  <li>refactor nsIMsgFilterList and nsISpamSettings to eliminate       
duplicated code</li>
  <li>allow whitelisting from multiple addressbooks</li>
  <li>improve algorithm for non US-ASCII users (talk to frank bob and
naoki)<br>
  </li>
</ol>
<br>
<hr> UI issues: <br>
now:
<ol>
  <li>classic skin work (bug 178566)</li>
  <li><strike>modern: threadpane JUNK &amp; UNKNOWN icons hard to
distinguish when 	selected</strike></li>
</ol>
later:
<ol>
  <li>should junk control window have icon for when iconified?</li>
  <li>revisit modality of log windows for this and filtering</li>
  <li>should "Next" button default to off in toolbar?</li>
  <li>do we need progress / status when doing bulk message "analyze" or
	bulk "marking"?  see also item 6 in dmose's later list</li>
  <li>should the junk icon column in the threadpane always default to  
on?  or only when the feature is enabled for the acct?</li>
  <li>add a "mark junk messages as read" option to the junk control   
dialog so you don't get distracted from work email by the junk   
folder going bold on you.?</li>
  <li>thread page / message pane context menus for analyze / mark?</li>
  <li>header pane icon for junk status (think how will we know from    
the stand alone msg window, or if thread pane is collapsed,        or
if junk column is hidden?)</li>
  <li>toggle the junk button toolbar text, based on selected messages?</li>
  <li>keep "Mark Selected..." Tools menu items?</li>
</ol>
<hr> bienvenu:<br>
<ol>
  <li>Stuck IMAP URL queue issues (related to unclassified messages)</li>
  <li><strike>AB whitelisting issues</strike></li>
</ol>
<hr width="100%" size="2">beard: just doing further validation<br>
beard: further work on international HTML messages<br>
beard: maybe trying out the other algorithms<br>
beard: I'm still concerned that my spam corpus isn't working correctly 
with mailnews, while it does work in my Java implementation.<br>
beard: looking into it<br>
beard: I want to compare the histograms<br>
<hr width="100%" size="2"><strike>will need to fork rules .dat to land
the mail view stuff</strike><br>
<hr width="100%" size="2">naving: the junk folder creation part has
changed<br>
naving: it is going to be driven from UI<br>
saspitzer: you mean, when I choose "Junk" on "Account", and hit ok,
that will create the folder?<br>
saspitzer: (and set the folder flags, I assume)<br>
naving: I don't if that is good UI design but yeah something like that<br>
saspitzer: will the back end still create the folder on they fly if it
doesn't exist?<br>
saspitzer: I mean, what if I remove the folder.<br>
saspitzer: or are we going to make it so you can't remove the junk mail
folder?<br>
naving: backend will not do anything special, we were creating folder
on filter move but that idea has been crunched<br>
naving: if it is there then we are going to move it<br>
saspitzer: what is "on filter move"?<br>
naving: I mean just like any other filter move<br>
naving: filter: movetofolder action<br>
naving: we were creating folder prior to moving messages when playing
back filter moves<br>
naving: for junk folder<br>
saspitzer: ok, so we can create the folder from the UI, but we might
want to add code (to david's patch that moves messages) to also create
a folder lazily, but that will take some <br>
work, as folder creation (at least for imap) is asynch.<br>
saspitzer: we (you me david) should talk about this more later.<br>
saspitzer: I got a question for you<br>
naving: shoot<br>
saspitzer: actually, never mind.<br>
naving: so you want me to do the new UI folder creation part<br>
saspitzer: no, we'll conflict.<br>
saspitzer: I've got a mess of changes.<br>
naving: ok, then you do it<br>
naving: you may have to set the folder junk flag at the right place in
backend if we are <br>
going to have a special icon/order for junk folder. I can help w/ you
that. I have a patch for that.<br>
<hr width="100%" size="2">nhotta, ducarroz, beard, bienvenu: mime is
stripping   out tokens, converting html. affects our effectiveness.<br>
<hr width="100%" size="2"><strike>beard: by the way, training a folder
at a time is too slow<br>
beard: I rewrote mine to send all the messages in at once, instead of 
on the callback, and it sped it up considerably<br>
beard: it only blocks while sending in the URLs to the messages.</strike><br>
<hr width="100%" size="2"><strike>bienvenu: get this working for pop3</strike><br>
<hr width="100%" size="2"><strike>bienvenu: make sure that we use the
disk/memory   cache when the filter plugin runs, to avoid multiple msg
fetches</strike><br>
<br>
related:<br>
dmose: i already talked with bienvenu about work that needs to happen
to optimize imap<br>
dmose: so that we don't download all the mime parts<br>
dmose: i'm still waiting for some more feedback from him, but he's busy
 at the moment :-)<br>
<hr width="100%" size="2"><span style="text-decoration: line-through;">bienvenu:
move filter plugin comptr from folder  to server</span><br>
<hr width="100%" size="2">bienvenu: oh, I'm only spam filtering pop on
get   new mail, not when you open any local folder<br>
bienvenu: that's probably an issue<br>
bienvenu: for imap, just new mail, which is newly downloaded unread mail<br>
bienvenu: for pop, it's just new mail from your pop server<br>
bienvenu: so, if we run the spam filter on new msgs in other local
folders,   they'll pick up the spam<br>
bienvenu: we do that for imap now<br>
bienvenu: for local, we aren't doing it on new messages<br>
bienvenu: like we are for imap.<br>
bienvenu: and I think we should<br>
<hr width="100%" size="2">bienvenu: hey, is the spam flag supposed to
get   set on the spam folder?<br>
saspitzer: it is, but I haven't done it yet.<br>
bienvenu: we need to set it during folder discovery, I think.<br>
bienvenu: like we do for the sent folder<br>
bienvenu: and other folders that are set in prefs.js<br>
saspitzer: what if we create it on the fly?<br>
saspitzer: or does that go through folder discovery as well?<br>
bienvenu: then we set it then as well (I think...)
<hr width="100%" size="2"><span style="text-decoration: line-through;">naving
/ david: purge related crash on shutdown,
(http://bugzilla.mozilla.org/show_bug.cgi?id=173545)</span><br>
<hr width="100%" size="2">bienvenu: we should get the msg body before
we   run the spam filter. <br>
<hr width="100%" size="2">bienvenu: Also, we need to make it so we
don't   fetch the whole message body, if possible<br>
bienvenu: I don't think JF's code does that - he just only emits the
interesting  things to beard<br>
<hr width="100%" size="2">bienvenu: if the folder in question is
configured   for offline use, downloading <br>
bienvenu: the msg body for the spam filter should also put the message 
in the offline store<br>
<hr width="100%" size="2">bienvenu:<br>
<br>
The mozilla implementation currently filters messages that have been <br>
filtered by other mail filters (at least for imap). We may want to <br>
reconsider, but for me, it's very useful, because I filter messages <br>
addressed to me into a folder, and I get a lot of spam addressed to me,<br>
which makes the secondary spam filtering very useful. <br>
<hr width="100%" size="2">bienvenu: if the user has the inbox
configured   to automatically download message bodies (for offline),
use those bodies<br>
<hr width="100%" size="2">dmose: so the JS stuff has been dropped
entirely   in favor of C++?<br>
dmose: should probably just CVS remove it<br>
saspitzer: beard is still using it for reference, so might want ot
check   with him.<br>
<hr width="100%" size="2">dmose: why did the iface change from having
separate   header/body calls to a single call for filtering a message?<br>
dmose: what happened to the idea of using a score?<br>
<hr width="100%" size="2">beard: tools to create / dump binary token dbs<br>
<hr width="100%" size="2">beard / sspitzer:  ship with default good /
bad  dbs?<br>
<hr width="100%" size="2"><strike>sspitzer: spam addition to
mailViews.dat for non junk
(http://bugscape.mcom.com/show_bug.cgi?id=20458) FIX IN HAND</strike><br>
<hr width="100%" size="2"><strike>sspitzer: getting the patch ready to
turn it all   on.</strike><br>
<hr width="100%" size="2"><strike>gail: icons </strike><strike>(temporary
icons checked)</strike><br>
<hr width="100%" size="2">
<pre>2.   Right now, analyze doesn't heed your spam settings. Should it?<br>

If this menu item is available even if they haven't enabled JM controls
(i like this idea better, user doesn't have to enable jm controls but
can still use them manually as desired), then:

a. if they Have enabled jm controls and picked settings,
we should obey them.

b. if they have Not enabled jm controls, we should just identify junk
and potential junk msgs in the thread pane using /the jm column. JM
column appears and displays status.
</pre>
<hr width="100%" size="2">ducarroz: completed mime stuff, consulting if
needed <br>
peterv: consulting ifneeded<br>
help / docs: (ian / robinf?)<br>
<br>
<br>
<br>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified February 20,  2003</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/mailnews/spamtodo.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
