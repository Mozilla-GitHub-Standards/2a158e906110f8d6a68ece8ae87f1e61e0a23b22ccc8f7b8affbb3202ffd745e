<HTML>
<!--This file created 5/23/01 3:20 PM by Claris Home Page version 3.0-->
<HEAD>
   <TITLE>CodeName</TITLE>
   <META NAME=GENERATOR CONTENT="Claris Home Page 3.0">
   <X-CLARIS-WINDOW TOP=42 BOTTOM=757 LEFT=4 RIGHT=534>
   <X-CLARIS-TAGVIEW MODE=minimal>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><meta name="ProgId" content="FrontPage.Editor.Document">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<P><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=2 WIDTH="100%">
   <TR>
      <TD VALIGN=bottom>
         <P>CodeName/Mozilla: Mail:&nbsp;</P>
      </TD>
      <TD VALIGN=bottom>
         <P><div align="right"> <FONT SIZE="+1">UI
         Specification</FONT> </div></P>
      </TD>
   </TR>
   <TR BGCOLOR="#66CCCC">
      <TD>
         <P><FONT SIZE="+3"><B>Off-line Usage - Mail and
         News</B></FONT></P>
      </TD>
      <TD>
         <P><div align="right"> <FONT SIZE="-1"><B><I>Last
         Modification:<SCRIPT LANGUAGE=JavaScript>document.write(document.lastModified);</SCRIPT></I></B></FONT>
</div></P>
      </TD>
   </TR>
</TABLE>
 <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0 WIDTH="100%">
   <TR>
      <TD VALIGN=top WIDTH="49%">
         <P><B>Author:</B> <A HREF="mailto:jglick@netscape.com">Jennifer
         Glick</A><BR>
         <B>Creation Date:</B> 16 January 2001&nbsp;</P>
      </TD>
      <TD VALIGN=top>
         <P><B>Status:</B> Draft</P>
      </TD>
   </TR>
   <TR>
      <TD VALIGN=top WIDTH="49%">
         <P><B>Quicklinks:</B></P>
         
         <P>&nbsp;&nbsp;&nbsp;&nbsp; <A HREF="#Details"><FONT SIZE="-1">Design
         Details</FONT></A></P>
         
         <P><FONT SIZE="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Central"><FONT SIZE="-1">Account
         Central</FONT></A><FONT SIZE="-1"><BR>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#AcctSettings"><FONT SIZE="-1">Account
         Settings</FONT></A><FONT SIZE="-1"><BR>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Prefs"><FONT SIZE="-1">Global
         Preferences</FONT></A><FONT SIZE="-1"><BR>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Download"><FONT SIZE="-1">Download and Sync
         Dialog</FONT></A><FONT SIZE="-1"><BR>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Select"><FONT SIZE="-1">Select Items
         Dialog</FONT></A><FONT SIZE="-1"><BR>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Property"><FONT SIZE="-1">Property
         Dialogs<BR>
         </FONT></A><FONT SIZE="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         </FONT><A HREF="#Menu"><FONT SIZE="-1">Disabled Menu
         Items</FONT></A></P>
      </TD>
      <TD VALIGN=top>
         <P><B>Feature Team</B></P>
         
         <CENTER><TABLE BORDER=1 CELLSPACING=0 CELLPADDING=0>
            <TR>
               <TD VALIGN=top>
                  <P><FONT SIZE="-1">Engineering:</FONT></P>
               </TD>
               <TD>
                  <P><FONT SIZE="-1">Scott Putterman, David
                  Bienvenu&nbsp;</FONT></P>
               </TD>
            </TR>
            <TR>
               <TD>
                  <P><FONT SIZE="-1">Marketing:</FONT></P>
               </TD>
               <TD>
                  <P><FONT SIZE="-1">Kevin Murray&nbsp;</FONT></P>
               </TD>
            </TR>
            <TR>
               <TD>
                  <P><FONT SIZE="-1">UE</FONT></P>
               </TD>
               <TD>
                  <P><FONT SIZE="-1">Jennifer Glick</FONT></P>
               </TD>
            </TR>
            <TR>
               <TD>
                  <P><FONT SIZE="-1">QA</FONT></P>
               </TD>
               <TD>
                  <P><FONT SIZE="-1">Laurel Carlson, Hong
                  Kwong</FONT></P>
               </TD>
            </TR>
            <TR>
               <TD>
                  <P><FONT SIZE="-1">Docs</FONT></P>
               </TD>
               <TD>
                  <P><FONT SIZE="-1">Robin Foster Clark</FONT></P>
               </TD>
            </TR>
            <TR>
               <TD>
                  <P></P>
               </TD>
               <TD>
                  <P></P>
               </TD>
            </TR>
         </TABLE>
         </CENTER>
         
         <P><B><BR>
         Please post all comments and suggestions regarding this spec
         to the newsgroup, netscape.public.mozilla.mail-news</B>.</P>
      </TD>
   </TR>
</TABLE>
</P>

<P>&nbsp;</P>

<H1>Related Bugs</H1>

<OL>
   <LI>&nbsp;</LI>
</OL>

<P>&nbsp;</P>

<H1>Open Issues</H1>

<OL>
   <LI>Cmd | Ctrl&#93; clicking the indicator will bring up the
   Download and Sync dialog.</LI>
   
   <LI>Ben Bucksch - Download should not be modal, but
   asyncronous.</LI>
   
   <LI>Ben Bucksch - Note that when a folder has children, that
   folder can also contain messages. That's wrong for UW-IMAP. You
   shouldn't be able to select 'folder-only folders'.</LI>
   
   <LI>Matthew Thomas - The abbreviation "sync" should not be used
   anywhere in the UI; "synchronize" should be used instead. See
   "abbreviations" in the Windows UI guidelines. (Note: Simone from
   tech pubs was the one who recommended sync).</LI>
   
   <LI>Matthew Thomas -&nbsp; There is only need for one menu item,
   `Go {Online|Offline}'; a submenu is not necessary.
   
   <OL>
      <LI>"Download/Sync Now ..." is unnecessary, as you should be
      asked whether you want to synchronize when you go online or
      offline. This would replace the individual dialogs about
      sending unsent messages and downloading unread messages.</LI>
      
      <LI>"Offline Settings' is available from the Account Manager,
      and anyone savvy enough to use offline mode at all will know
      where to find it.</LI>
      
      <LI>"Get Selected Messages' and `Get Flagged Messages' should
      not be in the submenu, they should be in the Synchronize
      dialog. I might want to simultaneously download all messages in
      groups I had specified, along with flagged messages in all the
      other groups, for example.<BR>
      </LI>
   </OL>
   </LI>
   
   <LI>&nbsp;</LI>
</OL>

<P>&nbsp;</P>

<P>

<HR SIZE=4 WIDTH="60%" ALIGN=left color="#000000">

</P>

<H1>Summary</H1>

<P>The offline feature allows users to download their IMAP mail and
news messages to their local computer so that they can disconnect
from the server and still be able to read and compose messages. Once
the user has reconnected with the server, any actions they performed
while offline, such as composing messages or deleting messages, can
be&nbsp; synchronized with the server.&nbsp;&nbsp;<BR>
&nbsp;</P>

<P>Users need to be able to do the following:</P>

<OL>
   <LI>Set up Mail folders and Newsgroups that they would like
   downloaded locally before going offline.</LI>
   
   <LI>Toggle between online and offline mode.</LI>
   
   <LI>Modify preferences for offline behavior.</LI>
   
   <LI>Select and flag messages for retrieval.</LI>
   
   <LI>Download flagged and selected messages.</LI>
   
   <LI>Provide a preference that is a global default for when to
   download messages</LI>
</OL>

<H3>Typical Users</H3>

<P>The following is a description of the users who will benefit from
offline capabilities and their general needs from the interface.</P>

<P><B>Mobile User</B> - Generally on fast-connection, disconnected
temporarily from the network. Needs to switch on the fly,
auto-detection is helpful.</P>

<P><B>Dialup User</B> - Generally works off-line, connecting
periodically to do batch operations. Generally needs way to specify
when to connect and when to terminate.</P>

<P>&nbsp;</P>

<P>

<HR SIZE=4 WIDTH="60%" ALIGN=left color="#000000">

</P>

<H1><A NAME=Details></A>Design Details</H1>

<H2>1. File Menu</H2>

<BLOCKQUOTE>&nbsp; <TABLE BORDER=1>
      <TR>
         <TH>
            <P>File</P>
         </TH>
         <TH>
            <P>Offline Actions</P>
         </TH>
      </TR>
      <TR BGCOLOR="#CCCCCC">
         <TD>
            <P>Offline ---&gt;</P>
         </TD>
         <TD>
            <P>Work Offline | Work Online&nbsp;
            
            <HR>
            
            Download/Sync Now...<BR>
            Offline Settings
            
            <HR>
            
            Get Selected Messages<BR>
            Get Flagged Messages</P>
         </TD>
      </TR>
   </TABLE>
</BLOCKQUOTE>

<P><B>Work Offline</B> is available when the user is in online mode.
Selecting this menu item changes the state of the program and
prevents network connections from occurring.</P>

<P><B>Work Online</B> is available when a user is offline. Selecting
this item will cause the program to switch into online mode and do a
Synchronization of all queued actions. It will not download new mail,
or news. The user must do this manually using the "Download and Sync"
dialog.</P>

<P><B>Download/Sync Now...</B> brings up the "Download and Sync"
dialog. This item is always available, whether online or offline.</P>

<P><B>Offline Settings - </B>Opens the "Account Settings - Offline
and Disk Space" panel for the account with focus. Disabled if the
item with focus does not have offline functionality.&nbsp;</P>

<P><B>Get &#91;Selected | Flagged&#93; Messages</B> downloads the
selected / flagged items. These items are only available in the Mail
component and only when online. A progress dialog should be displayed
while this action is being performed (as feedback so the user knows
the action was performed).&nbsp; Note: the parent folder or account
of a selected/flagged message does not need to be selected for
offline usage for this feature to work.</P>

<H2>&nbsp;</H2>

<P>

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2>2. Offline/Online Icon</H2>

<P>Each main component (Browser, Mail/News, Address Book, Composer
and Instant Messenger) has the online/offline indicator icon in the
lower left corner. Clicking the online/offline icon toggles the
online/offline state of the program.</P>

<P>&#91;Cmd | Ctrl&#93; clicking the indicator will bring up the
Download and Sync dialog (<I>not currently implemented</I>).</P>

<P>There is a context menu associated with the online/offline icon
which is identical to the Offline submenu of the File menu (<I>not
currently implemented</I>)..</P>

<P>ToolTip when hovering over the icon - "You are offline/online.
Click icon to work online/offline."<BR>
&nbsp;</P>

<H3>&nbsp;</H3>

<P>

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2>3. Reading Non-Cached Messages</H2>

<P>When a user selects a message in the thread-pane that is not
cached for offline reading, then the following text will appear in
the thread pane:</P>

<BLOCKQUOTE>"This message has not been downloaded from the server for
   reading offline. To read this message, you must reconnect to the
   network, choose Offline from the File menu and then select Work
   Online.
   
   <P>In the future, you can select which messages or folders to read
   offline. To do this, choose Offline from the File menu and then
   select Download/Sync Now... . You can adjust theOffline and Disk
   Space preference to prevent the downloading of large messages.
   From the Edit menu, choose Mail/News Account Settings, and then
   choose Offline and Disk Space."&nbsp; <B><I>Or the whole&nbsp;
   paragraph could be replaced by a link reading "Open my offline
   settings for {accountName}".</I></B></P>
   
   <H3>&nbsp;</H3></BLOCKQUOTE>

<P>

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2>4. Thread Pane</H2>

<P>Messages that have been downloaded locally for offline use will
show up in the thread pane with a different icon (<I>not currently
implemented</I>).&nbsp;</P>

<P>&nbsp;</P>

<P>

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Central></A>5. Account Central</H2>

<P>Clicking on "Offline settings" from the Account Central page opens
the "Mail/News Account Settings: Offline and Disk Space" panel for
the selected account.&nbsp; "Offline settings" on the Account Central
page is only available for IMAP and News accounts.</P>

<P><IMG SRC="images/AcctLev1.gif" WIDTH=697 HEIGHT=550 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;</P>

<P>

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=AcctSettings></A>6. Account Settings</H2>

<H3>Offline &amp; Disk Space - IMAP</H3>

<P><IMG SRC="images/AcctOffImap1.gif" WIDTH=620 HEIGHT=470 BORDER=0 ALIGN=bottom></P>

<P>"Make the messages in my Inbox available when I am working
offline" - Enabling this checkbox will cause the Inbox messages to be
downloaded locally. The Inbox is not flagged as an offline folder.
Users would still need to use the "Select Items for Offline Usage"
dialog to select other account folders for offline use. When new
messages are retrieved (automatically with biff or the "Get Msg"
button, the Inbox messages are synched.</P>

<H3>&nbsp;</H3>

<H3>Disk Space - POP</H3>

<P><IMG SRC="images/AcctOffPop1.gif" WIDTH=620 HEIGHT=470 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;</P>

<H3>Offline &amp; Disk Space - News</H3>

<H3><IMG SRC="images/AcctOffNews1.gif" WIDTH=620 HEIGHT=470 BORDER=0 ALIGN=bottom></H3>

<P>&nbsp;</P>

<P>&nbsp;

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Prefs></A>7. Global Preferences</H2>

<H3>Offline and Disk Space</H3>

<P><IMG SRC="images/PrefOff1.gif" WIDTH=562 HEIGHT=462 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;</P>

<H4>Startup State</H4>

<P>There are two preferences users' can choose from which effect the
default state of the system on launch. These choices are:</P>

<UL>
   <LI>"Remember my online/offline previous mode" -&nbsp;product
   starts up in the same mode as when the user quit.</LI>
   
   <LI>"Ask me at startup" - the user is presented with a dialog at
   startup.&nbsp; The dialog defaults reflect the setting last used
   in the product. The "Set as default" checkbox allows the user to
   change the global preference so they don't need to go into the
   preferences dialog when they get annoyed with the Ask Me
   option.</LI>
</UL>

<P><I>Multiple User Profiles </I>: Offline global preferences are per
profile. When &gt;1 multi-user profiles are set, and the ask me
preference is chosen, the ask me dialog will come up after the
profile picker is dismissed (that's when we know what prefs are
set).&nbsp;</P>

<H3>&nbsp;</H3>

<H4>When Going Online</H4>

<P>When going online and there are unsent messages and the user has
selected "Ask me if I want to send my unsent messages" (default), we
will prompt the user to send the unsent mail.&nbsp;</P>

<UL>
   <LI>Send - Goes online and sends unsent messages. This is the
   default button.</LI>
   
   <LI>Don't Send - Goes online, but does not send the unsent
   messages</LI>
   
   <LI>Cancel - does not go online and does not sent the unsent
   messages</LI>
   
   <LI>Always ask me when I go online - when unchecked will change
   the preference to "no" from "ask me".</LI>
</UL>

<P><IMG SRC="images/SendUnsent.gif" WIDTH=342 HEIGHT=165 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;</P>

<H4>When Going Offline</H4>

<P>When going offline, and at least one account has been enabled for
offline use, and the user has selected "Ask me if I want to download
messages for offline" (default), we will prompt the user to download
messages.&nbsp;</P>

<UL>
   <LI>Download - Downloads messages configured for offline and then
   goes offline. This is the default button</LI>
   
   <LI>Don't Download - Goes offline, but does not download
   messages</LI>
   
   <LI>Cancel - does not go offline and does not download
   messages</LI>
   
   <LI>Always ask me when I got offline - when unchecked, changes the
   preference to "no" from "ask me".</LI>
</UL>

<P><IMG SRC="images/GoOffline.gif" WIDTH=342 HEIGHT=165 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Download></A>8. Download and Sync Dialog</H2>

<P>The Download and Sync dialog is opened from the File -&gt; Offline
-&gt; Download/Sync Now menu item. This dialog is used to select
which types of information to download and synchronize: Mail Folders
and/or Newsgroups. A Select button provides the user with a list of
accounts, folders and newsgroups to select for
download/synchronization. The user can also decide to Go Offline when
sync/download is complete..&nbsp;</P>

<P>If no items are configured for download, the mail and/or newsgroup
options are disabled.</P>

<P>Pressing <B>OK</B> will dismiss the dialog and display the
Synchronize Status progress dialog.</P>

<P>If the <B>Work Offline</B> checkbox is checked when OK is pressed,
then after synchronization, Netscape/Mozilla will be left in Offline
mode.</P>

<P>POP users will not see Mail messages as one of their choices; they
will only see Newsgroup messages.</P>

<P>Pressing the <B>Select...</B> button brings up the offline picker
dialog for choosing individual accounts, folders and newsgroups.</P>

<P><IMG SRC="images/Synch1.gif" WIDTH=390 HEIGHT=298 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Select></A>9. Select Items Dialog</H2>

<P>The "Select" button opens the "Select Items for Offline Usage"
modal dialog.&nbsp; This dialog enables users to choose which IMAP
mail accounts/folders and/or newsgroups to download.&nbsp;</P>

<P>The list of components is presented as a hierarchical list of
objects which can be expanded and collapsed to show their children.
To the left of each selectable item (accounts, folders, newsgroups)
is a checkbox which the user can check to download items for that
item.</P>

<P>Note that when a folder has children, that folder can also contain
messages. Checking a parent folder does not automatically select the
children of the folder for synchronization.</P>

<P>An account can be selected. If an account is selected, all its
children are also selected. A disabled checkbox appears for each of
the children if the account is selected.</P>

<P>Selection : Selection is indicated by a highlight of the whole
line. To select/deselect an item, the user can&nbsp; click on the
check column or double click on the line.</P>

<P><IMG SRC="images/Select1.gif" WIDTH=390 HEIGHT=390 BORDER=0 ALIGN=bottom></P>

<P>Note: AOL accounts (Netscape only) do not show up in this
list.</P>

<P>&nbsp;</P>

<H3>Synchronize Status</H3>

<P><IMG SRC="images/Progress.gif" WIDTH=300 HEIGHT=162 BORDER=0 ALIGN=bottom></P>

<P>A progress window, modal to Mail, is open during the synch and
represents the total number of items remaining to process. Above the
indicator, the current server, folder name (or group name) and the
number of messages (or articles) remaining is displayed. There is a
Cancel button that will cancel the operation from the current folder
on (including the current folder), but not for any previous
synchronize actions.</P>

<P>&nbsp;</P>

<H3>"Get Msg" when offline</H3>

<P>If the user selects the "Get Msg" button while offline, the
following dialog is displayed.</P>

<P><IMG SRC="images/GetMsgs.gif" WIDTH=343 HEIGHT=133 BORDER=0 ALIGN=bottom></P>

<P>&nbsp;

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Property></A>9. Property Dialogs</H2>

<H3>Mail Folder</H3>

<P>The Folder Properties dialog is displayed when a mail folder has
focus and "Folder Properties" is selected.</P>

<P>If the user selects "Select this folder for offline use" this
folder is marked for offline usage (and appears checked in the
"Select Items" dialog as well).</P>

<P><IMG SRC="images/PropMail1.gif" WIDTH=628 HEIGHT=240 BORDER=0 ALIGN=bottom></P>

<P>(Note: wording not yet agreed upon)</P>

<H3>&nbsp;</H3>

<H3>Newsgroup</H3>

<P>The Newsgroup Properties dialog is displayed when a newsgroup has
focus and "Newsgroup Properties" is selected.</P>

<P>If the user selects "Select this newsgroup for offline use",&nbsp;
this newsgroup is marked for offline usage (and appears checked in
the "Select Items" dialog as well).</P>

<P><IMG SRC="images/PropNews1.gif" WIDTH=700 HEIGHT=250 BORDER=0 ALIGN=bottom></P>

<P>"Use the defaults from account settings - &lt;accountname&gt;" is
checked by default, and its sub widgets are disabled.
<FONT COLOR="#FF0000">Robin - should it be "...Account Settings..."
or "account settings..."?</FONT></P>

<P>&nbsp;

<HR WIDTH="60%" ALIGN=left color="#000000">

</P>

<H2><A NAME=Menu></A>10. Menu Items Disabled when Offline</H2>

<P>Mail</P>

<UL>
   <LI>File -- "New Folder" and "Rename Folder"</LI>
   
   <LI>File -- "Compact This Folder" and "Compact Folders"</LI>
   
   <LI>Edit -- "Delete Folder"</LI>
</UL>

<P>Address Book</P>

<UL>
   <LI>Sync</LI>
</UL>

<P>&nbsp;</P>

<P>

<HR SIZE=4 WIDTH="60%" ALIGN=left color="#000000">

</P>

<H1>Ideas for the Future</H1>

<OL>
   <LI>Detection of online/offline state</LI>
   
   <LI>Folders and newsgroups marked for offline should be visually
   distinct to the user.</LI>
   
   <LI>Offline Wizard</LI>
   
   <LI>&nbsp;</LI>
</OL>

<P>&nbsp;</P>

<P>

<HR SIZE=4 WIDTH="60%" ALIGN=left color="#000000">

</P>

<H1>Issues</H1>

<OL>
   <LI>Offline affects IMAP mail accounts, including AOL and Netscape
   WebMail, and news accounts.</LI>
   
   <LI>Multiple IMAP accounts can be configured for offline.</LI>
   
   <LI>Synch is modal.&nbsp; A dialog is shown to users during
   synch.</LI>
   
   <LI>Manipulating entire folders is not available in offline
   mode.&nbsp; Users are not permitted to move or delete folders when
   offline.&nbsp; We may be able to allow users to create new folders
   while online though.</LI>
   
   <LI>"Get Flagged Messages" and "Get Selected Messages" are
   available functions.&nbsp; The user can select specific messages
   or flag specific messages and just download those messages.&nbsp;
   The parent folder does not have to be enabled for offline for this
   to work.&nbsp; When the user requests on of these actions, a
   progress window should appear to provide feedback to the user that
   the requested action has occurred.</LI>
   
   <LI>&nbsp;</LI>
</OL>
</BODY>
</HTML>
