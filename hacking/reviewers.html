<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

 <title>Mozilla Code Review and the super-reviewer list</title>
<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




 <h1>Mozilla "super-review"</h1>
 <address class="author"><a href="mailto:brendan@mozilla.org">Brendan Eich</a>,
  <a href="mailto:mitchell@mozilla.org">Mitchell Baker</a></address>
 <p>mozilla.org requires module owner and peer review before code is checked
  into the mozilla.org <abbr>CVS</abbr> repositiory.
  Checking into most (but not all) of the Mozilla tree also requires an
  additional level of pre-check-in code review.
  This review is done by one or more of a designated group of strong hackers,
  known as <a href="mailto:reviewers@mozilla.org">reviewers@mozilla.org</a>.
  This level of review has become known as "super-review".
  mozilla.org staff isn't particularly fond of this term, but it seems to
  be what people use.
 <p><strong>Integration review</strong> has been used recently instead of super-review.
  What do people think of this catch-phrase? Mail
  <a href="mailto:brendan@mozilla.org">brendan@mozilla.org</a> with your thoughts.
 <p>The goals of super-review are to increase code quality, promote best practices,
  and reduce regressions.
  This level of review will look at the quality of the code itself, its potential
  effects on other areas of the tree, its use of interfaces, and otherwise its
  adherance to Mozilla coding guidelines.
  In some cases (cryptography comes to mind), the super-reviewers may
  not have domain expertise to evaluate the substantive quality of the code.
  They will still evaluate the other listed factors.
 <p>In any case, super-reviewers have discretion to raise "design" as well as
  "code" red flags, and stipulate remedies, as necessary.
  This is necessary because mozilla.org does not require a separate design
  review prior to code review; instead, we expect hackers to talk about their
  designs, post specs or less formal blurbs about their intentions, and take
  feedback throughout the (usually non-linear) design/implementation process.
 <p>There is a <a href="mailto:reviewers@mozilla.org">reviewers@mozilla.org</a>
  mailing list, which has a
  <a href="news://news.mozilla.org/mozilla.dev.super-review">newsgroup</a>
  mirror, with the usual, canonically named,
  <a href="mailto:dev-super-review@lists.mozilla.org">mail gateway</a>.
  This mail/news setup exists so extra reviewers and interested
  observers can watch requests for review and responses from reviewers (although
  typically, positive responses from reviewers will be given via
  <a href="http://bugzilla.mozilla.org/">bugzilla</a> comments rather than using
  a message to the newsgroup).
  <strong>Please</strong> use this newsgroup/mail-alias to propose changes for super-review,
  so that interested third parties can observe and help.
 <p>Whether or not super-review is required depends on what code you are hacking.
 <h2 id="what-code-needs-super-review">What code needs super-review?</h2>
 <ol>
  <li>The current rule is: code that is "in-process" or built with the Mozilla
   browser/mail/news/editor application suite requires super-review.
  <li>mozilla.org projects for which super-review is not required
   include: Webtools (such as Bugzilla), Network Security Services
   (<abbr>NSS</abbr>), Client Customization Kit (<abbr>CCK</abbr>) and Rhino.
   You still need to obtain module owner and peer review, and to comply with any
   other rules of the particular project.
  <li>mozilla.org strongly encourages, but does not absolutely require,
   super-review for code that is not currently in-process, but that is intended
   to become in-process. The same is true for code that is not currently
   built with Mozilla, but which will be in the future. Otherwise, there
   will be a ton of code to review when you're ready, and it could take eons
   for the review to be completed. Worse yet, a late review could uncover
   problems which could have been easily fixed before but which now require
   significant effort. This category picks up projects such as Personal
   Security Manager (<abbr>PSM</abbr>) which began out of process but which
   will ultimately be converted to in-process.
  <li>Exceptions. Naturally, the basic rules have some exceptions
   (don't they always?).
 </ol>
 <h2 id="exceptions">Exceptions</h2>
 <p><a href="mailto:cls@seawood.org">cls@seawood.org</a> is the
  <a href="../owners.html#build-config">autoconf</a>
  module owner for Unix, OS2, and other gmake-friendly platforms. His review
  is sufficient to get changes to those files checked in; staff@mozilla.org
  require no extra review here.
 <p>The <abbr>NSPR</abbr> module
  is mature, stable and has been used in Mozilla antecedents
  for years. Peer and module owner review is sufficient to get
  those files checked in; staff@mozilla.org require no extra review
  here.
 <p>The <a href="/owners.html#javascript">JavaScript</a> engine, like
  <abbr>NSPR</abbr>, is a closed <abbr>CVS</abbr>
  partition containing mature code, with dependencies only on another closed
  <abbr>CVS</abbr> partition (<abbr>NSPR</abbr>).
  Module owner review suffices to change
  <a href="http://lxr.mozilla.org/mozilla/source/js/src/"><abbr>JS</abbr></a> code.
 <p>Changes to module <a href="/projects/security/pki/psm/">PSM</a> require 
  at least one thorough owner/peer review. If the person requesting the change
  is neither the owner nor a peer, a second person from the group of {PSM owners, 
  PSM peers, super-reviewers} must approve the change.
  Changes to UI that is shared amongst all Mozilla applications 
  (e.g. error messages, password prompts, information windows, certificate manager)
  shall be reviewed/approved by the Mozilla Foundation's User Experience team.
  Changes to UI in the primary application windows 
  (e.g. Firefox preferences, security button in mail, status bar items) 
  must be reviewed/approved by the respective application UI owners.
 <p>In general, a well-owned module may request
  <a href="mailto:super-reviewers@mozilla.org">super-reviewers</a> to be exempt
  from super-review requirements.
  Any exempt module that depends only on modules in closed <abbr>CVS</abbr> partitions
  may become a closed <abbr>CVS</abbr> partition, so long as there are enough peers who are
  actually available to help fix build bustage and other unanticipated problems.
  We do not expect anyone with <abbr>CVS</abbr> access to abuse it, but closed partitions
  help limit the damage done by accidental checkins, as well as highlight strong
  ownership.
 <p>See <a href="https://despot.mozilla.org/despot.cgi">despot.cgi</a> for more
  on modules, <abbr title="also known as">a.k.a.</abbr> partitions.
 <h2 id="seeking">Seeking a super-review?</h2>
 <p>No matter who you are (yes, these rules apply to module owners and Mozilla
  super reviewers too), if you're seeking a review, check the following list
  before mailing a reviewer:
 <ol>
  <li>Make sure a bug is on file that describes the symptom and your diagnosis
   of the cause that the patch treats (or the feature being added, if you
   are extending Mozilla). 
  <li>Run the pre-checkin tests, and any other tests that you think your patch
   should pass. 
  <li>Attach the patch to the bug using cvs diff -u format, at a minimum (other
   attachments with more readable diffs may be added, too). 
  <li>Write a concise description of what the patch does, and why, in a
   comment on the bug.  Avoid a line-by-line description, since if the
   changes aren't clear, there should already be comments describing the
   code in the patch. 
  <li>Get code reviews from the <a href="../owners.html">module owner</a>
   and any peers you can find; the owner should set the
   <code>review+</code> patch flag in the bug. 
  <li>Read through the
   <a href="#rules-and-tips">rules and tips</a> below; double-check
   and anticipate any relevant ones. 
 </ol>
 <p>Module owners should have a peer review their patches, and not do self-review
  and make a wish.
 <p>Then pick an appropriate super-reviewer for the patch from the
  <a href="#the-super-reviewers">list below</a>.  Request review from that
  person using the patch flags on the bug: set the
  <code>super-review</code> flag to <code>?</code> and fill in the
  reviewer's name. 
 <h2 id="the-super-reviewers">Meet the super-reviewers</h2>
 <p>Here are the
  <a href="mailto:bienvenu@nventure.com&amp;to=brendan@mozilla.org&amp;to=benjamin@smedbergs.us&amp;to=bzbarsky@mit.edu&amp;to=darin.moz@gmail.com&amp;to=dbaron@mozilla.com&amp;to=dmose@mozilla.org&amp;to=dveditz@cruzio.com&amp;to=jst@mozilla.org&amp;to=jonas@sicking.cc&amp;to=mconnor@mozilla.com&amp;to=mikepinkerton@mac.com&amp;to=mscott@mozilla.org&amp;to=neil@parkwaycc.co.uk&amp;to=pavlov@pavlov.net&amp;to=peterv@propagandism.org&amp;to=rbs@maths.uq.edu.au&amp;to=roc@ocallahan.org&amp;to=sfraser@aol.net&amp;to=shaver@mozilla.org&amp;to=seth@sspitzer.org&amp;to=tor@acm.org&amp;to=vladimir@pobox.com">strong hackers</a> enlisted by mozilla.org for universal code review coverage:
 <ul>
  <li><a href="mailto:bienvenu@nventure.com?cc=reviewers@mozilla.org">bienvenu@nventure.com</a>
   (mailnews) 
  <li><a href="mailto:brendan@mozilla.org?cc=reviewers@mozilla.org">brendan@mozilla.org</a>
   (js, catch-all) 
  <li><a href="mailto:benjamin@smedbergs.us?cc=reviewers@mozilla.org">benjamin@smedbergs.us</a>
   (build, docshell, embedding, toolkit, xpcom) 
  <li><a href="mailto:bzbarsky@mit.edu?cc=reviewers@mozilla.org">bzbarsky@mit.edu</a>
   (content, docshell, layout, netwerk, uriloader) 
  <li><a href="mailto:cbiesinger@gmail.com?cc=reviewers@mozilla.org">cbiesinger@gmail.com</a>
   (docshell, netwerk, uriloader)
  <li><a href="mailto:darin.moz@gmail.com?cc=reviewers@mozilla.org">darin.moz@gmail.com</a>
   (cache, docshell, netwerk, uriloader) 
  <li><a href="mailto:dbaron@mozilla.com?cc=reviewers@mozilla.org">dbaron@mozilla.com</a>
   (content, layout) 
  <li><a href="mailto:dmose@mozilla.org?cc=reviewers@mozilla.org">dmose@mozilla.org</a>
   (directory, mailnews) 
  <li><a href="mailto:dveditz@cruzio.com?cc=reviewers@mozilla.org">dveditz@cruzio.com</a>
   (xpinstall, catch-all) 
  <li><a href="mailto:jag@tty.nl?cc=reviewers@mozilla.org">jag@tty.nl</a>
   (strings, xpfe, SeaMonkey Suite) 
  <li><a href="mailto:jonas@sicking.cc?cc=reviewers@mozilla.org">jonas@sicking.cc</a>
   (content, dom, xslt) 
  <li><a href="mailto:jst@mozilla.org?cc=reviewers@mozilla.org">jst@mozilla.org</a>
   (docshell, dom, htmlparser, content, layout) 
  <li><a href="mailto:mats.palmgren@bredband.net?cc=reviewers@mozilla.org">mats.palmgren@bredband.net</a>
   (layout, widget)
  <li><a href="mailto:mconnor@mozilla.com?cc=reviewers@mozilla.org">mconnor@mozilla.com</a>
   (browser, toolkit)
  <li><a href="mailto:mikepinkerton@mac.com?cc=reviewers@mozilla.org">mikepinkerton@mac.com</a>
   (Camino, widget) 
  <li><a href="mailto:mrbkap@gmail.com?cc=reviewers@mozilla.org">mrbkap@gmail.com</a>
   (caps, content, dom, htmlparser, js, xpconnect) 
  <li><a href="mailto:mscott@mozilla.org?cc=reviewers@mozilla.org">mscott@mozilla.org</a>
   (Mozilla Thunderbird, mailnews, netwerk, uriloader) 
  <li><a href="mailto:neil@httl.net?cc=reviewers@mozilla.org">neil@httl.net</a>
   (composer, xpfe, SeaMonkey Suite) 
  <li><a href="mailto:pavlov@pavlov.net?cc=reviewers@mozilla.org">pavlov@pavlov.net</a>
   (gfx, widget, image libraries) 
  <li><a href="mailto:peterv@propagandism.org?cc=reviewers@mozilla.org">peterv@propagandism.org</a>
   (content, dom, xslt) 
  <li><a href="mailto:rbs@maths.uq.edu.au?cc=reviewers@mozilla.org">rbs@maths.uq.edu.au</a>
   (gfx, layout) 
  <li><a href="mailto:roc@ocallahan.org?cc=reviewers@mozilla.org">roc@ocallahan.org</a>
   (gfx, layout) 
  <li><a href="mailto:sfraser_bugs@smfr.org?cc=reviewers@mozilla.org">sfraser_bugs@smfr.org</a>
   (editor) 
  <li><a href="mailto:shaver@mozilla.org?cc=reviewers@mozilla.org">shaver@mozilla.org</a>
   (js, xpcom, xpconnect) 
  <li><a href="mailto:seth@sspitzer.org?cc=reviewers@mozilla.org">seth@sspitzer.org</a>
   (mailnews) 
  <li><a href="mailto:tor@acm.org?cc=reviewers@mozilla.org">tor@acm.org</a>
   (image libraries) 
  <li><a href="mailto:vladimir@pobox.com?cc=reviewers@mozilla.org">vladimir@pobox.com</a>
   (gfx, widget, toolkit, storage, canvas) 
 </ul>
 <p>Inverting to index by area, sorting by primary or most-expert reviewer,
  and aggregating reviewers into useful <code>mailto:</code> links, gives us
  the following list. Super-review does not require domain expertise (module owners and peers supply
  that, usually), so the areas below are not pigeon-holes -- you can solicit a
  super-review from any reviewer on the list, but using area as a guide will get
  quicker results in the typical case.
 <dl>
  <dt>browser
  <dd><a href="mailto:mconnor@mozilla.com?cc=reviewers@mozilla.org">mconnor@mozilla.com</a> 
  <dt>cache
  <dd><a href="mailto:darin.moz@gmail.com?cc=reviewers@mozilla.org">darin.moz@gmail.com</a> 
  <dt>caps
  <dd><a href="mailto:mrbkap@gmail.com?cc=reviewers@mozilla.org">mrbkap@gmail.com</a> 
  <dt>composer
  <dd><a href="mailto:neil@httl.net?cc=reviewers@mozilla.org">neil@httl.net</a> 
  <dt>content, layout
  <dd><a href="mailto:dbaron@mozilla.com?cc=roc@ocallahan.org&amp;cc=rbs@maths.uq.edu.au&amp;cc=bzbarsky@mit.edu&amp;cc=jst@mozilla.org&amp;cc=peterv@propagandism.org&amp;cc=jonas@sicking.cc&amp;cc=mats.palmgren@bredband.net&amp;cc=mrbkap@gmail.com&amp;cc=reviewers@mozilla.org">dbaron@mozilla.com,
   roc@ocallahan.org, rbs@maths.uq.edu.au, bzbarsky@mit.edu,
   jst@mozilla.org (content), peterv@propagandism.org (content),
   jonas@sicking.cc (content), mats.palmgren@bredband.net (layout),
   mrbkap@gmail.com (content)</a> 
  <dt>directory
  <dd><a href="mailto:dmose@mozilla.org?cc=reviewers@mozilla.org">dmose@mozilla.org</a> 
  <dt>docshell, webshell
  <dd><a href="mailto:benjamin@smedbergs.us?cc=jst@mozilla.org&amp;darin.moz@gmail.com&amp;bzbarsky@mit.edu&amp;cbiesinger@gmail.com&amp;cc=reviewers@mozilla.org">benjamin@smedbergs.us, 
   jst@mozilla.org, darin.moz@gmail.com, bzbarsky@mit.edu, cbiesinger@gmail.com</a> 
  <dt>dom
  <dd><a href="mailto:jst@mozilla.org?cc=peterv@propagandism.org&amp;cc=jonas@sicking.cc&amp;cc=mrbkap@gmail.com&amp;cc=reviewers@mozilla.org">jst@mozilla.org,
   peterv@propagandism.org, jonas@sicking.cc, mrbkap@gmail.com</a> 
  <dt>editor
  <dd><a href="mailto:sfraser_bugs@smfr.org?cc=reviewers@mozilla.org">sfraser_bugs@smfr.org</a>
  <dt>embedding
  <dd><a href="mailto:benjamin@smedbergs.us?cc=reviewers@mozilla.org">benjamin@smedbergs.us</a> 
  <dt>event loop
  <dd><a href="mailto:darin.moz@gmail.com?cc=reviewers@mozilla.org">darin.moz@gmail.com</a> 
  <dt>gfx
  <dd><a href="mailto:pavlov@pavlov.net?cc=vladimir@pobox.com&amp;cc=rbs@maths.uq.edu.au&amp;cc=roc@ocallahan.org&amp;cc=reviewers@mozilla.org">pavlov@pavlov.net, 
   vladimir@pobox.com, rbs@maths.uq.edu.au, roc@ocallahan.org</a> 
  <dt>htmlparser
  <dd><a href="mailto:jst@mozilla.org?cc=mrbkap@gmail.com&amp;cc=reviewers@mozilla.org">jst@mozilla.org,
   mrbkap@gmail.com</a> 
  <dt>image libraries
  <dd><a href="mailto:pavlov@pavlov.net?cc=tor@acm.org&amp;cc=reviewers@mozilla.org">pavlov@pavlov.net, 
   tor@acm.org</a> 
  <dt>js
  <dd><a href="mailto:brendan@mozilla.org?cc=shaver@mozilla.org&amp;cc=mrbkap@gmail.com&amp;cc=reviewers@mozilla.org">brendan@mozilla.org,
   shaver@mozilla.org, mrbkap@gmail.com</a> 
  <dt>mailnews
  <dd><a href="mailto:bienvenu@nventure.com?cc=mscott@mozilla.org&amp;cc=seth@sspitzer.org&amp;cc=dmose@mozilla.org&amp;cc=reviewers@mozilla.org">bienvenu@nventure.com,
   mscott@mozilla.org, seth@sspitzer.org, dmose@mozilla.org</a>
  <dt>netwerk
  <dd><a href="mailto:cbiesinger@gmail.com?cc=bzbarsky@mit.edu&amp;cc=darin.moz@gmail.com&amp;cc=reviewers@mozilla.org">cbiesinger@gmail.com,
   darin.moz@gmail.com, bzbarsky@mit.edu</a> 
  <dt>strings
  <dd><a href="mailto:darin.moz@gmail.com?cc=jag@tty.nl&amp;cc=reviewers@mozilla.org">darin.moz@gmail.com, jag@tty.nl</a> 
  <dt>toolkit
  <dd><a href="mailto:benjamin@smedbergs.us?cc=mconnor@mozilla.com&amp;cc=vladimir@pobox.com&amp;cc=reviewers@mozilla.org">benjamin@smedbergs.us, 
   mconnor@mozilla.com, vladimir@pobox.com</a> 
  <dt>uriloader
  <dd><a href="mailto:cbiesinger@gmail.com?cc=bzbarsky@mit.edu&amp;cc=darin.moz@gmail.com&amp;cc=mscott@mozilla.org&amp;cc=reviewers@mozilla.org">cbiesinger@gmail.com, 
   bzbarsky@mit.edu, darin.moz@gmail.com, mscott@mozilla.org</a> 
  <dt>widget
  <dd><a href="mailto:roc@ocallahan.org?cc=pavlov@pavlov.net&amp;cc=mats.palmgren@bredband.net&amp;cc=mikepinkerton@mac.com&amp;cc=reviewers@mozilla.org">roc@ocallahan.org,
   pavlov@pavlov.net, mats.palmgren@bredband.net, mikepinkerton@mac.com</a> 
  <dt>xpcom
  <dd><a href="mailto:brendan@mozilla.org?cc=shaver@mozilla.org&amp;cc=benjamin@smedbergs.us&amp;cc=reviewers@mozilla.org">brendan@mozilla.org,
   shaver@mozilla.org, benjamin@smedbergs.us</a> 
  <dt>xpconnect
  <dd><a href="mailto:shaver@mozilla.org?cc=brendan@mozilla.org&amp;cc=mrbkap@gmail.com&amp;cc=reviewers@mozilla.org">shaver@mozilla.org,
   brendan@mozilla.org, mrbkap@gmail.com</a> 
  <dt>xpfe
  <dd><a href="mailto:neil@httl.net?cc=jag@tty.nl&amp;cc=reviewers@mozilla.org">neil@httl.net, jag@tty.nl</a> 
  <dt>xpinstall
  <dd><a href="mailto:dveditz@cruzio.com?cc=reviewers@mozilla.org">dveditz@cruzio.com</a> 
  <dt>xul, xbl
  <dd><a href="mailto:jonas@sicking.cc?cc=reviewers@mozilla.org">jonas@sicking.cc</a> 
  <dt>catch-all, when in doubt
  <dd><a href="mailto:brendan@mozilla.org?cc=dveditz@cruzio.com&amp;cc=reviewers@mozilla.org">brendan@mozilla.org,
   dveditz@cruzio.com</a> 
 </dl>
 <h2 id="rules-and-tips">rules and tips</h2>
 <p>Two venerable documents that mozilla.org commends to all developers are the
  <a href="../projects/seamonkey/rules/code_review.html">SeaMonkey
  Code Reviewer's Guide</a> and the
  <a href="../projects/seamonkey/rules/bible.html">SeaMonkey
  Engineering Bible</a>. Here is my synthesis of their wisdom, plus other
  tips and rules proposed and practiced by wise people, into 21 rules and
  tips, many phrased in the form of a question (this is not an exhaustive
  list!). In the following, I'll use "patch" to mean "wholly new file" in
  the case where new code is being contributed.
 <ol>
  <li>Check that the module owner and possibly a peer or two have reviewed the
   patch, as signified by their <code>r=<var>reviewer's-email-address</var></code>
   signatures in the bug report. Beyond the module peers, consider whether
   you need to bring in other experts, or indeed all
   <a href="mailto:reviewers@mozilla.org">reviewers@mozilla.org</a>,
   or possibly even <a href="mailto:porkjockeys@mozilla.org">porkjockeys@mozilla.org</a>. 
  <li>Are the changes in XP code? If so, are they
   <a href="http://www.testdrive.hp.com/">64-bit
   clean</a>? Do they follow the <a href="portable-cpp.html">C++
   portability guide</a>? 
  <li>Are the changes visible to end users? If so, are they
   <a href="../projects/l10n/customizable-code.html#what_l12y">localizable</a>? Do
   they follow the recommendations in
   <a href="../projects/l10n/customizable-code.html#style_guide">Writing
   Localizable/Customizable code</a>? 
  <li>Do the changes contain or affect XUL user interfaces visible to end users?
   If so, are they
   <a href="../projects/ui/accessibility/">accessible</a>?
   Do they follow the recommendations in
   <a href="../projects/ui/accessibility/accessible-xul-authoring.html">Accessible
   XUL Authoring Guidelines</a>? 
  <li>Make sure there is a <a href="../bugs/">bug</a> on
   file, with the patch or patches attached. 
  <li>Feel free to cc: relevant co-reviewers who are not yet reading the bug. 
  <li>Encourage patch attachers to use cvs diff -u format when generating a patch,
   and to run cvs diff from the highest common ancestor directory in order
   to make a single patch file, which can be applied with one patch command. 
  <li>If the patch contains many tab expansions or other whitespace-only, purely
   cosmetic fixes, encourage patch submitters to attach a cvs diff -wu version
   of their patches, <b>in addition to</b> the diff -u format attachment necessary
   for others to be able to apply the patch.  Use the cvs diff -p option too
   (put diff -pu8 or something similar in your .cvsrc file). 
  <li>Look at whole code as well as unified or other context diffs.
   <a href="http://lxr.mozilla.org">LXR</a>
   is your friend. 
  <li>Are there bugs on file for underlying problems being worked-around, rather
   than fixed-for-good, by the patch? 
  <li>How was the patch tested? Were <a href="../quality/precheckin-tests.html">pre-checkin</a>
   tests run? If the change is large and hard to analyze, were the <a href="../quality/smoketests/">smoketests</a>
   also run? How about unit tests or suites, such as the
   <a href="../js/tests/library.html">JS
   tests</a> or
   <a href="http://lxr.mozilla.org/mozilla/source/webshell/tests/viewer/">viewer</a>? 
  <li>If the patch allocates memory or modifies allocation and free constructs
   in existing code, or adds, removes, or moves strong references in data
   structures, has the patch submitter run the
   <a href="../../projects/xpcom/MemoryTools.html">Memory
   Tools</a> and compared to the <a href="http://tinderbox.mozilla.org/">tinderbox</a>
   bloat numbers? 
  <li>If the patch is daunting, have several to many people in the Mozilla community
   applied it, run with it, and updated the bug with comments, favorable or
   otherwise? If not, find some patch-buddies. 
  <li>Does the patch modify lower-level modules in ways that have hard-to-see
   effects on higher-layer modules, particularly on XUL, XBL, and the like?
   If so, has the patch submitter demonstrated only good effects across a
   broad range of higher-layer, especially XUL-based, applications and dialogs? 
  <li>Does the patch use
   <a href="../projects/xpcom/nsCOMPtr/">nsCOMPtr</a>
   for strong XPCOM references,
   <a href="../projects/xpcom/weak_references.html">nsWeakPtr</a>
   (if appropriate over against a raw C++ interface pointer) for weak XPCOM
   references, and the latest
   <a href="../projects/xpcom/string-guide.html">string</a>
   technology? Similar questions apply to any <i>ProgIDs</i> or the newer
   <a href="news://news.mozilla.org/3994AE3E.D96EF810%40netscape.com">contractids</a>
   (any code not already switched by
   <a href="mailto:rayw@netscape.com">rayw@netscape.com</a>,
   <i>et al.</i>, should switch from progids to contractids). 
  <li>Does the patch make assumptions about reentrancy or thread-safety that
   are not clearly documented? If so, push back on the patch submitter for
   comments, discussion in the Mozilla newsgroups, and eventually, documentation. 
  <li>If the patch defines new XPCOM interfaces, are they declared using
   <a href="../scriptable/xpidl/">XPIDL</a>?
   If so, are the interfaces or new methods or attributes <code>[scriptable]</code>?
   If not, are there good reasons why not? In any event, are
   <a href="http://java.sun.com/products/jdk/javadoc/">JavaDoc-style</a>
   comments, digestable by
   <a href="http://unstable.elemental.com/mozilla/">Doxygen</a>,
   used well in the interface definition? 
  <li>What about compatibility? No frozen XPCOM interface should be modified
   (instead, a new interface should be created). If a non-XPCOM interface
   is modified, is the change backward compatible? DOM, XUL, XBL, etc. changes
   may affect orders of magnitude more programmers than C or C++ changes.
   If the changes are not backward compatible, consider alternatives to the
   change that preserve existing functionality.
   If compatibility must be sacrificed, ensure through newsgroup discussions
   and bug reports that the loss is well-understood and documented. 
  <li>Does the patch address problems in the code narrowly, when the bad pattern
   addressed in a spot-fix fashion recurs elsewhere in the file, or in neighboring
   files? If so, and if the
   <a href="../roadmap.html#new-milestones">milestone
   schedule</a> permits, push back on the patch submitter and the module owner
   to do the right thing everywhere, and file bugs as needed. 
  <li>If it's time to minimize risk according to the
   <a href="../roadmap.html#new-milestones">milestone
   schedule</a>, consider less sweeping changes, if any, that fix the bug
   or palliate its symptoms. Make sure dependent bugs remain open to track
   any open issues (rule/tip #8, above). 
  <li>When reviewing code, verify that the prevailing module style, if any, has
   been observed ("When in Rome...") in the patch. If the module is a mess,
   identify an owner and call for him or her to assert a coding style. Messy
   files are a telltale of poor or non-existent ownership. The <a href="http://lxr.mozilla.org/mozilla/source/js/src/jsapi.h#1">Emacs
   modeline comment</a> at the top of each file should accurately specify
   the indentation style of the file, <code>indent-tabs-mode</code> should be
   <code>nil</code>,
   and patches should tend to eliminate tabs from the file, until only the
   proper runs of space characters remain. 
 </ol>
 <p>Finally, when you're willing to stake your reputation by accepting the
  patch that you've reviewed, put <code>sr=<var>your-email-address</var></code> in
  the bug report, so everyone can see your stamp of approval. Be prepared
  to make mistakes; everyone does. The point is not to be perfect, or to
  try so hard that you slow patch acceptance to an unacceptable crawl. The
  point is to get the right eyes, in addition to many eyes, on the code we're
  all developing.



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified March  2,  2008</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/hacking/reviewers.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
