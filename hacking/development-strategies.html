<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

    <meta name="generator" content=
    "HTML Tidy for Windows (vers 14 February 2006), see www.w3.org">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Style-Type" content="text/css">

    <meta name="DC.author" content="Chris Yeh">
    <meta name="DC.creator" content="Chris Yeh">
    <meta name="DC.title" content="Development Strategies">
    <meta name="DC.date.created" content="2002-01-09T19:17:03+11:00" scheme="W3CDTF">
    <meta name="DC.date.modified" content="2006-09-03T09:54:03+11:00" scheme="W3CDTF">

    <title>Development Strategies</title>
<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">







    <h1>Development Strategies</h1>


    <address>
        <a href="mailto:sspitzer%40mozilla.org,alecf%40netscape.com">Seth Spitzer &amp;
        Alec Flett</a>
    </address>


    <h3>1)  work on the most important bugs first.</h3>


    <p>Everyone likes to check in.  But keep in mind, checkin rate isn't everything.
     It's better to fix one dataloss bug, crasher, or performance bug that really affects
    the user than edge case bugs that are rarely seen or minor bugs.</p>


    <h3>2)  take extra time to do it right the first time</h3>


    <p>It's also better to come up with one really solid, well tested, well commented,
    clean, easy to maintain piece of code than a bunch of quick fixes.  You (or someone
    else) will be back in that code someday.  It's easier to do it right once, when your
    mind is in the problem, then to do it once quickly and once again when you have to
    fix it  The only thing worse that not understanding someone else's code is not
    understanding your own.</p>


    <h3>3)  test your code</h3>


    <p>QA's job is to assure quality, not to add quality.  That's your job.  It's your
    responsibility to find the problems in your code before checking in, and to fix them.
      When you land your bug free code, it's QA's job to assure others that it's really
    bug free.</p>


    <p>Make sure you appreciate anyone who finds a bug in your code.  Appreciate it even
    more if they find it before you ship.  They're giving you a second chance to get it
    right before it becomes a bug that affects users.</p>


    <h3>4)  minimize how you are affected by regressions</h3>


    <p>Unless you are the type to go out and tackle daily regressions, you need to find a
    way to not let them affect you.   You don't want to have one tree, update it every
    morning, and then be stuck waiting for blockers to clear.</p>


    <p>Have multiple trees.  At least one of them should be updated every day.  You'll
    need this one for regressions that require your immediate attention (a new crasher, a
    blocker or regression that is in your area, etc.)  Use this same tree for small,
    quick bugs or recent regressions or crashers.   For your other tree, don't update as
    often.  Update when you know that the tree is in good shape.  Do your primary
    development in this tree.  You'll need to update, rebuild, re-test and make a diff
    against the current trunk once you feel your fix is done.  But, daily regressions
    won't block your primary development.</p>


    <p>As far as keeping trees up to date - the longer you go without updating your tree,
    the more likely you are to have CVS conflicts. If you update every day for a week,
    you might not have any conflicts, but if you update once a week and you've changed a
    lot of code, you'll most likely have conflicts.</p>


    <p>see mozilla\config\fast-update.pl for a fast way to update your tree - you can
    update your main mozilla tree (minus nsprpub, etc) in 1-2 minutes.</p>


    <h3>5)  work on multiple bugs in parallel</h3>


    <p>You should be working on the most important bugs first.  But those might be
    difficult bugs (hard to reproduce crashers, big rewrites for performance, etc.) which
    can take several days or weeks to complete, plus the time for reviews.  In your other
    trees, work on smaller, easier bugs.  Pick bugs that won't cause conflicts with your
    work in your primary tree.  Pick bugs that should only take you a few hours or a day
    to fix.  In theory, fixes for these bugs will be quick to review.</p>


    <p>If you have problems finding smaller, easier bugs to work on, start by looking for
    crashers.  Maybe the problem can be turned into an assert, or fixed altogether.  You
    can use talkback queries or bugzilla queries to find crashers.</p>


    <p>Also, look for mail window front-end bugs.  We've got a lot of UI polish bugs that
    can be fixed with a small .dtd, .js, .properties or .xul change.  In addition, look
    for problems in existing code.  Find and fix string usage problems.  Find and fix bad
    XPCOM macro usage.  Switch some code over to nsCOMPtrs.  Look for XXX  or TODO in the
    code, verify the code still needs fixing, and fix it.</p>


    <h3>6)  smaller patches get reviewed faster</h3>


    <p>If you find that you spend a lot of time waiting for reviews, keep in mind that
    patch size is not linear to time to review.  A twenty line patch doesn't take twice
    as long to review as a ten line patch, it usually takes more time.  If you can divide
    and conquer what you are working on into smaller chunks, you will find you'll get
    faster reviews.  Of course, not everything can be divided up.  And, shorter fixes
    aren't better than longer ones.</p>


    <p>Having parallel trees should allow you to work on other items, while you are
    awaiting reviews.</p>


    <h3>7)  get advice before working on a patch or feature before you start working on
    it, instead of after</h3>


    <p>If you are blocked, or stumped as to what to work on, talk to a lead sooner rather
    than later.   Most likely they will have a bug they can hand off to you, or they can
    help get you unblocked.  Since they are going to be reviewing your code later, run
    your plan of attack by them first.  It's better to have an idea rejected, than a big
    patch.</p>


    <h3>8) if you are blocked, but have something worth checking in, check in using
    #ifdef, prefs, or "alternative" files</h3>


    <p>Sometimes you'll work on something, but you can't land it because something else
    is blocking you.  You can still land (assuming you get reviews) if the code isn't on
    by default.  This also makes it easier to get help on the problem.  It's easier to
    tell someone set a pref, or apply a small patch, or set a #define then to apply a
    monster patch.</p>


    <p>For C++, use #define, #ifdef, #else and #endif<br>
    For XUL / JS, and you're doing something major, add your new files to the tree and
    then have it be a simple jar.mn patch to enable it.</p>


    <p>You can also have code that checked in, but controlled with a pref and off by
    default.</p>


    <h3>9) make sure you have the right fix (not a "I'll fix it later hack") when you go
    for reviews</h3>


    <p>When tempted to do a first pass fix and fix the fallout later, do it right the
    first time - don't assume you'll be able to file a "fix it" bug and fix stuff you
    know about later - chances are the reviewer will make you do the work anyway.</p>


    <p>If it takes you five extra minutes to do something the "right" way rather than
    twenty minutes debating it with the reviewer - you've just saved yourself and the
    reviewer valuable time.  Obviously, when doing it the "right" way means
    re-engineering large amounts of code, then incremental work is better - it's a fine
    line.</p>


    <h3>10) don't drag out reviews by fighting the reviewer in bugzilla (or email)</h3>


    <p>When getting a review, try not to belabor a point that a reviewer is debating you
    on. If the debate is involved, solve it in person, on IRC or over AIM.  A five minute
    discussion is worth an hour of e-mails.</p>


    <h3>11)  do thorough code reviews</h3>


    <p>When you review someone else's code, review thoroughly.  If another engineer
    checks in code that causes regressions or introduces bugs, you might be the one who
    has to fix it later.  Save yourself (and others) time later by doing a solid code
    review.</p>


    <h3>12)  review your own code before you ask for reviews</h3>


    <p>Pratice your reviewing skills on your own patch before you seek reviews and a
    super review.  Better that you catch something, than the reviewers or super
    reviewers. You might find a problem, or find that you left in some dump() or printf()
    statements, or have messed up the whitespace.</p>


    <h3>13)  if you're working on something massive, start a branch</h3>


    <p>If you are working on something big, and you want to be able to check in
    incrementally without getting reviews, create a branch.  But having a branch means
    dealing with conflicts when you land, and waiting a long time for reviews.</p>


    <p>Here's how to create a branch:</p>


    <p>from your linux box:<br>
    # start from your trunk tree on your local disk<br>
    <kbd>cd mozilla<br>
    find . -type d \! -name CVS | xargs -l -P10 cvs tag -l MY_BASE_TAG &gt; &amp;
    ../taglog1.txt<br>
    find . -type d \! -name CVS | xargs -l -P10 cvs tag -b -l MY_BRANCH_TAG &gt; &amp;
    ../taglog2.txt</kbd></p>


    <p>from your win32 box:<br>
    <kbd>cvs co -r MY_BRANCH_TAG mozilla/client.mak<br>
    cd mozilla<br>
    edit client.mak, putting MY_BRANCH_TAG in the right places.<br>
    cvs commit client.mak<br>
    nmake -f client.mak</kbd></p>


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified September  3,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/hacking/development-strategies.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
