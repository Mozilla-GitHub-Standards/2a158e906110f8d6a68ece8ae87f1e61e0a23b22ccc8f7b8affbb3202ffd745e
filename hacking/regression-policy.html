<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">

<meta name="DC.title" content="Policy on Handling Performance Regressions">
<meta name="DC.date.created" content="2002-03-21T15:50:03+11:00" scheme="W3CDTF">
<meta name="DC.date.modified" content="2006-09-03T09:54:03+11:00" scheme="W3CDTF">

<title>Policy on Handling Performance Regressions</title>
<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








<h1>Policy on Handling of Performance Regressions</h1>

<h2>In this document:</h2>

<ul class="toc">
  <li><a href="#Basic_Policy">Basic Policy</a>: The tree is to be closed in 
  response to serious performance regressions.</li>

  <li><a href="#Implementation">Implementation</a>: When the tree is to be closed 
  and how it is to be reopened.</li>

  <li><a href="#New_Features">New Features vs. Performance</a>: Potential approaches 
  for a valuable new feature that causes performance regressions.</li>

  <li><a href="#Footprint_Increases">Footprint Increases</a>: Tree closure policy 
  not applicable.</li>
</ul>

<h3><a name="Basic_Policy">Basic Policy: Tree Closure</a></h3>
  <p>Performance is 
  a critical goal for Mozilla releases and the commercial products that will be 
  based on Mozilla. We cannot allow performance regressions to go unnoticed or 
  unresolved during our development cycles. Yet our automated tools are of only 
  limited help in determining the cause of performance regressions. The sheriffs 
  are the first line of defense and those monitoring the tree must take an active 
  stance in responding to performance regressions. We have therefore implemented 
  a policy of tree closure for serious performance regressions.</p>

<h3><a name="Implementation">Implementation</a></h3> 

<p>Performance regressions are 
measured against the numbers reported on tinderbox by various regression tests 
including tests for startup time (<a href="http://tegu.mozilla.org/graph/query.cgi?testname=startup&amp;tbox=comet&amp;autoscale=1&amp;days=7&amp;avg=1">Ts</a>), 
pageload (<a href="http://tegu.mozilla.org/graph/query.cgi?tbox=btek&amp;testname=pageload&amp;autoscale=1&amp;days=7&amp;avg=1">Tp</a>), 
and new window open (<a href="http://tegu.mozilla.org/graph/query.cgi?testname=xulwinopen&amp;tbox=comet&amp;autoscale=1&amp;days=7&amp;avg=1">Txul</a>). 
These tests are run on several machines with varying processor speeds and memory 
configurations. When a performance regression appears that is "bad enough,&quot;* 
then</p>

<ul>
  <li>The tree is to be closed
  <ul>
    <li>Those on the hook are on the hook - it's the job of each person on the 
      hook to figure out whether his or her check-in caused the problem. </li>
  </ul>
  <ul>
    <li>The hook gets one hour. </li>
  </ul>
  <ul>
    <li>Those on the hook may exonerate their individual check-ins through an 
      explanation as to why their code is not the problem (e.g., my code doesn't 
      run at start-up for a regression in start-up performance). To be effective, 
      the explanation must be convincing to the sheriff and the performance gurus.</li>
  </ul>
  </li>
  <li>Starting on the 61st minute, checkins that have not been exonerated are 
    backed out by the sheriff </li>
  <li>If there is no good idea as to what caused the problem, then
  <ul>
    <li>the tree remains closed </li>
    <li>everyone is backed out</li>
  </ul>
  <ul>
    <li>those who were backed out are allowed to check-in only through a metering 
      process. The sheriff decides the check-in order. </li>
  </ul>
  </li>
  <li>If there is a reasonable idea about what caused the problem, then
  <ul>
    <li>the suspect checkin is backed out</li>
    <li>we wait for the tinderboxen to cycle and verify that the regression is 
      fixed</li>
    <li>the tree is opened </li>
  </ul>
  </li>
</ul>

<p> <b>*</b> We have not tried to define "bad enough." We believe that the sheriff 
  in conjunction with performance gurus, super-reviewers, mozilla.org staff and 
  concerned developers will be able to determine when a regression is bad enough. 
  If it turns out a significant number of these decisions are controversial, then 
  mozilla.org staff will look at creating more precise guidelines, and will use 
  the experiences gained with this current policy to create a more detailed one. 
  So please, do not attack the sheriffs for personal disagreement over what is 
  bad enough. We expect sheriffs to do their best, to get input from the relevant 
  people and to act when appropriate. We expect post-mortems regarding what was 
  backed out, when, why, and how we might proceed better the next time. We expect 
  civil discussion. We do not expect our sheriffs to be the subject of virulent 
  attacks because they did or did not back out a particular check-in. </p>

<h3><a name="New_Features">New Features vs. Performance</a></h3>
<p> It may happen 
  that a highly desirable feature results in a performance regression. In that 
  case, those wishing to include the feature in Mozilla ought to do the following. 
  Enlist help to reduce the performance degradation as much as possible. Repeat 
  this step. Evaluate how important the feature really is. Be brutal. If the feature 
  is important only to a few, the case for accepting a performance regression 
  will be very hard. If the feature is important to a significant number of users, 
  then start a discussion with drivers@mozilla.org about the value of your feature 
  and why it is important enough to warrant a performance regression. Your chances 
  of success will go way up if you can fix an equivalent performance bug or find 
  a way to separate out another feature that has a similar performance cost. Even 
  small declines in performance add up, so expect to have to work hard to justify 
  regressions.</p>

<h3><a name="Footprint_Increases">Footprint Increases</a></h3>
  <p>This policy does 
  not apply to unexpected increases in Mozilla's footprint. Staff feels that the 
  cause of bloat and leaks has not been so difficult to identify, and so this 
  policy is not required. </p>

<p><b>Contact</b>: Mitchell Baker &lt;<a href="mailto:mitchell@mozilla.org">mitchell@mozilla.org</a>&gt; 
</p>


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified September  3,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/hacking/regression-policy.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
