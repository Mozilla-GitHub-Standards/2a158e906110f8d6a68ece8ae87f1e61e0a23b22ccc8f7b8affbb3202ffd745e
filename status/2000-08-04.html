
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

    <title>mozilla.org status update</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">

  
  
  
    <p><br>
    <center>
      <p><font size="+3"><b>status update</b></font> </p>
      <p>maintained by Tim Rowley &lt;<b><a href="mailto:tor@cs.brown.edu">tor@cs.brown.edu</a></b>&gt;</p>
      
      <p><b>Last Updated Friday August 4, 2000</b></p>

      <table border="0" cellspacing="0" cellpadding="2">
	
	<tr valign="top"> 
	  <td bgcolor="#000000"> 
	    <table border="0" cellpadding="10" cellspacing="0">
	      
	      <tr valign="top"> 
		<td bgcolor="#FFCC99"> 
		  <div align="CENTER">
		    This status update page is updated every
		    weekend. To get updates and news throughout the
		    week you are invited to check out <a
		    href="http://www.mozillaZine.org/">mozillaZine</a>,
		    a site devoted to Mozilla advocacy.
		  </div>
		</td>
	      </tr>
	    </table>
	    
	  </td>
	</tr>
      </table>
	
 <p>

	<a href="./2000-07-29.html"><b>Previous Updates</b></a>
      </p>
    </center>

    <!-- begin friends of the tree section -->

        <table width="100%" border="0" cellpadding="10" align="center" cellspacing="8">
      <tr valign="top" bgcolor="#FFCCCC"> 
	<td> 
	  <div align="center"> 
	    <p>
	      <b><font size="+2"><img src="./tree.gif" alt="" width="49" height="60">
		  <br>
		  Friends of the Tree
		</font></b>
	    </p>
	    <table width="100%" border="0" cellspacing="0" cellpadding="10">
	      <tr valign="top"> 
		<td> 
		  <div type="_moz"></div>
		  <ul>


		  </ul>
		</td>
	      </tr>
	    </table>
	  </div>
	</td>
      </tr>
    </table>

    
    <!-- end friends of tree -->

<!-- start the updates section. close this table at the end of the page. -->

    <table border="0" cellspacing="0" cellpadding="8" width="100%">
      <tr> 
	<td colspan=2 valign="TOP"> 

<!-- start module update header -->

	  <table border="0" width="100%" cellpadding="5" cellspacing="0">
	    <tr> 
	      <td valign="TOP" align="CENTER" bgcolor="#FFCC99">
		<b><font size="+2">Module Updates</font></b>
	      </td>
	    </tr>
	  </table>

<!-- end module updates header -->

	  

<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>XPToolkit</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>July 31</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Peter Trudelle &lt;<a href="mailto:trudelle@netscape.com">trudelle@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

<p><b>Summary</b>
</p>

<ul>

<li>David Hyatt checked in dramatic performance enhancments for tree scrolling by rows for M18.&nbsp; <br>
</li>
  <li>
The XPToolkit team resolved 93 bugs in the last week, fixing 34 of&nbsp; these, including 15 '+'.&nbsp; For details,
see our
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=%5E%28garyf%7Cbryner%7Cpinkerton%7Csaari%7Cevaughan%7Cdanm%7Chyatt%7Cpavlov%7Ctrudelle%29%40*&emailtype1=regexp&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfield=resolution&chfieldfrom=7%2F21%2F2000&chfieldto=7%2F29%2F2000&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">resolved
bug list</a>.</li>

</ul>


<p><b>Highlights</b>
<ul>

<li>
<b>Mike Pinkerton </b>(pinkerton)

<ul>
  <li>
      Fixed 46223, regression of not being able to drop on mozilla from outside apps.
  <li>
      Applied patch from Dean Tessman for right clicking in context menus (31727)
</ul>


<li>
<b>Chris Saari </b>(saari)

<ul>
<li>Forward merging joki's changes. Successful tests on Mac and Linux right now. Should get Windows today.</li>
<li>Helped Daniel fix a dogfood bug.<br>

</li>
</ul>



<li>
<b>Daniel Matejka</b> (danm)
    <ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=45663">45663</a> <nobr>FIXE</nobr><nobr>---</nobr>[nsbeta2+]crash, nsbeta2, regression, topcrashcrash reloading page after switching to classic theme [@ Doc
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=43470">43470</a> <nobr>FIXE</nobr><nobr>---</nobr>[dogfood-][nsbeta2-]crash, nsbeta3crash closing new account wizard with confused text field<br>
</li>
</ul>


<li>
<b>Eric Vaughan</b> (evaughan):


<ul>
<li>On Vacation<br>
</ul>


<li>
<b>Stuart Parmenter</b> (pavlov):


<ul>
<li>
reduced memory churn by not creating as many nsToolkit objects on unix
(bug 16328)
<li>fixed nsBasicEncoder being held on past XPCOM shutdown leak (bug
43580)
</ul>


<li>
<b>David Hyatt</b>&nbsp; (hyatt):



<ul>
<li>
 Worked on the XUL template builder with waterson 
to add the ability to prevent the template from groveling one level ahead to 
determine whether or not a container should have children.

<li>
 Patched the XUL template
 builder and XP Menu code&nbsp; to prevent aggressive menu construction.&nbsp; This
 fix decreases time to&nbsp; bring up windows, since RDF was groveling into closed
 menus.

<li>
 Patched XBL so that its exclusion mechanism takes 
precedence over checking the child count.&nbsp; This prevents child 
generation from happening when using XBL with XUL templates.


<li> Fixed keyboard navigation
 and shortcut mnemonics&nbsp; in XP menus by making the XBL insertion point retrieval
 (from the frame side)&nbsp; be recursive (finding the innermost insertion point).

<li> Abstracted the XBL insertion point mechanism so 
that it can be used with XML and HTML (as well as XUL).&nbsp; The code is 
still a static method on nsBox, and it needs to move into layout's 
nsFrameManager, but it's ready to move.  This fix will bring XML and HTML to 
full parity with XUL as far as XBL capabilities (finally!).

<li> Patched XBL so that style contexts are properly 
reparented when XBL's &lt;children&gt; mechanism is used, both with static 
content and dynamically added content (using the DOM).&nbsp; This patch helps 
attinasi, who was unable to land his style optimizations because of this bug 
in XBL.

<li> Added a timed select capability to the tree 
widget, so that onselect handlers don't fire immediately when the selection 
is adjusted.&nbsp; Mailnews can also use this functionality when adjusting 
the selection following the deletion.&nbsp; This results in a large 
performance speedup for arrow key scrolling in tree widgets (especially in 
the thread pane).

<li> Fixed a positioning problem with the tree 
widget's child rows that resulted in all rows being placed at (0,0) before 
being moved to their correct positions.&nbsp; This was causing the textfield 
flicker when typing in mailcompose.

<li> Added an API to nsIScrollableFrame to enable 
child scrolling views to perform blits while scrolling.&nbsp; Discovered that 
all child views appear not to be blitting, which means any nested scrolling 
view was invalidating itself when scrolling.&nbsp; Applied this patch to the 
tree widget to enable it to finally blit when scrolling.

<li> Improved line scrolling in the tree widget (it's 
actually as fast as 4.7 on my Win32 machine) on all platforms.

<li> Added synchronous painting on row construction to 
reduce tree widget flashing on page scrolls and thumb drags.

<li> Fixed a multiple style context resolution problem 
in the tree widget.&nbsp; All rows and items were resolving their style 
contexts twice during construction.

<li> Implemented finer-grained sharing in the XUL 
cache to provide another decrease in the time to show windows.&nbsp; Most 
large stylesheets (such
 as global.css) were never being cached because they&nbsp; were @imported from
 other stylesheets.&nbsp; Patched the CSS loader to check&nbsp; the XUL cache when
 @importing stylesheets and patched it to place stylesheets&nbsp; that were loaded
 via @import&nbsp; directives into the XUL cache for other windows&nbsp; to reference
 when they load.

<li> Added support for "bindingattached" event 
handlers to XBL.&nbsp; This will enable the toolbars to be re-written (fixing 
numerous toolbar bugs) with a better architecture.

<li> Stubbed out support for "bindingdetached" 
handlers in XBL.

<li> Fixed a bug on a binding swap (through style) that was 
preventing resizing of the sidebar in mailnews.

<li> Patched scrollboxes to fix a bug that prevented 
line scrolling.


<li> Implemented support for
 obtaining a XUL object's&nbsp; x/y position and rect.&nbsp; This is equivalent to
 IE's&nbsp; offsetWidth,offsetHeight,offsetLeft and&nbsp; offsetTop properties
</ul>


<li>
<b>Dan Rosen</b> (dr)
<ul>
<li>Successfully indoctrinated, set up his Linux box (thanks for nothing, IS), and dived into bugfixing.<br>
</ul>

<li><b>Brian Ryner </b>(bryner)

<ul>
<li>
  fixed linux bookmarks crasher (45786)
</ul>
</ul>

<p><b>Lowlights</b>

<p><b>Priorities</b>
<ul>
  
<li>
pinkerton:
<ul>
<li>
39326, distinguish between src and dest in drag/drop
</ul>



<li>
saari:

<ul>
<li>&nbsp; Checkin 'fix in hand' bugs - 37301,35394, 43874,44503 </li>
</ul>



<li>
hyatt:

<ul>
<li> Fix up the XUL cache
<li> Work on resizing columns in tree
<li> Continue to work on performance issues (Quantify 
Quantify Quantify)
</ul>


<li>
evaughan:
<ul>
<li>more vacation
</ul>


<li>
pavlov:

<ul>
<li>
begin working on performance bugs (12761, 16710, 26502)
</ul>


<li>
danm:

<ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46556">46556</a> <nobr>-</nobr>[nsbeta2+]ETA ???crash, nsbeta2Crash after change theme [@ DocumentViewerImpl::MakeWindow]
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=41357"></a>
</ul>


<li>dr:

<ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=36532">36532</a> <nobr>M18</nobr>nsbeta3+nsbeta3Mozilla hangs on the splash screen when using UNC to launch<br>
</ul>



<li>
bryner:

<ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=42109">42109</a> <nobr>-</nobr>nsbeta3+crash, nsbeta3crash at shift-clicking a title in the messages list</li>
<li>
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=42056"></a><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46426">46426 </a><nobr>M18</nobr>nsbeta3+crash, nsbeta3crash deleting and selecting local messages quickly<br>
</ul>
</ul>

<p><b>Dogfood</b> 
<ul>
<li>Zarro Boogs
</ul>

<p><b>Beta Stoppers</b>
<ul>
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46556">46556</a> <nobr><a class="txt-link txt-link-abbreviated" href="mailto:danm@netscape.com">danm@netscape.com</a></nobr><nobr>---</nobr>[nsbeta2+]ETA ???crash, nsbeta2Crash after change theme [@ DocumentViewerImpl::MakeWindow]
<li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=43778">
43778</a> <nobr><a class="txt-link txt-link-abbreviated" href="mailto:hyatt@netscape.com">hyatt@netscape.com</a></nobr><nobr>M17</nobr>[nsbeta2+]ETA 7/28nsbeta2cannot resize sidebar vertically in mailnews<br>
</ul>

<p><b>People</b>
<ul>
<li>Dan Rosen (<a
    href="mailto:dr@netscape.com">dr@netscape.com</a>) is on
    board!
</ul>
	  
	  </blockquote>
	  
<!-- end quote -->

	  
<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>Necko/Imglib</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>July 31</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Gagan Saksena &lt;<a href="mailto:gagan@netscape.com">gagan@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

<p><b>Summary</b>

<ul>
<li>
Highlights
<ul>
<li>
Proxy Auto Config finally in!</li>

<li>
Several bug fixes. Really down to Zarro Boogs for nsbeta2+</li>

<li>
Exceptional work by the whole team to nail the last few cache bugs for
PR2. Kudos to all of gteam!</li>
</ul>

<li>
Lowlights
<ul>
<li>
Huge list of untargetted bugs to go thru. Hopefully resolved by end of
day today!</li>
</ul>
</ul>

<p><b>Highlights</b>

<ul>
<li>
gordon</li>

<ul>
<li>
no status this week.</li>
</ul>

<li>
ruslan</li>

<ul>
<li>
No official status but he has been working on a Win2K only problem which
has been difficult to reproduce. And also helping Neeti out on cache bugs.</li>
</ul>

<li>
neeti</li>

<ul>
<li>
Bugs 40084, 46014 resolved by the collective efforts of the entire Necko
&amp; ImageLib team.- Thanks to Pam, Gordon, Ruslan and Gagan.</li>

<li>
Currently working on bug 40449</li>
</ul>

<li>
pnunn</li>

<ul>
<li>
bug#46049: [probably will be nsbeta2+]&nbsp; fix for 30852 puts added channel
load attribute on loadgroup. fixed by backing out nsLoadGroup.cpp change
on 30852 (since I had approval to fix that.)</li>

<li>
bug#46032: closed/fixed. nsbeta2+. changing imglib load attrib to value
of default channel off of LoadGroup works (instead of the attrib attached
to the LoadGroup).</li>

<li>
bug#46236: closed/WONTFIX. bug is can't display corrupted image.</li>

<li>
bug#41056: closed/fixed. Could not reproduce on Mac OS 8.5.</li>

<li>
bug#40192: closed/fixed. Works ok now.</li>

<li>
bug#42208: closed/wontfix.&nbsp; (user using old internal icon names).</li>

<li>
bug#19283: closed/fixed. png transparency works. when alpha fixed.</li>

<li>
bug#40066: closed as worksforme.</li>

<li>
bug#41627: close/duplicate of #41107.</li>

<li>
bug#45999: closed/fixed. by checkins for #46049.</li>

<li>
bug#22754: closed/fixed. gif crash.</li>

<li>
bug#42290: closed/works for me.</li>

<li>
bug#41630: closed/worksforme.</li>

<li>
bug#42788: closed/works for me.</li>

<li>
GTeam Cache Bugs Extravaganza.</li>

<li>
bug#41107: got to the core of the problem. Animated images are not kept
in image cache and js preloaded images are assumed to be in image cache.</li>
</ul>

<li>
gagan</li>

<ul>
<li>
Proxy Auto Config finally switched on. The last bug was a regression caused
by SOCKs checkin a while back.</li>

<li>
Helped keep the whole team's nsbeta2+ in focus.</li>

<li>
Helped Neeti with her cache bugs.</li>
</ul>
</ul>

<p><b>Lowlights/Issues/Risks/Escalations</b>

<ul>
<li>
None.</li>
</ul>
	  
	  </blockquote>
	  
<!-- end quote -->

	  
	  
<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>MailNews</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>July 31</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Steve Elmer &lt;<a href="mailto:selmer@netscape.com">selmer@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

<p><b>Navin Gupta joins the MailNews team starting today!&nbsp; Welcome
Navin!</b>
<p><b>Thanks! to:</b>
<ul>
<li>
Hyatt for tree scrolling improvements (the number 1 marketing request for
performance)</li>

<li>
The whole team for getting all our beta2 bugs fixed!</li>

<li>
Joe Francis for helping fix autocomplete/IME recently</li>

<li>
Jennifer Glick and Andrew Wooldridge fixed a number of Address Book UI
bugs last week for us.</li>

<li>
thanks again to <a href="mailto:timeless@bemail.org" class="txt-link txt-link-abbreviated">timeless@bemail.org</a>
for fixing more menu stuff</li>

<li>
MScott helped security team implement the ability to download certificates
via the uriloader for beta2.</li>
</ul>

<p><b>Issues</b>
<ul>
<li>
Still minusing bugs in our triage meetings, need to get some plusses soon</li>

<li>
AB Sync server still not reachable due to missing firewall access.&nbsp;
The press around this feature has been cut from beta2, we're trying to
get the feature itself in so we can promote it on the website.</li>
</ul>

<p><b>Vacations &amp; Sabbaticals!</b>
<ul>
<li>
JeffT 7/10-9/5</li>

<li>
SSpitzer 7/5-8/26</li>

<li>
CHuang 7/24-8/11</li>

<li>
Bienvenu 8/17-8/23</li>

<li>
RHP 8/18-8/27</li>
</ul>

<p><b>MailNews</b>
<ul>
<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=nsbeta2%2B&status_whiteboard_type=substring&keywords=&keywords_type=anywords&field0-0-0=assigned_to&type0-0-0=regexp&value0-0-0=ducarroz%7Cchuang%7Cputterman%7Changas%7Csspitzer%7Cmscott%7Crhp%7Cjefft%7Cphil%7Calecf%7Cbienvenu%7Cselmer%7Cgayatrib%7Cracham%7Cvarada%7Ctonyr&field0-1-0=noop&type0-1-0=noop&value0-1-0=&cmdtype=doit&newqueryname=&order=Assignee####2http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&b!u!
g_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=nsbeta2%2B&status_whiteboard_type=substring&keywords=&keywords_type=anywords&field0-0-0=assigned_to&type0-0-0=regexp&value0-0-0=ducarroz%7Cchuang%7Cputterman%7Changas%7Csspitzer%7Cmscott%7Crhp%7Cjefft%7Cphil%7Calecf%7Cbienvenu%7Cselmer%7Cgayatrib%7Cracham%7Cvarada%7Ctonyr&field0-1-0=noop&type0-1-0=noop&value0-1-0=&cmdtype=doit&newqueryname=&order=Assignee####2">nsBeta2+
Bug List</a> (None Left!!!)</li>

<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=RESOLVED&bug_status=VERIFIED&resolution=FIXED&email1=bienvenu%7Calecf%7Crhp%7Cjefft%7Cmscott%7Csspitzer%7Cputterman%7Cchuang%7Cducarroz%7Cgayatrib%7Cracham%7Cvarada&emailtype1=regexp&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfield=resolution&chfieldfrom=7%2F17%2F00&chfieldto=7%2F24%2F00&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">Bugs
closed last week</a> (1 dogfood, 11 nsbeta2+, 25 total)</li>

<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=nsbeta3&keywords_type=anywords&field0-0-0=assigned_to&type0-0-0=regexp&value0-0-0=ducarroz%7Cchuang%7Cputterman%7Changas%7Csspitzer%7Cmscott%7Crhp%7Cjefft%7Cphil%7Calecf%7Cbienvenu%7Cselmer%7Cgayatrib%7Cracham%7Cvarada%7Ctonyr&field0-1-0=status_whiteboard&type0-1-0=notregexp&value0-1-0=perf%7Ccrash%7ccorrectness%7cfootprint%7cpolish&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">nsBeta3
Triage</a> (608 candidates)</li>

<ul>
<li>
Mail Triage is currently minusing bugs and sorting potential plus bugs
into different buckets for prioritization.&nbsp; Mail developers continue
to work on a small number of pre-approved bugs while we figure out what
to give actual plus status.&nbsp; We're planning to have all plus bugs
marked by the end of the week.</li>
</ul>

<li>
Opening the trunk to beta3 is a HUGE relief :-)</li>

<li>
Converting prefs to nsIFile</li>

<li>
Working on embedding vs profiles and prefs</li>

<li>
Completed cleanup the Message compose menus and fixed all the enable/disable
problems.</li>

<li>
Fixed the "quit mailnews and crash" bug</li>

<li>
Fixed last problems with Netcenter Webmail</li>
</ul>


<p><b>Profile Manager</b>
<ul>
<li>Highlights
<ul>
<li>Helped UREG and Franklin teams with following bugs&nbsp;
<ul>
<li>1283 - Activation team to query Franklin multiplexer
<li>1420 - Franklin team to set webmail cookie on receiving request from UREG
<li>1626 - "Login Failed" for webmail acocunt (mailbox is not getting created)&nbsp;
</ul>
<li>These bugs have been fixed. Verified on test servers. Waiting for changes to
get pushed on to
production servers.
</ul>

<li>Lowlights
<ul>
<li>Helping Nisheeth with history bug.

<li>1231 - Go Back screen on Activation error screens is not working

<li>This is a history.back() problem. Helping Nisheeth with his proposed fix. Bug fixing is still in progress.
</ul>

<li>Issues
<ul>
<li>Many (UREG and Franklin) changes getting pushed on to production servers. We
need to see how things shape out.
</ul>

<li>This week
<ul>
<li>Continue to work with UREG and Franklin teams on activation and webmail beta bugs.
<li>Help with other beta2 bugs and verifications.
<li> Start on beta3 Profile Manager bugs.
</ul>
</ul>

<p><b>CCK</b>
<ul>
<li>
highlights
    <ul>
      <li>CCK is out of the water as far as the build
process is concerned.</li>

<li>
fixed several bugs
    <li><a href="http://bugzilla.mozilla.org/buglist.cgi?resolution=FIXED&resolution=INVALID&resolution=WONTFIX&resolution=LATER&resolution=REMIND&resolution=DUPLICATE&resolution=WORKSFORME&resolution=MOVED&email1=varada&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=12&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&product=CCK&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&cmdtype=doit&namedcmd=AllMail&newqueryname=&order=Reuse+same+sort+as+last+time">Resolved
Bugs</a>
</ul>
<li>lowlights
    <ul>
<li> Kyle needs some more time to
come up to speed on cck and we will
not have the infozip (for multiple windows platforms) for Beta2.
    </ul>
    </ul>
	  
	  </blockquote>
	  
<!-- end quote -->

	  
	  
<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>Architecture</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>July 31</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Warren Harris &lt;<a href="mailto:warren@netscape.com">warren@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

<p><b>Issues</b>
<ul>
<li>
Vidur, Waterson, Valeski and I got together on Friday to triage all the
bugs we've filed for embedding. We've uncovered:</li>

<ul>
<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=regexp&keywords=embed%2Carch%2Cmlk%2Cfootprint&keywords_type=anywords&field0-0-0=keywords&type0-0-0=substring&value0-0-0=nsbeta3&field0-1-0=status_whiteboard&type0-1-0=notsubstring&value0-1-0=nsbeta3%2B&cmdtype=doit&order=Reuse+same+sort+as+last+time">107
bugs</a> nominated for nsbeta3</li>

<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=embed%2Carch%2Cfootprint%2Cmlk&keywords_type=anywords&field0-0-0=status_whiteboard&type0-0-0=notsubstring&value0-0-0=nsbeta3%2B&field0-1-0=keywords&type0-1-0=substring&value0-1-0=nsbeta3&field0-2-0=assigned_to&type0-2-0=notregexp&value0-2-0=valeski%7Cconrad%7Cadamlock%7Cdougt%7Crpotts%7Cwarren%7Cvidur%7Cjband%7Crayw%7Cwaterson&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">58
of those</a> fall outside of Jud's and my groups</li>

<li>
<a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=footprint%2Cmlk&keywords_type=anywords&field0-0-0=status_whiteboard&type0-0-0=notsubstring&value0-0-0=nsbeta3%2B&field0-1-0=keywords&type0-1-0=substring&value0-1-0=nsbeta3&field0-2-0=assigned_to&type0-2-0=notregexp&value0-2-0=valeski%7Cconrad%7Cadamlock%7Cdougt%7Crpotts%7Cwarren%7Cvidur%7Cjband%7Crayw%7Cwaterson&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">44</a>
or those are footprint/mlk, <a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=embed%2Carch&keywords_type=anywords&field0-0-0=status_whiteboard&type0-0-0=notsubstring&value0-0-0=nsbeta3%2B&field0-1-0=keywords&type0-1-0=substring&value0-1-0=nsbeta3&field0-2-0=assigned_to&type0-2-0=notregexp&value0-2-0=valeski%7Cconrad%7Cadamlock%7Cdougt%7Crpotts%7Cwarren%7Cvidur%7Cjband%7Crayw%7Cwaterson&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">16</a>
are embed/arch</li>
</ul>

<li>
We feel that to adequately tackle footprint problems
to satisfy the embedding project's needs, it will require a consorted effort
on the part of many CPD engineers. Engineers closes to the code in question
need do the analysis to uncover memory consumption problems and help minimize
footprint. There are currently <a href="http://bugzilla.mozilla.org/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&email1=&emailtype1=substring&emailassigned_to1=1&email2=&emailtype2=substring&emailreporter2=1&bugidtype=include&bug_id=&changedin=&votes=&chfieldfrom=&chfieldto=Now&chfieldvalue=&short_desc=&short_desc_type=substring&long_desc=&long_desc_type=substring&bug_file_loc=&bug_file_loc_type=substring&status_whiteboard=&status_whiteboard_type=substring&keywords=footprint%2Cmlk&keywords_type=anywords&field0-0-0=noop&type0-0-0=noop&value0-0-0=&field0-1-0=keywords&type0-1-0=substring&value0-1-0=nsbeta3&field0-2-0=noop&type0-2-0=noop&value0-2-0=&cmdtype=doit&newqueryname=&order=Reuse+same+sort+as+last+time">77
memory bugs nominated for beta3</a> (the 44 above fall outside of the architecture
and embedding groups) -- but these are just the tip of the iceberg, and
we still have no data on how these particular bugs will affect overall
memory consumption. We need to raise the priority of footprint work throughout
CPD.</li>

<li>
On top of this memory footprint problem are numerous
architectural cleanup tasks which seem to be below the seamonkey radar.
These tasks serve 2 purposes:</li>

<ul>
<li>
stabilize APIs for embedding,</li>

<li>
buy us insurance post-seamonkey FCS so that developers
wishing to extend mozilla don't come to depend on every API we've got (this
is a major problem when all your source code is publicly visible).</li>
</ul>

<li>
We should decide that the embedding goal is everyone's
priority, or we shouldn't do it at all. It's clear from this data that
it goes well beyond Jud's group.</li>
</ul>

<p><b>Highlights</b>
<ul>
<li>
Edward Kandrot starts this week and is in orientation today. He will begin
helping us with footprint and performance issues.</li>

<li>
Big speedups for large documents by Chris Waterson and David Baron (see
below).</li>
</ul>

<p><b>Engineering Status</b>
<ul>
<li>
waterson</li>

<ul>
<li>
Wrapped up M17/nsbeta2 bug 46013 (no themes on startup), which ended up
being caused by two different faults. Decoupled RDF from layout (yay!)
and fixed refcounting &amp; teardown in the chrome registry's datasource.</li>

<li>
Landed nsTextRun evisceration; caused some regressions, but I think those
are dealt with now. This takes a big chunk out of the "slow on long text
docs" bugs; however, we're still about 2x slower than 4.x and IE on long,
flat text &amp; HTML (down from 3x to 4x slower). (N.B. that dbaron's fixes
to GetLinkState() are another big contributor to this speedup.)</li>

<li>
Landed pent-up M18/nsbeta3 work; mostly fixes to RDF and XUL templates,
some minor layout correctness bugs.</li>

<li>
Moved nsFixedSizeAllocator into xpcom/ds (from RDF) for use by harishd
for parser node arena allocation. (Also, alecf &amp; bienvenu had expressed
interest.)</li>
</ul>

<li>
vidur</li>

<ul>
<li>
Attended footprint meeting and sent out active footprint/performance task
list.</li>

<li>
Ongoing API Review work.</li>

<li>
Set up <A HREF="http://www.mozilla.org/xmlextras">http://www.mozilla.org/xmlextras</A>. A bit of minor bug fixing.</li>

<li>
[Lots of Netscape internal meetings]</li>
</ul>

<li>
rayw</li>

<ul>
<li>
Made progress on Views and Formatting proposal, and clarified the issues
for the teleconference and face-to-face meeting about it.</li>

<li>
Spent a lot of time working on the bug lists, working towards resolutions
on a number of xpcom fixes.&nbsp; No actual code changes were rolled out.</li>

<li>
Spent more time researching and discussing Component Manager issues. I
would rather go slow than do the wrong thing at this point.</li>

<li>
Will log more bugs this weekend and try to come up with a reasonable schedule
for beta3 work, and a last pass at the APIs, with descriptions.</li>
</ul>

<li>
waldemar</li>

<ul>
<li>
<i>away again</i></li>
</ul>

<li>
rpotts</li>

<ul>
<li>
<i>no status (2 more weeks of vacation)</i></li>
</ul>

<li>
jband</li>

<ul>
<li>
Fixed some bugs.</li>

<li>
Did some investigation of footprint bugs.</li>
</ul>

<li>
warren</li>

<ul>
<li>
Worked on getting jar process running on the Mac. Need to do a little more
debugging.</li>

<li>
Jarring is working on Windows, not checked in. Linux needs a little more
work too.</li>

<li>
Working on reworking streams interfaces to solve problems for embedding.</li>
</ul>

<li>
dprice</li>

<ul>
<li>
Got sucked into 4.7 on Thursday and Friday.</li>
</ul>

<li>
scc</li>

<ul>
<li>
bug #46899: fixed/checked-in changes to ns[C]String::SetCapacity(0) to
discard storage</li>

<li>
bug #46898: verified/checked-in for jag's nsCString::ToInteger patch</li>

<li>
bugs #28221, #46738: looked at Doug Turner's string profiling data (here
are copies for people outside the firewall: Book1.txt, Book2.txt) but I
think we need more data before we can draw any meaty conclusions</li>

<li>
worked with David Boswell on Mozilla Developer Day schedule, speakers,
and preparations</li>

<li>
Posted the slides from my O'Reilly presentation and hooked them up to the
Mozilla at the O'Reilly OSS Convention page</li>

<li>
updated distribution instructions for Mac with details of BuildID generation
at Dawn Endico's request</li>

<li>
fixed the nsCOMPtr User's Guide and a couple of other documents to have
the cool horizontal menu</li>
</ul>
</ul>
	  
	  </blockquote>
	  
<!-- end quote -->

	  
	  
<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>Footprint/Performance</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>August 3</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Vidur Apparao &lt;<a href="mailto:vidur@netscape.com">vidur@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

<br>1) Parser token and string usage
<br><b>Description:</b> The parser currently heap allocates small CToken
instances and keeps them on a recycler list "for performance reasons".
The recycler list is currently unbounded in size. Text tokens also use
nsStrings to store copies of their text data - also heap allocated. The
overall memory usage shows up high in bloatblame logs. The working set
memory usage also stays pretty high because of the unbounded token recycler.
<br><b>Module owner:</b> <a href="mailto:harishd@netscape.com">harishd@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:harishd@netscape.com">harishd@netscape.com</a>,
<a href="mailto:scc@netscape.com">scc@netscape.com</a>,
<a href="mailto:vidur@netscape.com">vidur@netscape.com</a>
<br><b>Bugs:</b> <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46702">46702</a>
<br><b>Status:</b>
<br>7/28 - Harish is looking at arena allocating the token objects. Scott
is working on a segmented string implementation which
<br>can deal with substrings that share the underlying buffer for the token
strings.
<br>8/2 - Harish switched token allocation to be arena-based. Needs help
from waterson for analysis. Scott is working on a segmented string implementation
which can deal with substrings that share the underlying buffer for the
token strings.
<p>2) "Super global" for JavaScript
<br><b>Description:</b> Currently each DocShell has a script context and
script global object associated with it. For each script global object,
we initialize the JavaScript core classes and some DOM classes <i>per document</i>
in the shell. This redundancy has both performance and bloat repercussions.
The thought is that we might be able to have "super global" object on which
the core classes are defined. This would be the JS prototype of the per
shell script global.
<br><b>Module owner:</b> <a href="mailto:jst@netscape.com">jst@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:jband@netscape.com">jband@netscape.com</a>,
<a href="mailto:vidur@netscape.com">vidur@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46703">46703</a>
<br><b>Status:</b>
<br>7/28 - JBand to determine the memory used by the core classes. JBand,
Vidur and Johnny to determine what could break
<br>with a super global.
<br>8/2 - JBand did some analysis. Initializing the core classes is around
87k, per window, per document. This is bigger than one would expect so
JBand will do more analysis.
<p>3) Image Library
<br><b>Description:</b> We have anecdotal information that the image memory
cache (not the network memory cache) is not being hit very often. We also
don't know if the size of the cache is bounded and if it a memory flush
listener.
<br><b>Module owner:</b> <a href="mailto:pnunn@netscape.com">pnunn@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:syd@netscape.com">syd@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46704">46704</a>
<br><b>Status:</b>
<br>7/28 - Syd to work with Pam to analyze image memory cache usage and
size limits.
<br>8/2 - Syd met with Pnunn to get an introduction to image lib. They
put some debug logging into the image lib and believes that the cache is
being used correctly for chrome images. Syd to do more analysis with chrome
and content images.
<br>The image lib cache size is hardcoded now - it should be controllable
via a pref.
<p>4) CSS Loader
<br><b>Description:</b> Analysis from dougt@netscape.com shows that we
are loading the same CSS files from disk at startup time redundantly. The
<a href="http://lxr.mozilla.org/seamonkey/source/layout/html/style/public/nsICSSLoader.h">CSS
Loader</a> should be caching compiled CSS style sheets so that we don't
hit the disk. Chris' suspicion is that we aren't hitting the cache for
@imported stylesheets. Why are we loading the CSS files multiple times?
If the cache does exist, is it bounded? It needs to be a memory flush listener.
<br><b>Module owner:</b> <a href="mailto:pierre@netscape.com">pierre@netscape.com</a>,
<a href="mailto:attinasi@netscape.com">attinasi@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:pierre@netscape.com">pierre@netscape.com</a>
<br><b>Bugs:</b> <strike><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46548">46548</a></strike>,
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=29370">29370</a>
<br><b>Status:</b>
<br>7/28 - Pierre to investigate why we are loading the CSS files multiple
times and not hitting the CSS Loader cache.
<br>8/2 - Hyatt says CSSLoaderCache is only per document. He has fixed
the chrome cache to cache across documents for chrome. Still need to look
at <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=29370">29370</a>.
<br>&nbsp;
<p>5) When to flush memory
<br><b>Description:</b> When should the memory flushers be run? The current
thinking is to have a combination of a timer and an IsLowMemory predicate
(requires hooking into malloc/free, new/delete for each platform) to determine
when to run them.
<br><b>Task owner:</b> <a href="mailto:warren@netscape.com">warren@netscape.com</a>,
<a href="mailto:wade@netscape.com">wade@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=44352">44352</a>
<br><b>Status:</b>
<br>7/28 - Wade to investigate implementing the IsLowMemory perdicate.
<br>8/2 - Wade found a utility to get memory information on Linux, but
Warren didn't have luck using it. Warren and Wade to investigate more.
<p>6) .xpt file loading
<br><b>Description:</b> Currently we're loading more type library information
than we necessarily use because of the way xpt files are created as part
of the module build process. Better factoring of the xpt files could result
in less loading at startup time and less memory usage. Also, the type library
info needs to be a memory flush listener.
<br><b>Module owner:</b> <a href="mailto:jband@netscape.com">jband@netscape.com</a>,
<a href="mailto:mccabe@netscape.com">mccabe@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:jband@netscape.com">jband@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46707">46707</a>
<br><b>Status:</b>
<br>7/28 - JBand to investigate either better factoring of typelibs in
xpt files or the idea of putting all of the individual small xpt files
into a single zip file.
<br>8/2 - JBand found that Warren's idea of putting everything into a zip
file is not slower. JBand to look into playing with the build system to
switch the packaging mechanism.
<p>7) Networking memory/disk cache
<br><b>Description:</b> We have anecdotal information that we're not hitting
the networking memory/disk caches that often. We need to do analysis of
cache hit rates.
<br><b>Module owner:</b> <a href="mailto:neeti@netscape.com">neeti@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:gagan@netscape.com">gagan@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46707">46708</a>
<br><b>Status:</b>
<br>7/28 - Gagan and Neeti to do analysis.
<br>8/2 - Gagan found that some cache logic sits in HTTP and would like
to see if it's possible to move the logic into generic code so that it
can be used by other protocols. Image library might want to use cache manager.
<br>&nbsp;
<p>8) Component registry loading
<br><b>Description:</b> We load and inflate the component registry at startup
time. We've heard anecdotally that the in-memory cost of the component
registry is 1-3 megs. This hit could become worse if/when we implement
RayW's new scheme for prog IDs. Need to see if we can use a better scheme
to reduce bloat.
<br><b>Module owner:</b> <a href="mailto:rayw@netscape.com">rayw@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:waterson@netscape.com">waterson@netscape.com</a>,
<a href="mailto:dougt@netscape.com">dougt@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46709">46709</a>
<br><b>Status:</b>
<br>7/28 - Chris and Doug to do analysis of memory usage so we have real
numbers.
<br>8/2 - Doug found that we're hitting the disk too often in reading the
component registry. There's a lot of seeking going on. One option in dealing
with this is reading the entire file into memory. Another is to explore
a different file format. Warren to look into this.
<br>Need to do more analysis on the in-memory component manger representation
to see if we can get it more compact.
<p>9) String bundles
<br><b>Description:</b> <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/ds/nsHashtable.h#234">StringKey</a>s
used by string bundle hashtables have showed up fairly high on the bloatblame
list. Each StringKey holds an AutoString which seems wasteful for the keys
in the hashtable itself (the AutoStrings are useful during lookup when
the key is stack allocated). We need to reduce the size of StringKeys.
Also, could string bundles be arena allocated?
<br><b>Module owner:</b>&nbsp; <a href="mailto:tao@netscape.com">tao@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:warren@netscape.com">warren@netscape.com</a>,
<a href="mailto:alecf@flett.org">alecf@flett.org</a>
<br><b>Bugs: </b>string key/hashtable issue:&nbsp; <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46711">46711</a>
<br>string bundles: <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46712">46712</a>
<br><b>Status:</b>
<br>7/28 - Warren to look into alternatives for StringKeys and string bundle
allocation.
<br>8/2 - Warren to look into putting a bit into StringKeys to deal with
the case where the key doesn't own its string - it points to the static
version or an arena allocated version of a string. Arena allocation should
happen for some of the hashtables that use StringKey. Warren to also look
at whether double-byte string keys are always necessary.
<p>10) Bloatblame FE
<br><b>Description:</b> Currently bloatblame is a post-processing tool.
We believe we can get much more useful information if we can get more real-time
data of module memory usage. Brendan has been working on the back-end of
the real-time bloatblame. Wade and Pavlov are both looking into a front-end
to display/graph the data.
<br><b>Module owner:</b> <a href="mailto:brendan@netscape.com">brendan@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:wade@netscape.com">wade@netscape.com</a>,
<a href="mailto:pavlov@netscape.com">pavlov@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46714">46714</a>
<br><b>Status:</b>
<br>7/28 - Brendan is on vacation and we believe that the currently checked
in version does not implement all the back-end changes necessary. We may
need to wait till Brendan returns.
<br>8/2 - No progress.
<p>11) Chrome cache analysis
<br><b>Description:</b> Dougt's analysis about redundant file loading at
startup time shows that we're also loading the same JS chrome file multiple
times. We need to figure out why the chrome cache isn't sharing compiled
versions of the JavaScript.
<br><b>Module owner:</b> <a href="mailto:waterson@netscape.com">waterson@netscape.com</a>
<br><b>Task owner:</b> <a href="mailto:waterson@netscape.com">waterson@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46129">46129</a>
<br><b>Status:</b>
<br>7/28 - Chris to determine what's happening here
<br>8/2 - Caching is already done per document. Hyatt to look into caching
across documents.
<p>12) Mail/New bloat analysis
<br><b>Description:</b> Does mail/news have bloat analysis tasks that should
go on this list?
<br><b>Module owner:</b> <a href="mailto:bienvenu@netscape.com">bienvenu@netscape.com</a>,
<a href="mailto:alecf@flett.org">alecf@flett.org</a>
<br><b>Task owner:</b> <a href="mailto:waterson@netscape.com">waterson@netscape.com</a>
<br><b>Bugs: </b><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=46716">46716</a>
<br><b>Status:</b>
<br>7/28 - Chris to get David or Alec to come to the meeting and send us
a list of tasks.
<br>8/2 - Chris: Every message is recreating a mime parser - 300-400k of
bloat over ~2000 messages. Bienvenu, Alec, etc. are working on that.

	  </blockquote>
	  
<!-- end quote -->

	  
	  
<!-- begin individual module header -->

	  <table border=0 cellspacing=0 cellpadding=5 width="100%">
	    <tr bgcolor="#99CC99"> 
	      <td>
		<b>Cache</b><br>
	      </td>
	      <td width="300"> 
		<div align="RIGHT"><b>August 3</b></div>
	      </td>
	    <tr> 
	      <td colspan="2"><font size="-1">Submitted by
	      Gagan Saksena &lt;<a href="mailto:gagan@netscape.com">gagan@netscape.com</a>&gt;</font></td>
	  </table>

<!-- end individual module header -->
	  
<!-- start quote -->

	  <blockquote>

The necko group met today to work on the cache related issues with this agenda
in mind-
<OL>
<LI><strike>Wrap up nsbeta2+ if any.</strike>
<LI>Identify current problems with the cache. 
<LI>Solve these problems or have people assigned to be working on solving them.
<LI>Make sure our solutions are in line for beta3 schedule. 
</OL>
<P>
As a result of the discussion we had the following problems with the existing
cache were identified-
<OL>
<LI><B> Cache entries getting updated only in OnEnd</B> This should mostly be
fixed now, but was left on the list to make sure we covered it. 
<LI><B> Cache Corruption</B> Using the cache for a while results in nasty
database corruption which has manifested itself in crashing the app to freezing
up on the Mac. 
<LI><B> IMS problem</B> This is the problem with bugzilla pages not getting
updated correctly because our logic for checking the cache "once per session"
was busted. This is fixed as well. <SPAN CLASS="bugs">Bug 46014</span>.  
<LI><B> Caching when we shouldn't</B> There have been known cases (specifically
on ETrade) when we get a "Pragma: no-cache" and we'd still land up caching the
page. 
<LI><B> Delete/Replace cache entries</B> The current cache login using the cache
entry that was found thru <TT>GetCachedNetData</TT> call to replace and update
it with a new one. This entry is also marked inUse and so we have problems
resetting it. 
<LI><B> Testing (about:cache)</B> Most of these cache bugs would be really easy
to detect if we had a reliable robust test suite that we could run thru each
time the cache code changed. Tever adds that about:cache used to be a reliable
way for QA to verify that a cache entry was available in the cache. This is not
implemented in Mozilla. 
<LI><B> Multithreading issues (simultaneous access)</B> We currently have no
mechanism to safely provide simultaneous access to cache. 
<LI><B> Versioning cache entries</B> The cache data itself has no versioning
mechanism, this means that each time when we build/upgrade the data structure
for cache entries, if someone has older cache sitting around we have a
guaranteed crash or a hang. 
<LI><B> Cache checks for replacement policies, cache headers, etc.</B> Several
existing bugs indicate that we may not be checking correctly for replacement
policies, the load group flags that are provided on the channel when a request
comes thru. We also have cases of incorrect response header handling (like
Pragma no-cache, etc.)
<LI><B> Cache logic inside HTTP</B> A significant portion of the actual cache
logic sits in the HTTP code (nsHTTPChannel::CheckCache,  
nsHTTPChannel::CacheReceivedResponse among others.) This makes it difficult to
use cache for anything else but HTTP. Besides adding the bloat to the actual
HTTP logic. 
<LI><B> Preferences are messed up.</B> Several cache preferences are not
read/followed correctly. 
</OL>

After about an hour of discussion the following solutions/tasks were determined-
<OL>
<LI> Verify that the replacement policies are correct, cache headers are being
honored, and preferences work correctly. Make sure we don't cache when we
shouldn't. No duplicate caching (memory as well as disk) As a safe measure we
may even consider no caching when there is no content_length associated with a
transaction. <SPAN CLASS="bugs">Bug 47400</SPAN> <SPAN CLASS="owners">(neeti,
gagan, tever)</SPAN> [Solves 9, 11]
<LI> Add logging to cache, implement about:cache <SPAN CLASS="bugs">Bug
21095</SPAN> <SPAN CLASS="owners">(gagan, neeti, tever)</SPAN> [Solves 6]
<LI> Build a robust cache test suite <SPAN CLASS="bugs">Bug 47401</SPAN> <SPAN CLASS="owners">(tever, gagan, neeti)</SPAN> [Solves everyone's problems
and provides a way to detect them early on]
<LI> Break GetCachedNetData into existing entry and new one.<SPAN
CLASS="bugs">Bug 47403</SPAN> <SPAN CLASS="owners">(neeti, ruslan,
gordon)</SPAN> [Solves 1, 2, 4, 5]
<LI> Move cache out of HTTP <SPAN CLASS="bugs">Bug 47405</SPAN> <SPAN
CLASS="owners">(gordon, ruslan)</SPAN> [Solves 10, addresses 7]
<LI> Add reader/writer monitors/locks. <SPAN CLASS="bugs">Bug 47406</SPAN> <SPAN
CLASS="owners">(ruslan, gordon)</SPAN> [Solves 7]
<LI> Add a version file to verify correct versioning. <SPAN CLASS="bugs">Bug
47408</SPAN> <SPAN CLASS="owners">(neeti, gagan)</SPAN> [Solves 8]
</OL>
Owners of these bugs, please add more details since I only filed these bugs with
respect to the discussion we had. Several of these bugs require a lot more info
before the nsbeta3 nominations can be resolved. 
	  
	  </blockquote>
	  
<!-- end quote -->

	  
	  <p align="center"><a href="./2000-07-29.html"><b>Previous Updates</b></a> 
	 </p>

	</td>
 </tr>
 <tr>
	<td colspan=2 valign="TOP"> </td>
 </tr>
</table>






<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified April 22,  2003</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/status/2000-08-04.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
