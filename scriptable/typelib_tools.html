<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">

    <title>Tools for Typelibs - xpt_dump & xpt_link</title>
  <script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">


  
  
  
    <p align="LEFT"><b>
	<font size="+3">Tools for Typelibs - xpt_dump & xpt_link</font>
	<br clear="all">
        by Chris Cooper
        &lt<A HREF="mailto:coop@netscape.com">coop@netscape.com</A>&gt;</b>
      <br clear="all">
    
    <p>Now that <a href="./xpidl/index.html">XPIDL</a> is capable of 
      generating binary type library files (typelibs, or .xpt files) 
      from IDL code, there is a serious need for tools to manipulate 
      these files. Currently, there are two such tools, 
      <b><a href="#xpt_dump">xpt_dump</a></b>, 
      which dumps the contents of a typelib to the screen, and 
      <b><a href="#xpt_link">xpt_link</a></b>, 
      which links multiple typelib files together into
      <em>ONE BIG TYPELIB</em>. Both tools reside in the 
      <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/">mozilla/xpcom/typelib/xpt/tools/</a> directory.</p>
      

    <p><b>Get there quick:</b>
    <ul>
      <li><a href="#xpt_dump">xpt_dump</a></li>
      <ul>
        <li><a href="#xpt_dump_source">Source Code</a></li>
        <li><a href="#xpt_dump_deps">Dependencies</a></li>
        <li><a href="#xpt_dump_synt">Command Syntax</a></li>
        <li><a href="#xpt_dump_samp">Sample Output</a></li>
      </ul>
      <li><a href="#xpt_link">xpt_link</a></li>
      <ul>
        <li><a href="#xpt_link_source">Source Code</a></li>
        <li><a href="#xpt_link_deps">Dependencies</a></li>
        <li><a href="#xpt_link_synt">Command Syntax</a></li>
        <li><a href="#xpt_link_samp">Sample Output</a></li>
      </ul>
    </ul>
  </p>         

    <hr size="5" width="90%">

    <p><b><font size="+1">
	  <a name="xpt_dump">xpt_dump - the typelib dumper</a></font></b></p> 

    <p>xpt_dump is a tool for reading binary-format typelib files and
    dumping their contents to the screen.</p>

    <p><b><a name="xpt_dump_source">Source Code:</a></b></p>

    <dl>
      <dd><p><a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/xpt_dump.c">mozilla/xpcom/typelib/xpt/tools/xpt_dump.c</a></p></dd>
    </dl>

    <p><b><a name="xpt_dump_deps">Dependencies:</a></b></p>

    <dl>
      <dd><p>xpt_dump requires both 
	  <a href="../docs/refList/refNSPR/printro.html">nspr</a> 
	  (<b>N</b>et<b>S</b>cape's <b>P</b>ortable <b>R</b>untime, <i>headers only</i>) and
	  <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/libxpt/">libxpt</a> 
	  (library of functions for handling type library files).</p></dd>
    </dl>

    <p><b><a name="xpt_dump_synt">Command Syntax:</a></b></p>
    
    <dl>
      <dd><p><code>Usage: xpt_dump [-v] filename.xpt
	    <br clear="all">
	    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-v verbose mode</code>
	  <br clear="all"><br clear="all">
	  As is visible above, xpt_dump takes one argument, filename.xpt, 
	  which must be a valid typelib file. xpt_dump can also take one 
	  option flag, <b>-v</b> for verbose mode (which is disabled by
	  default). Sample output for both verbose and non-verbose modes
	  are shown below.</p></dd>
    </dl>

    <p><b><a name="xpt_dump_samp">Sample Output:</a></b></p>
    
    <dl>
      <dd><p>
	  <table width="300"
	    border="0"
	    cellpadding="5"
	    cellspacing="5"
	    rows="8"
	    cols="1">
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line: (normal)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_dump nsISupports.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (normal)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>
Header:
   Major version:         1
   Minor version:         0
   Number of interfaces:  1
   Annotations:
      Annotation #0:
         Creator:      xpidl 0.99.1
         Private Data: I should put something here.
 
Interface Directory:
   - ::nsISupports (00000000-0000-0000-c000-000000000046):
      Methods:
         uint32 QueryInterface(in void *, out void *);
     H   uint32 AddRef();
     H   uint32 Release();
      Constants:
         No Constants                
		</pre></td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line: (verbose)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_dump -v nsISupports.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (verbose)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>
Header:
   Magic beans:           5850434f4d0a547970654c69620d0a1a
                          PASSED
   Major version:         1
   Minor version:         0
   Number of interfaces:  1
   File length:           0
   Data pool offset:      105

   Annotations:
      Annotation #0 is private.
         Creator:      xpidl 0.99.1
         Private Data: I should put something here.
      Annotation #0 is the last annotation.

Interface Directory:
   Interface #0:
      IID:                             00000000-0000-0000-c000-000000000046
      Name:                            nsISupports
      Namespace:                       none
      Address of interface descriptor: 0x804cbf0
      Descriptor:
         # of Method Descriptors:                   3
            Method #0:
               Name:             QueryInterface
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        FALSE
               # of arguments:   2
               Parameter Descriptors:
                  Parameter #0:
                     In Param?   TRUE
                     Out Param?  FALSE
                     Retval?     FALSE
                     Type Descriptor:
                        Is Pointer?        TRUE
                        Is Unique Pointer? FALSE
                        Is Reference?      FALSE
                        Tag:               13
                  Parameter #1:
                     In Param?   FALSE
                     Out Param?  TRUE
                     Retval?     FALSE
                     Type Descriptor:
                        Is Pointer?        TRUE
                        Is Unique Pointer? FALSE
                        Is Reference?      FALSE
                        Tag:               13
               Result:
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     FALSE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
            Method #1:
               Name:             AddRef
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        TRUE
               # of arguments:   0
               Parameter Descriptors:
               Result:
XXX
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     TRUE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
            Method #2:
               Name:             Release
               Is Getter?        FALSE
               Is Setter?        FALSE
               Is Varargs?       FALSE
               Is Constructor?   FALSE
               Is Hidden?        TRUE
               # of arguments:   0
               Parameter Descriptors:
               Result:
XXX
                  In Param?   FALSE
                  Out Param?  FALSE
                  Retval?     TRUE
                  Type Descriptor:
                     Is Pointer?        FALSE
                     Is Unique Pointer? FALSE
                     Is Reference?      FALSE
                     Tag:               6
         Constants:
            No Constants

WARNING: ParamDescriptors are present with bad in/out/retval flag information.
These have been marked with 'XXX'.
Remember, retval params should always be marked as out!
	      </pre></td>
	    </tr>
	  </table>      
	</p></dd>
    </dl>
    
    <hr size="5" width="90%">

    <p><b><font size="+1">
	  <a name="xpt_link">xpt_link - the typelib linker</a></font></b></p> 

    <p>xpt_link is a tool for linking together multiple binary-format 
      typelib files. The result is <em>ONE BIG TYPELIB</em> containing
      a single, resolved (in most cases) entry for each interface that
      appeared in the original typelib files.</p>

    <p><b><a name="xpt_link_source">Source Code:</a></b></p>

    <dl>
      <dd><p><a href="http://lxr.mozilla.org/seamonkey/source/xpcom/typelib/xpt/tools/xpt_link.c">mozilla/xpcom/typelib/xpt/tools/xpt_link.c</a></p></dd>
    </dl>

    <p><b><a name="xpt_link_deps">Dependencies:</a></b></p>

    <dl>
      <dd><p>xpt_link requires both 
	  <a href="../docs/refList/refNSPR/printro.html">nspr</a> 
	  (<b>N</b>et<b>S</b>cape's <b>P</b>ortable <b>R</b>untime, <i>headers only</i>) and 
	  <a href="http://lxr.mozilla.org/seamonkey/source/xpcom/libxpt/">libxpt</a> 
	  (library of functions for handling type library files).</p></dd>
    </dl>

    <p><b><a name="xpt_link_synt">Command Syntax:</a></b>

    <dl>
      <dd><p><code>Usage: xpt_link outfile file1.xpt file2.xpt ...
	    <br clear="all">
	    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Links multiple typelib files into one outfile</code>
	  <br clear="all"><br clear="all">
	  As is visible above, xpt_link takes at least two arguments. The 
	  first argument is the filename of the linked typelib file to be 
	  written. The second, third, ...xth arguments are the filenames of
	  valid typelib files. Wildcards (e.g. *.xpt) are acceptable as the
	  second (or any following) argument.</p></dd>
    </dl>

    <p><b><a name="xpt_link_samp">Sample Output:</a></b>

    <dl>
      <dd><p>
	  <table width="300"
	    border="0"
	    cellpadding="5"
	    cellspacing="5"
	    rows="6"
	    cols="1">
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Command Line:</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap>
		<pre>[coop@ivory idl]$ xpt_link linked.xpt *.xpt</pre>
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (if successful)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td><pre>File written: linked.xpt</pre>
		<a href="./dump_of_linked_xpt.txt">View a dump of 
		  linked.xpt</a> created by linking all of 
		the idl files (compiled to typelibs, of course) in the
		<a href="http://lxr.mozilla.org/seamonkey/source/xpcom/idl/">mozilla/xpcom/idl/</a> directory.
	      </td>
	    </tr>
	    <tr bgcolor="#BCC0D3">
	      <td nowrap>
		<strong>Output: (for a particular failure condition)</strong>
	      </td>
	    </tr>
	    <tr>
	      <td nowrap><pre>FATAL ERROR:
Duplicate IID detected (adfb3740-aa57-11d2-b7ed-00805f05ffa5) in
interface ::nsIMsgHost from mailnews_base.xpt
and
interface ::nsINNTPHost from mailnews_news.xpt</pre></td>
	    </tr>
	    
	  </table>
      </p></dd>
    </dl>

    <hr>
    <address><a href="mailto:coop@netscape.com">Chris Cooper</a></address>
<!-- Created: Thu Mar 11 00:23:00 EST 1999 -->
<!-- hhmts start -->
Last modified: Tue Mar 30 19:45:05 EST 1999
<!-- hhmts end -->
<br>Slight fixes by <a href="mailto:mike+mozilla@meer.net">Mike McCabe</a>, Fri May 28 03:52:08 PDT 1999

  


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified May 29,  2002</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/scriptable/typelib_tools.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
