<HTML>
<HEAD>
   <TITLE>The URL_Struct</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">

<H1>
URL_Struct</H1>
This document describes the URL_Struct in Netlib for the 331 release. The
URL_Struct is the single mechanism of storing URL specific data and gets
used at several places in the source. This includes everything from user
information to header fields related to a specific connection in process.

<P>There are a significant set of items in the URL_Struct that don't belong
to this struct, or are obsolete, or redundant. Hopefully things will improve
in the new world order.

<P>Any questions/comments/corrections- <A HREF="mailto:gagan@netscape.com?subject=URL_Struct">mail
me</A>.
<BR>
<HR SIZE=0 WIDTH="100%">
<TABLE BORDER CELLPADDING=5 WIDTH="100%" BGCOLOR="#CCCCCC" >
<TR BGCOLOR="#000000">
<TD><FONT COLOR="#FFFFFF">Type</FONT></TD>

<TD><FONT COLOR="#FFFFFF">Name</FONT></TD>

<TD><FONT COLOR="#FFFFFF">Description</FONT></TD>
</TR>

<TR>
<TD><TT>XP_Bool* </TT></TD>

<TD><TT>add_crlf</TT></TD>

<TD>For <TT>files_to_post</TT>- whether or not to convert line endings
to CRLF. </TD>
</TR>

<TR>
<TD><TT>char*</TT></TD>

<TD><TT>address</TT></TD>

<TD>The URL part.</TD>
</TR>

<TR>
<TD><TT>NET_AllHeaders</TT></TD>

<TD><TT>all_headers</TT></TD>

<TD>All HTTP headers. </TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>authenticate</TT></TD>

<TD>Authentication scheme. </TD>
</TR>

<TR>
<TD><TT>uint32 </TT></TD>

<TD><TT>auto_scroll</TT></TD>

<TD>Set this if you want the window to autoscroll to the bottom at all
times The value represents the number of lines to buffer.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>boundary</TT></TD>

<TD>Multipart message boundary.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>cache_file</TT></TD>

<TD>If not null- it contains the local filename of the cached copy.</TD>
</TR>

<TR>
<TD><TT>struct CERTCertificateStr*</TT></TD>

<TD><TT>certificate</TT></TD>

<TD>Server's certificate.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>charset</TT></TD>

<TD>Charset of the data.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>content_encoding</TT></TD>

<TD>Encoding of the incoming data.</TD>
</TR>

<TR>
<TD><TT>int32 </TT></TD>

<TD><TT>content_length</TT></TD>

<TD>Response data length.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>content_name </TT></TD>

<TD>Passed in name for the incoming object.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>content_type</TT></TD>

<TD>Content Type of the incoming data.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>destination</TT></TD>

<TD>The other URL for COPY and MOVE methods.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>error_msg</TT></TD>

<TD>Error message- explaing what went wrong.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>etag</TT></TD>

<TD>HTTP/1.1 Etag.</TD>
</TR>

<TR>
<TD><TT>time_t </TT></TD>

<TD><TT>expires</TT></TD>

<TD>A computed value for the equivalent of "Expires" header.</TD>
</TR>

<TR>
<TD><TT>void* </TT></TD>

<TD><TT>fe_data</TT></TD>

<TD>Front end specific data.</TD>
</TR>

<TR>
<TD><TT>char** </TT></TD>

<TD><TT>files_to_post</TT></TD>

<TD>Zero terminated array of files (as char*) that need to be posted. </TD>
</TR>

<TR>
<TD><TT>NET_ReloadMethod </TT></TD>

<TD><TT>force_reload</TT></TD>

<TD>Normal or Super reload. Corresponds to Reload or Shift-Reload.</TD>
</TR>

<TR>
<TD><TT>uint32 </TT></TD>

<TD><TT>high_range</TT></TD>

<TD>See also <TT>low_range</TT>. These range tags represent the byte offsets
that this URL contains. If <TT>high_range</TT> is non-zero then the data
in the response represents just a subset of the URL.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>history_num</TT></TD>

<TD>Add this URL to history or not. Default = 1 (true)</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>http_headers</TT></TD>

<TD>HTTP Headers passed to support proxying.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>IPAddressString</TT></TD>

<TD>A resolved IPAddress for the hostname in the address.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>key_cipher</TT></TD>

<TD>Security specific information.</TD>
</TR>

<TR>
<TD><TT>char*</TT></TD>

<TD><TT>key_issuer</TT></TD>

<TD>Obsolete stuff.</TD>
</TR>

<TR>
<TD><TT>int</TT></TD>

<TD><TT>key_secret_size</TT></TD>

<TD>Security specific information.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>key_size</TT></TD>

<TD>Security specific information.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>key_subject</TT></TD>

<TD>Obsolete stuff.</TD>
</TR>

<TR>
<TD><TT>time_t </TT></TD>

<TD><TT>last_modified</TT></TD>

<TD>Value of "Last Modified" HTTP header.</TD>
</TR>

<TR>
<TD><TT>uint32 </TT></TD>

<TD><TT>low_range</TT></TD>

<TD>Also see <TT>high_range</TT>. These range tags represent the byte offsets
that this URL contains. If <TT>high_range</TT> is non-zero then the data
in the response represents just a subset of the URL.</TD>
</TR>

<TR>
<TD><TT>net_Memory_CacheObject* </TT></TD>

<TD><TT>memory_copy</TT></TD>

<TD>If not null, it contains the info for a memory copy of the data. </TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>method</TT></TD>

<TD>The method for this URL. GET, POST, etc.</TD>
</TR>

<TR>
<TD><TT>void* </TT></TD>

<TD><TT>ncapi_data</TT></TD>

<TD>URL specific NCAPI data- only on Windows/OS2.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>origin_url</TT></TD>

<TD>Origin referer of a JS URL.</TD>
</TR>

<TR>
<TD><TT>void* </TT></TD>

<TD><TT>owner_data</TT></TD>

<TD>Private data for whoever created this URL_Struct.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>owner_id</TT></TD>

<TD>Unique id for each library. </TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>page_services_url</TT></TD>

<TD>A URL that is associated with the Page Services feature. </TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>password</TT></TD>

<TD>The associated Password.</TD>
</TR>

<TR>
<TD><TT>uint32 </TT></TD>

<TD><TT>position</TT></TD>

<TD>For plugin streams. </TD>
</TR>

<TR>
<TD><TT>int32 </TT></TD>

<TD><TT>position_tag</TT></TD>

<TD>Tag number of Layout position.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>post_data</TT></TD>

<TD>Data to be posted. Used in POST requests.</TD>
</TR>

<TR>
<TD><TT>int32 </TT></TD>

<TD><TT>post_data_size</TT></TD>

<TD>Size of post_data</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>post_headers</TT></TD>

<TD>Additional headers like "Content-Length" for a POST request.</TD>
</TR>

<TR>
<TD><TT>char** </TT></TD>

<TD><TT>post_to</TT></TD>

<TD>Only meaningful if <TT>files_to_post </TT>is set. If not null, post_to
is a NULL-terminated array of the URLs to post the files in <TT>files_to_post</TT>
to. If NULL, <TT>files_to_post </TT>along with address(a directory) will
be used to decide where to post the files (like befor</TD>
</TR>

<TR>
<TD><TT>Net_GetURLExitFun* </TT></TD>

<TD><TT>pre_exit_fn</TT></TD>

<TD>This function, if set gets called just before exiting NET_GetURL</TD>
</TR>

<TR>
<TD><TT>URLLoadPriority</TT></TD>

<TD><TT>priority</TT></TD>

<TD>The load priority- which decides the order in which this URL is retrieved
from the net. </TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>protection_template</TT></TD>

<TD>Name of the server auth. template.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>proxy_authenticate</TT></TD>

<TD>Proxy authentication scheme.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>range_headers</TT></TD>

<TD>Requested range in bytes. </TD>
</TR>

<TR>
<TD><TT>int32 </TT></TD>

<TD><TT>real_content_length</TT></TD>

<TD>Real content length of a partial file. Typically in an HTTP 206 response.</TD>
</TR>

<TR>
<TD><TT>struct CERTCertificateStr*</TT></TD>

<TD><TT>redirecting_cert</TT></TD>

<TD>Redirecting server's certificate.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>redirecting_url</TT></TD>

<TD>The "Location" of the redirecting URL.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>ref_count</TT></TD>

<TD>Reference counting.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>referer</TT></TD>

<TD>The Referer field in an HTTP request. The URL document that links this
one.</TD>
</TR>

<TR>
<TD><TT>uint32 </TT></TD>

<TD><TT>refresh</TT></TD>

<TD>Refresh interval.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>refresh_url</TT></TD>

<TD>URL to refresh to. </TD>
</TR>

<TR>
<TD><TT>ExtCacheDBInfo* </TT></TD>

<TD><TT>SARCache</TT></TD>

<TD>A pointer to the external cache where this item is located.</TD>
</TR>

<TR>
<TD><TT>SHIST_SavedData </TT></TD>

<TD><TT>savedData</TT></TD>

<TD>Layout data.</TD>
</TR>

<TR>
<TD><TT>void*</TT></TD>

<TD><TT>sec_private</TT></TD>

<TD>Security library's private information.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>security_on</TT></TD>

<TD>Is Security on. </TD>
</TR>

<TR>
<TD><TT>time_t </TT></TD>

<TD><TT>server_date</TT></TD>

<TD>Value of "Server" HTTP header.</TD>
</TR>

<TR>
<TD><TT>int </TT></TD>

<TD><TT>server_status</TT></TD>

<TD>Response code returned by the server.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>transfer_encoding</TT></TD>

<TD>First encoding on incoming data.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>username</TT></TD>

<TD>The login username associated with a URL.</TD>
</TR>

<TR>
<TD><TT>Chrome* </TT></TD>

<TD><TT>window_chrome</TT></TD>

<TD>Identifies the window characterstics.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>window_target</TT></TD>

<TD>Named window support. </TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>wysiwyg_url</TT></TD>

<TD>URL for WYSIWYG printing/saving.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>x_mac_creator</TT></TD>

<TD>Some Mac specific types. Currently only used in mail/news.</TD>
</TR>

<TR>
<TD><TT>char* </TT></TD>

<TD><TT>x_mac_type</TT></TD>

<TD>Same as above.</TD>
</TR>
</TABLE>

<BR>Besides these, there are also some state flags in the URL_Struct. These
are all of PRPackedBool type. Most of these are self-explanatory-
<BR>
<CENTER><TABLE BORDER CELLPADDING=5 COLS=1 WIDTH="50%" BGCOLOR="#CCCCCC" >
<TR>
<TD><TT>address_modified</TT></TD>
</TR>

<TR>
<TD><TT>can_reuse_connection</TT></TD>
</TR>

<TR>
<TD><TT>dontAllowDiffHostRedirect</TT></TD>
</TR>

<TR>
<TD><TT>dont_cache</TT></TD>
</TR>

<TR>
<TD><TT>ext_cache_file</TT></TD>
</TR>

<TR>
<TD><TT>internal_url</TT></TD>
</TR>

<TR>
<TD><TT>intr_on_load</TT></TD>
</TR>

<TR>
<TD><TT>is_active</TT></TD>
</TR>

<TR>
<TD><TT>is_binary</TT></TD>
</TR>

<TR>
<TD><TT>is_directory</TT></TD>
</TR>

<TR>
<TD><TT>is_netsite</TT></TD>
</TR>

<TR>
<TD><TT>load_background</TT></TD>
</TR>

<TR>
<TD><TT>mailto_post</TT></TD>
</TR>

<TR>
<TD><TT>must_cache</TT></TD>
</TR>

<TR>
<TD><TT>post_data_is_file</TT></TD>
</TR>

<TR>
<TD><TT>preset_content_type</TT></TD>
</TR>

<TR>
<TD><TT>resize_reload</TT></TD>
</TR>

<TR>
<TD><TT>server_can_do_byteranges</TT></TD>
</TR>

<TR>
<TD><TT>server_can_do_restart</TT></TD>
</TR>

<TR>
<TD><TT>use_local_copy</TT></TD>
</TR>
</TABLE></CENTER>

<HR>
<BR><TT><FONT SIZE=-1>Last modified on- <SCRIPT language="Javascript">
<!--
document.write(new Date(document.lastModified))
document.write("<BR>")
document.write("Page loaded on-   ")
document.write(new Date())
//-->
</SCRIPT>
</FONT></TT>
<BR>Comments/Corrections - <A HREF="mailto:gagan@netscape.com?Subject=URLStruct">Gagan</A>
</BODY>
</HTML>
