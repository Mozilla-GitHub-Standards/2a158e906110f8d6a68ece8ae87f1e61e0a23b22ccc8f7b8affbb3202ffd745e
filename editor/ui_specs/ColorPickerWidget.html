<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

  <meta name="generator" content=
  "HTML Tidy for Windows (vers 6 November 2007), see http://tidy.sourceforge.net/">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="Author" content="Charley Manske">

  <title>Color Picker Widget</title>

  <link rel="up" href="../" title="Mozilla Editor">

<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








  <p class="crumbs"><em>You are here:</em> <a href="../">Mozilla Editor</a>
  &gt; <strong>Color Picker Widget</strong></p>

  <h1>Color Picker Widget</h1>

  <address class="author">
    by Charles Manske
  </address>

  <p>This will be implemented as an XPFE widget to be used by all
  Communicator modules that require color selection. We will probably
  enhance the widget for use in Ender/Composer to match the features we
  added during the Gromit (MozillaClassic) project. This document describes
  that implementation, not the version in Communicator 4.x or earlier. See
  <a href="#Enhancements:">Enhancements</a> below for suggestions to
  simplify the widget for general use.</p>
  <p>For convience, the UI element that is clicked on to change a color is

  refered to as the "color button" and the actual color picker that popup
  up below the button is referred to as the "color picker."</p>

  <table border="0" cellspacing="2" cellpadding="2">
    <tr valign="top">
      <td>Windows:</td>

      <td>Mac:</td>

      <td>UNIX:</td>
    </tr>

    <tr valign="top">
      <td><img src="ColorButton_W.gif" height="26" width="38" alt=""> &lt;=
      the "color button"<br>
      <img src="ColorWidget_W.gif" height="244" width="187" alt=""></td>

      <td></td>

      <td></td>
    </tr>
  </table>

  <h3>Invoke</h3>

  <ul>
    <li>Click on the color button on the toolbar. This button  looks like a
    closed combobox with the current text color in the area to the left of
    the down arrow. The "color picker" should display just below the
    button, as shown above, unless this would place the picker's bottom
    border below the bottom of the screen. In that case, the picker should
    be located above the color button (aligned along left edge of each.) We
    should also check if the right edge is past the edge of the screen (we
    don't currently, so its possible to launch it off the right edge.) Move
    the widget so the right edge aligns with the right screen edge in this
    case.</li>

    <li>Press the Alt key down while clicking on the toolbar color button
    to set a background color. The type of background color set depends on
    the location of the caret or what is selected:

      <ul>
        <li>In a table cell or a cell is selected: Cell Background</li>

        <li>Table is selected: Table Background</li>

        <li>Anywhere that is not in a table cell: Page Background.</li>
      </ul>
    </li>

    <li>Window Menu: Format | Text Color... to change text color (brings up
    color picker in same location as if you clicked on the toolbar
    button.)</li>

    <li>From the Page Properties dialog (Format | Background and Page
    Colors): Click on one of the color buttons for Text, Link Text, Active
    Link Text, Followed Link Text, or Background colors.</li>

    <li>From the Table Properties dialogs (Table | Properties): In both the
    Table and Cell panes, there is a color button to set the table or cell
    background respectively.</li>
  </ul>

  <p>The color picker behaves exactly like a Windows combobox control and
  can be invoked with both "Windows-like" and "Mac-like" mouse behaviors.
  Both behaviors are implemented on the Windows platform (this is normal
  combobox behavior.) Should we allow "Windows" behavior for the Mac
  version?</p>

  <ul>
    <li>The color picker should appear on mouse down on the color
    button.</li>

    <li><strong>Mac-like:</strong> Hold the mouse down while dragging over
    the color to be selected. Dragging over a button should show the
    pressed-down look for the button (and return to normal when moved off
    the button) and the mouse up should invoke the action for the
    button.</li>

    <li><strong>Windows-like:</strong> Click (mouse up and down) on the
    color button and the widget stays visible, so user doesn't have to hold
    the mouse down when moving over the color squares or buttons.</li>

    <li>Pressing the Esc key or a mouse up or down anywhere outside of the
    color widget borders should remove the widget and not set any
    color.</li>
  </ul>

  <h3>Initialization</h3>

  <ol>
    <li>Set the caption text using the string ID passed in during creation.
    Choices are self explanatory:

      <ul>
        <li>Text Color</li>

        <li>Link Text Color</li>

        <li>Active Link Text Color</li>

        <li>Page Background Color</li>

        <li>Table Background Color</li>

        <li>Cell Background Color</li>
      </ul>
    </li>

    <li>Set the 70 main color squares: 69 are "web-safe" or "Netscape"
    colors that are guarenteed to be solid when displayed in most browsers.
    There is one light gray color (192 for R,G, and B; or #C0C0C0 in the
    HTML hex code) used to make a symetric array of 70 colors. This is the
    important "silver" color in the Window's fixed 20-color system
    palette.</li>

    <li>Set the "Current color" square from the color passed in during
    creation.</li>

    <li>Set the "Last Picked Color" obtained from editor preferences:
    "editor.last_color_picked" or "editor.last_background_color_picked" for
    text and background colors respectively. The default colors (before the
    very first use of the color picker) are black for last_color_picked and
    white for last_background_color_picked.</li>

    <li>Set the "Quick Palette" colors obtained from editor preferences:
    "editor.custom_color_x" where "x" is "0" through "9" for the 10 user
    colors.</li>
  </ol>

  <h3>Actions</h3>

  <table border width="80%">
    <col width="100">
    <col>

    <tr>
      <th>User Action</th>

      <th>Action</th>
    </tr>

    <tr valign="top">
      <td>Move mouse cursor over any color square</td>

      <td>
        <ol>
          <li>Show the focus rectangle around the color. (This is a dotted
          line around the color square on Windows. The focus rectangle is
          show around the "Last Picked Color" in the Windows image shown
          above.) This should be done if the mouse button is currently down
          or up.</li>

          <li>Display a tooltip showing the color numbers for the focus
          color. (E.g., the tooltip for the red Last Picked Color in the
          image above is "R=204, G=0, B=0  HTML: #CC0000"). In the Window's
          version, the tooltip will display only if the mouse is up. We
          should try to make this work when the mouse is down as well.</li>

          <li>If mouse is up, show a cursor image (<img src=
          "ArrowHandCursor.gif" height="23" width="24" alt="">) to indicate
          that the color square may be clicked on or dragged</li>
        </ol>
      </td>
    </tr>

    <tr valign="top">
      <td>Click or mouse up over a color square</td>

      <td>Return the selected color and save in the appropriate "Last
      Picked Color" preference. Close the picker and save the Quick Palette
      colors back to preferences.</td>
    </tr>

    <tr valign="top">
      <td>Click or mouse up on "Other" button</td>

      <td>Close picker and bring up the OS-specific color picker. This
      allows the user to pick any other color (including non-websafe
      colors). The color selected should be passed back to original widget
      caller as well as being saved in the appropriate "Last Picked Color"
      preference. In Windows, the 10 Quick Palette colors are used for the
      first 10 of the 16 "Custom Colors" in the Windows color picker. The
      fist 10 of those colors should be copied back to the Quick Palette
      preferences unless the user Cancels from the OS dialog -- this allows
      changing a Quick Palette color to any color supported by the OS.</td>
    </tr>

    <tr valign="top">
      <td>Click or mouse up on "Browser Default" button</td>

      <td>Tell caller to remove any color value, so the viewer's default
      browser color will be used. Close the picker and save the Quick
      Palette colors back to preferences.</td>
    </tr>

    <tr valign="top">
      <td>Click or mouse up on "Help" button</td>

      <td>Bring up the help topic for the widget. Keep color picker active
      while using or after returning from help.</td>
    </tr>

    <tr valign="top">
      <td>Press a number key (1 through 0) when mouse cursor is over a
      color square</td>

      <td>Copy the color under the mouse cursor to the Quick Palette color
      square identified by the number key pressed.</td>
    </tr>

    <tr valign="top">
      <td>Drag a color from any square and drop on a Quick Palette color
      square</td>

      <td>Copy the color under the mouse pointer on mouse down to the Quick
      Palette color square where the mouse up occurred.<br>
      This action is not available (on all platforms) if using the widget
      in "Mac-like" fashion (dragging the mouse over the color to be
      selected.)<br>
      During the dragging operation, an appropriate cursor icon should be
      show when moving the cursor over the color picker. These are
      currently used:<br>
      <img src="ColorPickerCursorDrag.gif" height="32" width="32" alt=
      "">after mouse down on any color square to show that it can be
      dragged.<br>
      <img src="ColorPickerCursorDrop.gif" height="32" width="32" alt=
      "">when mouse is over a Quick Palette square to show that the color
      may be dropped (copied) there.<br>
      <img src="NoDropCursor.gif" height="32" width="32" alt="">over
      anywhere else in or outside of the color picker</td>
    </tr>
  </table>

  <h3 id="Enhancements:">Enhancements</h3>

  <ul>
    <li>Simplify the widget for use in all modules that require color
    changing:<br>
    <img src="ColorWidgetSimple.gif" height="172" width="192" alt=""></li>

    <li>Since the "current color" will usually be shown on the color
    button, it is not needed in the simpler widget. The primary reason it
    is included in the Composer version is to allow a user to copy the
    current color to the Quick Palette, thus functioning like the
    "eyedropper" feature of a graphics program by letting the user get a
    color from the document.</li>

    <li>We could also eliminate the "caption" in this simpler version,
    although it might be better to keep it for consistency with the
    Composer version, which requires the caption. It also adds clarity to
    what color is being set even when used in the browser.</li>

    <li>This simpler widget should behave exactly as described for the
    Composer version, without the Last Picked Color, Quick Palette, and
    Help functionality.</li>

    <li>The current version does not support using the Tab or Arrow keys to
    move from color to color or among the buttons. Full tab and arrow key
    navigation should be added for any new color picker widget (but maybe
    not until the next version after 5.0?)</li>

    <li>It would be nice if we could use the accelerator keys Ctrl or Alt +
    &lt;number&gt; to set one of the 10 Quick Palette colors when the color
    picker is up. Current Communicator versions use Ctrl + a number to
    switch among different module windows. If those aren't used, I
    recommend using Ctrl. If we continue to use them in 5.0, we should use
    Alt + number.</li>
  </ul>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified January 15,  2008</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/editor/ui_specs/ColorPickerWidget.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
