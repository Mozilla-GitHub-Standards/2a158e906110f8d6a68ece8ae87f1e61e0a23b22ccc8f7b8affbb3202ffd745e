<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../images/mozilla-16.png" type="image/png">


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">

<meta name="DC.author" content="Joe Francis">
<meta name="DC.creator" content="Joe Francis">
<meta name="DC.title" content="Ender HTML Typing Rules">
<meta name="DC.subject" content="Ender HTML Typing Rules">
<meta name="DC.date.created" content="1999-04-16T14:49:03+11:00" scheme="W3CDTF">
<meta name="DC.date.modified" content="2006-11-04T09:54:03+11:00" scheme="W3CDTF">

 <title>Ender HTML Typing Rules</title>

<script src="../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">








<p class="crumbs"><em>You are here:</em> <a href="./">Editor project page</a> &gt; <strong>Ender HTML Typing Rules</strong></p>

<h1>Ender HTML Typing Rules</h1>

<p>The document on writing new rule sets is <a href="writing-rules.html">here</a>.</p>

<p>Here is the current thinking on the typing rules for the HTML editor. 
Note that these are different from the Plaintext editor rules, and there
may someday be yet another flavor of editor rules for a a more style-savvy
editor. The purpose of these editor rules are to give a word processing
feel to the user editing HTML documents, such as in a mail compose window.</p>

<h3>Space Rules:</h3>
<p>"Word" refers to any run of non-whitespace characters. All sorts
of things count as non-whitespace characters, including inline images 
and &amp;nbsp's. Whitespace is a space, tab, or newline (plus a funky 
zero-width whitespace character).</p>

<table class="data">

<thead>
<tr>
<th scope="col"><big>Selection State</big></th>

<th scope="col"><big>Results</big></th>
</tr>
</thead>

<tbody>
<tr>
<td>collapsed; in a block with style <code>white-space: pre;</code></td>

<td>space inserted</td>
</tr>

<tr>
<td>collapsed; in the middle of a word</td>

<td>space inserted</td>
</tr>

<tr>
<td>collapsed; after a word and before whitespace</td>

<td>&amp;nbsp inserted</td>
</tr>

<tr>
<td>collapsed; after whitespace before a word</td>

<td>existing space replaced with nbsp+space</td>
</tr>

<tr>
<td>collapsed; surrounded by whitespace</td>

<td>&amp;nbsp inserted</td>
</tr>

<tr>
<td>non-collapsed</td>

<td>delete the selection range(s) and obtain a collapsed selection, then
same as above</td>
</tr>

<tr>
<td>not covered by above</td>

<td>space inserted</td>
</tr>
</tbody>
</table>

<h3>Tab Rules:</h3>
<p>In the tab rules, <b>N</b> is the tab width, which is based on a user pref.</p>

<table class="data">

<thead>
<tr>
<th scope="col"><big>Selection State</big></th>

<th scope="col"><big>Results</big></th>
</tr>
</thead>

<tbody>
<tr>
<td>collapsed; in a table cell other than the last</td>

<td>set selection to next table cell</td>
</tr>

<tr>
<td>collapsed; in the last table cell</td>

<td>insert new table row and set selection to first cell in last row</td>
</tr>

<tr>
<td>collapsed; in a block with style <code>white-space: pre;</code></td>

<td>tab inserted</td>
</tr>

<tr>
<td>collapsed; in the middle of a word</td>

<td>insert <b>N</b>-1 &amp;nbsp's followed by a space</td>
</tr>

<tr>
<td>collapsed; after a word and before whitespace</td>

<td>insert <b>N</b> &amp;nbsp's</td>
</tr>

<tr>
<td>collapsed; after whitespace before a word</td>

<td>existing space replaced with <b>N</b> &amp;nbsp's+space</td>
</tr>

<tr>
<td>collapsed; surrounded by whitespace</td>

<td>insert <b>N</b> &amp;nbsp's</td>
</tr>

<tr>
<td>non-collapsed; no portion of table selected</td>

<td>delete selection then apply collapsed selection rule</td>
</tr>

<tr>
<td>non-collapsed; inside single table cell</td>

<td>as if collapsed selection in that cell</td>
</tr>

<tr>
<td>non-collapsed; not contained in single table cell</td>

<td>do nothing</td>
</tr>

<tr>
<td>not covered by above</td>

<td>insert <b>N</b> &amp;nbsp's</td>
</tr>
</tbody>
</table>

<h3>Return rules:</h3>

<p>"Block parent" refers to the first ancestor of the node (or the node itself)
that has block formatting; in other words, that is not inline. 
A collapsed selection is assumed for the return rules.</p>

<table class="data">

<thead>
<tr>
<th scope="col"><big>Selection State</big></th>

<th scope="col"><big>Results</big></th>
</tr>
</thead>

<tbody>
<tr>
<td>Block parent has <code>white-space: pre;</code></td>

<td>insert a newline character</td>
</tr>

<tr>
<td>Block parent is {OL,UL}</td>

<td>close any &lt;li&gt; we are in, insert new &lt;li&gt;</td>
</tr>

<tr>
<td>Block parent is &lt;dl&gt;</td>

<td>if in &lt;dt&gt;, close &lt;dt&gt; and insert &lt;dd&gt;
<br>if in &lt;dd&gt; insert &lt;br&gt;
<br>else insert a &lt;dt&gt;</td>
</tr>

<tr>
<td>Block parent is one of: {H1, ... H6}</td>

<td>close block</td>
</tr>

<tr>
<td>Block parent is one of: {P, BODY, DIV, NOSCRIPT, BLOCKQUOTE, ADDRESS}
<br>no &lt;br&gt; tags are adjacent to insertion point</td>

<td>insert a &lt;br&gt;</td>
</tr>

<tr>
<td>Block parent is &lt;p&gt;
<br>a &lt;br&gt; tag is adjacent to insertion point</td>

<td>remove &lt;br&gt; then split &lt;p&gt;, with contents before insertion point
in first &lt;p&gt; and the rest in the second &lt;p&gt;</td>
</tr>

<tr>
<td>Block parent is one of {BODY, DIV, NOSCRIPT, BLOCKQUOTE, ADDRESS}
<br>a &lt;br&gt; tag is adjacent to insertion point</td>

<td>remove &lt;br&gt; and insert &lt;p&gt;</td>
</tr>

<tr>
<td>not covered by above</td>

<td>insert a &lt;br&gt;</td>
</tr>
</tbody>
</table>

<h3>Backspace Rules:</h3>

<p>A collapsed selection is assumed for the backspace rules.
<br>Note that if I don't mention a tag below, it is considered inline and
deletion moves through it (such as the &lt;a&gt; tag, for instance).</p>

<table class="data">

<thead>
<tr>
<th scope="col"><big>Selection State</big></th>

<th scope="col"><big>Results</big></th>
</tr>
</thead>

<tbody>
<tr>
<td>after a &amp;nbsp-space combination (in same block parent)</td>

<td>replace &amp;nbsp-space with space</td>
</tr>

<tr>
<td>after non-whitespace (in same block parent)</td>

<td>delete previous character</td>
</tr>

<tr>
<td>after the close of &lt;table&gt;</td>

<td>do nothing</td>
</tr>

<tr>
<td>between &lt;td&gt;s, or at beginning of &lt;td&gt;</td>

<td>do nothing</td>
</tr>

<tr>
<td>after close of {HR, IMG, BR, MAP, OBJECT, form element}</td>

<td>delete element</td>
</tr>

<tr>
<td>after close of {DIV, BLOCKQUOTE, NOSCRIPT, ADDRESS, FORM}</td>

<td>pretend you are in same block, i.e., text inside these counts as if
it were in your same block for deletion purposes</td>
</tr>

<tr>
<td>after &lt;/p&gt;&lt;p&gt;</td>

<td>join &lt;p&gt;s, insert &lt;br&gt;</td>
</tr>

<tr>
<td>between two like elements that are one of {H*,LI}</td>

<td>join elements</td>
</tr>

<tr>
<td>not covered by above</td>

<td>do nothing</td>
</tr>
</tbody>
</table>

<p>Forward delete rules will be similar to backspace rules (only deleting
forwards, of course).</p>

<p>If you backspace/delete completely through an inline block, that 
block will be removed. But the editor will remember the "typing style"
of your cursor location, so if you backspace up to the last character 
of, say, a &lt;b&gt; tag, but no further, and then type again, the 
&lt;b&gt; will be reinserted and text you type will be bold (modulo 
your style sheet).</p>

<p>The HTML editor is not style sheet savvy and no plans are made for any
of the typing rules to use style to make rules decisions except for the
determination of the <code>white-space: pre;</code> style.</p>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../sitemap.html">Site Map</a></li>
<li><a href="../security/">Security Updates</a></li>
<li><a href="../contact/">Contact Us</a></li>
<li><a href="../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified November  4,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/editor/rules.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
