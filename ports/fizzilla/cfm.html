
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

   <title>FizzillaCFM Homepage</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">

<!--This file created 8/29/01 5:08 PM by Claris Home Page version 3.0 30 Day Trial-->


<p><table border=0 cellspacing=0 cellpadding=0 width="100%">
   <tr>
      <td width=312>
         <h1>FizzillaCFM</h1>
      </td>
      <td>
         <p align=right><img src="fizzilla.gif" width=136 height=110 align=bottom></p>
      </td>
   </tr>
</table>
</p>

<p>This is the home of the fully Carbon, fully Mac, fully CFM (Code Fragment Manager) version
of Fizzilla. This is different from the <a href="Mach.html">Mach-O Fizzilla build</a>.
</p>

<h2>Contents</h2>

<ul>
   <li><a href="#SettingUp">Setting Up The Environment</a></li>
   
   <li><a href="#Pulling">Pulling and Building</a></li>
   
   <li><a href="#Debugging">Debugging</a></li>
   
   <li><a href="#FAQ">FAQ</a></li>
</ul>

<hr>

<h2><a name=SettingUp></a>Setting Up The Environment</h2>

<p>
The Fizilla CFM build uses the same CodeWarrior Pro 7 build tools as the Classic build.
You can read about them on the <a href="../../build/mac.html">Mac build page</a>.
</p>

<h3>Working with Multiple Environments</h3>

<p>If you have another version of CodeWarrior installed (to build the
OS9 mozilla, for example), you need to make sure that the correct
version is launched or you will run into problems since it won't be
able to find the correct Universal Headers.</p>

<p>The easiest way to accomplish this is to have each environment on
a separate disk image. Create a 500MB image for each environment,
that should be plenty of space. When you want to build, make sure
only the correct image is mounted and then you are guaranteed that
the correct CodeWarrior will be launched.</p>

<p>If you do not want to work with disk images, launch the
appropriate version of ToolServer, MacPerl, and CodeWarrior prior to
building, and make sure you quit any others that might be running.
Since the Finder checks to see if an app is running prior to
launching another, by having them already running you guarantee the
correct environment is selected.</p>

<h2>

<hr>

<a name=Pulling></a>Pulling and Building</h2>

<p>Next, you need to <a href="http://www.mozilla.org/build/mac.html#Obtaining_the_source_code_and_building_it">pull
the source</a>. Familiarity with the way our build system works
(perl, etc) is highly recommended. <i>Note</i>: Make sure <a href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey&hours=5&nocrap=1">tinderbox</a>
shows green in the Mac columns before you begin your pull, else
you'll end up with something that won't even build without Carbon,
let alone with it. There is a Fizzilla tinderbox on the <a href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=SeaMonkey-Ports">Ports
page</a>. You should check that as well. (Thank you very much to Skip
Levens from Apple for getting us the hardware).</p>

<p>Once you have the source, tweak your settings so that you build
with carbon</p>

<p><table border=0 width="100%">
   <tr>
      <td valign=top width=40>
         <center>1.</center>
      </td>
      <td>
         <p>In your Prefs folder, there is a file called "Mozilla
         &#91;debug/opt&#93; build prefs". Open up this file with a
         text editor and add the line:</p>
         
         <blockquote><pre>options carbon 1</pre></blockquote>
         
         <p>anywhere w/in the file. This will do things like define
         TARGET_CARBON and ensure you build the Carbon targets in
         certain projets.</p>
      </td>
   </tr>
   <tr>
      <td valign=top width=40>
         <center>2.</center>
      </td>
      <td>
         <p>If you are building the commercial product (Netscape/AOL
         internal people only), you need to do one more step if and
         only if you are building on MacOSX. Add the line:</p>
         
         <blockquote><pre>PERL_COPIES_DIST 1</pre></blockquote>
         
         <p>in your <b>Netscape</b> (not mozilla) build prefs. This
         tells MacPerl to copy dist, not send an appleEvent to the
         Finder, which for some reason doesn't work on OSX.</p>
      </td>
   </tr>
</table>
</p>

<h2>

<hr>

<a name=Debugging></a>Debugging</h2>

<p>You've got a bug that the mac weenies say only happens in the
Fizzilla build. You've got several options at your disposal.</p>

<p>First, <b>try to duplicate the problem in MacOS 9</b>. Boot into
OS9 and run the fizzilla build just like the classic build. While we
don't QA it, it works pretty well and might be enough to reproduce
your problem (it usually is). If you see the bug here, consider
yourself lucky -- you can use the standard Pro5 debugger and debug
like the classic build.</p>

<p>If that doesn't work, you can try to <b>deduce the problem from
stack traces</b>. The stack traces from the OSX CrashReporter app are
pretty good at tracking down a problem. Usually, a crash that only
happens on MacOSX and not OS9 is a null pointer or something failing
to load correctly. Make sure you are checking error codes and
pointers before you call through them. A common crash happens because
someone passes null to strlen(). While this is fine on OS9, it's
deadly on OSX.</p>

<p>If you still haven't found the answer, take a page from the
X-heads and <b>use printf()</b>. If you're using the debug build, the
printf's will show up in the SIOUX console window, just like OS9. If
you're using the optimized build, printf's show up in the OSX console
(use the console application to view the console messages).</p>

<p>If all else fails,<b> use the Pro7 debugger</b>. The problem is,
getting all the pieces together can be difficult, and this is
complicated by the fact that Pro7 has yet to be released to the
general public. If you have exhausted all other options, ask someone
in MacDev about this. Hopefully by the time you really need it, we'll
have all the issues worked out.</p>

<p><b>TIP:</b> Remember while you're working in OSX, you can make
changes to the app with Pro5 running in the classic environment and
then run fizzilla natively. The turnaround is much faster than
booting back and forth between OS9 and OSX.</p>

<h2>

<hr>

<a name=FAQ></a>FAQ</h2>

<h3>Can I build on Mac OS X?</h3>

<p>Absolutely! As of MacOSX 10.0.4, you can pull and build entirely
from within MacOSX, though the apps will run in the Classic OS9
environment. We don't recommend pulling on OSX if you are running a
version prior to 10.0.4. I've found that booting back into OS9 is the
fastest and most reliable way to build fizzilla, but YMMV.</p>

<h3>I'm building on OSX and I get "Can't open header file XYZ"
errors. What's wrong?</h3>

<p>There are intermittant problems with the classic environement that
Pro5 runs inside on OSX. I have found that Force Quitting the classic
environment (quitting all running classic apps isn't enough, you have
to kill the environment as a whole) and resuming the build solves
this issue. Hopefully Pro7 won't have this problem since it runs
natively.</p>

<h3>The build keeps telling me to insert the disk image with the
source on it, but it's already mounted. What's wrong?</h3>

<p>If you use a disk image to hold your source, aliases created in
one OS don't correctly resolve when you boot into the other OS. For
example, if you do a build in OS9 and then boot into OSX, the aliases
in dist won't correctly resolve to your source disk image. You have
to throw away mozilla/dist and rebuild to regenerate the aliases and
make the annoying dialogs go away.</p>

<h3>When I'm building commercial on OSX and MacPerl dies trying to
copy dist. What's wrong?</h3>

<p>See step #2 of the build instructions above.</p>

<h3>My build hangs when running an opt build on OSX. How do I fix
it?</h3>

<p>There seems to be a problem with the console stub library in the
optimized build that can cause the app to lock up when it tries to
assert. The solution is to remove the NSConsoleDebug.shlb.</p>

<h3>How do I see where it crashed?</h3>

<p>In Mac OS 10.1, you can set preferences in the Console application
to have it show crash lots. In 10.0.4
add the following line:</p>

<blockquote><pre>CRASHREPORTER=-YES-</pre></blockquote>

<p>to your /etc/hostconfig file. You need to be root to do this and
changes take effect after a full reboot (to start it w/out rebooting,
run /usr/libexec/CrashReporter from a terminal). Now when the app
crashes, it will ask you if you want to see the log. Note that the
crash is <b>appended</b> to the end of the log, but the window has a
tendency to open at the top of the log.</p>

<h3>What If It Still Doesn't Work?</h3>

<p>There are two places to go for help building Fizzilla:</p>

<ul>
   <li>the #mozilla channel at irc.mozilla.org is a good place to
   find some mac weenies in real time who, if you ask nicely and
   don't be a pest, will happily get you on your way</li>
   
   <li>post to the newsgroup netscape.public.mozilla.macosx</li>
</ul>

<hr>

written by Mike Pinkerton (<a href="mailto:pinkerton@netscape.com">pinkerton@netscape.com</a>)</p>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified March 14,  2003</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/ports/fizzilla/cfm.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
