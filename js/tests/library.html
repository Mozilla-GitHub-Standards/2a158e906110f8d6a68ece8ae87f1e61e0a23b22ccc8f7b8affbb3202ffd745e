
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../images/mozilla-16.png" type="image/png">

    <title>JavaScript Test Library</title>
<script src="../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




    <h1>JavaScript Test Library</h1>
    
    <p>
      The <a href="http://www.mozilla.org/js/">JavaScript</a> team maintains a
      library of tests that are based on the ECMA-262 standard for
      web scripting languages and other documentation for JavaScript.
    <p>
      If you find a bug in the core JavaScript engine, you can now contribute a
      test to our library.  Your tests will be used to reproduce bugs, verify bug
      fixes, prevent regressions, and improve the stability of the JavaScript
      engine.
    <p>
      If you are contributing code to the JavaScript engine, you can use
      the tests to verify that the engine still works correctly before checking
      in.  The test driver is designed to be easy to use in a unit testing
      situation.  You can execute just a single test, or a small subset of tests,
      with results displayed directly to the console.  It may actually make your
      unit testing process easier to use the same test driver.  In addition,
      your unit tests can be expanded by QA into more robust cases and included
      in the test suite.
    
    <h2>What's covered by the JavaScript tests?</h2>

    <p>
      The JavaScript tests cover the functionality of the core JavaScript engine.
      This includes the following JavaScript objects:
    <center>
      <table>
        <tr>
          <td valign="top">
            <ul>
              <li>Arrays
              <li>Booleans
              <li>Dates
              <li>Functions
            </ul>
          </td>
          <td valign="top">
            <ul>
              <li>Global Object
              <li>Math
              <li>Numbers
              <li>Objects
            </ul>
          </td>
          <td valign="top">
            <ul>
              <li>Regular Expressions
              <li>Strings
            </ul>
          </td>
        </tr>
      </table>
    </center>
    <p>
      Additionally, the JavaScript tests cover parsing, lexical conventions,
      expressions, statements, type conversion, and exception handling.  See the
      current standard
      (available from the <a href="../language">language page</a>),
      or the current working draft (on the
      <a href="http://www.mozilla.org/js/language/futures.html">JavaScript futures page</a>)
      of the revised standard if you have questions about what is part of core
      JavaScript.
    <p>
      We also have tests for
      <a href="http://www.mozilla.org/oji">LiveConnect</a>,
      the bridge code which allows JavaScript and Java to function as peer
      environments.  It should be noted that LiveConnect is not considered part
      of <i>Core</i> JavaScript, and in fact has its own
      <a href="http://bugzilla.mozilla.org/describecomponents.cgi?product=Browser">BugZilla Component</a>.
      When reporting bugs in LiveConnect, be sure to use the proper component.
    <p>
      <a name="PLEASE"></a>
      <b>PLEASE, Please, please</b> be sure to understand that the 
      <b>JavaScript Engine</b> itself has nothing to do
      with the web browser.  JavaScript is <i>embedded</i> in most web browsers,
      but it can be 
      <a href="http://lxr.mozilla.org/mozilla/source/js/src/README.html#JSAPI">embedded</a>
      in most any host application.  Most of the bugs reported against the
      <b>JavaScript Engine</b> component in BugZilla are actually embedding
      issues.  The most common mistake is to file a DOM or event handling issue,
      such as trouble getting to a property of the <code>window</code> object or
      trouble catching key events to the JavaScript engine.  While your bug
      will eventually be reclassified into the correct component, getting
      the component right from the start helps developers to swiftly fix the
      problem.

    <h2>What's not covered by the JavaScript tests?</h2>
    <p>
      Tests must <b>not</b> refer to any objects that are not part of core
      JavaScript.  This is because the tests are run not only against the
      JavaScript engine in the browser, but also against the stand-alone
      JavaScript engines.
    <p>
      Because the tests are not always run in the browser, it is important that
      you not refer to any objects that are part of the browser or DOM.  For 
      example, you must not refer to the following objects, or methods or
      properties of the following objects:
    <ul>
      <li>navigator
      <li>window
      <li>document
      <li>layer
      <li>form elements
    </ul>
    
    <p>
      If you would like to write tests that cover DOM objects, talk to the
      people at 
      <a href="news://news.mozilla.org/mozilla.dev.quality">mozilla.dev.quality</a>,
      or see the <a href="http://www.mozilla.org/quality">quality assurance
      group's page</a>. You should also check out the
      <a href="http://www.mozilla.org/newlayout/">NGLayout project</a>'s page on
      <a href="http://www.mozilla.org/newlayout/getinvolved.html">how you can
        help</a>.

    <h2>Which areas should I write tests for?</h2>
    <p>
      If you would like to contribute tests to the library, please contact
      <a href="mailto:bob+jstests@bclary.com?subject=I'd like to contribute to the JavaScript Test Library!">the coordinator</a>.

    <p>
      We would really appreciate it if you wrote tests that demonstrate any bugs
      you find in the JavaScript engine.  Providing a test will make sure that
      we can reproduce the bug, and will make sure that there won't be
      regressions.

    <h2>Where are the JavaScript tests?</h2>
    <p>
      The tests that are currently available on mozilla.org are checked into
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/">mozilla/js/tests</a>.
      You must check them out explicitly as they are not part of the SeaMonkeyAll
      partition. (Where the bulk of the Mozilla source code is.)  If you already
      have an existing source tree, getting the tests is a easy as:<br>
      <br>
      <code>
        cd mozilla/js<br>
        cvs up -d tests<br>
      </code>
    <p>
      If you do not already have a Mozilla source tree, see the instructions on
      <a href="http://www.mozilla.org/cvs.html">checking out source code</a>
      for information on how to set up your CVSROOT and log in.

    <h2>How do I write a JavaScript test?</h2>
    <p>
      The 
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/README-jsDriver.html">new test driver</a>,
      <b>jsDriver.pl</b>,
      allows for a simpler test case layout, while still maintaining
      compatibility
      with the previous driver.  Both test drivers expect the tests to be laid
      out in a directory structure that
      is exactly three levels deep.  Currently, <code>mozilla/js/tests</code>
      is the root of all tests.  Under the root, you will find the
      <b>Test suite</b> directories, such as <code>js1_1</code>, 
      <code>ecma</code>, <code>ecma_2</code>, and <code>ecma_3</code>
      (the <code>src</code> directory contains Java classes used in the
      LiveConnect tests, not actual test suites.)  Each <b>Test Suite</b> has
      a collection of <b>Test Categories</b> underneath it.  Test cases are
      placed in the <b>Test Category</b> directory, in a .js file.
    <p>
      To the jsDriver.pl, <b>shell.js</b> is a magic file.  If it exists in
      either the <b>Test Suite</b> or the <b>Test Category</b> directory,
      it is loaded before the testcase executes.  If it exists in both 
      directories, the <b>Test Suite</b> version is loaded before the
      <b>Test Category</b>
      version.  In this way, common functions can be shared among testcases.
    <p>
      The bulk of the tests follow the format described in the 
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/template.js">template.js file</a>.
      It consists of a brief comment describing what the test is about, some
      variable initialization, and some test cases.
    <p>
      Newer testcases are even simpler, because they use the smaller 
      <b>shell.js</b>.  Look at the testcases in 
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/ecma_3/Exceptions/">ecma_3/Exceptions/</a>
      for an example of how to write testcases under this <b>shell.js</b>
    <p>
      Each test case has three parts:  a string representation of what you are
      testing, the expected result, and the actual
      result.  You can write functions to generate the test cases, or you can
      hard-code all the test data.  The structure of the test is up to you.
      Check out some of the
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/">existing tests</a>
      for examples.
    <p>
      Testcases with filenames ending in -n, as in
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/ecma_3/Exceptions/catchguard-001-n.js">catchguard-001-n.js</a>, signify to the test driver that
      they are <b>expected</b> to fail.  That is, an exit code of 3 should be
      considered success, anything else is a failure.  (Normally exit code 0
      implies success.)  You can specify an arbitrary exit code as the success
      code by outputting a line of the format <code>EXPECT EXIT: <i>n</i></code>
      where <code><i>n</i></code> is the code to expect.  You can force your
      testcase to exit with a specific exit code with the
      <code>quit(<i>n</i>)</code> JavaScript shell function.
      See the
      <a href="http://lxr.mozilla.org/mozilla/source/js/tests/README-jsDriver.html">man page for jsDriver.pl</a>
      for more information.


    <h2>How do I run the JavaScript tests?</h2>
    <ul>
      <li>
        First, retrieve the
        <a href="http://lxr.mozilla.org/mozilla/source/js/tests/">mozilla/js/tests</a>
        directory.   You can download this from 
        <a href="ftp://ftp.mozilla.org/pub/mozilla.org/js/">ftp.mozilla.org</a>
        or one of the 
        <a href="http://www.mozilla.org/mirrors.html">mirrors</a>
        in a file called <b>pub/js/js-tests-&lt;date-stamp&gt;.tar.gz</b>,
        or you can check it out directly from
        <a href="http://www.mozilla.org/cvs.html">cvs</a>
        If you have a complete Mozilla source tree, change to the
        <code>mozilla/js</code> directory, and issue the command
        <code>cvs up -d tests</code> to retrieve the <code>tests</code> 
        directory from cvs.
      <li>
        Second, read the 
        <a href="http://lxr.mozilla.org/mozilla/source/js/tests/README-jsDriver.html">man page for jsDriver.pl</a>
      <li>
        Third, make sure you have the
        <a href="http://search.cpan.org/search?module=Getopt::Mixed">Getopt::Mixed</a>
        Perl module installed.
      <li>
        Fourth, run <b>jsDriver.pl</b> as described in the man page.
      <li>
        Finally, 
        <a href="mailto:bob+jstestresults@bclary.com?subject=JS Test Results">Submit</a>
        your results to the test coordinator, the
        <a href="news:mozilla.dev.tech.js-engine">JS Engine newsgroup</a>, or
        file bugs directly in
        <a href="http://bugzilla.mozilla.org/">Bugzilla</a>.
   </ul>
    
    <h2>Resources</h2>
    <ul>
      <li>
        <a href="http://lxr.mozilla.org/mozilla/source/js/tests">Test source</a>
      <li>
        <a href="news://news.mozilla.org/mozilla.dev.tech.js-engine">JavaScript newsgroup</a>
      <li>
        <a href="http://www.mozilla.org/js">JavaScript page</a>
      <li>
        <a href="http://www.mozilla.org/js/language/">JS Language References</a>
      <li>
        <a href="http://lxr.mozilla.org/mozilla/source/js/tests/README-jsDriver.html">man page for jsDriver.pl</a>
      <li>
        <a href="http://www.mozilla.org/rhino/">Rhino homepage</a>
      <li>
        <a href="http://www.mozilla.org/js/spidermonkey">Spidermonkey homepage</a>
    </ul>

    <hr>

    <p>
      Original page by Christine Begle of 
         <a href="http://movietours.com/">movietours.com</a> fame.<br>
      Modified by Robert Ginda<br>
      Currently maintained by <i><a href="mailto:bob+jstests@bclary.com">Bob Clary</a></i>
  


<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../sitemap.html">Site Map</a></li>
<li><a href="../../security/">Security Updates</a></li>
<li><a href="../../contact/">Contact Us</a></li>
<li><a href="../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified November  8,  2006</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/js/tests/library.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
