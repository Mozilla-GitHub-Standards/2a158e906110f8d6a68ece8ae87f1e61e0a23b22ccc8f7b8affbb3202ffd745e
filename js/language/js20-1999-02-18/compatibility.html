<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>JavaScript 2.0 Compatibility</TITLE>
<LINK rel=stylesheet href="../styles.css">
<LINK rel=Start href="index.html">
<LINK rel=Contents href="index.html">
<LINK rel=Prev href="grammar.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=draft-title>February 1999 Draft</SPAN></DIV>
    <DIV class=title2><SPAN class=draft-title>JavaScript 2.0</SPAN></DIV>
    <DIV class=title1>Compatibility</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="grammar.html"><IMG src="../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="index.html"><IMG src="../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Thursday, February 18, 1999</P>

<H2>JavaScript 1.x</H2>

<P>Existing JavaScript 1.x scripts will continue to run in a browser environment because browsers will be able to distinguish
JavaScript 2.0 or later scripts from JavaScript 1.x scripts and treat each script according to the language in which it was
written. JavaScript 2.0 scripts can be distinguished as follows:</P>

<UL>
  <LI>JavaScript 2.0 scripts will have a <CODE>language</CODE> attribute of <CODE>JavaScript2.0</CODE>.</LI>
  <LI>JavaScript 2.0 scripts will contain an <CODE>import</CODE> statement.</LI>
</UL>

<H2>Migration</H2>

<P>Some developers will want to incrementally modify their JavaScript 1.x scripts to take advantage of JavaScript 2.0 features.
Many JavaScript 1.x scripts are <I>compatible</I> and will run unchanged in either JavaScript 1.x or JavaScript 2.0 (as long
as one changes the <CODE>language</CODE> attribute or adds an <CODE>import</CODE> statement). The vast majority of other JavaScript
1.x scripts can be made <I>compatible</I> via the following process, which can be performed automatically:</P>

<UL>
  <LI>Perform semicolon insertion on the script.</LI>
  <LI>Move local and global <CODE>var</CODE> and <CODE>function</CODE> declarations in a function into a scope that encloses
    all of their references.</LI>
  <LI>Insert <CODE>traditional</CODE> and a newline before <CODE>function</CODE> declarations that are used as constructors
    or methods, or are called with fewer or more arguments than designated (JavaScript 1.x will treat <CODE>traditional</CODE>
    as an expression and inser a phantom semicolon after it).</LI>
  <LI>Declare global variables before their first reference.</LI>
  <LI>Replace <CODE>void</CODE> <VAR>expr</VAR> by <CODE>void(</CODE><VAR>expr</VAR><CODE>)</CODE>.</LI>
  <LI>Replace <VAR>expr</VAR><CODE>[</CODE><VAR>expr</VAR><CODE>,</CODE> <VAR>expr</VAR><CODE>]</CODE> by <VAR>expr</VAR><CODE>[(</CODE><VAR>expr</VAR><CODE>,</CODE>
    <VAR>expr</VAR><CODE>)]</CODE> because commas are now significant inside brackets.</LI>
  <LI>Place regular expression literals in parentheses if they are found at the beginning of a statement.</LI>
  <LI>Rename uses of <CODE>field</CODE> or <CODE>eval</CODE> for identifiers (manual intervention may be needed if these are
    used to name fields).</LI>
</UL>
<P>We intend to provide a tool that will perform such transformations.</P>

<P>The main situations where manual intervention may be required are:</P>

<UL>
  <LI>Code that dynamically generates code for use in <CODE>eval</CODE>.</LI>
  <LI>Code that modifies the standard JavaScript 1.x objects such as <CODE>Object</CODE> and <CODE>String</CODE>.</LI>
</UL>

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Thursday, February 18, 1999</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="grammar.html"><IMG src="../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="index.html"><IMG src="../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
