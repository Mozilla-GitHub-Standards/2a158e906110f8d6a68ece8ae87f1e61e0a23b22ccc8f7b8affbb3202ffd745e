<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>ECMAScript 4 Compatibility</TITLE>
<LINK rel=stylesheet href="../styles.css">
<LINK rel=Start href="index.html">
<LINK rel=Contents href="index.html">
<LINK rel=Prev href="rationale/miscellaneous.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=es-title>ECMAScript 4 Netscape Proposal</SPAN></DIV>
    <DIV class=title1>Compatibility</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="rationale/miscellaneous.html"><IMG src="../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="index.html"><IMG src="../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Friday, March 14, 2003</P>

<!--IMPORT "../js20/compatibility.html" -class=js2 -class=js2-hidden +class=es4 +class=es4-hidden -->

<P>ECMAScript 4 is intended to be upwards compatible with almost all ECMAScript 3 and earlier scripts. The following are
the current compatibility issues:</P>

<UL>
  <LI>Commas are now significant inside brackets, so <VAR>expr</VAR><CODE>[</CODE><VAR>expr</VAR><CODE>,</CODE> <VAR>expr</VAR><CODE>]</CODE>
    should be replaced by <VAR>expr</VAR><CODE>[(</CODE><VAR>expr</VAR><CODE>,</CODE> <VAR>expr</VAR><CODE>)]</CODE>.</LI>
  <LI>Initializers are not allowed on a <CODE>for</CODE>-<CODE>in</CODE> variable; the <CODE>=b</CODE> in the statement <CODE>for&nbsp;(var&nbsp;a=b&nbsp;in&nbsp;c)</CODE>&nbsp;...
    is not allowed.</LI>
  <LI>Uses of the identifiers <CODE>as</CODE>, <CODE>is</CODE>, <CODE>namespace</CODE>, and <CODE>use</CODE> need to be renamed
    or escaped with <CODE>\_</CODE> because these are now reserved words.</LI>
  <LI>ECMAScript 4 drops the wrapper classes <CODE>Boolean</CODE>, <CODE>Number</CODE>, and <CODE>String</CODE>. <CODE>Boolean</CODE>,
    <CODE>Number</CODE>, and <CODE>String</CODE> now refer to classes that have primitive booleans, numbers, and strings as
    instances. The methods of these new classes correspond to the methods of ECMAScript 3&#8217;s wrapper classes. The results
    of calling <CODE>new</CODE> on <CODE>Boolean</CODE>, <CODE>Number</CODE>, or <CODE>String</CODE> are now implementation-defined,
    so an implementation may choose to retain the wrappers for compatibility with ECMAScript 3, but it is not required to
    do so.</LI>
  <LI>ECMAScript 4 permits but does not require implementations to allow array indices greater than 4294967295. Code that
    relies on indices greater than 4294967295 not being recognized as valid array indices may not work.</LI>
  <LI>Code that modifies the standard ECMAScript 3 objects such as <CODE>Object</CODE> and <CODE>String</CODE> may not work.</LI>
  <LI>ECMAScript 4 defines additional global constants, which may clash with top-level identifiers in programs.</LI>
  <LI>Invalid ECMAScript 3 code may parse as valid ECMAScript 4 code. ECMAScript 3 programs which relied on getting
    an exception for such formerly invalid code may not work.</LI>
</UL>
<P>For applications such as browsers where 100% compatibility is needed, scripts will be assumed to be written ECMAScript
3 unless explicitly marked as being ECMAScript 4 through either an HTML or XML attribute or by including a <CODE>use&nbsp;ecmascript(4)</CODE>
statement.</P>

<!--/IMPORT-->

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Friday, March 14, 2003</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="rationale/miscellaneous.html"><IMG src="../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="index.html"><IMG src="../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
