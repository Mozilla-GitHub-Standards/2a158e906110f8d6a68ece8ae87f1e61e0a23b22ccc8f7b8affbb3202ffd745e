<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>ECMAScript 4 Variables</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="definitions.html">
<LINK rel=Next href="functions.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=es-title>ECMAScript 4 Netscape Proposal</SPAN></DIV>
    <DIV class=title2>Core Language</DIV>
    <DIV class=title1>Variables</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="definitions.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="functions.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Wednesday, June 4, 2003</P>

<!--IMPORT "../../js20/core/variables.html" -class=js2 -class=js2-hidden +class=es4 +class=es4-hidden -->

<H2>Variable Definitions</H2>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableDefinition"></A><SPAN class=nonterminal>VariableDefinition</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<A href="#N-VariableDefinitionKind" class=nonterminal>VariableDefinitionKind</A>&nbsp;<A href="#N-VariableBindingList" class=nonterminal>VariableBindingList</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableDefinitionKind"></A><SPAN class=nonterminal>VariableDefinitionKind</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<CODE class=terminal-keyword>var</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>const</CODE></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableBindingList"></A><SPAN class=nonterminal>VariableBindingList</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-VariableBinding" class=nonterminal>VariableBinding</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-VariableBindingList" class=nonterminal>VariableBindingList</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-VariableBinding" class=nonterminal>VariableBinding</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableBinding"></A><SPAN class=nonterminal>VariableBinding</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<A href="#N-TypedIdentifier" class=nonterminal>TypedIdentifier</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<A href="#N-VariableInitialisation" class=nonterminal>VariableInitialisation</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableInitialisation"></A><SPAN class=nonterminal>VariableInitialisation</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;&#171;empty&#187;</DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>=</CODE>&nbsp;<A href="#N-VariableInitializer" class=nonterminal>VariableInitializer</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-VariableInitializer"></A><SPAN class=nonterminal>VariableInitializer</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="definitions.html#N-AttributeCombination" class=nonterminal>AttributeCombination</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-TypedIdentifier"></A><SPAN class=nonterminal>TypedIdentifier</SPAN><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A>&nbsp;<CODE class=terminal-keyword>:</CODE>&nbsp;<A href="expressions.html#N-TypeExpression" class=nonterminal>TypeExpression</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_beta)</SCRIPT></SUP></DIV>
</DIV>

<P>A <A href="#N-SimpleVariableDefinition" class=nonterminal>SimpleVariableDefinition</A> represents the subset of <A href="#N-VariableDefinition" class=nonterminal>VariableDefinition</A>
expansions that may be used when the variable definition is used as a <A href="statements.html#N-Substatement" class=nonterminal>Substatement</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_omega)</SCRIPT></SUP>
instead of a <A href="statements.html#N-Directive" class=nonterminal>Directive</A><SUP class=nonterminal-argument><SCRIPT type="text/javascript">document.write(U_omega)</SCRIPT></SUP>
in <A href="pragmas.html#strict-mode">non-strict mode</A>. In <A href="pragmas.html#strict-mode">strict mode</A> variable
definitions may not be used as substatements.</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-SimpleVariableDefinition"></A><SPAN class=nonterminal>SimpleVariableDefinition</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>var</CODE>&nbsp;<A href="#N-UntypedVariableBindingList" class=nonterminal>UntypedVariableBindingList</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-UntypedVariableBindingList"></A><SPAN class=nonterminal>UntypedVariableBindingList</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-UntypedVariableBinding" class=nonterminal>UntypedVariableBinding</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-UntypedVariableBindingList" class=nonterminal>UntypedVariableBindingList</A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-UntypedVariableBinding" class=nonterminal>UntypedVariableBinding</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-UntypedVariableBinding"></A><SPAN class=nonterminal>UntypedVariableBinding</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A>&nbsp;<A href="#N-VariableInitialisation" class=nonterminal>VariableInitialisation</A><SUP class=nonterminal-attribute>allowIn</SUP></DIV>
</DIV>

<P>A variable defined with <CODE>var</CODE> can be modified, while one defined with <CODE>const</CODE> is read-only after
its value is set. <A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A> is the name of the variable and
<A href="expressions.html#N-TypeExpression" class=nonterminal>TypeExpression</A> is its type. <A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A>
can be any non-reserved identifier. <A href="expressions.html#N-TypeExpression" class=nonterminal>TypeExpression</A> must
be a <A href="expressions.html#compile-time-constant">compile-time expression</A> that evaluates to a type <VAR>t</VAR> other
than <A href="../libraries/types.html#Never"><CODE>Never</CODE></A>. <A href="expressions.html#N-TypeExpression" class=nonterminal>TypeExpression</A>
may contain forward references to compile-time constants defined later in the program.</P>

<P>If provided, <A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A> gives the variable&#8217;s
initial value <VAR>v</VAR>. If <A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A>
is not provided in a <CODE>var</CODE> definition, then <CODE>undefined</CODE> is assumed. If the variable being defined is
not an instance member of a class, then the <A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A>
is evaluated at the time the variable definition is evaluated. The resulting value is then <A href="../libraries/types.html#implicit-coercion">implicitly
coerced</A> to the variable&#8217;s type <VAR>t</VAR> and stored in the variable. If the variable is defined using <CODE>var</CODE>,
any values subsequently assigned to the variable are also <A href="../libraries/types.html#implicit-coercion">implicitly coerced</A>
to type <VAR>t</VAR> at the time of each such assignment. If the variable is an instance member of a class, then the <A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A>
is evaluated each time an instance of the class is constructed.</P>

<P>Reading or writing a variable before its definition is evaluated signals an error except when the variable definition has
no attributes and no type and <A href="pragmas.html#strict-mode">strict mode</A> is not in effect; in that case, the variable
may be read or written prior to its definition being evaluated and its initial value is <CODE>undefined</CODE>.</P>

<P>Multiple variables separated by commas can be defined in the same <A href="#N-VariableDefinition" class=nonterminal>VariableDefinition</A>.
The values of earlier variables are available in the <A href="expressions.html#N-AssignmentExpression" class=nonterminal>AssignmentExpression</A>s
of later variables.</P>

<P>If omitted, <A href="expressions.html#N-TypeExpression" class=nonterminal>TypeExpression</A> defaults to type <A href="../libraries/types.html#Object"><CODE>Object</CODE></A>.
Thus, the definition</P>

<PRE>var a, b=3, c:Integer=7, d, e:Integer, f:Number=c;</PRE>

<P>is equivalent to:</P>

<P class=indent><CODE>var&nbsp;a:Object&nbsp;=&nbsp;undefined;</CODE><BR>
<CODE>var&nbsp;b:Object&nbsp;=&nbsp;3;</CODE><BR>
<CODE>var&nbsp;c:Integer&nbsp;=&nbsp;7;</CODE><BR>
<CODE>var&nbsp;d:Object&nbsp;=&nbsp;undefined;</CODE><BR>
<CODE>var&nbsp;e:Integer&nbsp;=&nbsp;undefined;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Implicitly&nbsp;coerced&nbsp;to&nbsp;<CODE>NaN</CODE><BR>
<CODE>var&nbsp;f:Number&nbsp;=&nbsp;c;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;<CODE>7</CODE></P>

<P>The compiler might issue a warning for a <A href="#N-VariableDefinition" class=nonterminal>VariableDefinition</A> that
contains an untyped variable prior to a typed variable to remind programmers that the type of <CODE>d</CODE> is <CODE>Object</CODE>
rather than <CODE>Integer</CODE> in <CODE>var&nbsp;d,&nbsp;e:Integer</CODE>.</P>

<H2><A name="const"></A>Constant Definitions</H2>

<P><CODE>const</CODE> means that assignments to <A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A> are
not allowed after the constant has been set. Once defined, a constant cannot be redefined in the same scope, even if the redefinition
would be to the same value. If the <A href="#N-VariableBinding" class=nonterminal>VariableBinding</A> in a <CODE>const</CODE>
declaration does not contain an initializer, then the constant may be written once after it is defined. Any attempt to read
the constant prior to writing its value will result in an error. For example:</P>

<P class=indent><CODE>function&nbsp;f(x)&nbsp;{return&nbsp;x+c}</CODE><BR>
<BR>
<CODE>f(3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Error:&nbsp;<CODE>c</CODE>&#8217;s&nbsp;value&nbsp;is&nbsp;not&nbsp;defined<BR>
<CODE>const&nbsp;c&nbsp;=&nbsp;5;</CODE><BR>
<CODE>f(3);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Returns&nbsp;<CODE>8</CODE><BR>
<CODE>const&nbsp;c&nbsp;=&nbsp;5;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Error:&nbsp;redefining&nbsp;<CODE>c</CODE></P>

<P>Just like any other definition, a constant may be rebound after leaving its scope. For example, the following is legal;
<CODE>j</CODE> is local to the block, so a new <CODE>j</CODE> binding is created each time through the loop:</P>

<PRE>var k = 0;
for (var i = 0; i &lt; 10; i++) {
  const j = i;
  k += j;
}</PRE>

<P>A <CODE>const</CODE> definition defines a <A href="expressions.html#compile-time-constant">compile-time constant</A> if
it has an initializer and that initializer is a <A href="expressions.html#compile-time-constant">compile-time constant expression</A>
which may contain forward references to other compile-time constants.</P>

<P>In order for the compiler to be able to distinguish <CODE>const</CODE> definitions that define run-time constants from
ones that define compile-time constants, it must be able to resolve each variable referenced in a <CODE>const</CODE> initializer
to a <A href="concepts.html#scope">scope</A>. Because of this, a <CODE>const</CODE> initializer may only refer to variables
declared at compile time; referring to a dynamically created variable not declared at compile time results in a compile-time
error. It is also an error to attempt to create a dynamic variable that changes the resolution of a variable in a <CODE>const</CODE>
initializer. For example:</P>

<P class=indent><CODE>const&nbsp;a&nbsp;=&nbsp;5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>OK: <CODE>a</CODE> is
a compile-time constant with the value 5<CODE><BR>
const&nbsp;b&nbsp;=&nbsp;a&nbsp;+&nbsp;c;&nbsp;&nbsp;//&nbsp;</CODE>OK: <CODE>b</CODE> is a compile-time constant with the
value 7<CODE><BR>
const&nbsp;c&nbsp;=&nbsp;2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>OK: <CODE>c</CODE> is a compile-time constant
with the value 2<CODE><BR>
const&nbsp;d&nbsp;=&nbsp;e;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>OK: <CODE>d</CODE> is a run-time constant that
starts as <CODE>undefined<BR>
var&nbsp;e&nbsp;=&nbsp;2.718281828459045;<BR>
f&nbsp;=&nbsp;"Run&nbsp;time";<BR>
const&nbsp;g&nbsp;=&nbsp;f;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>Error: <CODE>f</CODE> is not declared at compile
time<CODE><BR>
const&nbsp;h&nbsp;=&nbsp;uint;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>OK: <CODE>h</CODE> is a compile time constant that holds the
type <CODE>uint<BR>
this.ulong&nbsp;=&nbsp;15;&nbsp;&nbsp;//&nbsp;</CODE>OK: creates the global property <CODE>ulong</CODE> that shadows the system
<CODE>ulong</CODE> type<CODE><BR>
this.uint&nbsp;=&nbsp;15;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>Error: can&#8217;t create the global property <CODE>uint</CODE>
because it would<CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;</CODE>&nbsp;&nbsp;change
the resolution of <CODE>uint</CODE> in the definition of <CODE>h</CODE></P>

<P>Inside a class, <CODE>const</CODE> preceded by <CODE>final</CODE> defines an <A href="concepts.html#instance-member">instance
member</A>. Preceding it with <CODE>virtual</CODE> would also define an instance member, but is only useful if one wants subclasses
to be able to override the constant. Precede it with <CODE>static</CODE> to define a <A href="concepts.html#global-member">global
member</A>. The default is <CODE>final</CODE>.</P>

<P>If <CODE>const</CODE> is declaring an instance member <VAR>m</VAR> of a class, then the initializer is evaluated each time
an instance of the class is constructed. If absent, then the member&#8217;s property may be written exactly once,
cannot be re-written after it has been written, and must be written before it can be read. For example:</P>

<P class=indent><CODE>class&nbsp;C&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;static&nbsp;const&nbsp;red&nbsp;=&nbsp;0xFF0000;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;static&nbsp;constant&nbsp;<CODE>C.red</CODE><BR>
<CODE>&nbsp;&nbsp;static&nbsp;const&nbsp;green&nbsp;=&nbsp;0x00FF00;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;static&nbsp;constant&nbsp;<CODE>C.green</CODE><BR>
<CODE>&nbsp;&nbsp;static&nbsp;const&nbsp;blue&nbsp;=&nbsp;0x0000FF;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;static&nbsp;constant&nbsp;<CODE>C.blue</CODE><BR>
<CODE>&nbsp;&nbsp;static&nbsp;const&nbsp;infrared;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;uninitialized
static&nbsp;constant&nbsp;<CODE>C.infrared</CODE><BR>
<BR>
<CODE>&nbsp;&nbsp;const&nbsp;myColor;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;instance&nbsp;constant&nbsp;<CODE>C::myColor</CODE>&nbsp;with&nbsp;value&nbsp;set&nbsp;by&nbsp;the&nbsp;constructor<BR>
<CODE>&nbsp;&nbsp;final&nbsp;const&nbsp;yourColor;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;instance&nbsp;constant&nbsp;<CODE>C::yourColor</CODE>&nbsp;with&nbsp;value&nbsp;set&nbsp;by&nbsp;the&nbsp;constructor<BR>
<CODE>&nbsp;&nbsp;const&nbsp;ourColor&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;instance&nbsp;constant&nbsp;<CODE>C::ourColor</CODE>&nbsp;that&nbsp;is&nbsp;always&nbsp;zero&nbsp;(not&nbsp;very&nbsp;useful)<BR>
<CODE>&nbsp;&nbsp;virtual&nbsp;const&nbsp;theirColor&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Defines&nbsp;instance&nbsp;constant&nbsp;<CODE>C::theirColor</CODE>&nbsp;that&nbsp;can&nbsp;be&nbsp;overridden&nbsp;by&nbsp;subclasses<BR>
<BR>
<CODE>&nbsp;&nbsp;function&nbsp;C(x:int)&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;myColor&nbsp;=&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Sets&nbsp;this&nbsp;instance&#8217;s&nbsp;<CODE>myColor</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;ourColor&nbsp;=&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Error:&nbsp;<CODE>ourColor</CODE>&nbsp;is&nbsp;already&nbsp;set&nbsp;to&nbsp;<CODE>0</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;myColor&nbsp;=&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Error:&nbsp;<CODE>myColor</CODE>&nbsp;can&nbsp;be&nbsp;set&nbsp;only&nbsp;once<BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a&nbsp;=&nbsp;[x,&nbsp;this];</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;a[1].yourColor&nbsp;=&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</CODE>&nbsp;Sets&nbsp;this&nbsp;instance&#8217;s&nbsp;<CODE>yourColor</CODE><BR>
<CODE>&nbsp;&nbsp;}</CODE><BR>
<CODE>}</CODE></P>

<H2>Getters and Setters</H2>

<P>A definition <CODE>var&nbsp;</CODE><VAR>x</VAR><CODE>:</CODE><VAR>t</VAR><CODE>&nbsp;=&nbsp;</CODE><VAR>v</VAR> internally
creates a hidden variable and defines a getter and a setter to access that variable:</P>

<UL>
  <LI>Evaluate <VAR>t</VAR>, which should evaluate to a type.</LI>
  <LI>Create an anonymous variable <VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR>.</LI>
  <LI><A href="../libraries/types.html#implicit-coercion">Implicitly coerce</A> <CODE>undefined</CODE> to type <VAR>t</VAR>
    (such a coercion must exist for every type) and assign the result to <VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR>.</LI>
  <LI>Define a getter <CODE>function&nbsp;get&nbsp;</CODE><VAR>x</VAR><CODE>():</CODE><VAR>t</VAR><CODE>&nbsp;{return&nbsp;</CODE><VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR><CODE>}</CODE>.</LI>
  <LI>Define a setter <CODE>function&nbsp;set&nbsp;</CODE><VAR>x</VAR><CODE>(a:</CODE><VAR>t</VAR><CODE>):Void&nbsp;{</CODE><VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR><CODE>&nbsp;=&nbsp;a}</CODE>.</LI>
  <LI>Evaluate <VAR>v</VAR>, <A href="../libraries/types.html#implicit-coercion">implicitly coerce</A> it to type <VAR>t</VAR>,
    and assign the result to <VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR>.</LI>
</UL>

<P>A definition <CODE>const&nbsp;</CODE><VAR>x</VAR><CODE>:</CODE><VAR>t</VAR><CODE>&nbsp;=&nbsp;</CODE><VAR>v</VAR> internally
creates a hidden variable and defines a getter to access that variable:</P>

<UL>
  <LI>Evaluate <VAR>t</VAR>, which should evaluate to a type.</LI>
  <LI>Create an anonymous variable <VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR>.</LI>
  <LI>Define a getter <CODE>function&nbsp;get&nbsp;</CODE><VAR>x</VAR><CODE>():</CODE><VAR>t</VAR><CODE>&nbsp;{return&nbsp;</CODE><VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR><CODE>}</CODE>.</LI>
  <LI>Define a setter <CODE>function&nbsp;set&nbsp;</CODE><VAR>x</VAR><CODE>(a:</CODE><VAR>t</VAR><CODE>):Never&nbsp;{throw&nbsp;</CODE><VAR>ConstWriteError</VAR><CODE>}</CODE>.</LI>
  <LI>Evaluate <VAR>v</VAR>, <A href="../libraries/types.html#implicit-coercion">implicitly coerce</A> it to type <VAR>t</VAR>,
    and assign the result to <VAR><SCRIPT type="text/javascript">document.write(U_xi)</SCRIPT></VAR>.</LI>
</UL>
<P>This relationship between a variable and its getter and setter is normally transparent but can be exploited occasionally.
For instance, a variable can be declared that is <CODE>private</CODE> for writing but <CODE>public</CODE> for reading:</P>

<PRE>private var name:String;
public export get name;</PRE>

<P>A subclass may override a variable&#8217;s getter or setter. To do this, the original variable has to be declared non-<CODE>final</CODE>
because variables are <CODE>final</CODE> by default:</P>

<PRE>class C {
  virtual var x:Integer;
  var y:Integer;
}

class D extends C {
  override function set x(a:Integer):Integer {y = a*2}
}

var c = new C;
c.x = 5;
c.x;       // Returns 5
c.y;       // Returns NaN (the default value for an Integer variable)
var d = new D;
d.x = 5;
d.x;       // Returns NaN
d.y;       // Returns 10</PRE>

<!--/IMPORT-->

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Wednesday, June 4, 2003</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="definitions.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="functions.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
