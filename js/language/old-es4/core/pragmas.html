<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>ECMAScript 4 Pragmas</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="packages.html">
<LINK rel=Next href="../libraries/index.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=es-title>ECMAScript 4 Netscape Proposal</SPAN></DIV>
    <DIV class=title2>Core Language</DIV>
    <DIV class=title1>Pragmas</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="packages.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="../libraries/index.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Tuesday, January 28, 2003</P>

<!--IMPORT "../../js20/core/pragmas.html" -class=js2 -class=js2-hidden +class=es4 +class=es4-hidden -->

<P>Pragmas allow a script writer to select program modes and options. Pragmas are lexically scoped and their effect does not
extend past the end of the enclosing block, <A href="statements.html#directive-group">directive group</A>, or substatement
group.</P>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-Pragma"></A><SPAN class=nonterminal>Pragma</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>use</CODE>&nbsp;<A href="#N-PragmaItems" class=nonterminal>PragmaItems</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-PragmaItems"></A><SPAN class=nonterminal>PragmaItems</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-PragmaItem" class=nonterminal>PragmaItem</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-PragmaItems" class=nonterminal>PragmaItems</A>&nbsp;<CODE class=terminal-keyword>,</CODE>&nbsp;<A href="#N-PragmaItem" class=nonterminal>PragmaItem</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-PragmaItem"></A><SPAN class=nonterminal>PragmaItem</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-PragmaExpr" class=nonterminal>PragmaExpr</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-PragmaExpr" class=nonterminal>PragmaExpr</A>&nbsp;<CODE class=terminal-keyword>?</CODE></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-PragmaExpr"></A><SPAN class=nonterminal>PragmaExpr</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A>&nbsp;<CODE class=terminal-keyword>(</CODE>&nbsp;<A href="#N-PragmaArgument" class=nonterminal>PragmaArgument</A>&nbsp;<CODE class=terminal-keyword>)</CODE></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-PragmaArgument"></A><SPAN class=nonterminal>PragmaArgument</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<CODE class=terminal-keyword>true</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>false</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<SPAN class=terminal>Number</SPAN></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>-</CODE>&nbsp;<SPAN class=terminal>Number</SPAN></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>-</CODE>&nbsp;<SPAN class=terminal>NegatedMinLong</SPAN></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<SPAN class=terminal>String</SPAN></DIV>
</DIV>

<P>The keyword <CODE>use</CODE> is followed by one or more <A href="#N-PragmaItem" class=nonterminal>PragmaItem</A>s, each
of which consists of an identifier, an optional argument, and an optional <CODE>?</CODE>.</P>

<P>The pragma identifiers below are currently defined. Implementations may define additional identifiers that have meaning
as pragmas.</P>

<DIV class=indent>
  <TABLE border=0 cellspacing=2 cellpadding=0>
    <TR>
      <TH valign=TOP nowrap align=LEFT>Identifier&nbsp;&nbsp;</TH>
      <TH valign=TOP align=LEFT>Meaning</TH>
    </TR>
    <TR>
      <TD valign=TOP nowrap><CODE>ecmascript(</CODE><VAR>n</VAR><CODE>)</CODE></TD>
      <TD valign=TOP>Error if version <VAR>n</VAR> of ECMAScript is not supported; otherwise recommends but does not require
        that the implementation only support ECMAScript version <VAR>n</VAR> features.</TD>
    </TR>
    <TR>
    </TR>
    <TR>
      <TD valign=TOP nowrap><CODE>strict</CODE><BR><CODE>strict(true)</CODE></TD>
      <TD valign=TOP><A href="#strict-mode">Strict mode</A></TD>
    </TR>
    <TR>
      <TD valign=TOP nowrap><CODE>strict(false)</CODE></TD>
      <TD valign=TOP><A href="#strict-mode">Non-strict mode</A> (default)</TD>
    </TR>
  </TABLE>
</DIV>

<P>The pragma takes effect starting with the directive after the pragma and continues either until the end of the enclosing
block or statement group or until overridden by another pragma in the same block or statement group, whichever comes first.
If a pragma references the same identifier several times, the last reference takes precedence. The semicolon insertion rule
changes implied by the <CODE>strict</CODE> pragma apply to the semicolon, if any, ending the <CODE>use</CODE> directive that
contains that pragma.</P>

<P>If an implementation does not recognize a pragma identifier, then if the <A href="#N-PragmaItem" class=nonterminal>PragmaItem</A>
ends with a <CODE>?</CODE> then that <A href="#N-PragmaItem" class=nonterminal>PragmaItem</A> is ignored; if the <A href="#N-PragmaItem" class=nonterminal>PragmaItem</A>
does not end with a <CODE>?</CODE> then an error occurs.</P>

<H2><A name="strict-mode"></A>Strict Mode</H2>

<P>Many parts of ECMAScript 4 are relaxed or unduly convoluted due to compatibility requirements with ECMAScript 3. Strict
mode sacrifices some of this compatibility for simplicity and additional error checking. Strict mode is intended to be used
in newly written ECMAScript 4 programs, although existing ECMAScript 3 programs may be retrofitted.</P>

<P>The opposite of strict mode is nonstrict mode, which is the default. A program can readily mix strict and nonstrict portions.</P>

<P>Strict mode has the following effects:</P>

<UL>
  <LI><A href="../rationale/syntax.html#line-break-semicolon-insertion">Line-break semicolon insertion</A> is turned off.
    (<A href="../rationale/syntax.html#grammatical-semicolon-insertion">Grammatical semicolon insertion</A> remains turned
    on.)</LI>
  <LI>[no&nbsp;line&nbsp;break] restrictions in grammar productions are ignored. Line breaks can be placed anywhere between
    input tokens.</LI>
  <LI>Variables must be declared.</LI>
  <LI>Definition scopes are not <A href="definitions.html#hoist">hoisted</A>.</LI>
  <LI><CODE>var</CODE> and <CODE>function</CODE> declarations without attributes or types are <A href="definitions.html#extent">initialized</A>
    at the beginning of a scope.</LI>
  <LI><A href="functions.html#N-FunctionDefinition" class=nonterminal>FunctionDefinition</A>s define constants rather than
    variables.</LI>
  <LI>Calls to functions defined under strict mode are checked for the correct number of arguments except in functions that
    explicitly allow a variable number of arguments. (The mode of the call site does not matter.)</LI>
  <LI>Implementations may choose to disable other compatibility extensions such as support for octal literals. These are not
    officially part of ECMAScript 4 but most implementations support these in nonstrict mode for compatibility with older
    programs.</LI>
</UL>

<P>An implementation does not have to implement strict mode; however, implementations are encouraged to do so.</P>

<P class=issue>See also the <A href="../rationale/syntax.html#language-directives">rationale</A>.</P>

<!--/IMPORT-->

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=BOTTOM nowrap>
    <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
    Last modified Tuesday, January 28, 2003</ADDRESS>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="packages.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="../libraries/index.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

</BODY>
</HTML>
