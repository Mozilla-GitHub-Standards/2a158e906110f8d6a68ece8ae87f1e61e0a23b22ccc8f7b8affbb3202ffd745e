<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>JavaScript 2.0 Language Declarations</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="packages.html">
<LINK rel=Next href="../libraries/index.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=draft-title>July 2000 Draft</SPAN></DIV>
    <DIV class=title2><SPAN class=draft-title>JavaScript 2.0</SPAN></DIV>
    <DIV class=title2>Core Language</DIV>
    <DIV class=title1>Language Declarations</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="packages.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="../libraries/index.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Saturday, April 29, 2000</P>

<P>Language declarations allow a script writer to select the language to use for a script or a particular section of a script.
A language denotes either a major language such as JavaScript 2.0 or a variation such as <A href="#strict-mode">strict mode</A>.</P>

<P>Developers often find it desirable to be able to write a single script that takes advantage of the latest features in a
host environment such as a browser while at the same time working in older host environments that do not support these features.
JavaScript 2.0's language declarations enable one to easily write such scripts. One may still need to use techniques such
as the <TT>LANGUAGE</TT> HTML attribute to support pre-JavaScript 2.0 environments, but at least the number of such environments
that will need to be special-cased will not increase in the future.</P>

<P>Language declarations are a dual of versioning: language declarations let a script run under a variety of historical hosts,
while versioning lets a host run a variety of historical scripts.</P>

<H3>Syntax</H3>

<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-LanguageDeclaration"></A><SPAN class=nonterminal>LanguageDeclaration</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT>&nbsp;<CODE class=terminal-keyword>language</CODE>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<A href="#N-LanguageIds" class=nonterminal>LanguageIds</A>&nbsp;<A href="#N-LanguageAlternatives" class=nonterminal>LanguageAlternatives</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-LanguageAlternatives"></A><SPAN class=nonterminal>LanguageAlternatives</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;&#171;empty&#187;</DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>|</CODE></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<CODE class=terminal-keyword>|</CODE>&nbsp;<A href="#N-LanguageIds" class=nonterminal>LanguageIds</A>&nbsp;<A href="#N-LanguageAlternatives" class=nonterminal>LanguageAlternatives</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-LanguageIds"></A><SPAN class=nonterminal>LanguageIds</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="#N-LanguageId" class=nonterminal>LanguageId</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<A href="#N-LanguageId" class=nonterminal>LanguageId</A>&nbsp;[no&nbsp;line&nbsp;break]&nbsp;<A href="#N-LanguageIds" class=nonterminal>LanguageIds</A></DIV>
</DIV>
<DIV class=grammar-rule>
  <DIV class=grammar-lhs><A name="N-LanguageId"></A><SPAN class=nonterminal>LanguageId</SPAN>&nbsp;<SCRIPT type="text/javascript">document.write(U_rArr)</SCRIPT></DIV>
  <DIV class=grammar-rhs>&nbsp;&nbsp;&nbsp;<A href="expressions.html#N-Identifier" class=nonterminal>Identifier</A></DIV>
  <DIV class=grammar-rhs>|&nbsp;&nbsp;<SPAN class=terminal>Number</SPAN></DIV>
</DIV>

<P>A language declaration uses the syntax above. The keyword <CODE class=terminal-keyword>language</CODE> is followed by one
or more language alternatives separated by vertical bars. Each language alternative consists of one or more identifiers or
numbers (language identifiers), except that, if there is more than one language alternative, the last one may be empty. The
semicolon at the end of the <A href="#N-LanguageDeclaration" class=nonterminal>LanguageDeclaration</A> cannot be
inserted by <A href="../rationale/syntax.html#line-break-semicolon-insertion">line-break semicolon insertion</A>.</P>

<P>When a JavaScript environment is lexing and parsing a JavaScript program and it encounters a <CODE class=terminal-keyword>language</CODE>
declaration, it checks whether any of the language alternatives can be satisfied. If at least one can, the environment picks
the first language alternative that can be satisfied and processes the rest of the containing block (until the closing <CODE class=terminal-keyword>}</CODE>
or until the end of the program if at the top level) using that language. A subsequent <CODE class=terminal-keyword>language</CODE>
declaration in the same block can further change the language.</P>

<P>If no language alternatives can be satisfied, then the JavaScript environment skips to the end of the containing block
(until the closing matching <CODE class=terminal-keyword>}</CODE> or until the end of the program if at the top level). Further
<CODE class=terminal-keyword>language</CODE> declarations in the same block are ignored. No error occurs unless the failing
<CODE class=terminal-keyword>language</CODE> declaration is executed as a statement, in which case it throws a syntax error.<SPAN class=issue>
[See <A href="../rationale/syntax.html#syntactic-resynchronization">rationale</A> for a discussion of some of the issues here.]</SPAN></P>

<P>The following language identifiers are currently defined:</P>

<DIV class=indent>
  <TABLE border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TH valign=TOP nowrap align=LEFT>Language Identifier&nbsp;&nbsp;</TH>
    <TH valign=TOP align=LEFT>Language</TH>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.0</CODE></TD>
    <TD valign=TOP>JavaScript 1.0</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.1</CODE></TD>
    <TD valign=TOP>JavaScript 1.1</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.2</CODE></TD>
    <TD valign=TOP>JavaScript 1.2</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.3</CODE></TD>
    <TD valign=TOP>JavaScript 1.3</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.4</CODE></TD>
    <TD valign=TOP>JavaScript 1.4</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>1.5</CODE></TD>
    <TD valign=TOP>JavaScript 1.5 (ECMAScript Edition 3)</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>2.0</CODE></TD>
    <TD valign=TOP>JavaScript 2.0</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>strict</CODE></TD>
    <TD valign=TOP><A href="#strict-mode">Strict mode</A></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>traditional</CODE></TD>
    <TD valign=TOP><A href="#traditional-mode">Traditional mode</A> (default)</TD>
  </TR>
  </TABLE>

</DIV>
<P>It is meaningless to combine two or more numeric language identifiers in the same alternative:</P>

<PRE>language 1.0 2.0;</PRE>

<P>will always fail. On the other hand, it is meaningful and useful to separate them with vertical bars. For example, one
can indicate that one prefers JavaScript 2.1 but is willing to accept JavaScript 2.0 if 2.1 is not available:</P>

<PRE>language 2.1 | 2.0;</PRE>

<P>An empty alternative will always succeed. One can use it to indicate a preference for strict mode but willingness to work
without it:</P>

<PRE>language strict |;</PRE>

<P>Language declarations are always lexically scoped and never extend past the end of the enclosing block.</P>

<P>This document specifies the 2.0 language and its <CODE>strict</CODE> and <CODE>traditional</CODE> modes. The consequences
of mixing in other languages are implementation-defined, but implementations are encouraged to do something reasonable.</P>

<H2><A name="strict-mode"></A>Strict Mode</H2>

<P>Many parts of JavaScript 2.0 are relaxed or unduly convoluted due to compatibility requirements with JavaScript 1.5. Strict
mode sacrifices some of this compatibility for simplicity and additional error checking. Strict mode is intended to be used
in newly written JavaScript 2.0 programs, although existing JavaScript 1.5 programs may be retrofitted.</P>

<P><A name="traditional-mode"></A>The opposite of strict mode is traditional mode, which is the default. A program can readily
mix strict and traditional portions.</P>

<P>Strict mode has the following effects:</P>

<UL>
  <LI><A href="../rationale/syntax.html#line-break-semicolon-insertion">Line-break semicolon insertion</A> is turned off.
    (<A href="../rationale/syntax.html#grammatical-semicolon-insertion">Grammatical semicolon insertion</A> remains turned
    on.)</LI>
  <LI>[no&nbsp;line&nbsp;break] restrictions in grammar productions are ignored. Line breaks can be placed anywhere between
    input tokens.</LI>
  <LI>Variables must be declared.</LI>
  <LI><CODE>var</CODE> declarations are not <A href="definitions.html#var-hoisting">hoisted</A> to the beginning of a scope.</LI>
  <LI><A href="functions.html#N-FunctionDefinition" class=nonterminal>FunctionDefinition</A>s define constants
    rather than variables.</LI>
  <LI>Calls to functions defined under strict mode are checked for the correct number of arguments except in <CODE>traditional</CODE>
    functions and in functions that explicitly allow a variable number of arguments. (The mode of the call site does not matter.)</LI>
  <LI>Functions no longer have a predefined <CODE><A href="functions.html#arguments-array">arguments</A></CODE><A href="functions.html#arguments-array">
    array</A>.</LI>
  <LI>Implementations may choose to disable other compatibility extensions such as support for octal literals. These are not
    officially part of JavaScript 2.0 but most implementations support these in traditional mode for compatibility with older
    programs.</LI>
</UL>

<P class=issue>See also <A href="../rationale/syntax.html#language-declarations">rationale</A>.</P>
<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=BOTTOM nowrap>
    <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
    Last modified Saturday, April 29, 2000</ADDRESS>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="packages.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="../libraries/index.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

</BODY>
</HTML>
