<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>ECMAScript Edition 3 Errata</TITLE>
<STYLE type="text/css">
CODE, PRE {font-family: "Courier New", Courier, mono; color: #0000FF}
.mod-date {font-size: smaller; font-style: italic; text-align: right}
.nonterminal {font-family: Georgia, Palatino, "Times New Roman", Times, serif; font-weight: normal; font-style: italic; color: #009900}
.change {color: #CC0000}
</STYLE>
</HEAD>

<BODY bgcolor="#FFFFFF">
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap><H2><FONT color="#FF0000" size="+4">ECMAScript Edition 3 Errata</FONT></H2></TD>
  <TD valign=TOP nowrap align=RIGHT><A href="index.html"><IMG src="arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Monday, June 9, 2003</P>

<P>The following errors are known in the ECMAScript Edition 3 standard:</P>

<TABLE border=0 cellpadding=3>
<TR>
  <TH align=left>Section</TH>
  <TH align=left>Description</TH>
</TR>
<TR>
  <TD valign=TOP rowspan=2>4.2.1</TD>
  <TD>Replace <SPAN class=change>Cf<SUB>p</SUB></SPAN> by <SPAN class=change>CF<SUB>p</SUB></SPAN> in the figure.</TD>
</TR>
<TR>
  <TD>Replace<BR>
    <SPAN class=change>&nbsp;&nbsp;(but not by cf)</SPAN><BR>
    with<BR>
    <SPAN class=change>&nbsp;&nbsp;(but not by CF)</SPAN><BR>
    in the first paragraph below the figure.</TD>
</TR>
<TR>
  <TD valign=TOP>5.1.2</TD>
  <TD>Change <SPAN class=change>section 7.8.5</SPAN> to <SPAN class=change>section 7.9</SPAN>.</TD>
</TR>
<TR>
  <TD valign=TOP>5.1.5</TD>
  <TD>After the line &#8220;<SPAN class=change>which is merely a convenient abbreviation for:</SPAN>&#8221;, change:<BR>
    <SPAN class=change>&nbsp;&nbsp;<SPAN class=nonterminal>NonZeroDigit</SPAN>&nbsp;::&nbsp;<B>one of</B></SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;<SPAN class=nonterminal>NonZeroDigit</SPAN>&nbsp;::</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP>7.1</TD>
  <TD>Remove extraneous period in the phrase<BR>
    <SPAN class=change>&nbsp;&nbsp;one must use a. Unicode escape sequence</SPAN><BR>
    in the last paragraph.</TD>
</TR>
<TR>
  <TD valign=TOP>7.3</TD>
  <TD>Change <SPAN class=change>section 7.8.5</SPAN> to <SPAN class=change>section 7.9</SPAN>.</TD>
</TR>
<TR>
  <TD valign=TOP>8.6.2</TD>
  <TD>Change <SPAN class=change>described in described in</SPAN> to <SPAN class=change>described in</SPAN> in the penultimate
    paragraph.</TD>
</TR>
<TR>
  <TD valign=TOP>9.8</TD>
  <TD>Add step numbers 1, 2, and 3 to the 2nd, 3rd, and 4th lines of the last box of the table.</TD>
</TR>
<TR>
  <TD valign=TOP>10.1.4</TD>
  <TD>Change <SPAN class=change>property</SPAN> to <SPAN class=change>property name</SPAN> in step 2 of the algorithm.</TD>
</TR>
<TR>
  <TD valign=TOP>10.2.3</TD>
  <TD>Change <SPAN class=change>(including the case where it is <CODE>null</CODE>)</SPAN> to <SPAN class=change>(note that
    <CODE>null</CODE> is not an object)</SPAN> in the last bullet point.</TD>
</TR>
<TR>
  <TD valign=TOP rowspan=2>12.6.3</TD>
  <TD>Change step 1 of the first algorithm from:<BR>
    <SPAN class=change>&nbsp;&nbsp;If the first </SPAN><SPAN class=nonterminal>Expression</SPAN><SPAN class=change> is not
    present, go to step 4.</SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;If </SPAN><SPAN class=nonterminal>ExpressionNoIn</SPAN><SPAN class=change> is not present,
    go to step 4.</SPAN></TD>
</TR>
<TR>
  <TD>Change step 7 of the second algorithm from:<BR>
    <SPAN class=change>&nbsp;&nbsp;If Result(6) is <B>false</B>, go to step 14</SPAN><SPAN class=change>.</SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;</SPAN><SPAN class=change>If Result(6) is <B>false</B>, go to step 17</SPAN><SPAN class=change>.</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP>12.11</TD>
  <TD>The second algorithm has many errors: the logic of its step 14 is incorrect, the middle element of the result value
    triple is incorrect in most cases, the algorithm does not account for missing <SPAN class=nonterminal>StatementList</SPAN>s,
    and there is no algorithm for the <SPAN class=nonterminal>CaseBlock</SPAN> : <CODE>{</CODE> <SPAN class=nonterminal>CaseClauses</SPAN>
    <CODE>}</CODE> production. Replace the second algorithm with the following couple of algorithms:
    <DIV class=change>

      <P>The production <SPAN class=nonterminal>CaseBlock</SPAN>&nbsp;:&nbsp;<CODE>{</CODE>&nbsp;<SPAN class=nonterminal>CaseClauses<SUB>opt</SUB></SPAN>&nbsp;<CODE>}</CODE>
      is given an input parameter, <VAR>input</VAR>, and is evaluated as follows:</P>

      <P>1. Let <VAR>V</VAR> = <B>empty</B>.<BR>
      2. Let <VAR>A</VAR> be the list of <SPAN class=nonterminal>CaseClause</SPAN> items in source text order.<BR>
      3. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>A</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 16.<BR>
      4. Evaluate <VAR>C</VAR>.<BR>
      5. If <VAR>input</VAR> is not equal to Result(4) as defined by the <CODE>!==</CODE> operator, then go to step 3.<BR>
      6. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 10.<BR>
      7. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      8. If <VAR>R</VAR> is an abrupt completion, then return <VAR>R</VAR>.<BR>
      9. Let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      10. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>A</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 16.<BR>
      11. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 10.<BR>
      12. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      13. If <VAR>R</VAR>.value is not <B>empty</B>, then let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      14. If <VAR>R</VAR> is an abrupt completion, then return (<VAR>R</VAR>.type,&nbsp;<VAR>V</VAR>,&nbsp;<VAR>R</VAR>.target).<BR>
      15. Go to step 10.<BR>
      16. Return (<B>normal</B>, <VAR>V</VAR>, <B>empty</B>).</P>

      <P>The production <SPAN class=nonterminal>CaseBlock</SPAN>&nbsp;:&nbsp;<CODE>{</CODE>&nbsp;<SPAN class=nonterminal>CaseClauses<SUB>opt</SUB></SPAN>&nbsp;<SPAN class=nonterminal>DefaultClause</SPAN>&nbsp;<SPAN class=nonterminal>CaseClauses<SUB>opt</SUB></SPAN>&nbsp;<CODE>}</CODE>
      is given an input parameter, <VAR>input</VAR>, and is evaluated as follows:</P>

      <P>1. Let <VAR>V</VAR> = <B>empty</B>.<BR>
      2. Let <VAR>A</VAR> be the list of <SPAN class=nonterminal>CaseClause</SPAN> items in the first <SPAN class=nonterminal>CaseClauses</SPAN>,
      in source text order.<BR>
      3. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>A</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 11.<BR>
      4. Evaluate <VAR>C</VAR>.<BR>
      5. If <VAR>input</VAR> is not equal to Result(4) as defined by the <CODE>!==</CODE> operator, then go to step 3.<BR>
      6. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 20.<BR>
      7. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      8. If <VAR>R</VAR> is an abrupt completion, then return <VAR>R</VAR>.<BR>
      9. Let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      10. Go to step 20.<BR>
      11. Let <VAR>B</VAR> be the list of <SPAN class=nonterminal>CaseClause</SPAN> items in the second <SPAN class=nonterminal>CaseClauses</SPAN>,
      in source text order.<BR>
      12. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>B</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 26.<BR>
      13. Evaluate <VAR>C</VAR>.<BR>
      14. If <VAR>input</VAR> is not equal to Result(13) as defined by the <CODE>!==</CODE> operator, then go to step 12.<BR>
      15. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 31.<BR>
      16. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      17. If <VAR>R</VAR> is an abrupt completion, then return <VAR>R</VAR>.<BR>
      18. Let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      19. Go to step 31.<BR>
      20. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>A</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 26.<BR>
      21. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 20.<BR>
      22. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      23. If <VAR>R</VAR>.value is not <B>empty</B>, then let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      24. If <VAR>R</VAR> is an abrupt completion, then return (<VAR>R</VAR>.type,&nbsp;<VAR>V</VAR>,&nbsp;<VAR>R</VAR>.target).<BR>
      25. Go to step 20.<BR>
      26. If the <SPAN class=nonterminal>DefaultClause</SPAN> does not have a <SPAN class=nonterminal>StatementList</SPAN>,
      then go to step 30.<BR>
      27. Evaluate the <SPAN class=nonterminal>DefaultClause</SPAN>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and
      let <VAR>R</VAR> be the result.<BR>
      28. If <VAR>R</VAR>.value is not <B>empty</B>, then let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      29. If <VAR>R</VAR> is an abrupt completion, then return (<VAR>R</VAR>.type,&nbsp;<VAR>V</VAR>,&nbsp;<VAR>R</VAR>.target).<BR>
      30. Let <VAR>B</VAR> be the list of <SPAN class=nonterminal>CaseClause</SPAN> items in the second <SPAN class=nonterminal>CaseClauses</SPAN>,
      in source text order.<BR>
      31. Let <VAR>C</VAR> be the next <SPAN class=nonterminal>CaseClause</SPAN> in <VAR>B</VAR>. If there is no such <SPAN class=nonterminal>CaseClause</SPAN>,
      then go to step 37.<BR>
      32. If <VAR>C</VAR> does not have a <SPAN class=nonterminal>StatementList</SPAN>, then go to step 31.<BR>
      33. Evaluate <VAR>C</VAR>&#8217;s <SPAN class=nonterminal>StatementList</SPAN> and let <VAR>R</VAR> be the result.<BR>
      34. If <VAR>R</VAR>.value is not <B>empty</B>, then let <VAR>V</VAR> = <VAR>R</VAR>.value.<BR>
      35. If <VAR>R</VAR> is an abrupt completion, then return (<VAR>R</VAR>.type,&nbsp;<VAR>V</VAR>,&nbsp;<VAR>R</VAR>.target).<BR>
      36. Go to step 31.<BR>
      37. Return (<B>normal</B>, <VAR>V</VAR>, <B>empty</B>).</P>

    </DIV></TD>
</TR>
<TR>
  <TD valign=TOP>12.14</TD>
  <TD>Change step 5 of the <SPAN class=nonterminal>TryStatement</SPAN>:&nbsp;<CODE>try</CODE>&nbsp;<SPAN class=nonterminal>Block</SPAN>&nbsp;<SPAN class=nonterminal>Catch</SPAN>&nbsp;<SPAN class=nonterminal>Finally</SPAN>
    algorithm from:<BR>
    <SPAN class=change>&nbsp;&nbsp;If Result(4).type is not <B>normal</B>, Let <I>C</I> = Result(4)</SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;Let <I>C</I> = Result(4)</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP rowspan=2>13</TD>
  <TD>Replace <SPAN class=nonterminal>FormalParameterList</SPAN> by <SPAN class=nonterminal>FormalParameterList<SUB>opt</SUB></SPAN>
    in step 1 of the first algorithm.</TD>
</TR>
<TR>
  <TD>Replace <SPAN class=change>Result(2)</SPAN> by <SPAN class=change>Result(1)</SPAN> in step 2 of the second algorithm.</TD>
</TR>
<TR>
  <TD valign=TOP>13.2.2</TD>
  <TD>Change <SPAN class=change>the <I>F</I></SPAN> to <SPAN class=change><I>F</I></SPAN> in step 3.</TD>
</TR>
<TR>
  <TD valign=TOP>15.2.4.3</TD>
  <TD>The standard is correct but unclear here. &#8220;<SPAN class=change>the result of calling <CODE>toString()</CODE></SPAN>&#8221;
    means the result of calling the function that is found by looking up the <CODE>toString</CODE> property in the <CODE>this</CODE>
    object, which is not necessarily the implementation of <CODE>toString</CODE> in section 15.2.4.2.</TD>
</TR>
<TR>
  <TD valign=TOP>15.5.4.10&nbsp;</TD>
  <TD>Change the last sentence of the second bullet from:<BR>
    <SPAN class=change>&nbsp;&nbsp;The value returned is an array with the <CODE>length</CODE> property set to <VAR>n</VAR>
    and properties 0 through <VAR>n</VAR>&#8211;1 corresponding to the first elements of the results of all matching invocations
    of <CODE>RegExp.prototype.exec</CODE>.</SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;If <VAR>n</VAR>=0, then the value returned is <CODE>null</CODE>; otherwise, the value returned
    is an array with the <CODE>length</CODE> property set to <VAR>n</VAR> and properties 0 through <VAR>n</VAR>&#8211;1 corresponding
    to the first elements of the results of all matching invocations of <CODE>RegExp.prototype.exec</CODE>.</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP>15.9.5.2&nbsp;&nbsp;</TD>
  <TD>Change last paragraph from:<BR>
    <SPAN class=change>&nbsp;&nbsp;<B>NOTE</B>&nbsp;&nbsp;It is intended that for any Date value <CODE>d</CODE>, the result
    of <CODE>Date.prototype.parse(d.toString())</CODE> (section 15.9.4.2) is equal to <CODE>d</CODE>.</SPAN><BR>
    to:<BR>
    <SPAN class=change>&nbsp;&nbsp;<B>NOTE</B>&nbsp;&nbsp;For any Date value <CODE>d</CODE> whose milliseconds amount is zero,
    the result of <CODE>Date.parse(d.toString())</CODE> is equal to <CODE>d.valueOf()</CODE>. See section 15.9.4.2.</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP rowspan=4>A.1</TD>
  <TD>Change <SPAN class=change>section 6</SPAN> to <SPAN class=change>section 7</SPAN> in the <SPAN class=nonterminal>InputElementDiv</SPAN>
    and <SPAN class=nonterminal>InputElementRegExp</SPAN> productions.</TD>
</TR>
<TR>
  <TD>Change<BR>
    &nbsp;&nbsp; <SPAN class=nonterminal>UnicodeEscapeSequence</SPAN><BR>
    to<BR>
    <SPAN class=change>&nbsp;&nbsp;<CODE>\</CODE>&nbsp;</SPAN><SPAN class=nonterminal>UnicodeEscapeSequence</SPAN><BR>
    in the <SPAN class=nonterminal>IdentifierStart</SPAN> and <SPAN class=nonterminal>IdentifierPart</SPAN> productions.</TD>
</TR>
<TR>
  <TD>Add grammar production (from 7.8.4):<BR>
    <SPAN class=change><SPAN class=nonterminal>NonEscapeCharacter</SPAN> ::<BR>
    &nbsp;&nbsp;&nbsp;&nbsp;<SPAN class=nonterminal>SourceCharacter</SPAN>&nbsp;<B>but not</B>&nbsp;<SPAN class=nonterminal>EscapeCharacter</SPAN>&nbsp;<B>or</B>&nbsp;<SPAN class=nonterminal>LineTerminator</SPAN></SPAN></TD>
</TR>
<TR>
  <TD>Delete the <SPAN class=nonterminal>UnicodeEscapeSequence</SPAN> production referring to section 7.6:<BR>
    <SPAN class=change>&nbsp;&nbsp;</SPAN><SPAN class=nonterminal>UnicodeEscapeSequence</SPAN><SPAN class=change>&nbsp;::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See
    section 7.6<BR>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<CODE>\u</CODE>&nbsp; </SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN><BR>
    Note that the <SPAN class=nonterminal>UnicodeEscapeSequence</SPAN> production referring to section 7.8.4 should stay:<BR>
    <SPAN class=change>&nbsp;&nbsp;</SPAN><SPAN class=nonterminal>UnicodeEscapeSequence</SPAN><SPAN class=change>&nbsp;::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See
    section 7.8.4<BR>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<CODE>u</CODE>&nbsp; </SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN><SPAN class=change>&nbsp;</SPAN><SPAN class=nonterminal>HexDigit</SPAN></TD>
</TR>
<TR>
  <TD valign=TOP>B.1.1</TD>
  <TD>Add grammar production:<BR>
    <SPAN class=change><SPAN class=nonterminal>OctalDigit</SPAN> :: <B>one of</B><BR>
    &nbsp;&nbsp;&nbsp;&nbsp;<CODE>0</CODE>&nbsp;<CODE>1</CODE>&nbsp;<CODE>2</CODE>&nbsp;<CODE>3</CODE>&nbsp;<CODE>4</CODE>&nbsp;<CODE>5</CODE>&nbsp;<CODE>6</CODE>&nbsp;<CODE>7</CODE></SPAN></TD>
</TR>
</TABLE>

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=BOTTOM nowrap><ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
    Last modified Tuesday, January 15, 2008</ADDRESS></TD>
  <TD valign=TOP nowrap align=RIGHT><A href="index.html"><IMG src="arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A></TD>
</TR>
</TABLE>
</BODY>
</HTML>
