<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>JavaScript 2.0 Types</TITLE>
<LINK rel=stylesheet href="../../styles.css">
<LINK rel=Start href="../index.html">
<LINK rel=Contents href="../index.html">
<LINK rel=Prev href="index.html">
<LINK rel=Next href="machine-types.html">
<SCRIPT type="text/javascript" language="JavaScript1.2" src="../../unicodeCompatibility.js"></SCRIPT>
</HEAD>

<BODY>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
<TR>
  <TD valign=TOP nowrap>
    <DIV class=title2><SPAN class=draft-title>April 2002 Draft</SPAN></DIV>
    <DIV class=title2><SPAN class=draft-title>JavaScript 2.0</SPAN></DIV>
    <DIV class=title2>Libraries</DIV>
    <DIV class=title1>Types</DIV>
  </TD>
  <TD valign=TOP nowrap align=RIGHT><A href="index.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="machine-types.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
</TR>
</TABLE>

<P class=mod-date>Wednesday, December 5, 2001</P>

<H2>Predefined Types</H2>

<P>The following <A href="../core/concepts.html#type">types</A> are predefined in JavaScript 2.0:</P>

<DIV class=indent>
  <TABLE border=1 cellspacing=2 cellpadding=0>
  <TR>
    <TH valign=TOP nowrap align=LEFT>Type</TH>
    <TH valign=TOP align=LEFT>Set of Values</TH>
    <TH valign=TOP align=LEFT>Implicit Coercions</TH>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Never"></A><CODE>Never</CODE></TD>
    <TD valign=TOP>No values</TD>
    <TD valign=TOP>None</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Void"></A><CODE>Void</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE></TD>
    <TD valign=TOP>Any value <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>undefined</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Null</CODE></TD>
    <TD valign=TOP><CODE>null</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Boolean&nbsp;&nbsp;</CODE></TD>
    <TD valign=TOP><CODE>true</CODE> and <CODE>false</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>false</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Integer"></A><CODE>Integer</CODE></TD>
    <TD valign=TOP>Double-precision IEEE floating-point numbers that are mathematical integers, including positive and negative
      zeroes, infinities, and NaN</TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> NaN</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Number"></A><CODE>Number</CODE></TD>
    <TD valign=TOP>Double-precision IEEE floating-point numbers, including positive and negative zeroes, infinities, and NaN</TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> NaN</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="char"></A><CODE>char&nbsp;</CODE></TD>
    <TD valign=TOP>Single 16-bit unicode characters</TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>char("\0")</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="String"></A><CODE>String</CODE></TD>
    <TD valign=TOP>Immutable strings of unicode characters, including <CODE>null</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Function</CODE></TD>
    <TD valign=TOP>All functions, including <CODE>null</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Array</CODE></TD>
    <TD valign=TOP>Same as <CODE>Array[Object]</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE></TD>
    <TD valign=TOP><CODE>null</CODE> as well as all arrays capable of holding elements of type <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE></TD>
    <TD valign=TOP><CODE>null</CODE> as well as all writable arrays capable of holding elements of type <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE></TD>
    <TD valign=TOP><CODE>null</CODE> as well as all writable, resizable arrays capable of holding elements of type <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>ConstArray</CODE></TD>
    <TD valign=TOP>Same as <CODE>ConstArray[Object]</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE>;
      an <CODE>Array</CODE> is copied to make a <CODE>ConstArray</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE></TD>
    <TD valign=TOP><CODE>null</CODE> as well as all constant arrays capable of holding elements of type <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE>;
      an <CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE> is copied to make a <CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><CODE>Type</CODE></TD>
    <TD valign=TOP>All types, including <CODE>null</CODE></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>null</CODE></TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Prototype"></A><CODE>Prototype</CODE></TD>
    <TD valign=TOP>All prototype-based objects, including <CODE>null</CODE></TD>
    <TD valign=TOP>None</TD>
  </TR>
  <TR>
    <TD valign=TOP nowrap><A name="Object"></A><CODE>Object</CODE></TD>
    <TD valign=TOP>All values, including <CODE>null</CODE> and <CODE>undefined</CODE></TD>
    <TD valign=TOP>None</TD>
  </TR>
  <TR class=js2>
    <TD valign=TOP nowrap><CODE>-</CODE> <VAR>t</VAR></TD>
    <TD valign=TOP>Any value belonging to type <VAR>t</VAR> except <CODE>null</CODE></TD>
    <TD valign=TOP></TD>
  </TR>
  <TR class=js2>
    <TD valign=TOP nowrap><CODE>~</CODE> <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> or any value belonging to type <VAR>t</VAR></TD>
    <TD valign=TOP><CODE>undefined</CODE> <SCRIPT type="text/javascript">document.write(U_rarr)</SCRIPT> <CODE>undefined</CODE>;
      any other implicit coercions already defined for <VAR>t</VAR></TD>
  </TR>
  </TABLE>

</DIV>


<P>Unlike in JavaScript 1.5, there is no distinction between objects and primitive values. All values can have methods. Values
of some classes are sealed, which disallows addition of dynamic properties. User-defined classes can be made to behave like
primitives by using the <A href="../core/definitions.html#class-attributes">class modifier</A> <CODE>final</CODE> <SPAN class=issue>(and
<A href="../rationale/miscellaneous.html#primitive"><CODE>primitive</CODE></A>, once it is implemented)</SPAN>.</P>

<P>The above type names are <I>not</I> reserved words. They can be used as names of local variables or class members. However,
they are defined as constants in the global scope, so a package cannot use them to name global variables.</P>

<P><CODE>Object</CODE> is the supertype of all types. <CODE>Never</CODE> is the subtype of all types. <CODE>Never</CODE> is
useful to describe the return type of a function that cannot return normally because it either falls into an infinite loop
or always throws an exception. <CODE>Never</CODE> cannot be used as the type of a variable or parameter. <CODE>Void</CODE>
is useful to describe the return type of a function that can return but that does not produce a useful value.<SPAN class=issue>
See <A href="../rationale/miscellaneous.html#types">rationale</A>.</SPAN></P>

<P>A literal number is a member of the type <CODE>Number</CODE>; if that literal has an integral value, then it is also a
member of type <CODE>Integer</CODE>. A literal string is a member of the type <CODE>String</CODE>.
There are no literals of type <CODE>char</CODE>; a <CODE>char</CODE> value can be constructed by an explicit or implicit conversion.</P>

<P>An object created with the expression <CODE>new&nbsp;Object</CODE> or <CODE>new&nbsp;</CODE><VAR>f</VAR> where <VAR>f</VAR>
is a function has the type <CODE>Prototype</CODE>. There are no direct instances of type <CODE>Object</CODE>. Only objects
of type <CODE>Prototype</CODE> have a prototype chain.</P>

<H3>Array Types</H3>

<P class=issue>The description of array types is out of date.</P>

<P>The array types have the following subtype relationships:</P>

<UL>
  <LI>If <VAR>t</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<VAR>u</VAR>, then <CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<CODE>Array[</CODE><VAR>u</VAR><CODE>]</CODE>.</LI>
  <LI>If <VAR>t</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_ne)</SCRIPT>&nbsp;<VAR>u</VAR>, then there is no
    subtype relationship between <CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE> and <CODE>StaticArray[</CODE><VAR>u</VAR><CODE>]</CODE>.</LI>
  <LI>If <VAR>t</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_ne)</SCRIPT>&nbsp;<VAR>u</VAR>, then there is no
    subtype relationship between <CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE> and <CODE>DynamicArray[</CODE><VAR>u</VAR><CODE>]</CODE>.</LI>
  <LI>If <VAR>t</VAR>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<VAR>u</VAR>, then <CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<CODE>ConstArray[</CODE><VAR>u</VAR><CODE>]</CODE>.</LI>
  <LI><CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE></LI>
  <LI><CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE></LI>
  <LI><CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE>&nbsp;<SCRIPT type="text/javascript">document.write(U_sube)</SCRIPT>&nbsp;<CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE></LI>
</UL>

<P><CODE>Array</CODE> is an abstract class; creating an instance of <CODE>Array</CODE> or <CODE>Array[</CODE><VAR>t</VAR><CODE>]</CODE>
actually creates an instance of <CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE> but with JavaScript 1.5-compatible semantics
for the constructor arguments. The expression <CODE>new &nbsp;</CODE><VAR>a</VAR><CODE>(</CODE><VAR>elt1</VAR><CODE>,&nbsp;</CODE><VAR>elt2</VAR><CODE>,&nbsp;</CODE>...<CODE>)</CODE>
where <VAR>a</VAR> is <CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE>, <CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE>,
<CODE>ConstArray</CODE>, or <CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE> creates an instance of the corresponding array
type with the given elements; this is true even if there is only one element given. The expression <VAR>a</VAR><CODE>(</CODE><VAR>n</VAR><CODE>)</CODE>
where <VAR>a</VAR> is <CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE> or <CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE>
and <VAR>n</VAR> is a number creates an array with <VAR>n</VAR> elements whose value is the default value of type <VAR>t</VAR>.
The expression <VAR>a</VAR><CODE>(</CODE><VAR>b</VAR><CODE>)</CODE> where <VAR>a</VAR> is <CODE>StaticArray[</CODE><VAR>t</VAR><CODE>]</CODE>,
<CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE>, <CODE>ConstArray</CODE>, or <CODE>ConstArray[</CODE><VAR>t</VAR><CODE>]</CODE>
and <VAR>b</VAR> is any array with element type <VAR>t</VAR> or more specific coerces <VAR>b</VAR> into array type <VAR>a</VAR>.</P>

<P>An instance of <CODE>DynamicArray[Object]</CODE> may have missing elements (holes) and is automatically expanded when an
out-of-bounds element is written. None of the other array types allows holes, and they do not automatically expand. An instance
of <CODE>DynamicArray[</CODE><VAR>t</VAR><CODE>]</CODE> where <VAR>t</VAR> is not <CODE>Object</CODE> can be resized by explicitly
writing its <CODE>length</CODE> property.</P>

<P>Instances of non-<CODE>ConstArray</CODE> array types are equal only when they are the same object. Instances of <CODE>ConstArray</CODE>
array types are equal when they have the same contents and the same element type <VAR>t</VAR>.</P>

<H3>User-Defined Types</H3>

<P>Any class defined using the <CODE>class</CODE> declaration is also a type that denotes the set of all of its and its descendants&#8217;
instances. These include the predefined classes, so <CODE>Object</CODE>, <CODE>Date</CODE>, etc. are all types. <CODE>null</CODE>
is an instance of a user-defined class. <CODE>undefined</CODE> is never an instance of a user-defined class.</P>

<H2>Meaning of Types</H2>

<P>Types are generally used to restrict the set of objects that can be held in a variable or passed as a function argument.
For example, the declaration</P>

<PRE>var x:Integer;</PRE>

<P>restricts the values that can be held in variable <CODE>x</CODE> to be integers.</P>

<P>A type declaration does not affect the semantics of reading the variable or accessing one of its properties. Thus, as long
as expression <CODE>new MyType()</CODE> returns a value of type <CODE>MyType</CODE>, the following two code snippets are equivalent:</P>

<PRE>var x:MyType = new MyType();
x.foo();</PRE>

<PRE>var x = new MyType();
x.foo();</PRE>

<P>This equivalence always holds, even if these snippets are inside the declaration of class <CODE>MyType</CODE> and <CODE>foo</CODE>
is a private field of that class. As a corollary, adding true type annotations does not change the meaning of a program.</P>

<H2>Type Expressions</H2>

<P>The language cannot syntactically distinguish type expressions from value expressions, so a type expression can be any
compile-time constant expression that evaluates to a type. <SPAN class=issue>See also the <A href="../rationale/miscellaneous.html#type-expressions">other
possible type constructors</A>.</SPAN></P>

<P>A type is also a value (whose type is <CODE>Type</CODE>) and can be used in expressions, assigned to variables, passed
to functions, etc. For example, the code</P>

<PRE>const R:Type = Number;
function abs_val(x:R):R {
  return x&lt;0 ? -x : x;
}</PRE>

<P>is equivalent to:</P>

<PRE>function abs_val(x:Number):Number {
  return x&lt;0 ? -x : x;
}</PRE>

<H2><A name="implicit-coercion"></A>Implicit Coercions</H2>

<P>Implicit coercions can take place in the following situations:</P>

<UL>
  <LI>Assigning a value <VAR>v</VAR> to a variable of type <VAR>t</VAR></LI>
  <LI>Declaring an uninitialized variable of type <VAR>t</VAR>, in which case <CODE>undefined</CODE> is implicitly coerced
    to type <VAR>t</VAR></LI>
  <LI>Passing an argument <VAR>v</VAR> to a function whose corresponding parameter has type <VAR>t</VAR></LI>
  <LI>Returning a result <VAR>v</VAR> from a function declared to return a value of type <VAR>t</VAR></LI>
</UL>


<P>In any of these cases, if <VAR>v</VAR> <SCRIPT type="text/javascript">document.write(U_isin)</SCRIPT> <VAR>t</VAR>, then
<VAR>v</VAR> is passed unchanged. If <VAR>v</VAR> <SCRIPT type="text/javascript">document.write(U_notin)</SCRIPT> <VAR>t</VAR>,
then if <VAR>t</VAR> defines an <A href="../core/concepts.html#type">implicit mapping</A> for value <VAR>v</VAR> then that
mapped <VAR>v</VAR> is used; otherwise an error occurs.</P>

<P><CODE>undefined</CODE> can be implicitly coerced to any type except <CODE>Never</CODE>.</P>

<H2><A name="explicit-coercion"></A>Explicit Coercions</H2>

<P>An explicit coercion performs more aggressive transformations than an implicit coercion. To invoke an eplicit coercion,
use the type as a function, passing it the value as an argument:</P>

<P class=syntax><VAR>type</VAR><CODE>(</CODE><VAR>value</VAR><CODE>)</CODE></P>

<P>For example, <CODE>Integer(258.1)</CODE> returns the integer <CODE>258</CODE>, and <CODE>String(2+2==4)</CODE> returns
the string <CODE>"true"</CODE>.</P>

<P>If <VAR>value</VAR> is already a member of <VAR>type</VAR>, the explicit coercion returns <VAR>value</VAR> unchanged. If
<VAR>value</VAR> can be implicitly coerced to <VAR>type</VAR>, the explicit coercion returns the result of the implicit coercion.
Otherwise, the explicit coercion uses <VAR>type</VAR>&#8217;s <A href="../core/concepts.html#type">explicit mapping</A>.</P>

<HR>
<TABLE width="100%" border=0 cellspacing=2 cellpadding=0>
  <TR>
    <TD valign=BOTTOM nowrap>
      <ADDRESS><A href="mailto:waldemar@netscape.com">Waldemar Horwat</A><BR>
      Last modified Wednesday, December 5, 2001</ADDRESS>
    </TD>
    <TD valign=TOP nowrap align=RIGHT><A href="index.html"><IMG src="../../arrows/left.gif" align=BOTTOM width=37 height=37 alt="previous"></A><A href="../index.html"><IMG src="../../arrows/up.gif" align=BOTTOM width=37 height=37 alt="up"></A><A href="machine-types.html"><IMG src="../../arrows/right.gif" align=BOTTOM width=37 height=37 alt="next"></A></TD>
  </TR>
</TABLE>
</BODY>
</HTML>
