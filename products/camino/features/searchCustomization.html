<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">
<html>
<head>
<link rel="top" title="Home" href="http://www.mozilla.org/">
<link rel="stylesheet" type="text/css" href="../../../css/print.css"  media="print">
<link rel="stylesheet" type="text/css" href="../../../css/base/content.css"  media="all">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/content.css" title="Cavendish" media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/base/template.css"  media="screen">
<link rel="stylesheet" type="text/css" href="../../../css/cavendish/template.css" title="Cavendish" media="screen">
<link rel="icon" href="../../../images/mozilla-16.png" type="image/png">

  <meta http-equiv="content-type"
 content="text/html; charset=iso-8859-1">
  <title>Customizing Search Engines in Camino's Toolbar Search Field</title>
  <style type="text/css">
      body {font-size: 10pt; padding: 0; margin: 5px;}
      table {border: outset 3px; border-collapse: separate;}
      td {border: solid 1px; padding: 10px;}
      em {font-style: normal; color: #f00;}
      pre, code {font-family: Monaco, Courier New, monospace;}
      h3 {margin-bottom: 3px; padding: 0;}
      p.indented {margin: 0 0 0 4em; padding: 0;}
      p.hits {text-align: right;}
      em.changed {color: #FF0000;}
    </style>
<script src="../../../__utm.js" type="text/javascript"></script>
</head>
<body id="www-mozilla-org" class="deepLevel">
<div id="container">
<p class="important">You are currently viewing a snapshot of www.mozilla.org taken on April 21, 2008. Most of this content is
highly out of date (some pages haven't been updated since the project began in 1998) and exists for historical purposes only.  If
there are any pages on this archive site that you think should be added back to www.mozilla.org, please <a
href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Websites&component=www.mozilla.org">file a bug</a>.</p>
<p class="skipLink"><a href="#mainContent" accesskey="2">Skip to main content</a></p>
<div id="header">
<h1><a href="/" title="Return to home page" accesskey="1">Mozilla</a></h1>
<ul>
<li id="menu_aboutus"><a href="../../../about/" title="Getting the most out of your online experience">About</a></li>
<li id="menu_developers"><a href="../../../developer/" title="Using Mozilla's products for your own applications">Developers</a></li>
<li id="menu_store"><a href="http://store.mozilla.org/?r=mozorg1" title="Shop for Mozilla products on CD and other merchandise">Store</a></li>
<li id="menu_support"><a href="../../../support/" title="Installation, trouble-shooting, and the knowledge base">Support</a></li>
<li id="menu_products"><a href="../../../products/" title="All software Mozilla currently offers">Products</a></li>
</ul>
<form id="searchbox_002443141534113389537:ysdmevkkknw" action="http://www.google.com/cse" title="mozilla.org Search">
<div>
<label for="q" title="Search mozilla.org's sites">search mozilla:</label>
<input type="hidden" name="cx" value="002443141534113389537:ysdmevkkknw">
<input type="hidden" name="cof" value="FORID:0">
<input type="text" id="q" name="q" accesskey="s" size="30">
<input type="submit" id="submit" value="Go">
</div>
</form>
</div>
<hr class="hide">
<div id="mBody">
<div id="side">

<ul id="nav">
<li><a title="Roadmap" href="../../../roadmap.html"><strong> Roadmap</strong></a></li>
<li><a title="Projects" href="../../../projects/"><strong> Projects</strong></a></li>
<li><a title="For developers" href="../../../developer/"><strong> Coding</strong></a>
<ul>
<li><a title="Module Owners" href="../../../owners.html"> Module Owners</a></li>
<li><a title="Hacking" href="../../../hacking/"> Hacking</a></li>
<li><a title="Get the Source" href="http://developer.mozilla.org/en/docs/Download_Mozilla_Source_Code"> Get the Source</a></li>
<li><a title="Building Mozilla" href="http://developer.mozilla.org/en/docs/Build_Documentation"> Build It</a></li>
</ul>
</li>
<li><a title="Testing" href="../../../quality/"><strong> Testing</strong></a>
<ul>
<li><a title="Downloads of mozilla.org software releases" href="../../../download.html"> Releases</a></li>
<li><a title="Latest mozilla builds for testers" href="../../../developer/#builds"> Nightly Builds</a></li>
<li><a title="For testers to report bugs" href="https://bugzilla.mozilla.org/"> Report A Problem</a></li>
</ul>
</li>
<li><a title="Tools for mozilla developers" href="../../../tools.html"><strong> Tools</strong></a>
<ul>
<li><a title="Bug tracking system for mozilla testers." href="https://bugzilla.mozilla.org/"> Bugzilla</a></li>
<li><a title="Latest status of mozilla builds" href="http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox"> Tinderbox</a></li>
<li><a title="Latest checkins" href="http://bonsai.mozilla.org/cvsqueryform.cgi"> Bonsai</a></li>
<li><a title="Source cross reference" href="http://lxr.mozilla.org/seamonkey/"> LXR</a></li>
</ul>
</li>
<li><a title="Frequently Asked Questions." href="../../../faq.html"><strong> FAQs</strong></a></li>
</ul>

</div>
<hr class="hide">
<div id="mainContent">




<h1>Customizing Camino's Toolbar Search Field</h1>
<p>New in Camino 0.8, there is a search field you can add to the
toolbar which will allow you to search using <a
 href="http://www.google.com/" title="Google">Google</a>, <a
 href="http://images.google.com/" title="Google Images">Google Images</a>,
or Google's "Search this Site" feature. While no user interface exists
in Camino to edit this list, all you need is a text editor to localize
or add new search engines to the list.<br>
</p>
<p>Before you begin, make sure the search field is on your toolbar. It
should be part of the default set of toolbar items, but if it's not,
add it by selecting "Customize Toolbar&#8230;" from the "View" menu and
dragging the search item to your toolbar.<br>
</p>
<h2>Background Info</h2>
<p>The search engine plist can be found in the Camino application
package at <code>Camino.app/Contents/Resources/English.lproj/SearchURLList.plist</code>.</p>
<p>The format of <code>SearchURLList.plist</code> is straightforward.
Essentially, you have a list of search engine names and their
corresponding search <acronym title="Uniform Resource Locater">URL</acronym>s.
The search engine name is the human-readable string displayed in the
search field's magnifying glass menu, and the search
URL is the URL that Camino will visit to
display search results.</p>
<p>In order to search, there are two special modifiers that can be
placed in the search URLs:</p>
<h3>%s &#8212; User's Search String </h3>
<p class="indented">Replaced
by the user's search string. For example, if the user enters "Mac
Browser Camino" and the search URL is
"http://www.google.com/search?q=%s", the browser will visit the page
"http://www.google.com/search?q=Mac Browser Camino". %s should almost
always be in your search URL.</p>
<h3>%d &#8212; Current URL's Hostname</h3>
<p class="indented">Replaced by the hostname of the URL that the user
is currently visiting. For example, if the user is currently visiting <a
 href="http://www.apple.com/" title="Apple Computer, Inc.">http://www.apple.com</a>,
types in "Mac OS X" and the search URL is
"http://www.google.com/search?q=%s site:%d", the browser will visit the
page "http://www.google.com/search?q=Mac OS X site:www.apple.com". %d
is only used in very rare circumstances, like Google's Search this Site.</p>
<p>Finally, there's a special key in <code>SearchURLList.plist</code>
called <code>PreferredSearchEngine</code>. This key is used to decide
which search engine to select by default. <strong>This key-value pair
must be in the plist, or Camino will fail to load properly</strong>.
Its value must be the key of one of the search engines URLs in the
list. By default, the value is "Google". If you add another search
engine that you would prefer as the default instead of Google, replace
the value of <code>PreferredSearchEngine</code> with the key
corresponding to the search engine you want as the default.</p>
<h2>Concrete Example</h2>
<p>Here is the content of <code>SearchURLList.plist</code> by default:</p>
<pre>      &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>      &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<br>      &lt;plist version="1.0"&gt;<br>	&lt;dict&gt;<br>	  &lt;key&gt;Google&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s&lt;/string&gt;<br>	  &lt;key&gt;Google Images&lt;/key&gt;<br>	  &lt;string&gt;http://images.google.com/images?q=%s&lt;/string&gt;<br>	  &lt;key&gt;PreferredSearchEngine&lt;/key&gt;<br>	  &lt;string&gt;Google&lt;/string&gt;<br>	  &lt;key&gt;Search this Site&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s site:%d&lt;/string&gt;<br>	&lt;/dict&gt;<br>      &lt;/plist&gt;<br>    </pre>
<p>To add new search engines (for example, <a
 href="http://www.dictionary.com/" title="Dictionary.com">Dictionary.com</a>,
<a href="http://www.dmoz.org/" title="The Open Directory Project">dMoz.org</a>,
<a href="http://www.ebay.com/" title="eBay">eBay</a>, or <a
 href="http://news.google.com/" title="Google News">Google News</a>),
the first step is to determine the search URL for each engine. There
are many ways to do this, but the easiest is to visit
the site, enter a search with a unique search string such as
"CAMINO_SEARCH_STRING", and look at the resulting search page's URL.
For example, searching on Dictionary.com yields
"http://dictionary.reference.com/search?q=CAMINO_SEARCH_STRING". Now
replace CAMINO_SEARCH_STRING with %s and the result is
"http://dictionary.reference.com/search?q=%s".</p>
<p>Using the same process for the remaining three search engines, we
end up with the following:</p>
<table>
  <tbody>
    <tr>
      <td>Dictionary.com</td>
      <td>http://dictionary.reference.com/search?q=%s</td>
    </tr>
    <tr>
      <td>dmoz.org</td>
      <td>http://search.dmoz.org/cgi-bin/search?search=%s</td>
    </tr>
    <tr>
      <td>eBay</td>
      <td>http://search.ebay.com/search/search.dll?cgiurl=http%3A%2F%2Fcgi.ebay.com%2Fws%2F&amp;krd=1&amp;from=R8&amp;MfcISAPICommand=GetResult&amp;ht=1&amp;SortProperty=MetaEndSort&amp;query=%s</td>
    </tr>
    <tr>
      <td>Google News</td>
      <td>http://news.google.com/news?hl=en&amp;q=%s&amp;btnG=Search+News</td>
    </tr>
  </tbody>
</table>
<p><strong>Note: Since the plist is an <acronym
 title="Extensible Markup Language">XML</acronym> file, certain
characters have to be replaced with character entities for Camino to
load properly</strong>.
One particularly important character that will show up in search URLs
often is '&amp;', which needs to be replaced with '&amp;amp;' to work
properly. Here's a <a
 href="http://www.w3schools.com/html/html_entitiesref.asp"
 title="HTML Character Entities">full list of entities for use with
HTML/XML</a>.
This list includes which characters need to be changed and what they
need to be changed to. Apple's PropertyList Editor, included with the <a
 href="http://developer.apple.com/tools/macosxtools.html"
 title="Mac OS X Developer Tools">Mac OS X developer tools</a>
does this substitution for you, and makes this whole process a bit
simpler.<br>
</p>
<p>Doing
a little experimentation (and knowing a little about the way search
engines work), we can trim the eBay and Google News search to URLs
"http://search.ebay.com/search/search.dll?query=%s" and
"http://news.google.com/news?q=%s", respectively. This isn't required,
but it's a little easier to read.</p>
<p>So our final list of search engines with their corresponding search
URLs is:</p>
<table>
  <tbody>
    <tr>
      <td>Dictionary.com</td>
      <td>http://dictionary.reference.com/search?q=%s</td>
    </tr>
    <tr>
      <td>dmoz.org</td>
      <td>http://search.dmoz.org/cgi-bin/search?search=%s</td>
    </tr>
    <tr>
      <td>eBay</td>
      <td>http://search.ebay.com/search/search.dll?query=%s</td>
    </tr>
    <tr>
      <td>Google News</td>
      <td>http://news.google.com/news?q=%s</td>
    </tr>
  </tbody>
</table>
<p>All that remains is to add these to <code>SearchURLList.plist</code>.
Open up <code>SearchURLPlist.plist</code> in your favorite text editor
(TextEdit is fine). For every search engine in our list, we need to add
a line that looks like <code>&lt;key&gt;SEARCH_ENGINE_TITLE&lt;/key&gt;</code>,
followed by a line that looks like <code>&lt;string&gt;SEARCH_URL&lt;/string&gt;</code>,
where SEARCH_ENGINE_TITLE should be replaced by the name of the search
engine (e.g. Dictionary.com), and SEARCH_URL should be replaced by the
search URL we determined in the previous step (e.g.
http://dictionary.reference.com/search?q=%s). These lines need to
placed between the <code>&lt;dict&gt;</code> and <code>&lt;/dict&gt;</code>
tags.</p>
<p>Adding Dictionary.com's entry to the list will now look as follows,
with changes highlighted in red:</p>
<pre>      &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>      &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<br>      &lt;plist version="1.0"&gt;<br>	&lt;dict&gt;<br>	  &lt;key&gt;Google&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s&lt;/string&gt;<br>	  &lt;key&gt;Google Images&lt;/key&gt;<br>	  &lt;string&gt;http://images.google.com/images?q=%s&lt;/string&gt;<br>	  &lt;key&gt;PreferredSearchEngine&lt;/key&gt;<br>	  &lt;string&gt;Google&lt;/string&gt;<br>	  &lt;key&gt;Search this Site&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s site:%d&lt;/string&gt;<br>	  <em
 class="changed">&lt;key&gt;Dictionary.com&lt;/key&gt;<br>	  &lt;string&gt;http://dictionary.reference.com/search?q=%s&lt;/string&gt;</em><br>	&lt;/dict&gt;<br>      &lt;/plist&gt;<br>    </pre>
<p>Adding the remaining three, the file looks like this:</p>
<pre class="fileContents">      &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>      &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<br>      &lt;plist version="1.0"&gt;<br>	&lt;dict&gt;<br>	  &lt;key&gt;Google&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s&lt;/string&gt;<br>	  &lt;key&gt;Google Images&lt;/key&gt;<br>	  &lt;string&gt;http://images.google.com/images?q=%s&lt;/string&gt;<br>	  &lt;key&gt;PreferredSearchEngine&lt;/key&gt;<br>	  &lt;string&gt;Google&lt;/string&gt;<br>	  &lt;key&gt;Search this Site&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s site:%d&lt;/string&gt;<br>	  &lt;key&gt;Dictionary.com&lt;/key&gt;<br>	  &lt;string&gt;http://dictionary.reference.com/search?q=%s&lt;/string&gt;<br>	  <em
 class="changed">&lt;key&gt;dMoz.org&lt;/key&gt;<br>	  &lt;string&gt;http://search.dmoz.org/cgi-bin/search?search=%s&lt;/string&gt;<br>	  &lt;key&gt;eBay&lt;/key&gt;<br>	  &lt;string&gt;http://search.ebay.com/search/search.dll?query=%s&lt;/string&gt;<br>	  &lt;key&gt;Google News&lt;/key&gt;<br>	  &lt;string&gt;http://news.google.com/news?q=%s&lt;/string&gt;</em><br>	&lt;/dict&gt;<br>      &lt;/plist&gt;<br>    </pre>
<p><strong>Note</strong>:
It doesn't matter how you order the search engines. Camino will
automatically display them in alphabetical order in the search field.</p>
<p>If you prefer another engine to be the default, replace the value
associated
with the key <code>PreferredSearchEngine</code> with the key of the
desired search engine. The following example demonstrates "Google News"
as the new preferred search engine:</p>
<pre>      &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>      &lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;<br>      &lt;plist version="1.0"&gt;<br>	&lt;dict&gt;<br>	  &lt;key&gt;Google&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s&lt;/string&gt;<br>	  &lt;key&gt;Google Images&lt;/key&gt;<br>	  &lt;string&gt;http://images.google.com/images?q=%s&lt;/string&gt;<br>	  &lt;key&gt;PreferredSearchEngine&lt;/key&gt;<br>	  &lt;string&gt;<em
 class="changed">Google News</em>&lt;/string&gt;<br>	  &lt;key&gt;Search this Site&lt;/key&gt;<br>	  &lt;string&gt;http://www.google.com/search?q=%s site:%d&lt;/string&gt;<br>	  &lt;key&gt;Dictionary.com&lt;/key&gt;<br>	  &lt;string&gt;http://dictionary.reference.com/search?q=%s&lt;/string&gt;<br>	  &lt;key&gt;dMoz.org&lt;/key&gt;<br>	  &lt;string&gt;http://search.dmoz.org/cgi-bin/search?search=%s&lt;/string&gt;<br>	  &lt;key&gt;eBay&lt;/key&gt;<br>	  &lt;string&gt;http://search.ebay.com/search/search.dll?query=%s&lt;/string&gt;<br>	  &lt;key&gt;Google News&lt;/key&gt;<br>	  &lt;string&gt;http://news.google.com/news?q=%s&lt;/string&gt;<br>	&lt;/dict&gt;<br>      &lt;/plist&gt;<br></pre>



<hr class="hide">
</div>
</div>
<div id="footer">
<ul>
<li><a href="../../../sitemap.html">Site Map</a></li>
<li><a href="../../../security/">Security Updates</a></li>
<li><a href="../../../contact/">Contact Us</a></li>
<li><a href="../../../foundation/donate.html">Donate</a></li>
</ul>
<p class="copyright">
Portions of this content are &copy; 1998&#8211;2009 by individual mozilla.org
contributors; content available under a Creative Commons license | <a
href="http://www.mozilla.org/foundation/licensing/website-content.html">Details</a>.</p>
<p>
<span>Last modified February 17,  2004</span>
<span><a href="http://bonsai-www.mozilla.org/cvslog.cgi?file=mozilla-org/html/products/camino/features/searchCustomization.html&amp;rev=&amp;root=/www/">Document History</a></span>
</p>
</div>
</div>
</body>
</html>
