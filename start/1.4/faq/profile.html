<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
 <head>
  <title>Mozilla 1.4 FAQ: 7. Profile &amp; Backup</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <link rel="stylesheet" title="Orange" href="../defaultstyle.css" type="text/css">
  <link rel="alternate stylesheet" title="Simple" href="../basicstyle.css" type="text/css">
  <link rel="alternate stylesheet" title="Pacific" href="../bluestyle.css" type="text/css">
  <link rel="icon" href="../images/mozilla-16.png" type="image/png">

  <script src="../detect-problems.js" type="text/javascript"></script>
  <script src="../stylesheets.js" type="text/javascript"></script>

  <link rel="Top" href="../../">
  <link rel="Up" href="../">
  <link rel="prev" href="chatzilla.html" title="ChatZilla IRC">
  <link rel="next" href="appearance.html" title="Changing Mozillas Appearance">
  <link rel="search" href="/search.html">

 </head>

 <body onload="loadStyle();silentlyFixErrors('../')">

  <div id="mainHeaderContainer" class="sectionHeaderContainer">
   <img src="../images/dino.png" alt="" id="dinoHead">
   <div id="mainHeader" class="sectionHeader">
    <a href="../" id="mozillaLogo"></a>
   </div>
  </div>
  <div id="mainSection" class="section">
   <h1><a name="top">7. Profiles &amp; Backup</a></h1>

<div class="toc">
<ul>
<li><a href="#what">7.1. What is my profile?</a></li>

<li><a href="#newprofile">7.2. How do I set up multiple profiles?</a></li>
<li><a href="#location">7.3. Where is my profile stored?</a></li>
<li><a href="#salt">7.4. What is the @$%#@$%#.slt directory in my profile directory?</a></li>
<li><a href="#migrate">7.5. How do I move my Netscape 4.x profile to
Mozilla?</a></li>
<li><a href="#backup">7.6. How do I back up my profile data?</a></li>
<li><a href="#restore">7.7. How do I restore my profile data from backup?</a></li>
<li><a href="#rescue">7.8. How do I rescue my data from a corrupted profile?</a></li>
<li><a href="#transport">7.9. How do I transport my profile to a different machine?</a></li>
<li><a href="#netscape">7.10. Can I share a profile with my copy of Netscape
7, or with an earlier version of Mozilla?</a></li>

<li><a href="#roaming">7.11. Does Mozilla support roaming profiles?</a></li>
<li><a href="#protect">7.12. How do I protect data of my profile?</a></li>
<li><a href="#cmd-line">7.13. How do I force Mozilla to open with a specific profile?</a></li>
</ul>
</div>

<div class="content">

<dl class="faqs">
<dt>
<a onclick="return false;" name="what" href="#what">7.1. What is my profile?</a></dt>
<dd>
<p>Your profile is your identity in Mozilla. Your
profile contains your bookmarks, mail/news files and account settings,
stored passwords, address book, security certificates and preferences.
</p>

<p>
You may have multiple Mozilla profiles on one computer, for example, to
separate your home and work Web surfing activities, or for each of your
family members sharing your computer.</p>

</dd>
<dt>
<a onclick="return false;" name="newprofile" href="#newprofile">
7.2. How do I set up multiple profiles?</a></dt>
<dd>

<p>
You may set up new profiles from the Profile Manager:

<ul>
   <li><p>

   On Windows, open the Start menu and choose Programs, then Mozilla, 
   then Profile Manager. Or you can run <kbd>mozilla -profilemanager</kbd>
   from the command-line window.
   </p></li>

   <li><p>
<!--
   On Mac OS X, open Terminal, cd to the directory containing Mozilla.app
   (the Mozilla application bundle) and enter:
   

<kbd>
Mozilla.app/Contents/MacOS/mozilla -profilemanager
</kbd>
-->
   On Mac OS X, hold down the Option key and double click the Mozilla
   icon.
   </p></li>

   <li><p>
   On Linux or Unix, open a shell prompt, <kbd>cd</kbd> to the Mozilla
   program directory and enter <kbd>mozilla -profilemanager</kbd>
   </p></li>

   </ul>
</li>

<p>If you had a previous profile and it is not listed, it is either
corrupted or is no longer recognized by Mozilla.</p>
</dd>
<dt>
<a onclick="return false;" name="location" href="#location">7.3. Where is my profile stored?</a></dt>
<dd>

<p>
The location of a profile has three elements: the BASE, its NAME, and 
its SALT (<tt>xxxxxxxx.slt</tt>). For example,
</p>

<table class="screen">
<tr>
<td class="alt1"><tt>C:\Windows\Application Data\Mozilla\Profiles\</tt></td>
<td class="alt2"><tt>John Smith\</tt></td>
<td class="alt1"><tt>lm34qgkq.slt</tt></td>
</tr>
<tr>
<td style="text-align:center;" class="alt1">base profile directory</td>
<td style="text-align:center;" class="alt2">name</td>
<td style="text-align:center;" class="alt1">salt</td>

</tr>
</table>

<p>
The BASE profile directory houses the profile registry
(<tt>Registry.dat</tt>) file. The BASE directory depends
on the system settings, as will be described later.
</p>

<p>When you create a new profile, you can
choose a different BASE directory and NAME sub-directory
to put your profile files.</p>

<p>The SALT is a sub-directory named with eight random
alpha-numerals followed by <tt>.slt</tt> extension
(see <a href="#salt">7.4

&#8220;What is the @$%#@$%#.slt directory in my profile directory&#8221;</a>).

When you create a new profile, Mozilla automatically generates
a SALT directory if it doesn't already exist. But if SALT does
exist, the Profile Manager will use it.</p>

<p>
The following lists <em>typical</em> base profile directories:
</p>

<p><u>Windows</u></p>

<ul>
<li><p>
On Windows 95, Windows 98, or Windows ME (without log-in), a typical 
base profile location is:

</p>

<tt>C:\Windows\Application Data\Mozilla\Profiles\</tt></li>

<li><p>
On Windows 95, Windows 98 or Windows ME with login, a typical base 
profile location is:
</p>

<tt>C:\Windows\Profiles\[Log-in Name]\Application Data\Mozilla\Profiles\</tt></li>

<li><p>
On Windows 2000 or Windows XP, a typical base profile location is:
</p>

<tt>C:\Documents and Settings\[Log-in Name]\Application Data\Mozilla\Profiles\</tt>

<p>
<strong>Note:</strong> on Windows 2000 and Windows XP, the
&#8220;Document and Settings&#8221;
directory is hidden twice; to access the directory, you may
need to set Windows Explorer to show System and Hidden
directories and files.</p></li>
</ul>

<p><u>Macintosh</u></p>

<ul>
<li><p>
On Mac OS X, a typical profile location is:

</p>

<tt>~/Library/Mozilla/Profiles/</tt></li>
</ul>

<p><u>Linux</u></p>

<ul>
<li><p>
On Linux, a typical profile location is:
</p>

<p><tt>~/.mozilla/</tt></li></p>
</ul>

</dd>

<dt>
<a onclick="return false;" name="salt" href="#salt">
7.4. What is the @$%#@$%#.slt directory in my profile directory?</a></dt>
<dd>
<p>
This is called &#8220;salting.&#8221; Profile data is stored in a
randomly named  directory to make it difficult for malicious programs
to find profile  data (see bug
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=56002">56002</a> and 
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=97180">97180</a>)

</p>

</dd>

<dt>
<a onclick="return false;" name="migrate" href="#migrate">
7.5. How do I move my Netscape 4.<i>x</i> profile to
Mozilla?</a></dt>
<dd>
<p>The Profile Manager should detect and import a profile from
Netscape 4.5 or later automatically while installing, except for the
address book and any security certificates.</p>

<p>You can import your bookmarks by hand with Bookmarks | Manage Bookmarks |
Tools | Import. Since the bookmarks file is an HTML file, it can also easily be edited by
hand.</p>

<p>To move your address book, export it from Netscape 4.<i>x</i> as
text (<tt>.ldif</tt>) and import it into Mozilla as LDIF.</p>

<p>Your mail files (the files with no extensions) can be copied
directly from your Netscape 4 profile to the <tt>Mail</tt> folder
in your Mozilla profile.</p>
</dd>

<dt><a
onclick="return false;" name="backup" href="#backup">

7.6. How do I back up my profile data?</a></dt>
<dd>

<p>
Occasionally, your browser software or your computer system may 
malfunction and cause important profile data to be lost. Therefore
we recommand that you make a backup copy of your profile periodically.
Backup frequency will depend on your usage.
</p>

<p>
All your user data are stored in your profile directories (see
<a href="#location">7.3 &#8220;Where is my profile stored?&#8221;</a>).
If you are not sure what to back up, or if you want to back up everything,
back up the entire directory content. Restoring or transport profile
data will be easier if you keep the SALT and NAME directory hierarchy.
</p>

<!--
<p>
The following files should <em>not</em> be backed up:

</p>

<ul>
<li><tt>xul.mfl</tt>, <tt>xul.mfasl</tt>, or <tt>XUL FastLoad File</tt></li>
<li><tt>localstore.rdf</tt></li>
<li><tt>chrome/*.jar</tt> (custom theme files)</li>
</ul>

<p>
Reusing the above mentioned files may cause Mozilla to crash or 
malfunction. To reclaim a theme, install the latest version of your 
theme instead of using a backup copy.
</p>
-->

<p>
The following subsection describes how you can selectively back up your data:
</p>

<u>Mail</u>

<p>
Mail messages are stored in the <tt>Mail</tt> (or <tt>ImapMail</tt>)
sub-directory (e.g. <tt>/Mail/pop.mail.yahoo.com/</tt>).  To back up
your mail messages, save the files without extension, for example

<tt>INBOX</tt>. To back up filters too, save the <tt>rules.dat</tt>
file. The <tt>*.msf</tt> files are index files that will be 
automatically regenerated if removed.  Save the entire <tt>Mail</tt>
directory if you are uncertain what to save.
</p>
<u>News</u>

<p>
News settings and messages are stored in the <tt>News</tt>

sub-directory (e.g. <tt>/News/news.mozilla.org/</tt>).  Your
subscribed groups are stored in the <tt>*.rc</tt> file (e.g.
<tt>news.mozilla.org.rc</tt>).  The complete news server groupslist is 
stored in <tt>hostinfo.dat</tt>
(e.g. <tt>/News/news.mozilla.org/hostinfo.dat</tt>). <tt>*.msf</tt> 
files store message summaries.
To back up news, save the <tt>*.rc</tt>, <tt>*.dat</tt>,
and <tt>*.msf</tt> files.

</p>

<p><u>Address book</u></p>

<p>
In your profile directory, save <tt>abook.mab</tt> (personal address book)
and  <tt>history.mab</tt> (collected addresses). If you have more than one
address book, save all <tt>*.mab</tt> files.
</p>

<p><u>Bookmarks</u></p>

<p>
Save the <tt>bookmarks.html</tt> file.
</p>

<p><u>Saved password data</u></p>

<p>
Username and password data is stored in <tt>12345678.s</tt>

(the number part is random). Save the file.
</p>

<p><u>Saved form data</u></p>

<p>
Saved form data is stored in <tt>12345678.w</tt>
(the number part is random). Save the file.
</p>

<p><u>Junk filters</u></p>

<p>

Save the <tt>training.dat</tt> 
file which stores information for the new smart filtering system.
</p>

<p><u>Cookies</u></p>

<p>
Save the <tt>cookies.txt</tt> file.
</p>

<p><u>User preferences</u></p>

<p>
The main Mozilla configuration file is <tt>prefs.js</tt>. Save this file.
</p>

<p><u>Customization files</u></p>

<p>
Save <tt>user.js</tt>, <tt>chrome/userContent.css</tt>, and
<tt>chrome/userChrome.css</tt> if you use them to customize Mozilla.

</p>

</dd>

<dt><a onclick="return false;"
name="restore" href="#restore">7.7.
How do I restore my profile data from backup?</a></dt>
<dd>

<p>
Normally, all you need to do is to restore with the backup copies of
your profile files.
</p>

<p>
Exit the browser, and replace the relevant files in your profile 
directory with the backup copies. If after restart the profile data 
still appear to be &#8220;lost&#8221;, you may have a corrupted
chrome cache file, in which case, exit your browser, delete the
<tt>xul.mfl</tt>, <tt>xul.mfasl</tt>, or <tt>XUL  FastLoad File</tt>

file in your profile directory, and restart Mozilla again.
</p>
</dd>

<dt><a onclick="return false;"
name="rescue" href="#rescue">7.8.
How do I rescue my data from a corrupted profile?</a></dt>
<dd>
<p>Item moved. See troubleshooting guide:</p>
<ul>
  <li><a href="../troubleshooting/#bookmarks-gone">Help, my bookmarks are all gone!</a></li>
  <li><a href="../troubleshooting/#restore-mail">My system crashed when I exited Mozilla. Now all my mail are gone. What do I do?</a></li>
</ul>
</dd>

<dt><a onclick="return false;"
name="transport" href="#transport">7.9.
How do I transport my profile to a different machine?</a></dt>
<dd>
<p>
Most of Mozilla profile files are in the same formats on all platforms,
so it is possible to transport a profile across two different operating 
systems. To move a profile to a different machine:
</p>

<ol>
<li>
First, follow the instructions in <a href="#backup">7.6
&#8220;How do I back up my profile data?&#8221;</a>
to make a copy of your profile data.</li>

<li>Copy your profile files to the target machine. The profile location 
must be complete (BASE, NAME, and SALT). If possible, keep the profile 
locations the same between the old machine and target machine. If they 
are different, you will need to edit the profile configuration file 
manually.</li>

<li>In the target machine, open the Profile Manager.</li>

<li>Choose Create Profile, and then choose Next.</li>

<li>Enter a profile name.</li>

<li>Choose the Choose Folder button and navigate to the target profile 
location (BASE+NAME, excluding SALT).</li>

<li>Choose Finish.</li>
</ol>

<p>
Hint to system administrators: if you want to copy the same profile as 
the default to many systems with CLEAN Mozilla installations, you can 
skip all these steps simply by copying all contents of the profile 
directory, including <tt>Registry.dat</tt>.
</p>

<p>
The opening screen of the Profile Manager reappears, with the new 
profile listed and highlighted. If the profile locations 
(BASE+NAME+SALT) are exactly the same between the old and target 
machines, you can start up your browser with the new profile by choosing 
Start Mozilla. If not, you will need to edit the profile configuration file:
</p>

<p><strong><a name="copypref">Editing configuration file</a></strong></p>

<ol>
<li>Exit the Profile Manager.</li>

<li>
<p>In your profile directory, locate the <tt>prefs.js</tt> file and open it 
with a text editor such as Notepad or SimpleText. The configuration file 
is a list of entries like:</p>

<pre class="screen">
user_pref("&lt;setting&gt;", &lt;value&gt;);
</pre>
</li>

<li><p>Locate the entries for
   <tt>browser.cache.disk.parent_directory</tt>, 
   <tt>mail.directory</tt>,
   <tt>mail.root.imap</tt>,
   <tt>mail.root.nntp</tt>,
   <tt>mail.root.none</tt>, 
   <tt>mail.root.pop3</tt>,
   <tt>mail.newsrc_root</tt>, and
   <tt>news.directory</tt>

   (you may not have all of them). Delete these lines.</p></li>

<li><p>Save the file and open Mozilla with the new profile.</p></li>

<li><p>Open Messenger (you will find that none of
your backup messages are imported yet.) In Messenger, open
the Edit menu and choose
&#8220;Mail &amp; Newsgroups Account Settings...&#8221;</p></li>

<li><p>In the Accounts pane on the left, navigate to the Local Folders 
account. On the right pane, change Local Directory to reflect the new 
profile directory.</p></li>

<li><p>In the Accounts pane, navigate to each mail account. Navigate to 
Server Settings and change Local Directory to reflect the new profile
directory.</p></li>

<li><p>If you have newsgroup subscription(s), navigate to
&#8220;Server Settings&#8221; 
for each news account. Change &#8220;newsrc file&#8221; and
&#8220;Local Directory&#8221; to reflect the new profile
directory.</p></li>

<li><p>Choose OK.</p></li>

<li><p>Exit Mozilla and then restart it. All messages should now be
imported.</p></li>

</ol>

</dd>

<dt>
<a onclick="return false;" name="netscape" href="#netscape">
7.10. Can I share a profile with my copy of Netscape 7, or with an earlier version of Mozilla?</a></dt>
<dd>
<p><em>Do not share a profile with Netscape 6 or 7</em>.
Sharing profiles between different versions of Mozilla can lead
to profile corruption</p>

<p>
Note even if you uninstall a previous copy of Mozilla or
Netscape, the old profile will still be there until you remove its
folder. Be sure to create a fresh profile when you install a new
version of Mozilla.
</p>

</dd>
<dt>
<a onclick="return false;" name="roaming" href="#roaming">
7.11. Does Mozilla support roaming profiles?</a></dt>
<dd>
<p>Mozilla does not yet support roaming profiles. A roaming
profiles function is under development.</p>
</dd>

<dt>
<a onclick="return false;" name="protect" href="#protect">
7.12. How do I protect data of my profile?
</a></dt>
<dd>
<p>
Currently Mozilla does not encrypt profile data, so you should use your
system&#8217;s own security facilities to restrict access to your
computer account.

</p>
</dd>

<dt>
<a onclick="return false;" name="cmd-line" href="#cmd-line">
7.13. How do I force Mozilla to open with a specific profile?
</a></dt>
<dd>
<p>
On Windows, Linux, and Unix systems, you can open open Mozilla with a
specific profile using the following command line:
</p>

<pre class="screen">
mozilla.exe -p &lt;profile_name&gt;
</pre>

<p>
where <tt>&lt;profile_name&gt;</tt> is the name of the profile as appeared in the 
Profile Manager.
</p>

<p>
To open Mozilla in Quick Launch mode with a specific profile, the 
command line is:
</p>

<pre class="screen">mozilla.exe -turbo -p &lt;profile_name&gt;</pre>

</dd>

</dl>


   <div id="feedback">
   <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=214845">Feedback</a><br>
   <a href="http://doctor.mozilla.org/?file=mozilla-org//html/start/1.4/faq/profile.html">Edit this page</a>
   </div>   

   </div>
   <div id="footer">

    <img src="../images/dino_tail.png" id="dinoTail" alt="">
   </div>
  </div>
  <div class="doubleSpacer"></div>
 </body>
</html>
